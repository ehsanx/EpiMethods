{
  "hash": "44a5812539d59982c28b210bb4ee25b2",
  "result": {
    "markdown": "## Importing NHIS to R {.unnumbered}\n\nThis tutorial provides instructions on accessing the National Health Interview Survey (NHIS) dataset from the US Centers for Disease Control and Prevention (CDC) website and importing it into the RStudio environment.\n\n### Overview\n\nLike NHANES, NHIS is supported by the CDC and is a large-scale multi-stage cross-sectional survey. The NHIS survey includes information on population disease prevalence, extent of disability, and use of health care services. In contrast to the NHANES that provides data every 2 years, NHIS provides data annually.\n\n::: column-margin\nTo obtain population-level estimate, we must utilize the survey features (weights, strata, PSU/cluster)\n:::\n\n### NHIS datafile and documents\n\nThe NHIS files are stored in the NHIS website in different formats. You can import this data in any statistical package that supports these file formats, e.g., ASCII, CSV, SAS.\n\n::: column-margin\n[NHIS Data, Questionnaires and Related Documentation](https://www.cdc.gov/nchs/nhis/data-questionnaires-documentation.htm)\n:::\n\n::: column-margin\nIn the recent NHIS (2019 or later), data are available in 5 categories:\n\n-   Interview data for adults\n-   Interview data for children\n-   Imputed income for adults\n-   Imputed income for children\n-   Paradata\n:::\n\n::: column-margin\nIn the earlier NHIS (before 2019), data are available in 8 categories:\n\n-   Family file\n-   Household file\n-   Person file\n-   Child file\n-   Adult file\n-   Imputed income\n-   Functioning and disability\n-   Paradata\n:::\n\n#### Combining data\n\n##### Different cycles\n\nIt is possible to combine datasets from different years/cycles together in NHIS. Similar to NHANES, identification of the same person in NHIS across different cycles is not possible in the public release datasets. For appending data from different cycles, please make sure that the variable names/labels are the same/identical in years under consideration (in some years, names and labels do change).\n\n##### Within the same cycle\n\nWithin NHIS datasets in a given cycle, each sampled person has a household number (`HHX`), family number (`FMX`), and a person number within family (`FPX`). We can create a unique identifier based on these three variables and merge the datasets.\n\n### Accessing NHIS Data\n\n::: column-margin\nNHIS survey datasets are publicly available at <https://www.cdc.gov/nchs/nhis/>\n:::\n\nUnlike NHANES where a R package is available to download the dataset, NHIS datasets need to be downloaded directly from the CDC website. In the following example, we will see how to download 'Adult' data from [2021 NHIS](https://www.cdc.gov/nchs/nhis/2021nhis.htm), and check associated variable in that dataset.\n\n\n::: {.cell hash='accessing5_cache/html/cdc1_47c782f09895130a412261d54cc5e97f'}\n::: {.cell-output-display}\n![](Images/accessing/nhis1.png){width=100%}\n:::\n:::\n\n\n-   **Step 1**: Say, for example, we are interested to download the adult dataset in the CSV format:\n\n\n::: {.cell hash='accessing5_cache/html/cdc2_764147c655fd06be22abca3b713fbd9b'}\n::: {.cell-output-display}\n![](Images/accessing/nhis2.png){width=65%}\n:::\n:::\n\n\n-   **Step 2**: We can download the data in the local PC folder, unzip it, and then read the data into R as as follows:\n\n\n::: {.cell hash='accessing5_cache/html/load_d2e85cc910f2ffa10488533069b1ff3e'}\n\n```{.r .cell-code}\nadult21 <- read.csv(\"Data/accessing/adult21.csv\", header = T)\n```\n:::\n\n::: {.cell hash='accessing5_cache/html/loadMirror_0a01f16beee8a5d0b3ffe56be614392a'}\n\n:::\n\n\n-   **Step 3**: Once data is imported in RStudio, we will see the `adult21` object listed under data window (see below):\n\n\n::: {.cell hash='accessing5_cache/html/cdc4_3c19cbd32fb7d687cd51c98baf48c3a9'}\n::: {.cell-output-display}\n![](Images/accessing/nhis3.png){width=65%}\n:::\n:::\n\n\n-   **Step 4**: We can check the variable names in this `adult21` dataset using the `names` function.\n\n\n::: {.cell hash='accessing5_cache/html/cdc5_a0ada100a9bb463b938093da28fde737'}\n\n```{.r .cell-code}\nnames(adult21)\n```\n:::\n\n\n-   **Step 5**: We can check how many unique adults are in this `adult21` dataset. Note that the `HHX` variable in the dataset is the unique household identifier, where only one adult per household was selected for interview. We can use this `HHX` variable to merge adult datafile with other datafiles (e.g., child data).\n\n\n::: {.cell hash='accessing5_cache/html/uniquehh_e714c8949ca72ffec28be6288555526f'}\n\n```{.r .cell-code}\nlength(unique(adult21$HHX))\n#> [1] 29482\n```\n:::\n\n\n-   **Step 6**: We can open the data in RStudio in the dataview window (by clicking the `adult21` data from the data window). The next Figure shows only a few columns and rows from this large dataset. Note that there are some values marked as \"NA\", which represents missing values.\n\n\n::: {.cell hash='accessing5_cache/html/cdc6_6ca3610307043e6c135635056e22b4ad'}\n::: {.cell-output-display}\n![](Images/accessing/nhis4.png){width=99%}\n:::\n:::\n\n\n-   **Step 7**: To understand what the column names mean in this Figure, we need to take a look at the codebook, which is also available on the CDC website:\n\n\n::: {.cell hash='accessing5_cache/html/cdc7_b80916ccdecd09c956be907229a8c3f0'}\n::: {.cell-output-display}\n![](Images/accessing/nhis5.png){width=65%}\n:::\n:::\n\n\n-   **Step 8**: We can see a check for the column or variables, e.g., `REGION`, in the codebook:\n\n\n::: {.cell hash='accessing5_cache/html/cdc8_8f97509ff02ee8e1ed62a1e107531a46'}\n::: {.cell-output-display}\n![](Images/accessing/nhis6.png){width=100%}\n:::\n:::\n\n\n-   **Step 9**: We can assess if the numbers reported under count matches with what we get from the `adult21` data we just imported (particularly, for the `REGION` variable):\n\n\n::: {.cell hash='accessing5_cache/html/cdc9_60923f69e4e77dd6eb9aced9b1e60fac'}\n\n```{.r .cell-code}\n# Frequency table\ntable(adult21$REGION, useNA = \"always\") \n#> \n#>     1     2     3     4  <NA> \n#>  4775  6327 10731  7649     0\n```\n:::\n\n\nSimilarly, we can download the child data and open it in R:\n\n\n::: {.cell hash='accessing5_cache/html/loadchild_005844996cd327f91562d35a897f3ff6'}\n\n```{.r .cell-code}\nchild21 <- read.csv(\"Data/accessing/child21.csv\", header = T)\n```\n:::\n\n::: {.cell hash='accessing5_cache/html/loadchildMirror_5bb2958f2036b6aa097b9908cc79bf10'}\n\n:::\n\n::: {.cell hash='accessing5_cache/html/nhisc1_4f143039b8f3176dcad5ffe2bbb25b58'}\n::: {.cell-output-display}\n![](Images/accessing/nhis_child1.png){width=65%}\n:::\n:::\n\n\nLet's check how many unique children are in this `child21` dataset:\n\n\n::: {.cell hash='accessing5_cache/html/uniquehhc_069b2066b7673dc447f53ae917f2cb52'}\n\n```{.r .cell-code}\nlength(unique(child21$HHX))\n#> [1] 8261\n```\n:::\n\n\nNow let's check for the column or variables, e.g., `SEX_C`, in the codebook:\n\n\n::: {.cell hash='accessing5_cache/html/nhisc2_d81d43263b2ab3724b1cd048072a74c3'}\n::: {.cell-output-display}\n![](Images/accessing/nhis_child2.png){width=100%}\n:::\n:::\n\n\nWe can assess if the numbers reported under count matches with what we get from the `child21` data we just imported:\n\n\n::: {.cell hash='accessing5_cache/html/nhisc3_95c525b2ac862bdc376d6ec4ffbf4cdc'}\n\n```{.r .cell-code}\n# Frequency table\ntable(child21$SEX_C, useNA = \"always\") \n#> \n#>    1    2    7 <NA> \n#> 4257 4002    2    0\n```\n:::\n\n\n### Merging within the same cycle\n\n::: callout-note\nWe can use `HHX` variable to merge different datafiles within the same survey cycle.\n:::\n\nAs mentioned earlier, `HHX` variable in the dataset is the unique household identifier. We can use this `HHX` variable to merge different datafiles within the same survey cycle. Say, we are interested in merging child age (AGEP_C) and sex (SEX_C) variables with the adult datafile. We can use the `merge` function as follows:\n\n\n::: {.cell hash='accessing5_cache/html/nhisc4_a415d8da8bd2b439a8df907b21b98aff'}\n\n```{.r .cell-code}\ndat <- merge(adult21, child21[,c(\"HHX\", \"AGEP_C\", \"SEX_C\")], by = \"HHX\", all = T)\n```\n:::\n\n::: {.cell hash='accessing5_cache/html/nhisc5_57ed64e1f38e04df6f827f66ccba47a1'}\n::: {.cell-output-display}\n![](Images/accessing/nhis_child3.png){width=65%}\n:::\n:::\n\n\nAs we can see, there are data from 30,673 unique households, suggesting that not all children are sampled from the same household of sampled adults.\n\n\n::: {.cell hash='accessing5_cache/html/uniquehhn_d1725a4a40077bec9d5d3db3e396a9ac'}\n\n```{.r .cell-code}\nlength(unique(dat$HHX))\n#> [1] 30673\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}