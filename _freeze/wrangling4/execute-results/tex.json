{
  "hash": "9f2517b5b1f9d14425f35e4da9ea3de2",
  "result": {
    "markdown": "## Import external data {.unnumbered}\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/setup_37bfe4a1695ede49f45b05b3cb36e7cf'}\n\n```{.r .cell-code}\n# Load required packages\nlibrary(dplyr)\nrequire(Hmisc)\n```\n:::\n\n\n\nWhen dealing with data analysis in R, it's common to need to import external data. This tutorial will walk you through importing data in different formats.\n\n### CSV format data\n\nCSV stands for \"Comma-Separated Values\" and it's a widely used format for data. We'll be looking at the \"Employee Salaries - 2017\" dataset, which contains salary information for permanent employees of Montgomery County in 2017.\n\n::: column-margin\n[Employee Salaries - 2017 data](https://data.amerigeoss.org/it/dataset/employee-salaries-2017/resource/c6abf511-62fb-457d-b90b-e0d11a5e4ab8)\n:::\n\n::: callout-tip\nWe'll be loading the `Employee_Salaries_-_2017.csv` dataset into R from its saved location at `Data/wrangling/`. Do note, the directory path might vary for you based on where you've stored the downloaded data.\n:::\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/load_6622f503df1dbd3e2fd710f1c11b128c'}\n\n```{.r .cell-code}\ndata.download <- read.csv(\"Data/wrangling/Employee_Salaries_-_2017.csv\")\n```\n:::\n\n\n\nHere, the `read.csv` function reads the data from the CSV file and stores it in a variable called `data.download`.\n\nTo understand the structure of our dataset, We can see the number of rows and columns and the names of the columns/variables as follows:\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/load1_3329e28e2fe327661eb20e997b307661'}\n\n```{.r .cell-code}\ndim(data.download) # check dimension / row / column numbers\n#> [1] 9398   12\nnrow(data.download) # check row numbers\n#> [1] 9398\nnames(data.download) # check column names\n#>  [1] \"Full.Name\"                \"Gender\"                  \n#>  [3] \"Current.Annual.Salary\"    \"X2017.Gross.Pay.Received\"\n#>  [5] \"X2017.Overtime.Pay\"       \"Department\"              \n#>  [7] \"Department.Name\"          \"Division\"                \n#>  [9] \"Assignment.Category\"      \"Employee.Position.Title\" \n#> [11] \"Position.Under.Filled\"    \"Date.First.Hired\"\n```\n:::\n\n\n\n::: callout-tip\n`head` shows the first 6 elements of an object, giving you a sneak peek into the data you're dealing with, while `tail` shows the last 6 elements.\n:::\n\nWe can see the first see six rows of the dataset as follows:\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/load2_1646def564f526fd2d5a25288b83711c'}\n\n```{.r .cell-code}\nhead(data.download)\n#>            Full.Name Gender Current.Annual.Salary X2017.Gross.Pay.Received\n#> 1     Aarhus, Pam J.      F              70959.79                 71316.72\n#> 2   Aaron, Marsha M.      F             110359.00                108040.82\n#> 3 Ababio, Godfred A.      M              55950.24                 62575.19\n#> 4     Ababu, Essayas      M              95740.00                 96055.94\n#> 5 Abbamonte, Drew B.      M              74732.00                 98736.78\n#> 6 Abbasian, Takin M.      M              16451.50                  4547.10\n#>   X2017.Overtime.Pay Department                             Department.Name\n#> 1               0.00        POL                        Department of Police\n#> 2               0.00        HHS     Department of Health and Human Services\n#> 3            7649.19        COR               Correction and Rehabilitation\n#> 4               0.00        HCA Department of Housing and Community Affairs\n#> 5           23468.73        POL                        Department of Police\n#> 6              94.92        POL                        Department of Police\n#>                                                            Division\n#> 1 MSB Information Mgmt and Tech Division Records Management Section\n#> 2                     Adult Protective and Case Management Services\n#> 3                                        PRRS Facility and Security\n#> 4                                       Affordable Housing Programs\n#> 5                          PSB 6th District Special Assignment Team\n#> 6                                            MSB Personnel Division\n#>   Assignment.Category     Employee.Position.Title Position.Under.Filled\n#> 1    Fulltime-Regular Office Services Coordinator                      \n#> 2    Fulltime-Regular   Supervisory Social Worker                      \n#> 3    Fulltime-Regular      Resident Supervisor II                      \n#> 4    Fulltime-Regular     Planning Specialist III                      \n#> 5    Fulltime-Regular          Police Officer III                      \n#> 6    Parttime-Regular                Police Cadet                      \n#>   Date.First.Hired\n#> 1       09/22/1986\n#> 2       11/19/1989\n#> 3       05/05/2014\n#> 4       03/05/2007\n#> 5       07/16/2007\n#> 6       09/05/2017\n```\n:::\n\n\n\nNext, for learning purposes, let's artificially assign all male genders in our dataset as missing:\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/load3_113d6ec5d3b69574d490c801546477aa'}\n\n```{.r .cell-code}\n# Assigning male gender as missing\ndata.download$Gender[data.download$Gender == \"M\"] <- NA\nhead(data.download)\n#>            Full.Name Gender Current.Annual.Salary X2017.Gross.Pay.Received\n#> 1     Aarhus, Pam J.      F              70959.79                 71316.72\n#> 2   Aaron, Marsha M.      F             110359.00                108040.82\n#> 3 Ababio, Godfred A.   <NA>              55950.24                 62575.19\n#> 4     Ababu, Essayas   <NA>              95740.00                 96055.94\n#> 5 Abbamonte, Drew B.   <NA>              74732.00                 98736.78\n#> 6 Abbasian, Takin M.   <NA>              16451.50                  4547.10\n#>   X2017.Overtime.Pay Department                             Department.Name\n#> 1               0.00        POL                        Department of Police\n#> 2               0.00        HHS     Department of Health and Human Services\n#> 3            7649.19        COR               Correction and Rehabilitation\n#> 4               0.00        HCA Department of Housing and Community Affairs\n#> 5           23468.73        POL                        Department of Police\n#> 6              94.92        POL                        Department of Police\n#>                                                            Division\n#> 1 MSB Information Mgmt and Tech Division Records Management Section\n#> 2                     Adult Protective and Case Management Services\n#> 3                                        PRRS Facility and Security\n#> 4                                       Affordable Housing Programs\n#> 5                          PSB 6th District Special Assignment Team\n#> 6                                            MSB Personnel Division\n#>   Assignment.Category     Employee.Position.Title Position.Under.Filled\n#> 1    Fulltime-Regular Office Services Coordinator                      \n#> 2    Fulltime-Regular   Supervisory Social Worker                      \n#> 3    Fulltime-Regular      Resident Supervisor II                      \n#> 4    Fulltime-Regular     Planning Specialist III                      \n#> 5    Fulltime-Regular          Police Officer III                      \n#> 6    Parttime-Regular                Police Cadet                      \n#>   Date.First.Hired\n#> 1       09/22/1986\n#> 2       11/19/1989\n#> 3       05/05/2014\n#> 4       03/05/2007\n#> 5       07/16/2007\n#> 6       09/05/2017\n```\n:::\n\n\n\nThis chunk sets the Gender column's value to NA (missing) wherever the gender is \"M\". This is a form of data manipulation, sometimes used to handle missing or incorrect data. If you want to work with datasets that exclude any missing values:\n\n::: callout-tip\n`na.omit` and `complete.cases` are useful functions to to create datasets with non-NA values\n:::\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/load4_8c2d892bd3939c43c2983e9681155de2'}\n\n```{.r .cell-code}\n# deleting/dropping missing components\ndata.download2 <- na.omit(data.download)\nhead(data.download2)\n#>                  Full.Name Gender Current.Annual.Salary\n#> 1           Aarhus, Pam J.      F              70959.79\n#> 2         Aaron, Marsha M.      F             110359.00\n#> 7        Abdalla, Eiman M.      F              63977.00\n#> 8   Abdelhamed, Shereen N.      F              53274.00\n#> 11 Abdul-Ghani, Hasinah J.      F              50576.93\n#> 14           Abebe, Emebet      F              22938.50\n#>    X2017.Gross.Pay.Received X2017.Overtime.Pay Department\n#> 1                  71316.72               0.00        POL\n#> 2                 108040.82               0.00        HHS\n#> 7                  62177.20             184.56        FIN\n#> 8                  50549.01            1872.92        POL\n#> 11                 51657.55             293.30        POL\n#> 14                 22001.04             135.76        HHS\n#>                            Department.Name\n#> 1                     Department of Police\n#> 2  Department of Health and Human Services\n#> 7                    Department of Finance\n#> 8                     Department of Police\n#> 11                    Department of Police\n#> 14 Department of Health and Human Services\n#>                                                             Division\n#> 1  MSB Information Mgmt and Tech Division Records Management Section\n#> 2                      Adult Protective and Case Management Services\n#> 7                                                 General Accounting\n#> 8                                            PSB 2nd District Patrol\n#> 11        FSB Traffic Division Automated Traffic Enforcement Section\n#> 14                                               Area Health Centers\n#>    Assignment.Category     Employee.Position.Title Position.Under.Filled\n#> 1     Fulltime-Regular Office Services Coordinator                      \n#> 2     Fulltime-Regular   Supervisory Social Worker                      \n#> 7     Fulltime-Regular      Accountant/Auditor III Accountant/Auditor II\n#> 8     Fulltime-Regular          Police Officer III      Police Officer I\n#> 11    Fulltime-Regular                 Police Aide                      \n#> 14    Parttime-Regular Community Services Aide III                      \n#>    Date.First.Hired\n#> 1        09/22/1986\n#> 2        11/19/1989\n#> 7        06/27/2016\n#> 8        01/09/2017\n#> 11       02/05/2007\n#> 14       05/01/2017\ndim(data.download2)\n#> [1] 3806   12\n```\n:::\n\n\n\nHere, na.omit is used to remove rows with any missing values. This can be essential when preparing data for certain analyses.\n\nAlternatively, we could have selected only females to drop all males:\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/load5_7562147beab7ba5fca9170f56b61becc'}\n\n```{.r .cell-code}\ndata.download3 <- filter(data.download, Gender != \"M\")\nhead(data.download3)\n#>                 Full.Name Gender Current.Annual.Salary X2017.Gross.Pay.Received\n#> 1          Aarhus, Pam J.      F              70959.79                 71316.72\n#> 2        Aaron, Marsha M.      F             110359.00                108040.82\n#> 3       Abdalla, Eiman M.      F              63977.00                 62177.20\n#> 4  Abdelhamed, Shereen N.      F              53274.00                 50549.01\n#> 5 Abdul-Ghani, Hasinah J.      F              50576.93                 51657.55\n#> 6           Abebe, Emebet      F              22938.50                 22001.04\n#>   X2017.Overtime.Pay Department                         Department.Name\n#> 1               0.00        POL                    Department of Police\n#> 2               0.00        HHS Department of Health and Human Services\n#> 3             184.56        FIN                   Department of Finance\n#> 4            1872.92        POL                    Department of Police\n#> 5             293.30        POL                    Department of Police\n#> 6             135.76        HHS Department of Health and Human Services\n#>                                                            Division\n#> 1 MSB Information Mgmt and Tech Division Records Management Section\n#> 2                     Adult Protective and Case Management Services\n#> 3                                                General Accounting\n#> 4                                           PSB 2nd District Patrol\n#> 5        FSB Traffic Division Automated Traffic Enforcement Section\n#> 6                                               Area Health Centers\n#>   Assignment.Category     Employee.Position.Title Position.Under.Filled\n#> 1    Fulltime-Regular Office Services Coordinator                      \n#> 2    Fulltime-Regular   Supervisory Social Worker                      \n#> 3    Fulltime-Regular      Accountant/Auditor III Accountant/Auditor II\n#> 4    Fulltime-Regular          Police Officer III      Police Officer I\n#> 5    Fulltime-Regular                 Police Aide                      \n#> 6    Parttime-Regular Community Services Aide III                      \n#>   Date.First.Hired\n#> 1       09/22/1986\n#> 2       11/19/1989\n#> 3       06/27/2016\n#> 4       01/09/2017\n#> 5       02/05/2007\n#> 6       05/01/2017\n```\n:::\n\n\n\nAnd to check the size of this new dataset:\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/load6_6d8e731f71a69f8731aa21f1b465aee6'}\n\n```{.r .cell-code}\n# new dimension / row / column numbers\ndim(data.download3)\n#> [1] 3806   12\n```\n:::\n\n\n\n### SAS format data\n\n::: callout-tip\nSAS is another data format, commonly used in professional statistics and analytics.\n:::\n\nLet's explore importing a SAS dataset. We download a SAS formatted dataset from the CDC website.\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/sas_dd45c38eed4940afa6ed73f9e83298fd'}\n\n```{.r .cell-code}\n# Link\nx <- \"https://wwwn.cdc.gov/Nchs/Nhanes/2015-2016/DEMO_I.XPT\"\n\n# Data\nNHANES1516data <- sasxport.get(x)\n#> Processing SAS dataset DEMO_I \t ..\n\n# Check dimension / row / column numbers\ndim(NHANES1516data) \n#> [1] 9971   47\n\n# Check row numbers\nnrow(NHANES1516data) \n#> [1] 9971\n\n# Check first 10 names\nnames(NHANES1516data)[1:10] \n#>  [1] \"seqn\"     \"sddsrvyr\" \"ridstatr\" \"riagendr\" \"ridageyr\" \"ridagemn\"\n#>  [7] \"ridreth1\" \"ridreth3\" \"ridexmon\" \"ridexagm\"\n```\n:::\n\n\n\nThe `sasxport.get` function retrieves the SAS dataset. The following lines, just like before, help understand its structure.\n\nTo analyze some of the data:\n\n\n\n::: {.cell hash='wrangling4_cache/pdf/sas2_fdaf5a550fc06a9abb9740ad6c318bae'}\n\n```{.r .cell-code}\ntable(NHANES1516data$riagendr) # tabulating gender variable\n#> \n#>    1    2 \n#> 4892 5079\n```\n:::\n\n\n\n::: column-margin\nVerify these numbers from [CDC website](https://wwwn.cdc.gov/Nchs/Nhanes/2015-2016/DEMO_I.htm#RIAGENDR)\n:::\n\nThis code creates a frequency table of the `riagendr` variable, which represents gender.\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}