{
  "hash": "d861cb035caa3419016b878d9f55b8de",
  "result": {
    "markdown": "## Change-in-estimate {.unnumbered}\n\nUse of Change-in-estimate for various measures of effects (RD and OR, and impact of collapsibility vs non-collapsibility in absence of confounding).\n\n\n::: {.cell hash='confounding6_cache/html/setup_240fe73dcccefd2f2544e0058a5ec67f'}\n\n```{.r .cell-code}\n# Load required packages\nlibrary(simcausal)\n```\n:::\n\n\n## Adjusting for a variable that is a confounder\n\n### Continuous Outcome\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='confounding6_cache/html/dgm20_bb661d0c164a70f687719bbb1a98e02a'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n  node(\"L\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"A\", distr = \"rnorm\", mean = 0 + L, sd = 1) + \n  node(\"P\", distr = \"rbern\", prob = plogis(-10)) + \n  node(\"Y\", distr = \"rnorm\", mean = 1.1 * L + 1.3 * A, sd = .1)\nDset <- set.DAG(D)\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='confounding6_cache/html/dag20_6b6184fb5c0c0b65336db5e7181bf7a2'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n```\n\n::: {.cell-output-display}\n![](confounding6_files/figure-html/dag20-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(simcausal)\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"L\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"P\"],\"name\":[4],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"-1.5685464\",\"4\":\"0\",\"5\":\"-2.606463\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"1.1247619\",\"4\":\"0\",\"5\":\"1.091131\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"1.0897334\",\"4\":\"0\",\"5\":\"3.218627\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"1.5387020\",\"4\":\"0\",\"5\":\"2.068111\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"0.5718442\",\"4\":\"0\",\"5\":\"1.032429\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"1.8612681\",\"4\":\"0\",\"5\":\"4.201175\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (beta-coef)\n\n\n::: {.cell hash='confounding6_cache/html/est20_6645e3e942369cfc7f070cd669935c0f'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A, family=\"gaussian\", data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A \n#>        0.00        1.85\n\nfit2 <- glm(Y ~ A + L, family=\"gaussian\", data=Obs.Data)\nround(coef(fit2),2)\n#> (Intercept)           A           L \n#>         0.0         1.3         1.1\n```\n:::\n\n\nIncluding a variable that is a confounder (L) in the model changes effect estimate (1.3).\n\n### Binary Outcome\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='confounding6_cache/html/dgm21_93a964da6b0e85fd0f90133d2faefa3d'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n  node(\"L\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"A\", distr = \"rnorm\", mean = 0 + L, sd = 1) + \n  node(\"P\", distr = \"rbern\", prob = plogis(-10)) + \n  # node(\"M\", distr = \"rnorm\", mean = P + 0.5 * A, sd = 1) + \n  node(\"Y\", distr = \"rbern\", prob = plogis( 1.1 * L + 1.3 * A)) \nDset <- set.DAG(D)\n#> ...automatically assigning order attribute to some nodes...\n#> node L, order:1\n#> node A, order:2\n#> node P, order:3\n#> node Y, order:4\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='confounding6_cache/html/dag21_cd80aa6f3ff895d6e1c0db60126c0c27'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n#> using the following vertex attributes:\n#> 120.8NAdarkbluenone0\n#> using the following edge attributes:\n#> 0.50.40.7black1\n```\n\n::: {.cell-output-display}\n![](confounding6_files/figure-html/dag21-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(simcausal)\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"L\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"P\"],\"name\":[4],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[5],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"-1.5685464\",\"4\":\"0\",\"5\":\"0\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"1.1247619\",\"4\":\"0\",\"5\":\"1\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"1.0897334\",\"4\":\"0\",\"5\":\"1\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"1.5387020\",\"4\":\"0\",\"5\":\"1\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"0.5718442\",\"4\":\"0\",\"5\":\"0\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"1.8612681\",\"4\":\"0\",\"5\":\"1\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (OR)\n\n\n::: {.cell hash='confounding6_cache/html/est21_4b2631d071c21643326527d277c5f7d3'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A \n#>        0.00        1.68\n\nfit2 <- glm(Y ~ A + L, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit2),2)\n#> (Intercept)           A           L \n#>         0.0         1.3         1.1\n```\n:::\n\n\nIncluding a variable that is a confounder (L) in the model changes effect estimate (1.3).\n\n## Adjusting for a variable that is not a confounder (simplified)\n\n### Continuous Outcome\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='confounding6_cache/html/dgm22_a1bf4ee1e11dd3048f3593288ea8cf7b'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n    node(\"A\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"P\", distr = \"rbern\", prob = plogis(-10)) + \n  # node(\"M\", distr = \"rnorm\", mean = P + 0.5 * A, sd = 1) + \n  node(\"R\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"Y\", distr = \"rnorm\", mean = 1.1 * R + 1.3 * A, sd = .1)\nDset <- set.DAG(D)\n#> ...automatically assigning order attribute to some nodes...\n#> node A, order:1\n#> node P, order:2\n#> node R, order:3\n#> node Y, order:4\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='confounding6_cache/html/dag22_5a61d6ef8fb5bdbbb11091417f6e4b93'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n#> using the following vertex attributes:\n#> 120.8NAdarkbluenone0\n#> using the following edge attributes:\n#> 0.50.40.7black1\n```\n\n::: {.cell-output-display}\n![](confounding6_files/figure-html/dag22-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(simcausal)\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"P\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"R\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"0\",\"4\":\"1.4533508\",\"5\":\"0.9192381\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"0\",\"4\":\"-1.4479411\",\"5\":\"-2.0098302\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"0\",\"4\":\"0.4182387\",\"5\":\"2.5737773\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"0\",\"4\":\"-0.9194114\",\"5\":\"-0.9294528\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"0\",\"4\":\"0.7360159\",\"5\":\"1.1245064\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"0\",\"4\":\"-0.8354281\",\"5\":\"1.2055689\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (beta-coef)\n\n\n::: {.cell hash='confounding6_cache/html/est22_d526e8a554c2c4a69f47cdccead24ba6'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A, family=\"gaussian\", data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A \n#>         0.0         1.3\n\nfit2 <- glm(Y ~ A + R, family=\"gaussian\", data=Obs.Data)\nround(coef(fit2),2)\n#> (Intercept)           A           R \n#>         0.0         1.3         1.1\n```\n:::\n\n\nIncluding a variable that is not a confounder (R is a pure risk factor for the outcome Y) in the model does not change effect estimate (1.3).\n\n### Binary Outcome\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='confounding6_cache/html/dgm23_a9b19f0067dccf10919e024194af5f49'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n  node(\"A\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"P\", distr = \"rbern\", prob = plogis(-10)) + \n  # node(\"M\", distr = \"rnorm\", mean = P + 0.5 * A, sd = 1) + \n  node(\"R\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"Y\", distr = \"rbern\", prob = plogis(1.1 * R + 1.3 * A)) \nDset <- set.DAG(D)\n#> ...automatically assigning order attribute to some nodes...\n#> node A, order:1\n#> node P, order:2\n#> node R, order:3\n#> node Y, order:4\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='confounding6_cache/html/dag23_c76755f9886777627f1d40438cc48fe5'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n#> using the following vertex attributes:\n#> 120.8NAdarkbluenone0\n#> using the following edge attributes:\n#> 0.50.40.7black1\n```\n\n::: {.cell-output-display}\n![](confounding6_files/figure-html/dag23-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(simcausal)\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"P\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"R\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[5],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"0\",\"4\":\"1.4533508\",\"5\":\"1\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"0\",\"4\":\"-1.4479411\",\"5\":\"0\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"0\",\"4\":\"0.4182387\",\"5\":\"1\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"0\",\"4\":\"-0.9194114\",\"5\":\"1\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"0\",\"4\":\"0.7360159\",\"5\":\"0\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"0\",\"4\":\"-0.8354281\",\"5\":\"0\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (OR)\n\n\n::: {.cell hash='confounding6_cache/html/est23_d5b52b4769f8fc4d90f980558656f5ea'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A \n#>        0.00        1.06\n\nfit2 <- glm(Y ~ A + R, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit2),2)\n#> (Intercept)           A           R \n#>         0.0         1.3         1.1\n```\n:::\n\n\nIncluding a variable that is not a confounder (R is a pure risk factor for the outcome Y) in the model changes effect estimate (1.3).\n\n## Adjusting for a variable that is not a confounder (Complex)\n\n### Continuous Outcome\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='confounding6_cache/html/dgm24_e82b815e05466de192dc5bda590175f5'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n    node(\"A\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"P\", distr = \"rbern\", prob = plogis(-10)) + \n  node(\"M\", distr = \"rnorm\", mean = P + 0.5 * A, sd = 1) + \n  node(\"R\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"Y\", distr = \"rnorm\", mean = 0.5 * M + 1.1 * R + 1.3 * A, sd = .1)\nDset <- set.DAG(D)\n#> ...automatically assigning order attribute to some nodes...\n#> node A, order:1\n#> node P, order:2\n#> node M, order:3\n#> node R, order:4\n#> node Y, order:5\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='confounding6_cache/html/dag24_a66fed185eb7727720cb1e5d057a2c31'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n#> using the following vertex attributes:\n#> 120.8NAdarkbluenone0\n#> using the following edge attributes:\n#> 0.50.40.7black1\n```\n\n::: {.cell-output-display}\n![](confounding6_files/figure-html/dag24-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(simcausal)\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"P\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"M\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"R\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"0\",\"4\":\"1.17311294\",\"5\":\"0.49170637\",\"6\":\"0.4103007\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"0\",\"4\":\"-1.56302981\",\"5\":\"-1.17864299\",\"6\":\"-2.3797737\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"0\",\"4\":\"1.19759283\",\"5\":\"0.87393920\",\"6\":\"3.5823197\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"0\",\"4\":\"-0.88415718\",\"5\":\"-0.09761158\",\"6\":\"-0.5322484\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"0\",\"4\":\"0.80065978\",\"5\":\"1.46814830\",\"6\":\"2.2160066\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"0\",\"4\":\"0.02210438\",\"5\":\"-1.05044636\",\"6\":\"1.1270274\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (beta-coef)\n\n\n::: {.cell hash='confounding6_cache/html/est24_9a4c509b751762d981fbaf8d448288c3'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A + M, family=\"gaussian\", data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A           M \n#>         0.0         1.3         0.5\n\nfit2 <- glm(Y ~ A + M + R, family=\"gaussian\", data=Obs.Data)\nround(coef(fit2),2)\n#> (Intercept)           A           M           R \n#>         0.0         1.3         0.5         1.1\n```\n:::\n\n\nIncluding a variable that is not a confounder (R is a pure risk factor for the outcome Y) in the model does not change effect estimate (1.3).\n\n### Binary Outcome\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='confounding6_cache/html/dgm25_cd85cb04835c801cd55167738fa1cc9e'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n  node(\"A\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"P\", distr = \"rbern\", prob = plogis(-10)) + \n  node(\"M\", distr = \"rnorm\", mean = P + 0.5 * A, sd = 1) + \n  node(\"R\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"Y\", distr = \"rbern\", prob = plogis(0.5 * M + 1.1 * R + 1.3 * A)) \nDset <- set.DAG(D)\n#> ...automatically assigning order attribute to some nodes...\n#> node A, order:1\n#> node P, order:2\n#> node M, order:3\n#> node R, order:4\n#> node Y, order:5\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='confounding6_cache/html/dag25_219b704849c09a9261d000b9fa1bbe09'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n#> using the following vertex attributes:\n#> 120.8NAdarkbluenone0\n#> using the following edge attributes:\n#> 0.50.40.7black1\n```\n\n::: {.cell-output-display}\n![](confounding6_files/figure-html/dag25-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(simcausal)\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"P\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"M\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"R\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[6],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"0\",\"4\":\"1.17311294\",\"5\":\"0.49170637\",\"6\":\"1\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"0\",\"4\":\"-1.56302981\",\"5\":\"-1.17864299\",\"6\":\"1\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"0\",\"4\":\"1.19759283\",\"5\":\"0.87393920\",\"6\":\"1\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"0\",\"4\":\"-0.88415718\",\"5\":\"-0.09761158\",\"6\":\"1\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"0\",\"4\":\"0.80065978\",\"5\":\"1.46814830\",\"6\":\"1\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"0\",\"4\":\"0.02210438\",\"5\":\"-1.05044636\",\"6\":\"1\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (OR)\n\n\n::: {.cell hash='confounding6_cache/html/est25_ae04ca95d5ad12b31c67f01b5a7d00af'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A + M, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A           M \n#>        0.00        1.06        0.41\n\nfit2 <- glm(Y ~ A + M + R, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit2),2)\n#> (Intercept)           A           M           R \n#>        0.00        1.29        0.50        1.10\n```\n:::\n\n\nIncluding a variable that is not a confounder (R is a pure risk factor for the outcome Y) in the model changes effect estimate (1.3).\n\n### Video content (optional)\n\n::: callout-tip\nFor those who prefer a video walkthrough, feel free to watch the video below, which offers a description of an earlier version of the above content.\n:::\n\n::: {style=\"position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\"}\n<iframe src=\"https://www.youtube.com/embed/AzQ1g5HgCrs\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;\" allowfullscreen>\n\n</iframe>\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}