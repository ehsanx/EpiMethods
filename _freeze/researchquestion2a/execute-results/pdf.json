{
  "hash": "cbe6e8f36af65b5f3ead96ade0ad3d7d",
  "result": {
    "markdown": "## Predictive question-2a {.unnumbered}\n\n### Working with a Predictive question using NHANES\n\n**Part 1: Identify, download and merge necessary data**:\n\nThe tutorial focuses on building a predictive model for Diastolic blood pressure in the U.S. population for the years 2013-14. It provides a step-by-step guide on how to use R for data manipulation and analysis, covering the initial setup of the R environment, identification of relevant covariates like age, sex, and lifestyle factors, and methods to search and import these variables from the NHANES dataset. Following data importation, subsets of relevant variables are merged into a single analytic dataset, which is then saved for future research. The tutorial also includes an exercise.\n\n\n\n\n\n\n\n### Example article\n\nLet us use the article by @li2020association as our reference. [DOI:10.1038/s41371-019-0224-9](https://www.nature.com/articles/s41371-019-0224-9.pdf).\n\n::: column-margin\n[@li2020association]\n:::\n\n### Video content (optional)\n\n::: callout-tip\nFor those who prefer a video walkthrough, feel free to watch the video below, which offers a description of an earlier version of the content.\n:::\n\n::: {style=\"position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\"}\n<iframe src=\"https://www.youtube.com/embed/II5BxyzyLQw\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;\" allowfullscreen>\n\n</iframe>\n:::\n\n### Research question\n\nBuilding a predictive model for `Diastolic blood pressure` from 2013-14 NHANES data. Here we are only interested about explaining the outcome (`Diastolic blood pressure`).\n\n| PICOT element | Description              |\n|---------------|--------------------------|\n| P             | US                       |\n| I             | \\-                       |\n| C             | \\-                       |\n| O             | Diastolic blood pressure |\n| T             | 2013-14                  |\n| \\-            | \\-                       |\n\nCovariates under consideration (that are known to influence this outcome) based on the literature (e.g., try [this paper](https://www.nature.com/articles/s41371-019-0224-9.pdf); see Table 1):\n\n-   sex\n-   age\n-   race\n-   marital status\n-   Systolic blood pressure\n-   smoking\n-   alcohol\n\nWe will also extract additional survey features: - weights, - strata, - cluster\n\nBut how do we know where to search these variables?\n\n### Searching for useful variables and datasets\n\nR can do some preliminary searches:\n\n#### Find suffix for the year\n\nFirst, we need to identify the correct suffix for the data year.\n\n`nhanesTables` function enables quick display of all available tables in survey groups:\n\n-   DEMOGRAPHICS: `DEMO`\n-   DIETARY: `DIET`\n-   EXAMINATION: `EXAM`\n-   LABORATORY: `LAB`\n-   QUESTIONNAIRE: `Q`\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-1_ff9aa873e68012877b5b19b855c52f25'}\n\n```{.r .cell-code}\n# ?nhanesTables\nnhanesTables(data_group='DEMO', year=2013)\n#>   Data.File.Name                    Data.File.Description\n#> 1         DEMO_H Demographic Variables and Sample Weights\n# nicer tables\nkable(nhanesTables(data_group='DEMO', year=2013))\n```\n\n::: {.cell-output-display}\n|Data.File.Name |Data.File.Description                    |\n|:--------------|:----------------------------------------|\n|DEMO_H         |Demographic Variables and Sample Weights |\n:::\n:::\n\n\n\n`H` is assigned for 2013-2014.\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-2_79fab03dce2a97c1f8b25a738c7be142'}\n\n```{.r .cell-code}\nkable(nhanesTables(data_group='EXAM', year=2013))\n```\n\n::: {.cell-output-display}\n|Data.File.Name |Data.File.Description                                             |\n|:--------------|:-----------------------------------------------------------------|\n|BPX_H          |Blood Pressure                                                    |\n|DXXSPN_H       |Dual-Energy X-ray Absorptiometry - Spine                          |\n|DXXFEM_H       |Dual-Energy X-ray Absorptiometry - Femur                          |\n|DXXVFA_H       |Dual-Energy X-ray Absorptiometry - Vertebral Fracture Assessment  |\n|BMX_H          |Body Measures                                                     |\n|DXXFRX_H       |Dual-Energy X-ray Absorptiometry - FRAX Score                     |\n|CSX_H          |Taste & Smell                                                     |\n|MGX_H          |Muscle Strength - Grip Test                                       |\n|OHXDEN_H       |Oral Health - Dentition                                           |\n|OHXPER_H       |Oral Health - Periodontal                                         |\n|OHXREF_H       |Oral Health - Recommendation of Care                              |\n|FLXCLN_H       |Fluorosis - Clinical                                              |\n|DXXAAC_H       |Dual-Energy X-ray Absorptiometry - Abdominal Aortic Calcification |\n|DXXT4_H        |Dual-Energy X-ray Absorptiometry - T4 Vertebrae Morphology        |\n|DXXT5_H        |Dual-Energy X-ray Absorptiometry - T5 Vertebrae Morphology        |\n|DXXT6_H        |Dual-Energy X-ray Absorptiometry - T6 Vertebrae Morphology        |\n|DXXT7_H        |Dual-Energy X-ray Absorptiometry - T7 Vertebrae Morphology        |\n|DXXT8_H        |Dual-Energy X-ray Absorptiometry - T8 Vertebrae Morphology        |\n|DXXT9_H        |Dual-Energy X-ray Absorptiometry - T9 Vertebrae Morphology        |\n|DXXT10_H       |Dual-Energy X-ray Absorptiometry - T10 Vertebrae Morphology       |\n|DXXT11_H       |Dual-Energy X-ray Absorptiometry - T11 Vertebrae Morphology       |\n|DXXT12_H       |Dual-Energy X-ray Absorptiometry - T12 Vertebrae Morphology       |\n|DXXL1_H        |Dual-Energy X-ray Absorptiometry - L1 Vertebrae Morphology        |\n|DXXL2_H        |Dual-Energy X-ray Absorptiometry - L2 Vertebrae Morphology        |\n|DXXL3_H        |Dual-Energy X-ray Absorptiometry - L3 Vertebrae Morphology        |\n|DXXL4_H        |Dual-Energy X-ray Absorptiometry - L4 Vertebrae Morphology        |\n|DXX_H          |Dual-Energy X-ray Absorptiometry - Whole Body                     |\n|PAXDAY_H       |Physical Activity Monitor - Day                                   |\n|PAXHD_H        |Physical Activity Monitor - Header                                |\n|PAXHR_H        |Physical Activity Monitor - Hour                                  |\n|PAXMIN_H       |Physical Activity Monitor - Minute                                |\n|DXXAG_H        |Dual-Energy X-ray Absorptiometry - Android/Gynoid Measurements    |\n:::\n:::\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-3_fe2daf67cbf2d3f4556707a1539a5d3c'}\n\n```{.r .cell-code}\n# Also try other datasets\n# nhanesTables(data_group='DIET', year=2013)\n```\n:::\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-4_9a9c3ee958b52c183cb1631a4b59ea37'}\n\n```{.r .cell-code}\n# nhanesTables(data_group='LAB', year=2013)\n```\n:::\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-5_49cc99204b4356daba1a267e5024227e'}\n\n```{.r .cell-code}\n# nhanesTables(data_group='Q', year=2013)\n# what happens when you change year to 2014 or 2015. \n# Try both and compare the outcome.\n```\n:::\n\n\n\n#### Look up variable names\n\nOnce we have the table names, we need to find out which variables in those tables are useful for us.\n\nNHANES [Variable Keyword Search](https://wwwn.cdc.gov/nchs/nhanes/search/default.aspx)\n\n`nhanesTableVars` enables quick display of table variables and their definitions:\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-6_b6ee1ad9b1a60044fa2c67c8b1741188'}\n\n```{.r .cell-code}\n# ?nhanesTableVars\nnhanesTableVars(data_group='DEMO', nh_table='DEMO_H', namesonly = TRUE)\n#>  [1] \"AIALANGA\" \"DMDBORN4\" \"DMDCITZN\" \"DMDEDUC2\" \"DMDEDUC3\" \"DMDFMSIZ\"\n#>  [7] \"DMDHHSIZ\" \"DMDHHSZA\" \"DMDHHSZB\" \"DMDHHSZE\" \"DMDHRAGE\" \"DMDHRBR4\"\n#> [13] \"DMDHREDU\" \"DMDHRGND\" \"DMDHRMAR\" \"DMDHSEDU\" \"DMDMARTL\" \"DMDYRSUS\"\n#> [19] \"DMQADFC\"  \"DMQMILIZ\" \"FIAINTRP\" \"FIALANG\"  \"FIAPROXY\" \"INDFMIN2\"\n#> [25] \"INDFMPIR\" \"INDHHIN2\" \"MIAINTRP\" \"MIALANG\"  \"MIAPROXY\" \"RIAGENDR\"\n#> [31] \"RIDAGEMN\" \"RIDAGEYR\" \"RIDEXAGM\" \"RIDEXMON\" \"RIDEXPRG\" \"RIDRETH1\"\n#> [37] \"RIDRETH3\" \"RIDSTATR\" \"SDDSRVYR\" \"SDMVPSU\"  \"SDMVSTRA\" \"SEQN\"    \n#> [43] \"SIAINTRP\" \"SIALANG\"  \"SIAPROXY\" \"WTINT2YR\" \"WTMEC2YR\"\nkable(nhanesTableVars(data_group='DEMO', nh_table='DEMO_H', namesonly = FALSE))\n```\n\n::: {.cell-output-display}\n|Variable.Name |Variable.Description                                                                                 |\n|:-------------|:----------------------------------------------------------------------------------------------------|\n|AIALANGA      |Language of the MEC ACASI Interview Instrument                                                       |\n|DMDBORN4      |In what country {were you/was SP} born?                                                              |\n|DMDCITZN      |{Are you/Is SP} a citizen of the United States? [Information about citizenship is being collected by |\n|DMDEDUC2      |What is the highest grade or level of school {you have/SP has} completed or the highest degree {you  |\n|DMDEDUC3      |What is the highest grade or level of school {you have/SP has} completed or the highest degree {you  |\n|DMDFMSIZ      |Total number of people in the Family                                                                 |\n|DMDHHSIZ      |Total number of people in the Household                                                              |\n|DMDHHSZA      |Number of children aged 5 years or younger in the household                                          |\n|DMDHHSZB      |Number of children aged 6-17 years old in the household                                              |\n|DMDHHSZE      |Number of adults aged 60 years or older in the household                                             |\n|DMDHRAGE      |HH reference person's age in years                                                                   |\n|DMDHRBR4      |HH reference person's country of birth                                                               |\n|DMDHREDU      |HH reference person's education level                                                                |\n|DMDHRGND      |HH reference person's gender                                                                         |\n|DMDHRMAR      |HH reference person's marital status                                                                 |\n|DMDHSEDU      |HH reference person's spouse's education level                                                       |\n|DMDMARTL      |Marital status                                                                                       |\n|DMDYRSUS      |Length of time the participant has been in the US.                                                   |\n|DMQADFC       |Did {you/SP} ever serve in a foreign country during a time of armed conflict or on a humanitarian or |\n|DMQMILIZ      |{Have you/Has SP} ever served on active duty in the U.S. Armed Forces, military Reserves, or Nationa |\n|FIAINTRP      |Was an interpreter used to conduct the Family interview?                                             |\n|FIALANG       |Language of the Family Interview Instrument                                                          |\n|FIAPROXY      |Was a Proxy respondent used in conducting the Family Interview?                                      |\n|INDFMIN2      |Total family income (reported as a range value in dollars)                                           |\n|INDFMPIR      |A ratio of family income to poverty guidelines.                                                      |\n|INDHHIN2      |Total household income (reported as a range value in dollars)                                        |\n|MIAINTRP      |Was an interpreter used to conduct the MEC CAPI interview?                                           |\n|MIALANG       |Language of the MEC CAPI Interview Instrument                                                        |\n|MIAPROXY      |Was a Proxy respondent used in conducting the MEC CAPI Interview?                                    |\n|RIAGENDR      |Gender of the participant.                                                                           |\n|RIDAGEMN      |Age in months of the participant at the time of screening. Reported for persons aged 24 months or yo |\n|RIDAGEYR      |Age in years of the participant at the time of screening. Individuals 80 and over are topcoded at 80 |\n|RIDEXAGM      |Age in months of the participant at the time of examination. Reported for persons aged 19 years or y |\n|RIDEXMON      |Six month time period when the examination was performed - two categories: November 1 through April  |\n|RIDEXPRG      |Pregnancy status for females between 20 and 44 years of age at the time of MEC exam.                 |\n|RIDRETH1      |Recode of reported race and Hispanic origin information                                              |\n|RIDRETH3      |Recode of reported race and Hispanic origin information, with Non-Hispanic Asian Category            |\n|RIDSTATR      |Interview and examination status of the participant.                                                 |\n|SDDSRVYR      |Data release cycle                                                                                   |\n|SDMVPSU       |Masked variance unit pseudo-PSU variable for variance estimation                                     |\n|SDMVSTRA      |Masked variance unit pseudo-stratum variable for variance estimation                                 |\n|SEQN          |Respondent sequence number.                                                                          |\n|SIAINTRP      |Was an interpreter used to conduct the Sample Person (SP) interview?                                 |\n|SIALANG       |Language of the Sample Person Interview Instrument                                                   |\n|SIAPROXY      |Was a Proxy respondent used in conducting the Sample Person (SP) interview?                          |\n|WTINT2YR      |Full sample 2 year interview weight.                                                                 |\n|WTMEC2YR      |Full sample 2 year MEC exam weight.                                                                  |\n:::\n\n```{.r .cell-code}\n# https://wwwn.cdc.gov/nchs/nhanes/2013-2014/DEMO_H.htm\n```\n:::\n\n\n\n[NHANES 2013-2014 Demographics Data](https://wwwn.cdc.gov/nchs/nhanes/Search/DataPage.aspx?Component=Demographics&CycleBeginYear=2013)\n\nDisplays a list of variables in the specified NHANES table:\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-7_2d0abecf1f54f5089067c12b8b938525'}\n\n```{.r .cell-code}\nnhanesTableVars(data_group='EXAM', nh_table='BPX_H')\n#>    Variable.Name                                          Variable.Description\n#> 1         BPAARM                                                 Arm selected:\n#> 2         BPACSZ                               Cuff size (cm) (width X length)\n#> 3         BPAEN1                                Enhancement used first reading\n#> 4         BPAEN2                               Enhancement used second reading\n#> 5         BPAEN3                                Enhancement used third reading\n#> 6         BPAEN4                               Enhancement used fourth reading\n#> 7         BPXCHR                                     60 sec HR (30 sec HR * 2)\n#> 8         BPXDI1              Diastolic:  Blood pressure (first reading) mm Hg\n#> 9         BPXDI2              Diastolic: Blood pressure (second reading) mm Hg\n#> 10        BPXDI3               Diastolic: Blood pressure (third reading) mm Hg\n#> 11        BPXDI4 Diastolic: Blood pressure (fourth reading if necessary) mm Hg\n#> 12        BPXML1                         MIL: maximum inflation levels (mm Hg)\n#> 13        BPXPLS                             60 sec. pulse (30 sec. pulse * 2)\n#> 14        BPXPTY                                                    Pulse type\n#> 15       BPXPULS                                   Pulse regular or irregular?\n#> 16        BPXSY1               Systolic:  Blood pressure (first reading) mm Hg\n#> 17        BPXSY2              Systolic:  Blood pressure (second reading) mm Hg\n#> 18        BPXSY3               Systolic:  Blood pressure (third reading) mm Hg\n#> 19        BPXSY4 Systolic:  Blood pressure (fourth reading if necessary) mm Hg\n#> 20      PEASCCT1                                        Blood Pressure Comment\n#> 21      PEASCST1                                         Blood Pressure Status\n#> 22      PEASCTM1                                Blood Pressure Time in Seconds\n#> 23          SEQN                                   Respondent sequence number.\n# https://wwwn.cdc.gov/nchs/nhanes/2013-2014/BPX_H.htm\n```\n:::\n\n\n\n[NHANES 2013-2014 Examination Data](https://wwwn.cdc.gov/nchs/nhanes/Search/DataPage.aspx?Component=Examination&CycleBeginYear=2013)\n\n### Importing and Subsetting the dataset\n\nObjective is to retain only the useful variables. We will start by importing only the demographic variables that we need.\n\n#### Demographics\n\n[NHANES 2013-2014 Demographic Variables and Sample Weights (DEMO_H)](https://wwwn.cdc.gov/Nchs/Nhanes/2013-2014/DEMO_H.htm)\n\nTake a look at `Target` for each variables.\n\nWhat is the difference between\n\n-   `WTINT2YR`: 0 missing\n-   `WTMEC2YR`: Missing 0, Not MEC Examined 362\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/download2013demo_4cbe1ffddeea259919e523e971d87c5b'}\n\n```{.r .cell-code}\ndemo <- nhanes('DEMO_H') # Both males and females 0 YEARS - 150 YEARS\nnames(demo)\n#>  [1] \"SEQN\"     \"SDDSRVYR\" \"RIDSTATR\" \"RIAGENDR\" \"RIDAGEYR\" \"RIDAGEMN\"\n#>  [7] \"RIDRETH1\" \"RIDRETH3\" \"RIDEXMON\" \"RIDEXAGM\" \"DMQMILIZ\" \"DMQADFC\" \n#> [13] \"DMDBORN4\" \"DMDCITZN\" \"DMDYRSUS\" \"DMDEDUC3\" \"DMDEDUC2\" \"DMDMARTL\"\n#> [19] \"RIDEXPRG\" \"SIALANG\"  \"SIAPROXY\" \"SIAINTRP\" \"FIALANG\"  \"FIAPROXY\"\n#> [25] \"FIAINTRP\" \"MIALANG\"  \"MIAPROXY\" \"MIAINTRP\" \"AIALANGA\" \"DMDHHSIZ\"\n#> [31] \"DMDFMSIZ\" \"DMDHHSZA\" \"DMDHHSZB\" \"DMDHHSZE\" \"DMDHRGND\" \"DMDHRAGE\"\n#> [37] \"DMDHRBR4\" \"DMDHREDU\" \"DMDHRMAR\" \"DMDHSEDU\" \"WTINT2YR\" \"WTMEC2YR\"\n#> [43] \"SDMVPSU\"  \"SDMVSTRA\" \"INDHHIN2\" \"INDFMIN2\" \"INDFMPIR\"\ndemo1 <- demo[c(\"SEQN\", # Respondent sequence number\n                \"RIAGENDR\", # gender\n                \"RIDAGEYR\", # Age in years at screening\n                \"RIDRETH3\", # Race/Hispanic origin w/ NH Asian\n                \"DMDMARTL\", # Marital status: 20 YEARS - 150 YEARS\n                \"WTINT2YR\", \"WTMEC2YR\", #  Full sample 2 year weights\n                \"SDMVPSU\", # Masked variance pseudo-PSU\n                \"SDMVSTRA\")] # Masked variance pseudo-stratum\ndemo_vars <- names(demo1) \ndemo2 <- nhanesTranslate('DEMO_H', demo_vars, data=demo1)\n#> No translation table is available for SEQN\n#> Translated columns: RIAGENDR RIDRETH3 DMDMARTL\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(demo2$SEQN)\n#> [1] 73557 73558 73559 73560 73561 73562\nhead(demo2)\n#>    SEQN RIAGENDR RIDAGEYR           RIDRETH3  DMDMARTL WTINT2YR WTMEC2YR\n#> 1 73557     Male       69 Non-Hispanic Black Separated 13281.24 13481.04\n#> 2 73558     Male       54 Non-Hispanic White   Married 23682.06 24471.77\n#> 3 73559     Male       72 Non-Hispanic White   Married 57214.80 57193.29\n#> 4 73560     Male        9 Non-Hispanic White      <NA> 55201.18 55766.51\n#> 5 73561   Female       73 Non-Hispanic White   Married 63709.67 65541.87\n#> 6 73562     Male       56   Mexican American  Divorced 24978.14 25344.99\n#>   SDMVPSU SDMVSTRA\n#> 1       1      112\n#> 2       1      108\n#> 3       1      109\n#> 4       2      109\n#> 5       2      116\n#> 6       1      111\n```\n:::\n\n\n\n#### Blood pressure\n\nNext, we focus on the blood pressure readings.\n\n[NHANES 2013-2014 Blood Pressure (BPX_H)](https://wwwn.cdc.gov/Nchs/Nhanes/2013-2014/BPX_H.htm)\n\nTake a look at `Target` and missing for each variables. For example,\n\n`BPXDI1` - Diastolic: Blood pres (1st rdg) mm Hg - Target:Both males and females 8 YEARS - 150 YEARS - Missing 2641\n\n`BPXSY1` - Systolic: Blood pres (1st rdg) mm Hg - Target:Both males and females 8 YEARS - 150 YEARS - Missing 2641\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/download2013bp_9acea43c8dcd3e6c4a09b28ee4b37dc2'}\n\n```{.r .cell-code}\nbpx <- nhanes('BPX_H')\nnames(bpx)\n#>  [1] \"SEQN\"     \"PEASCST1\" \"PEASCTM1\" \"PEASCCT1\" \"BPXCHR\"   \"BPAARM\"  \n#>  [7] \"BPACSZ\"   \"BPXPLS\"   \"BPXPULS\"  \"BPXPTY\"   \"BPXML1\"   \"BPXSY1\"  \n#> [13] \"BPXDI1\"   \"BPAEN1\"   \"BPXSY2\"   \"BPXDI2\"   \"BPAEN2\"   \"BPXSY3\"  \n#> [19] \"BPXDI3\"   \"BPAEN3\"   \"BPXSY4\"   \"BPXDI4\"   \"BPAEN4\"\nbpx1 <- bpx[c(\"SEQN\", # Respondent sequence number\n             \"BPXDI1\", # Diastolic: Blood pres (1st rdg) mm Hg\n             \"BPXSY1\")] # Systolic: Blood pres (1st rdg) mm Hg\nbpx_vars <- names(bpx1)\nbpx2 <- nhanesTranslate('BPX_H', bpx_vars, data=bpx1)\n#> No translation table is available for SEQN\n#> Warning in nhanesTranslate(\"BPX_H\", bpx_vars, data = bpx1): No columns were\n#> translated\nhead(bpx2)\n#>    SEQN BPXDI1 BPXSY1\n#> 1 73557     72    122\n#> 2 73558     62    156\n#> 3 73559     90    140\n#> 4 73560     38    108\n#> 5 73561     86    136\n#> 6 73562     84    160\n```\n:::\n\n\n\n#### Smoking\n\nNow, let's consider smoking data.\n\n[NHANES 2013-2014 Smoking - Cigarette Use (SMQ_H)](https://wwwn.cdc.gov/Nchs/Nhanes/2013-2014/SMQ_H.htm)\n\n`SMQ040` - Do you now smoke cigarettes - Target:Both males and females 18 YEARS - 150 YEARS - Missing 4589\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/download2013sm_616f98a5702ff7b86fea1a7d73a2ffd3'}\n\n```{.r .cell-code}\nsmq <- nhanes('SMQ_H')\nsmq1 <- smq[c(\"SEQN\", # Respondent sequence number\n             \"SMQ040\")] # Do you now smoke cigarettes?: 18 YEARS - 150 YEARS\nsmq_vars <- names(smq1)\nsmq2 <- nhanesTranslate('SMQ_I', smq_vars, data=smq1)\n#> No translation table is available for SEQN\n#> Translated columns: SMQ040\nhead(smq2)\n#>    SEQN     SMQ040\n#> 1 73557 Not at all\n#> 2 73558  Some days\n#> 3 73559 Not at all\n#> 4 73561       <NA>\n#> 5 73562 Not at all\n#> 6 73564       <NA>\n```\n:::\n\n\n\nOther options for `smoking` variable candidates could be\n\n-   `SMD641` - \\# days smoked cigs during past 30 days\n-   `SMD650` - Avg \\# cigarettes/day during past 30 days\n-   `SMQ621` - Cigarettes smoked in entire life\n\nWhich of these variables are more towards describing what you are thinking as a smoking variable?\n\n#### Alcohol\n\nFinally, we will import data about alcohol consumption.\n\n[NHANES 2013-2014 Alcohol Use (ALQ_H)](https://wwwn.cdc.gov/Nchs/Nhanes/2013-2014/ALQ_H.htm)\n\n`ALQ130` - Avg no alcoholic drinks/day - past 12 mos - Target:Both males and females 18 YEARS - 150 YEARS - Missing 2328\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/download2013al_16d2e62490e1b5811a420e5a66ce19df'}\n\n```{.r .cell-code}\nalq <- nhanes('ALQ_H')\nalq1 <- alq[c(\"SEQN\", # Respondent sequence number\n              \"ALQ130\")] # Avg # alcoholic drinks/day - past 12 mos \n              # 18 YEARS - 150 YEARS\nalq_vars <- names(alq1)\nalq2 <- nhanesTranslate('ALQ_H', alq_vars, data=alq1)\n#> No translation table is available for SEQN\n#> Warning in nhanesTranslate(\"ALQ_H\", alq_vars, data = alq1): No columns were\n#> translated\nhead(alq2)\n#>    SEQN ALQ130\n#> 1 73557      1\n#> 2 73558      4\n#> 3 73559     NA\n#> 4 73561     NA\n#> 5 73562      1\n#> 6 73564      1\n```\n:::\n\n\n\n### Merging all the datasets\n\n#### one-by-one\n\nNow, we need to combine all these individual datasets into one for our analysis.\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-9_113b972743657b69317e7bcf2c4ca283'}\n\n```{.r .cell-code}\nanalytic.data0 <- merge(demo2, bpx2, by = c(\"SEQN\"), all=TRUE)\nhead(analytic.data0)\n#>    SEQN RIAGENDR RIDAGEYR           RIDRETH3  DMDMARTL WTINT2YR WTMEC2YR\n#> 1 73557     Male       69 Non-Hispanic Black Separated 13281.24 13481.04\n#> 2 73558     Male       54 Non-Hispanic White   Married 23682.06 24471.77\n#> 3 73559     Male       72 Non-Hispanic White   Married 57214.80 57193.29\n#> 4 73560     Male        9 Non-Hispanic White      <NA> 55201.18 55766.51\n#> 5 73561   Female       73 Non-Hispanic White   Married 63709.67 65541.87\n#> 6 73562     Male       56   Mexican American  Divorced 24978.14 25344.99\n#>   SDMVPSU SDMVSTRA BPXDI1 BPXSY1\n#> 1       1      112     72    122\n#> 2       1      108     62    156\n#> 3       1      109     90    140\n#> 4       2      109     38    108\n#> 5       2      116     86    136\n#> 6       1      111     84    160\ndim(analytic.data0)\n#> [1] 10175    11\nanalytic.data1 <- merge(analytic.data0, smq2, by = c(\"SEQN\"), all=TRUE)\nhead(analytic.data1)\n#>    SEQN RIAGENDR RIDAGEYR           RIDRETH3  DMDMARTL WTINT2YR WTMEC2YR\n#> 1 73557     Male       69 Non-Hispanic Black Separated 13281.24 13481.04\n#> 2 73558     Male       54 Non-Hispanic White   Married 23682.06 24471.77\n#> 3 73559     Male       72 Non-Hispanic White   Married 57214.80 57193.29\n#> 4 73560     Male        9 Non-Hispanic White      <NA> 55201.18 55766.51\n#> 5 73561   Female       73 Non-Hispanic White   Married 63709.67 65541.87\n#> 6 73562     Male       56   Mexican American  Divorced 24978.14 25344.99\n#>   SDMVPSU SDMVSTRA BPXDI1 BPXSY1     SMQ040\n#> 1       1      112     72    122 Not at all\n#> 2       1      108     62    156  Some days\n#> 3       1      109     90    140 Not at all\n#> 4       2      109     38    108       <NA>\n#> 5       2      116     86    136       <NA>\n#> 6       1      111     84    160 Not at all\ndim(analytic.data1)\n#> [1] 10175    12\nanalytic.data2 <- merge(analytic.data1, alq2, by = c(\"SEQN\"), all=TRUE)\nhead(analytic.data2)\n#>    SEQN RIAGENDR RIDAGEYR           RIDRETH3  DMDMARTL WTINT2YR WTMEC2YR\n#> 1 73557     Male       69 Non-Hispanic Black Separated 13281.24 13481.04\n#> 2 73558     Male       54 Non-Hispanic White   Married 23682.06 24471.77\n#> 3 73559     Male       72 Non-Hispanic White   Married 57214.80 57193.29\n#> 4 73560     Male        9 Non-Hispanic White      <NA> 55201.18 55766.51\n#> 5 73561   Female       73 Non-Hispanic White   Married 63709.67 65541.87\n#> 6 73562     Male       56   Mexican American  Divorced 24978.14 25344.99\n#>   SDMVPSU SDMVSTRA BPXDI1 BPXSY1     SMQ040 ALQ130\n#> 1       1      112     72    122 Not at all      1\n#> 2       1      108     62    156  Some days      4\n#> 3       1      109     90    140 Not at all     NA\n#> 4       2      109     38    108       <NA>     NA\n#> 5       2      116     86    136       <NA>     NA\n#> 6       1      111     84    160 Not at all      1\ndim(analytic.data2)\n#> [1] 10175    13\n```\n:::\n\n\n\n#### All at once\n\nAlternatively, you can merge all datasets at once.\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-10_a6163fd60e2d6d518337bf9b20bd1b99'}\n\n```{.r .cell-code}\nrequire(plyr)\n#> Loading required package: plyr\nanalytic.data <- join_all(list(demo2, bpx2, smq2, alq2), by = \"SEQN\", type='full')\nhead(analytic.data)\n#>    SEQN RIAGENDR RIDAGEYR           RIDRETH3  DMDMARTL WTINT2YR WTMEC2YR\n#> 1 73557     Male       69 Non-Hispanic Black Separated 13281.24 13481.04\n#> 2 73558     Male       54 Non-Hispanic White   Married 23682.06 24471.77\n#> 3 73559     Male       72 Non-Hispanic White   Married 57214.80 57193.29\n#> 4 73560     Male        9 Non-Hispanic White      <NA> 55201.18 55766.51\n#> 5 73561   Female       73 Non-Hispanic White   Married 63709.67 65541.87\n#> 6 73562     Male       56   Mexican American  Divorced 24978.14 25344.99\n#>   SDMVPSU SDMVSTRA BPXDI1 BPXSY1     SMQ040 ALQ130\n#> 1       1      112     72    122 Not at all      1\n#> 2       1      108     62    156  Some days      4\n#> 3       1      109     90    140 Not at all     NA\n#> 4       2      109     38    108       <NA>     NA\n#> 5       2      116     86    136       <NA>     NA\n#> 6       1      111     84    160 Not at all      1\ndim(analytic.data)\n#> [1] 10175    13\n```\n:::\n\n\n\n## Saving data for later use\n\nIt's a good practice to save your data for future reference.\n\n\n\n::: {.cell hash='researchquestion2a_cache/pdf/unnamed-chunk-11_cc40f1c2a37ee15b8565bbe9f2393c38'}\n\n```{.r .cell-code}\nsave(analytic.data, file=\"Data/researchquestion/Analytic2013.RData\") \n```\n:::\n\n\n\n## Exercise (try yourself)\n\nFollow the steps in the exercise section to deepen your understanding and broaden the analysis.\n\n1.  The following variables were not included in the above analysis, that were included in [this paper](https://www.nature.com/articles/s41371-019-0224-9.pdf): try including them and then create the new analytic data:\n\n-   education level\n-   poverty income ratio\n-   Sodium intake (mg)\n-   Potassium intake (mg)\n\n2.  Download the NHANES 2015-2016 and append with the NHANES 2013-2014 analytic data with same variables.\n\n## References\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}