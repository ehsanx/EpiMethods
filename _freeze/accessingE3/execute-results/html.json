{
  "hash": "acee1d8410533e27f13ddde6329f70f4",
  "result": {
    "engine": "knitr",
    "markdown": "## Exercise 3 (A) {.unnumbered}\n\n\n\n### **Exercise: Phased Multi-Year NHANES Data Wrangling**\n\n**Instructions:** Use the R programming language and functions from the `tidyverse`, `nhanesA`, `tableone`, and `naniar` packages to complete this exercise. We will build up our dataset in phases, starting with a single year and expanding to multiple survey cycles.\n\nPlease knit your final R Markdown file and submit the knitted HTML or PDF document ONLY.\n\n------------------------------------------------------------------------\n\n#### **Setup: Load Packages**\n\nFirst, run the following code block to ensure the required packages are installed and loaded into your R session.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required packages\n\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### **Problem 1: Import and Translate Single-Year Data**\n\nDownload the **Demographic (`DEMO`)** data for the 2013-2014 NHANES cycle, using `translated = TRUE` to automatically convert coded values into text labels.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Download and translate the 2013-2014 demographic data\n\n# Check the first few rows to see the translated values\n\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### **Problem 2: Add Body Measures Data for a Single Year**\n\nDownload the **Body Measures (`BMX`)** data for the same 2013-2014 cycle and merge it with the demographic data from Problem 1.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Download the 2013-2014 body measures data\n\n# Merge the BMX data with the DEMO data from Problem 1\n\n# Check the dimensions of the merged dataset\n\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### **Problem 3: Import and Merge Multi-Cycle Data with Translation**\n\nExpand to multiple years, using `translated = TRUE` for all downloads. Merge both the **Demographic (`DEMO`)** and **Body Measures (`BMX`)** data for all three NHANES cycles: 2013-2014 (`H`), 2015-2016 (`I`), and 2017-2018 (`J`). Combine them into a single dataframe named `nhanes_raw`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the cycles to download\n\n# Create a list to store data from each cycle\n\n# Loop through each cycle, download with translation, and merge the data\n\n# Combine the data from all cycles into one dataframe\n\n# Check the dimensions of the final raw dataset\n\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### **Problem 4: Data Cleaning and Filtering**\n\nUsing the `nhanes_raw` dataset, we will now create our clean dataset. This involves filtering our population to adults and then creating our analysis variables.\n\n1.  **Filter for Adults:** Keep only participants aged 20 years or older.\n2.  **Rename Variables:** `RIAGENDR` to `Sex`, `RIDAGEYR` to `Age`, `RIDRETH3` to `RaceEthnicity`, `BMXBMI` to `BMI`.\n3.  **Group `RaceEthnicity`:** Combine \"Mexican American\" and \"Other Hispanic\" into a single \"Hispanic\" category.\n4.  **Create `AgeGroup`:** Categorize `Age` into \"20-39\", \"40-59\", and \"60+\".\n5.  **Create `BMICat`:** Categorize `BMI` into \"Underweight\", \"Normal weight\", \"Overweight\", and \"Obese\".\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# nhanes_clean <- ..\n  # Step 1: Filter the data to include only adults\n   \n  # Step 2: Rename variables\n   \n  # Create new variables\n   \n    # Convert the new character RaceEthnicity to a factor with the desired level order\n     \n    \n    # Step 4: Create AgeGroup (now without NAs because we filtered)\n     \n                   \n    # Step 5: Create BMICat\n     \n\n# Check the structure to confirm variables are correct\n\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### **Problem 5: Create Final Analytic Dataset**\n\nCreate a final, analysis-ready dataset named `nhanes_analysis` that includes only the key variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\n# Display the structure of the final analytic dataset\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### **Problem 6: Investigate Missing Data**\n\nNow that our data is correctly filtered and processed, let's re-examine the missing data patterns. The missingness should be much lower.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1. Count missing values for each column\n\n# 2. Visualize the missing data\n\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### **Problem 7: Create a Descriptive Table**\n\nFinally, with the data correctly loaded and cleaned for our adult population, create the summary table of sample characteristics, stratified by `Sex`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the variables for the table\n\n# Create the table, stratified by Sex\n\n# Print the table, showing all levels and missing data counts\n\n```\n:::\n\n",
    "supporting": [
      "accessingE3_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}