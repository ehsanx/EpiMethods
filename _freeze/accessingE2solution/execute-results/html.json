{
  "hash": "be7835f19fa19dbab17ee42a08674e33",
  "result": {
    "engine": "knitr",
    "markdown": "## Exercise 2 Solution (A)  {.unnumbered}\n\n\n\nWe will use the following article:\n\n-   Xu KY, Hartz SM, Borodovsky JT, Bierut LJ, Grucza RA. Association between benzodiazepine use with or without opioid use and all-cause mortality in the United States, 1999-2015. JAMA Network Open. 2020;3(12):e2028557. DOI: [10.1001/jamanetworkopen.2020.28557](https://pubmed.ncbi.nlm.nih.gov/33295972/).\n\nThe authors exposed the relationship between benzodiazepine use with or without opioid use (exposure) and all-cause mortality (outcome), adjusting for confounders. The exposure and confounders information was extracted from the [National Health and Nutrition Examination Surveys (NHANES)](https://wwwn.cdc.gov/nchs/nhanes/default.aspx) 1999-2014 cycles, and public-use mortality data was downloaded from the [CDC website](https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/). Our main tasks include merging the datasets, applying eligibility criteria, and creating Table 1. Please note that recreating the analytic dataset after applying eligibility criteria was difficult due to the level of detail provided by the authors in the main manuscript and supplemental materials. Therefore, the numbers in your Table 1 will differ from Table 1 of the paper. However, you should be able to reproduce the numbers for this exercise given by the instructor.\n\n## Question I: \n\n### 1(a) Importing dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Importing dataset\nload(\"Data/accessing/nhanes_mortality_1999_2014.RData\")\nls()\n#>  [1] \"dat.mortality01\" \"dat.mortality03\" \"dat.mortality05\" \"dat.mortality07\"\n#>  [5] \"dat.mortality09\" \"dat.mortality11\" \"dat.mortality13\" \"dat.mortality99\"\n#>  [9] \"dat.nhanes01\"    \"dat.nhanes03\"    \"dat.nhanes05\"    \"dat.nhanes07\"   \n#> [13] \"dat.nhanes09\"    \"dat.nhanes11\"    \"dat.nhanes13\"    \"dat.nhanes99\"\n```\n:::\n\n\nThere are 16 datasets (8 NHANES, 8 mortality):\n\n-   dat.nhanes99: NHANES data for 1999-2000 cycle\n\n-   dat.nhanes01: NHANES data for 2001-2002 cycle\n\n-   dat.nhanes03: NHANES data for 2003-2004 cycle\n\n-   dat.nhanes05: NHANES data for 2005-2006 cycle\n\n-   dat.nhanes07: NHANES data for 2007-2008 cycle\n\n-   dat.nhanes09: NHANES data for 2009-2010 cycle\n\n-   dat.nhanes11: NHANES data for 2011-2012 cycle\n\n-   dat.nhanes13: NHANES data for 2013-2014 cycle\n\n-   dat.mortality99: Mortality data for 1999-2000 cycle\n\n-   dat.mortality01: Mortality data for 2001-2003 cycle\n\n-   dat.mortality03: Mortality data for 2003-2004 cycle\n\n-   dat.mortality05: Mortality data for 2005-2006 cycle\n\n-   dat.mortality07: Mortality data for 2007-2008 cycle\n\n-   dat.mortality09: Mortality data for 2009-2010 cycle\n\n-   dat.mortality11: Mortality data for 2010-2012 cycle\n\n-   dat.mortality13: Mortality data for 2011-2014 cycle\n\nThe `mortality` datasets have the following variables:\n\n-   `SEQN`: Respondent sequence number. We will use the 'SEQN' variable to merge an NHANES cycle with its corresponding mortality data.\n-   `mortstat`: All-cause mortality status\n-   `permth_int`: Person-Months of Follow-up from NHANES Interview date\n-   `permth_exm`: Person-Months of Follow-up from NHANES Mobile Examination Center (MEC) Date\n-   `CYCLE`: Survey cycle\n\nThe NHANES datasets have the following variables:\n\n-   `SEQN`: Respondent sequence number\n-   `CYCLE`: Survey cycle\n-   `SDMVSTRA`: Masked variance pseudo-stratum\n-   `SDMVPSU`: Masked variance pseudo-PSU\n-   `WTMEC2YR`: Full sample 2-year MEC exam weight\n-   `RIDSTATR`: Interview/examination status\n-   `RIDAGEYR`: Age in years at screening\n-   `RIAGENDR`: Gender\n-   `DMDEDUC2`: Education level (adults 20+)\n-   `INDFMPIR`: Family monthly poverty income ratio\n-   `RIDRETH1`: Race/ethnicity\n-   `DMDMARTL`: Marital status\n-   `SMOKING_HARMONIZED`: Harmonized smoking variable \\[SMQ020/SMQ040\\]\n-   `BPQ020`: Ever told had high blood pressure\n-   `LIPIDEM_HARMONIZED`: Lipidemia harmonized \\[BPQ060/BPQ080\\]\n-   `MCQ160F`: Ever told you had a stroke\n-   `MCQ160E`: Ever told you had a heart attack\n-   `DIQ010`: Doctor told you have diabetes\n-   `MCQ160B`: Ever told you had congestive heart failure\n-   `PULMOND_HARMONIZED`: Harmonized pulmonary condition variable \\[MCQ160G/MCQ160K/MCQ160O\\]\n-   `MCQ160L`: Ever told you had liver condition\n-   `MCQ160A`: Ever told you had arthritis\n-   `KIDNEYD_HARMONIZED`: Harmonized kidney disease variable \\[KIQ020/KIQ022\\]\n-   `MCQ220`: Ever told you had cancer or malignancy\n-   `ANYHOSP_INLASTYEAR`: Harmonized indicator of any hospital visit in last year \\[HUD070/HUQ070/HUQ071\\]\n-   `HUQ090`: Seen a mental health professional in past year\n-   `HUQ010`: General health condition \\[Excellent/Very Good/Good/Fair/Poor\\]\n-   `PFQ090`: Last 12 months, received care at emergency room\n-   `REGULAR_EDCARE`: Harmonized type or place most often go for healthcare \\[HUQ040/HUQ041\\]\n-   `HUQ020`: Health condition compared to a year ago\n-   `NUMHOSP_INLASTYEAR`: Harmonized number of hospitalizations in last year \\[HUD080/HUQ080\\]\n-   `TAKERX_INLASTMONTH`: Harmonized taken prescription/medicine in past month \\[RDX030/RDXUSE\\]\n-   `benzodiazepines`: Any benzodiazepines reported, harmonized from RDX/RDX_DRUG data tables\n-   `opioids`: Any opioids reported, harmonized from RDX/RDX_DRUG data tables\n-   `ssris`: Any ssris reported, harmonized from RDX/RDX_DRUG data tables\n-   `antidepressants`: Any anti-depressants (SNRIs, MAOIs, or TCAs) reported, harmonized from RDX/RDX_DRUG data tables\n-   `antidepres_othr`: Any other anti-depressants reported, harmonized from RDX/RDX_DRUG data tables\n-   `antipsychotics`: Any anti-psychotics reported, harmonized from RDX/RDX_DRUG data tables\n-   `analgesics`: Any analgesics reported, harmonized from RDX/RDX_DRUG data tables\n-   `muscle_relax`: Any muscle relaxants reported, harmonized from RDX/RDX_DRUG data tables\n-   `anticonvulsant`: Any anti-convulsants reported, harmonized from RDX/RDX_DRUG data tables\n-   `hormonalagents`: Any hormonal agents reported, harmonized from RDX/RDX_DRUG data tables\n-   `gastrointestin`: Any gastrointestinal agents reported, harmonized from RDX/RDX_DRUG data tables\n-   `cardi_metab_ag`: Any cardiac or metabolic medications reported, harmonized from RDX/RDX_DRUG data tables\n-   `resp_antihist`: Any respiratory medicators or antihistamines reported, harmonized from RDX/RDX_DRUG data tables\n-   `cns_morethan2`: \\> 2 CNS medications reported, harmonized from RDX/RDX_DRUG data tables\n-   `ncns_lessthan5`: \\< 5 NCNS medications reported, harmonized from RDX/RDX_DRUG data tables\n-   `REGULAR_DRINKING`: Harmonized regular drinker status \\[ALQ100/ALD100/ALQ110/ALQ120U/ALQ120Q\\]\n\nWe refer this [OER website](https://ehsanx.github.io/EpiMethods/accessing7.html) for guidance on downloading mortality data and linking to NHANES. You can also review the R script (`xu-et-al-2020-data-preparation.r`) to see how the variables listed above were downloaded and derived.\n\n### 1(b) Merging datasets\n\nMerge the mortality datasets with the NHANES datasets.\n\n**Hint:**\n\n-   `SEQN` is the unique identifier in the datasets.\n-   Make sure that your merged dataset includes information for 82,091 individuals.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Mortality data\ndat.mort <- rbind(dat.mortality99, dat.mortality01, dat.mortality03, dat.mortality05,\n                  dat.mortality07, dat.mortality09, dat.mortality11, dat.mortality13)\ndat.mort$SEQN <- as.numeric(dat.mort$SEQN)\n\n# NHANES\ndat.nhanes <- rbind(dat.nhanes99, dat.nhanes01, dat.nhanes03, dat.nhanes05,\n                  dat.nhanes07, dat.nhanes09, dat.nhanes11, dat.nhanes13)\ndat.nhanes$CYCLE <- NULL\n\n# Merging\ndat <- merge(dat.mort, dat.nhanes, by = \"SEQN\", all = T)\n#table(dat$CYCLE.x, dat$CYCLE.y, useNA = \"always\")\ndat$CYCLE.y <- NULL\ncolnames(dat)[colnames(dat) == \"CYCLE.x\"] <- \"CYCLE\"\n```\n:::\n\n\n### 1(c) Subsetting according to eligibility\n\nSubset the dataset according to the eligibility criteria / restriction specified in the paper (see Figure 1 of the paper). The authors dropped individuals:\n\n-   Aged less than 20 years\n-   Did not participate in mobile examination interviews\n-   Missing prescription medication data or refused to answer\n-   Missing data on other covariates (medical comorbidities, alcohol, smoking, blood pressure, and health care use)\n-   Died within 1 year of follow-up\n-   Were not taking SSRIs, benzodiazepines, or opioids\n\n**Hint 1:** The following variables could be used to subset based on eligibility:\n\n-   `RIDAGEYR` for age\n-   `RIDSTATR` for mobile examination interviews\n-   `TAKERX_INLASTMONTH` for prescription medication\n-   The following for the missing covariate information: `BPQ020`, `LIPIDEM_HARMONIZED`, `MCQ160F`, `MCQ160E`, `DIQ010`, `MCQ160B`, `PULMOND_HARMONIZED`, `MCQ160L`, `MCQ160A`, `KIDNEYD_HARMONIZED`, `MCQ220`, `SMOKING_HARMONIZED`, `REGULAR_DRINKING`, `REGULAR_EDCARE`\\\n-   `mortstat` and `permth_int` for death within 1 year of follow-up\n-   `benzodiazepines`, `ssris`, `opioids` for Benzodiazepine use with or without opioid use\n\n**Hint 2:** After subsetting, the analytic dataset contains information for 4,049 individuals (do not match with the paper)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 20+\ndat1 <- subset(dat, RIDAGEYR>= 20) # N = 43,793\n\n# Did not participate in mobile examination interviews\ndat2 <- subset(dat1, RIDSTATR == \"int + mec exam\") # N = 41,659\nnrow(dat1) - nrow(dat2) # 2,134 dropped\n#> [1] 2134\n\n# Missing prescription medication data or refused to answer\ndat3 <- subset(dat2, TAKERX_INLASTMONTH %in% c(\"No\", \"Yes\")) # N = 41,614\nnrow(dat2) - nrow(dat3) # 45 dropped\n#> [1] 45\n\n# Missing data on other covariates \ndat4 <- dat3[complete.cases(dat3$BPQ020),]\ndat4 <- dat4[complete.cases(dat4$LIPIDEM_HARMONIZED),]\ndat4 <- dat4[complete.cases(dat4$MCQ160F),]\ndat4 <- dat4[complete.cases(dat4$MCQ160E),]\ndat4 <- dat4[complete.cases(dat4$DIQ010),]\ndat4 <- dat4[complete.cases(dat4$MCQ160B),]\ndat4 <- dat4[complete.cases(dat4$PULMOND_HARMONIZED),]\ndat4 <- dat4[complete.cases(dat4$MCQ160L),]\ndat4 <- dat4[complete.cases(dat4$MCQ160A),]\ndat4 <- dat4[complete.cases(dat4$KIDNEYD_HARMONIZED),]\ndat4 <- dat4[complete.cases(dat4$MCQ220),]\ndat4 <- dat4[complete.cases(dat4$SMOKING_HARMONIZED),]\ndat4 <- dat4[complete.cases(dat4$REGULAR_DRINKING),]\ndat4 <- dat4[complete.cases(dat4$REGULAR_EDCARE),] # N = 31,850\n\nnrow(dat3) - nrow(dat4) # 9,764 dropped\n#> [1] 9764\n\n# Died within 1 y of follow-up\ndat5 <- subset(dat4, mortstat == 0 | (mortstat == 1 & permth_int > 12)) # N = 31,591\nnrow(dat4) - nrow(dat5) # 2,59 dropped\n#> [1] 259\n\n# Were not taking SSRIs, benzodiazepines, or opioids\ndat6 <- subset(dat5, benzodiazepines == \"Yes\" | ssris == \"Yes\" | opioids == \"Yes\") # N = 4,049\nnrow(dat5) - nrow(dat6) # 27,542 dropped\n#> [1] 27542\n\nnrow(dat6) # N = 4,049\n#> [1] 4049\n```\n:::\n\n\n### 1(d) Creating the exposure variable\n\nCreate the exposure variable (Benzodiazepine Use With or Without Opioid Use).\n\n**Hint:** It's a categorical variable with four categories as shown in Figure 1 or Table 1 of the paper. If your analytic sample size is 4,049, you could have the following frequencies:\n\n| exposure          | n     |\n|:------------------|:------|\n| BZDs plus opioids | 408   |\n| BZDs only         | 961   |\n| Opioids only      | 1,434 |\n| Neither           | 1,246 |\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n#> \n#> Attaching package: 'dplyr'\n#> The following objects are masked from 'package:stats':\n#> \n#>     filter, lag\n#> The following objects are masked from 'package:base':\n#> \n#>     intersect, setdiff, setequal, union\ndat6 <- dat6 %>% \n  mutate(exposure = case_when(\n    benzodiazepines == \"Yes\" & opioids == \"Yes\" ~ 'BZDs plus opioids',\n    benzodiazepines == \"Yes\" & opioids == \"No\" ~ 'BZDs only',\n    benzodiazepines == \"No\" & opioids == \"Yes\" ~ 'Opioids only',\n    benzodiazepines == \"No\" & opioids == \"No\" & ssris == \"Yes\" ~ 'Neither')\n  )\ndat6$exposure <- factor(dat6$exposure, levels = c(\"BZDs plus opioids\", \"BZDs only\", \n                                                  \"Opioids only\", \"Neither\"))\ntable(dat6$exposure, useNA = \"always\")\n#> \n#> BZDs plus opioids         BZDs only      Opioids only           Neither \n#>               408               961              1434              1246 \n#>              <NA> \n#>                 0\n```\n:::\n\n\n## Question II: \n\n### 2(a) Recoding\n\nRecode the confounders/covariates in shown in Table 1, except for the following:\n\n-   Antimicrobial drugs\n-   $<5$ Non-CNS medications\n-   Disabled\n\nThe main reason these four variables were not considered is that the authors provided insufficient detail in the main manuscript or supplemental materials to derive these variables. An example of recoding some of the variables is given below. But you can use other functions as well.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(car)\n\n# Age\n#summary(dat6$RIDAGEYR)\ndat6$age <- dat6$RIDAGEYR\ndat6$age.cat <- car::recode(dat6$RIDAGEYR, \" 60:70 = '60-70y'; else = 'Others' \", \n                            as.factor = T)\ndat6$age.cat <- relevel(dat6$age.cat, ref = \"Others\")\ntable(dat6$age.cat, useNA = \"always\")\n#> \n#> Others 60-70y   <NA> \n#>   3214    835      0\n  \n# Male\ntable(dat6$RIAGENDR, useNA = \"always\")\n#> \n#>   Male Female   <NA> \n#>   1423   2626      0\ndat6$gender <- relevel(dat6$RIAGENDR, ref = \"Female\")\n\n# College graduate \n#table(dat6$DMDEDUC2, useNA = \"always\")\ndat6$education <- car::recode(dat6$DMDEDUC2, \" c('College Graduate or above', \n                           'College graduate or above') = 'College graduate'; \n                           c('Less Than 9th Grade', \n                           '9-11th Grade (Includes 12th grade with no diploma)',\n                           'High School Grad/GED or Equivalent', 'Less than 9th grade', \n                           '9-11th grade (Includes 12th grade with no diploma)', \n                           'High school graduate/GED or equivalent',\n                           'Some College or AA degree', 'Some college or AA degree') = \n                           'Less than college'; else = NA \", as.factor = T)\ndat6$education <- relevel(dat6$education, ref = \"Less than college\")\ntable(dat6$education, useNA = \"always\")\n#> \n#> Less than college  College graduate              <NA> \n#>              3296               749                 4\n\n# Poverty to income ratio \n#table(dat6$INDFMPIR, useNA = \"always\")\ndat6$poverty.ratio <- car::recode(dat6$INDFMPIR, \" 0:2 = 'LE 2'; 2:5 = 'More than 2';\n                                  else = NA \", as.factor = T)\ntable(dat6$poverty.ratio, useNA = \"always\")\n#> \n#>        LE 2 More than 2        <NA> \n#>        1835        1980         234\n\n# White\n#table(dat6$RIDRETH1, useNA = \"always\")\ndat6$race <- car::recode(dat6$RIDRETH1, \" 'Non-Hispanic White' = 'White'; \n                         else = 'Non-White' \", as.factor = T)\ntable(dat6$race, useNA = \"always\")\n#> \n#> Non-White     White      <NA> \n#>      1509      2540         0\n\n# Partnered\n#table(dat6$DMDMARTL, useNA = \"always\")\ndat6$marital <- car::recode(dat6$DMDMARTL, \" c('Married', 'Living with partner') = \n                            'Partnered'; c('Widowed', 'Divorced', 'Separated', \n                            'Never married') = 'Single';else = NA\", as.factor = T)\ndat6$marital <- relevel(dat6$marital, ref = \"Single\")\ntable(dat6$marital, useNA = \"always\")\n#> \n#>    Single Partnered      <NA> \n#>      1768      2240        41\n\n# Smoking\n#table(dat6$SMOKING_HARMONIZED, useNA = \"always\")\ndat6$smoking <- car::recode(dat6$SMOKING_HARMONIZED, \" c('Every day', 'Some days') = \n                            'Yes'; c('LOGICAL SKIP', 'Not at all') = 'No';\n                            else = NA\", as.factor = T)\ntable(dat6$smoking, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 2983 1066    0\n\n# Hypertension\n#table(dat6$BPQ020, useNA = \"always\")\ndat6$hypertension <- car::recode(dat6$BPQ020, \" 'No' = 'No'; 'Yes' = 'Yes'; \n                                 else = NA\", as.factor = T)\ntable(dat6$hypertension, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 2095 1954    0\n\n# Hyperlipidemia\n#table(dat6$LIPIDEM_HARMONIZED, useNA = \"always\")\ndat6$hyperlipidemia <- car::recode(dat6$LIPIDEM_HARMONIZED, \" 'No' = 'No';\n                                   'Yes' = 'Yes'; else = NA\", as.factor = T)\ntable(dat6$hyperlipidemia, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 2326 1723    0\n\n# Stroke\n#table(dat6$MCQ160F, useNA = \"always\")\ndat6$stroke <- car::recode(dat6$MCQ160F, \" 'No' = 'No'; 'Yes' = 'Yes'; else = NA\", \n                           as.factor = T)\ntable(dat6$stroke, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3786  263    0\n\n# Myocardial infarction\n#table(dat6$MCQ160E, useNA = \"always\")\ndat6$heart.attack <- car::recode(dat6$MCQ160E, \" 'No' = 'No'; 'Yes' = 'Yes'; else = NA\", \n                                 as.factor = T)\ntable(dat6$heart.attack, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3770  279    0\n\n# Diabetes\n#table(dat6$DIQ010, useNA = \"always\")\ndat6$diabetes <- car::recode(dat6$DIQ010, \" c('No', 'Borderline') = 'No'; \n                             'Yes' = 'Yes'; else = NA\", as.factor = T)\ntable(dat6$diabetes, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3404  645    0\n\n# Congestive heart failure\n#table(dat6$MCQ160B, useNA = \"always\")\ndat6$heart.failure <- car::recode(dat6$MCQ160B, \" 'No' = 'No'; 'Yes' = 'Yes';\n                                  else = NA\", as.factor = T)\ntable(dat6$heart.failure, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3817  232    0\n\n# Pulmonary\tdisease\t\n#table(dat6$PULMOND_HARMONIZED, useNA = \"always\")\ndat6$pulmonary.disease <- car::recode(dat6$PULMOND_HARMONIZED, \" 'No' = 'No'; \n                                      'Yes' = 'Yes'; else = NA\", as.factor = T)\ntable(dat6$pulmonary.disease, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3471  578    0\n\n# Liver\tdisease\t\n#table(dat6$MCQ160L, useNA = \"always\")\ndat6$liver.disease <- car::recode(dat6$MCQ160L, \" 'No' = 'No'; 'Yes' = 'Yes'; \n                                  else = NA\", as.factor = T)\ntable(dat6$liver.disease, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3807  242    0\n\n# Arthritis\t\t\n#table(dat6$MCQ160A, useNA = \"always\")\ndat6$arthritis <- car::recode(dat6$MCQ160A, \" 'No' = 'No'; 'Yes' = 'Yes'; \n                              else = NA\", as.factor = T)\ntable(dat6$arthritis, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 2060 1989    0\n\n# Kidney\tdisease\t\n#table(dat6$KIDNEYD_HARMONIZED, useNA = \"always\")\ndat6$kidney.disease <- car::recode(dat6$KIDNEYD_HARMONIZED, \" 'No' = 'No'; \n                                   'Yes' = 'Yes'; else = NA\", as.factor = T)\ntable(dat6$kidney.disease, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3858  191    0\n\n# Cancer\t\t\n#table(dat6$MCQ220, useNA = \"always\")\ndat6$cancer <- car::recode(dat6$MCQ220, \" 'No' = 'No'; 'Yes' = 'Yes'; else = NA\",\n                           as.factor = T)\ntable(dat6$cancer, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3478  571    0\n\n# Regular\tdrinking\t\n#table(dat6$REGULAR_DRINKING, useNA = \"always\")\ndat6$regular.drinking <- car::recode(dat6$REGULAR_DRINKING, \" 'No' = 'No'; \n                                     'Yes' = 'Yes'; else = NA\", as.factor = T)\ntable(dat6$regular.drinking, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 2830 1219    0\n\n# Antimicrobial\tdrugs\t- not available\n# table(dat6$antimicrobial.drugs, useNA = \"always\")\n\n# Hormonal\tagents\t\ntable(dat6$hormonalagents, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3045 1004    0\n\n# Anticonvulsants\t\t\ntable(dat6$anticonvulsant, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3227  822    0\n\n# Any\tanalgesics\t\ntable(dat6$analgesics, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 1882 2167    0\n\n# Muscle\trelaxants\t\ntable(dat6$muscle_relax, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3655  394    0\n\n# Gastrointestinal\tagents\t\ntable(dat6$gastrointestin, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 2994 1055    0\n\n# Cardiac\tor\tmetabolic medications\t\t\ntable(dat6$cardi_metab_ag, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 1844 2205    0\n\n# Respiratory\tmedications\tor antihistamines\t\t\ntable(dat6$resp_antihist, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3097  952    0\n\n# >2 CNS\tmedications\ntable(dat6$cns_morethan2, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3414  635    0\n\n# <5 Non-CNS\tmedications \ntable(dat6$ncns_lessthan5, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 4049    0    0\n\n# Antidepressants\t(SNRIs,\tMAOIs,\tor\tTCAs)\ntable(dat6$antidepressants, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3841  208    0\n\n# Other\tantidepressants\t\ntable(dat6$antidepres_othr, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3577  472    0\n\n# Antipsychotics\t\t\ntable(dat6$antipsychotics, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3856  193    0\n\n# Any\thospitalization\tin <1y\n#table(dat6$ANYHOSP_INLASTYEAR, useNA = \"always\")\ndat6$hospitalization.any <- car::recode(dat6$ANYHOSP_INLASTYEAR, \" 'No' = 'No'; \n                                     'Yes' = 'Yes'; else = NA\", as.factor = T)\ntable(dat6$hospitalization.any, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3144  905    0\n\n# Any\tpsychiatric\tvisit in <1y\n#table(dat6$HUQ090, useNA = \"always\")\ndat6$hospitalization.psy <- car::recode(dat6$HUQ090, \" 'No' = 'No'; 'Yes' = 'Yes'; \n                                        else = NA\", as.factor = T)\ntable(dat6$hospitalization.psy, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3193  856    0\n\n# Good current\thealth\n#table(dat6$HUQ010, useNA = \"always\")\ndat6$good.current.health <- car::recode(dat6$HUQ010, \" c('Excellent,', 'Very good,',\n                                        'Good,') = 'Yes'; c('Fair, or', 'Poor?') = 'No';\n                                        else = NA\", as.factor = T)\ntable(dat6$good.current.health, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 1520 2527    2\n\n# Require\tspecial\thealth equipment\t\t\n#table(dat6$PFQ090, useNA = \"always\")\ndat6$special.health <- car::recode(dat6$PFQ090, \" 'No' = 'No'; 'Yes' = 'Yes'; \n                                   else = NA\", as.factor = T)\ntable(dat6$special.health, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3256  793    0\n\n# Disabled - not available\t\t\n# table(dat6$disabled, useNA = \"always\")\n\n# Regular\tED\tcare\n#table(dat6$REGULAR_EDCARE, useNA = \"always\")\ndat6$regular.ED.care <- car::recode(dat6$REGULAR_EDCARE, \" 'Hospital emergency room' = \n                                    'Yes'; else = 'No'\",  as.factor = T)\ntable(dat6$regular.ED.care, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3951   98    0\n\n# Worsening\thealth\t\n#table(dat6$HUQ020, useNA = \"always\")\ndat6$worsening.health <- car::recode(dat6$HUQ020, \" c('Better,', 'About the same?') = 'No'; \n                                     'Worse, or' = 'Yes'; else = NA\", as.factor = T)\ntable(dat6$worsening.health, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3183  865    1\n\n# >2 Overnight\thospitalizations in <1y\n#table(dat6$NUMHOSP_INLASTYEAR, useNA = \"always\")\ndat6$hospitalization.3plus <- car::recode(dat6$NUMHOSP_INLASTYEAR, \" c('0', '1', '2') = 'No'; \n                                        c('3', '4', '5', '6 or more') = 'Yes';\n                                        else = NA\", as.factor = T)\ntable(dat6$hospitalization.3plus, useNA = \"always\")\n#> \n#>   No  Yes <NA> \n#> 3925  124    0\n```\n:::\n\n\n### 2(b) Table 1\n\nReproduce Table 1 presented in the above paper. Please note that the numbers in your Table 1 will differ from Table 1 of the paper. But the numbers could look as follows:\n\n| Characteristic | Overall | BZDs plus opioids | BZDs only | Opioids only | Neither |\n|------------|------------|------------|------------|------------|------------|\n| n | 4049 | 408 | 961 | 1434 | 1246 |\n| age (mean (SD)) | 53.47 (17.06) | 55.13 (14.86) | 56.34 (17.06) | 51.54 (17.23) | 52.94 (17.21) |\n| age.cat = 60-70y (%) | 835 (20.6) | 84 (20.6) | 190 (19.8) | 306 (21.3) | 255 (20.5) |\n| gender = Male (%) | 1423 (35.1) | 157 (38.5) | 311 (32.4) | 591 (41.2) | 364 (29.2) |\n| education = College graduate (%) | 749 (18.5) | 46 (11.3) | 193 (20.1) | 208 (14.5) | 302 (24.2) |\n| poverty.ratio = More than 2 (%) | 1980 (51.9) | 154 (39.8) | 491 (54.3) | 626 (46.2) | 709 (60.7) |\n| race = White (%) | 2540 (62.7) | 280 (68.6) | 656 (68.3) | 735 (51.3) | 869 (69.7) |\n| marital = Partnered (%) | 2240 (55.9) | 223 (54.9) | 517 (54.4) | 780 (55.1) | 720 (58.3) |\n| smoking = Yes (%) | 1066 (26.3) | 157 (38.5) | 227 (23.6) | 431 (30.1) | 251 (20.1) |\n| hypertension = Yes (%) | 1954 (48.3) | 225 (55.1) | 457 (47.6) | 693 (48.3) | 579 (46.5) |\n| hyperlipidemia = Yes (%) | 1723 (42.6) | 191 (46.8) | 442 (46.0) | 540 (37.7) | 550 (44.1) |\n| stroke = Yes (%) | 263 ( 6.5) | 39 ( 9.6) | 56 ( 5.8) | 82 ( 5.7) | 86 ( 6.9) |\n| heart.attack = Yes (%) | 279 ( 6.9) | 38 ( 9.3) | 64 ( 6.7) | 95 ( 6.6) | 82 ( 6.6) |\n| diabetes = Yes (%) | 645 (15.9) | 63 (15.4) | 133 (13.8) | 252 (17.6) | 197 (15.8) |\n| heart.failure = Yes (%) | 232 ( 5.7) | 36 ( 8.8) | 53 ( 5.5) | 77 ( 5.4) | 66 ( 5.3) |\n| pulmonary.disease = Yes (%) | 578 (14.3) | 95 (23.3) | 117 (12.2) | 214 (14.9) | 152 (12.2) |\n| liver.disease = Yes (%) | 242 ( 6.0) | 36 ( 8.8) | 59 ( 6.1) | 88 ( 6.1) | 59 ( 4.7) |\n| arthritis = Yes (%) | 1989 (49.1) | 290 (71.1) | 417 (43.4) | 791 (55.2) | 491 (39.4) |\n| kidney.disease = Yes (%) | 191 ( 4.7) | 27 ( 6.6) | 44 ( 4.6) | 72 ( 5.0) | 48 ( 3.9) |\n| cancer = Yes (%) | 571 (14.1) | 81 (19.9) | 154 (16.0) | 190 (13.2) | 146 (11.7) |\n| regular.drinking = Yes (%) | 1219 (30.1) | 109 (26.7) | 301 (31.3) | 395 (27.5) | 414 (33.2) |\n| hormonalagents = Yes (%) | 1004 (24.8) | 116 (28.4) | 265 (27.6) | 282 (19.7) | 341 (27.4) |\n| anticonvulsant = Yes (%) | 822 (20.3) | 187 (45.8) | 399 (41.5) | 153 (10.7) | 83 ( 6.7) |\n| analgesics = Yes (%) | 2167 (53.5) | 403 (98.8) | 176 (18.3) | 1388 (96.8) | 200 (16.1) |\n| muscle_relax = Yes (%) | 394 ( 9.7) | 96 (23.5) | 53 ( 5.5) | 206 (14.4) | 39 ( 3.1) |\n| gastrointestin = Yes (%) | 1055 (26.1) | 163 (40.0) | 257 (26.7) | 352 (24.5) | 283 (22.7) |\n| cardi_metab_ag = Yes (%) | 2205 (54.5) | 259 (63.5) | 559 (58.2) | 716 (49.9) | 671 (53.9) |\n| resp_antihist = Yes (%) | 952 (23.5) | 151 (37.0) | 150 (15.6) | 444 (31.0) | 207 (16.6) |\n| cns_morethan2 = Yes (%) | 635 (15.7) | 238 (58.3) | 127 (13.2) | 243 (16.9) | 27 ( 2.2) |\n| antidepressants = Yes (%) | 208 ( 5.1) | 52 (12.7) | 88 ( 9.2) | 51 ( 3.6) | 17 ( 1.4) |\n| antidepres_othr = Yes (%) | 472 (11.7) | 71 (17.4) | 119 (12.4) | 135 ( 9.4) | 147 (11.8) |\n| antipsychotics = Yes (%) | 193 ( 4.8) | 26 ( 6.4) | 68 ( 7.1) | 25 ( 1.7) | 74 ( 5.9) |\n| hospitalization.any = Yes (%) | 905 (22.4) | 121 (29.7) | 206 (21.4) | 376 (26.2) | 202 (16.2) |\n| hospitalization.psy = Yes (%) | 856 (21.1) | 95 (23.3) | 271 (28.2) | 155 (10.8) | 335 (26.9) |\n| good.current.health = Yes (%) | 2527 (62.4) | 173 (42.4) | 627 (65.2) | 824 (57.5) | 903 (72.5) |\n| special.health = Yes (%) | 793 (19.6) | 144 (35.3) | 139 (14.5) | 337 (23.5) | 173 (13.9) |\n| regular.ED.care = Yes (%) | 98 ( 2.4) | 13 ( 3.2) | 15 ( 1.6) | 57 ( 4.0) | 13 ( 1.0) |\n| worsening.health = Yes (%) | 865 (21.4) | 131 (32.1) | 197 (20.5) | 359 (25.1) | 178 (14.3) |\n| hospitalization.3plus = Yes(%) | 124 ( 3.1) | 22 ( 5.4) | 21 ( 2.2) | 48 ( 3.3) | 33 ( 2.6) |\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tableone)\nvars <- c(\"age\", \"age.cat\", \"gender\", \"education\", \"poverty.ratio\", \"race\", \n          \"marital\", \"smoking\", \"hypertension\", \"hyperlipidemia\", \"stroke\", \n          \"heart.attack\", \"diabetes\", \"heart.failure\", \"pulmonary.disease\", \n          \"liver.disease\", \"arthritis\", \"kidney.disease\", \"cancer\", \n          \"regular.drinking\", #\"antimicrobial.drugs\", \n          \"hormonalagents\", \"anticonvulsant\", \"analgesics\", \"muscle_relax\", \n          \"gastrointestin\", \"cardi_metab_ag\", \"resp_antihist\", \"cns_morethan2\", \n          #\"ncns_lessthan5\", \n          \"antidepressants\", \"antidepres_othr\", \"antipsychotics\", \n          \"hospitalization.any\", \"hospitalization.psy\", \"good.current.health\",\n          \"special.health\", #\"disabled\",\n          \"regular.ED.care\", \"worsening.health\", \"hospitalization.3plus\"\n          )\ntab1 <- CreateTableOne(vars = vars, strata = \"exposure\", data = dat6, test = F,\n                       addOverall = T)\nprint(tab1, showAllLevels = F)\n#>                                   Stratified by exposure\n#>                                    Overall       BZDs plus opioids\n#>   n                                 4049           408            \n#>   age (mean (SD))                  53.47 (17.06) 55.13 (14.86)    \n#>   age.cat = 60-70y (%)               835 (20.6)     84 (20.6)     \n#>   gender = Male (%)                 1423 (35.1)    157 (38.5)     \n#>   education = College graduate (%)   749 (18.5)     46 (11.3)     \n#>   poverty.ratio = More than 2 (%)   1980 (51.9)    154 (39.8)     \n#>   race = White (%)                  2540 (62.7)    280 (68.6)     \n#>   marital = Partnered (%)           2240 (55.9)    223 (54.9)     \n#>   smoking = Yes (%)                 1066 (26.3)    157 (38.5)     \n#>   hypertension = Yes (%)            1954 (48.3)    225 (55.1)     \n#>   hyperlipidemia = Yes (%)          1723 (42.6)    191 (46.8)     \n#>   stroke = Yes (%)                   263 ( 6.5)     39 ( 9.6)     \n#>   heart.attack = Yes (%)             279 ( 6.9)     38 ( 9.3)     \n#>   diabetes = Yes (%)                 645 (15.9)     63 (15.4)     \n#>   heart.failure = Yes (%)            232 ( 5.7)     36 ( 8.8)     \n#>   pulmonary.disease = Yes (%)        578 (14.3)     95 (23.3)     \n#>   liver.disease = Yes (%)            242 ( 6.0)     36 ( 8.8)     \n#>   arthritis = Yes (%)               1989 (49.1)    290 (71.1)     \n#>   kidney.disease = Yes (%)           191 ( 4.7)     27 ( 6.6)     \n#>   cancer = Yes (%)                   571 (14.1)     81 (19.9)     \n#>   regular.drinking = Yes (%)        1219 (30.1)    109 (26.7)     \n#>   hormonalagents = Yes (%)          1004 (24.8)    116 (28.4)     \n#>   anticonvulsant = Yes (%)           822 (20.3)    187 (45.8)     \n#>   analgesics = Yes (%)              2167 (53.5)    403 (98.8)     \n#>   muscle_relax = Yes (%)             394 ( 9.7)     96 (23.5)     \n#>   gastrointestin = Yes (%)          1055 (26.1)    163 (40.0)     \n#>   cardi_metab_ag = Yes (%)          2205 (54.5)    259 (63.5)     \n#>   resp_antihist = Yes (%)            952 (23.5)    151 (37.0)     \n#>   cns_morethan2 = Yes (%)            635 (15.7)    238 (58.3)     \n#>   antidepressants = Yes (%)          208 ( 5.1)     52 (12.7)     \n#>   antidepres_othr = Yes (%)          472 (11.7)     71 (17.4)     \n#>   antipsychotics = Yes (%)           193 ( 4.8)     26 ( 6.4)     \n#>   hospitalization.any = Yes (%)      905 (22.4)    121 (29.7)     \n#>   hospitalization.psy = Yes (%)      856 (21.1)     95 (23.3)     \n#>   good.current.health = Yes (%)     2527 (62.4)    173 (42.4)     \n#>   special.health = Yes (%)           793 (19.6)    144 (35.3)     \n#>   regular.ED.care = Yes (%)           98 ( 2.4)     13 ( 3.2)     \n#>   worsening.health = Yes (%)         865 (21.4)    131 (32.1)     \n#>   hospitalization.3plus = Yes (%)    124 ( 3.1)     22 ( 5.4)     \n#>                                   Stratified by exposure\n#>                                    BZDs only     Opioids only  Neither      \n#>   n                                  961          1434          1246        \n#>   age (mean (SD))                  56.34 (17.06) 51.54 (17.23) 52.94 (17.21)\n#>   age.cat = 60-70y (%)               190 (19.8)    306 (21.3)    255 (20.5) \n#>   gender = Male (%)                  311 (32.4)    591 (41.2)    364 (29.2) \n#>   education = College graduate (%)   193 (20.1)    208 (14.5)    302 (24.2) \n#>   poverty.ratio = More than 2 (%)    491 (54.3)    626 (46.2)    709 (60.7) \n#>   race = White (%)                   656 (68.3)    735 (51.3)    869 (69.7) \n#>   marital = Partnered (%)            517 (54.4)    780 (55.1)    720 (58.3) \n#>   smoking = Yes (%)                  227 (23.6)    431 (30.1)    251 (20.1) \n#>   hypertension = Yes (%)             457 (47.6)    693 (48.3)    579 (46.5) \n#>   hyperlipidemia = Yes (%)           442 (46.0)    540 (37.7)    550 (44.1) \n#>   stroke = Yes (%)                    56 ( 5.8)     82 ( 5.7)     86 ( 6.9) \n#>   heart.attack = Yes (%)              64 ( 6.7)     95 ( 6.6)     82 ( 6.6) \n#>   diabetes = Yes (%)                 133 (13.8)    252 (17.6)    197 (15.8) \n#>   heart.failure = Yes (%)             53 ( 5.5)     77 ( 5.4)     66 ( 5.3) \n#>   pulmonary.disease = Yes (%)        117 (12.2)    214 (14.9)    152 (12.2) \n#>   liver.disease = Yes (%)             59 ( 6.1)     88 ( 6.1)     59 ( 4.7) \n#>   arthritis = Yes (%)                417 (43.4)    791 (55.2)    491 (39.4) \n#>   kidney.disease = Yes (%)            44 ( 4.6)     72 ( 5.0)     48 ( 3.9) \n#>   cancer = Yes (%)                   154 (16.0)    190 (13.2)    146 (11.7) \n#>   regular.drinking = Yes (%)         301 (31.3)    395 (27.5)    414 (33.2) \n#>   hormonalagents = Yes (%)           265 (27.6)    282 (19.7)    341 (27.4) \n#>   anticonvulsant = Yes (%)           399 (41.5)    153 (10.7)     83 ( 6.7) \n#>   analgesics = Yes (%)               176 (18.3)   1388 (96.8)    200 (16.1) \n#>   muscle_relax = Yes (%)              53 ( 5.5)    206 (14.4)     39 ( 3.1) \n#>   gastrointestin = Yes (%)           257 (26.7)    352 (24.5)    283 (22.7) \n#>   cardi_metab_ag = Yes (%)           559 (58.2)    716 (49.9)    671 (53.9) \n#>   resp_antihist = Yes (%)            150 (15.6)    444 (31.0)    207 (16.6) \n#>   cns_morethan2 = Yes (%)            127 (13.2)    243 (16.9)     27 ( 2.2) \n#>   antidepressants = Yes (%)           88 ( 9.2)     51 ( 3.6)     17 ( 1.4) \n#>   antidepres_othr = Yes (%)          119 (12.4)    135 ( 9.4)    147 (11.8) \n#>   antipsychotics = Yes (%)            68 ( 7.1)     25 ( 1.7)     74 ( 5.9) \n#>   hospitalization.any = Yes (%)      206 (21.4)    376 (26.2)    202 (16.2) \n#>   hospitalization.psy = Yes (%)      271 (28.2)    155 (10.8)    335 (26.9) \n#>   good.current.health = Yes (%)      627 (65.2)    824 (57.5)    903 (72.5) \n#>   special.health = Yes (%)           139 (14.5)    337 (23.5)    173 (13.9) \n#>   regular.ED.care = Yes (%)           15 ( 1.6)     57 ( 4.0)     13 ( 1.0) \n#>   worsening.health = Yes (%)         197 (20.5)    359 (25.1)    178 (14.3) \n#>   hospitalization.3plus = Yes (%)     21 ( 2.2)     48 ( 3.3)     33 ( 2.6)\n```\n:::\n\n\n## Question III: \n\n### 3(a) Regression\n\nConsider all-cause mortality as a binary variable. Run logistic regression model for finding the association between Benzodiazepine Use With or Without Opioid Use (the exposure variable created in 1(d)) and all-cause mortality (the outcome variable). Adjust the model for three confounders: sex, age, and race/ethnicity. Also, use the `Neither` as the reference category for the exposure variable. Please note that we will not be using survey features (e.g., PSU, strata, weight) in this exercise. However, we will learn how to utilize these survey features in the [Survey data analysis](https://ehsanx.github.io/EpiMethods/surveydata.html) lab.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#table(dat6$mortstat)\ndat6$exposure <- relevel(dat6$exposure, ref = \"Neither\")\n\n# Logistic\nfit <- glm(mortstat ~ exposure + age + gender + race, data = dat6, \n           family = \"binomial\")\n```\n:::\n\n\n### 3(b) Reporting odds ratio\n\nReport the odds ratios and associated confidence intervals.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(Publish)\npublish(fit)\n#>  Variable             Units OddsRatio       CI.95    p-value \n#>  exposure           Neither       Ref                        \n#>           BZDs plus opioids      1.84 [1.37;2.48]    < 1e-04 \n#>                   BZDs only      1.08 [0.85;1.37]   0.516343 \n#>                Opioids only      1.38 [1.11;1.73]   0.004381 \n#>       age                        1.10 [1.09;1.11]    < 1e-04 \n#>    gender            Female       Ref                        \n#>                        Male      1.70 [1.42;2.04]    < 1e-04 \n#>      race         Non-White       Ref                        \n#>                       White      1.16 [0.96;1.39]   0.120046\n```\n:::\n\n\n \n",
    "supporting": [
      "accessingE2solution_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}