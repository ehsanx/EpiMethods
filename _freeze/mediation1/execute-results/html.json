{
  "hash": "59d232f8660a21a0759a019501e3e6ca",
  "result": {
    "markdown": "## Baron and Kenny {.unnumbered}\n\n\n::: {.cell hash='mediation1_cache/html/setup_23942f4fe8c494d8ae9a524a7c910fc1'}\n\n```{.r .cell-code}\n# Load required packages\nrequire(simcausal)\n```\n:::\n\n\nBig data: **What if we had 1,000,000 (1 million) observations?**\n\n### Continuous outcome, continuous mediator\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='mediation1_cache/html/m11_76edd117b1d962fe67427a4ae2061c97'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n    node(\"A\", distr = \"rnorm\", mean = 0, sd = 1) + \n    node(\"M\", distr = \"rnorm\", mean = 0.5 * A, sd = 1) + \n    node(\"Y\", distr = \"rnorm\", mean = 0.5 * M + 1.3 * A, sd = .1)\nDset <- set.DAG(D)\n#> ...automatically assigning order attribute to some nodes...\n#> node A, order:1\n#> node M, order:2\n#> node Y, order:3\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='mediation1_cache/html/m12_40bdeb9f7aaf6b7949b7e64770a5a4db'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n#> using the following vertex attributes:\n#> 120.8NAdarkbluenone0\n#> using the following edge attributes:\n#> 0.50.40.7black1\n```\n\n::: {.cell-output-display}\n![](mediation1_files/figure-html/m12-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell hash='mediation1_cache/html/m13_deb2aba1cd85ad4ef804d548668aba86'}\n\n```{.r .cell-code}\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\n#> simulating observed dataset from the DAG object\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"M\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"-1.2883086\",\"4\":\"-1.3953599\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"1.2398506\",\"4\":\"0.3695715\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"0.3103793\",\"4\":\"2.1781918\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"1.5034478\",\"4\":\"0.8197663\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"0.5072003\",\"4\":\"0.3199635\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"1.0037356\",\"4\":\"2.6603537\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (beta-coef)\n\n\n::: {.cell hash='mediation1_cache/html/m14_9991be0d20e60f96b898777721c88d0c'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A, family=\"gaussian\", data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A \n#>        0.00        1.55\nfit.am <- glm(Y ~ A + M, family=\"gaussian\", data=Obs.Data)\nround(coef(fit.am),2)\n#> (Intercept)           A           M \n#>         0.0         1.3         0.5\nfit.m <- glm(M ~ A, family=\"gaussian\", data=Obs.Data)\nround(coef(fit.m),2)\n#> (Intercept)           A \n#>         0.0         0.5\n```\n:::\n\n::: {.cell hash='mediation1_cache/html/m15_4e3f23f7cfeee388733b6bd6766dea39'}\n\n```{.r .cell-code}\n# from 1st model\na.coef <- round(coef(fit),2)[2]\na.coef\n#>    A \n#> 1.55\n# from 2nd (adjusted) model\nam.coef <- round(coef(fit.am),2)[2]\nam.coef\n#>   A \n#> 1.3\nm.coef <- round(coef(fit.am),2)[3]\nm.coef\n#>   M \n#> 0.5\n# from 3rd (mediator) model\nma.coef <- round(coef(fit.m),2)[2]\nma.coef\n#>   A \n#> 0.5\n```\n:::\n\n\n#### Baron and Kenny (1986) approach 1\n\n\n::: {.cell hash='mediation1_cache/html/m16_0be20b336d06d09e5ef5abc001eb0b47'}\n\n```{.r .cell-code}\n# Direct effect\nam.coef\n#>   A \n#> 1.3\n# Total effect\na.coef\n#>    A \n#> 1.55\n# Indirect effect\na.coef - am.coef\n#>    A \n#> 0.25\n```\n:::\n\n\n#### Baron and Kenny (1986) approach 2\n\n\n::: {.cell hash='mediation1_cache/html/m17_bee998d7d76a655c0d13fff93a126709'}\n\n```{.r .cell-code}\n# Indirect effect\nm.coef * ma.coef\n#>    M \n#> 0.25\n```\n:::\n\n\n### Binary outcome, continuous mediator\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='mediation1_cache/html/m18_d0032d2e472fa764bbde7d558f7c06c9'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n  node(\"A\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"M\", distr = \"rnorm\", mean = 0.5 * A, sd = 1) + \n  node(\"Y\", distr = \"rbern\", prob = plogis(0.5 * M + 1.3 * A)) \nDset <- set.DAG(D)\n#> ...automatically assigning order attribute to some nodes...\n#> node A, order:1\n#> node M, order:2\n#> node Y, order:3\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='mediation1_cache/html/m19_34a8848ceb031b0f03b632d7fdf42189'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n#> using the following vertex attributes:\n#> 120.8NAdarkbluenone0\n#> using the following edge attributes:\n#> 0.50.40.7black1\n```\n\n::: {.cell-output-display}\n![](mediation1_files/figure-html/m19-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell hash='mediation1_cache/html/m20_aef374202abce0125dbaaf1dd1d89539'}\n\n```{.r .cell-code}\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\n#> simulating observed dataset from the DAG object\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"M\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[4],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"-1.2883086\",\"4\":\"0\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"1.2398506\",\"4\":\"0\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"0.3103793\",\"4\":\"1\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"1.5034478\",\"4\":\"1\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"0.5072003\",\"4\":\"1\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"1.0037356\",\"4\":\"1\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (beta-coef)\n\n\n::: {.cell hash='mediation1_cache/html/m21_9ba8bbaa35190d60ed2be810c60d8427'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A \n#>        0.00        1.48\nfit.am <- glm(Y ~ A + M, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit.am),2)\n#> (Intercept)           A           M \n#>         0.0         1.3         0.5\nfit.m <- glm(M ~ A, family=\"gaussian\", data=Obs.Data)\nround(coef(fit.m),2)\n#> (Intercept)           A \n#>         0.0         0.5\n```\n:::\n\n::: {.cell hash='mediation1_cache/html/m22_f3076a297ed936d6dd007e6d431c2813'}\n\n```{.r .cell-code}\n# from 1st model\na.coef <- round(coef(fit),2)[2]\na.coef\n#>    A \n#> 1.48\n# from 2nd (adjusted) model\nam.coef <- round(coef(fit.am),2)[2]\nam.coef\n#>   A \n#> 1.3\nm.coef <- round(coef(fit.am),2)[3]\nm.coef\n#>   M \n#> 0.5\n# from 3rd (mediator) model\nma.coef <- round(coef(fit.m),2)[2]\nma.coef\n#>   A \n#> 0.5\n```\n:::\n\n\n#### Baron and Kenny (1986) approach 1\n\n\n::: {.cell hash='mediation1_cache/html/m23_b8d9b262dd72cf8b923b4e7be151f63a'}\n\n```{.r .cell-code}\n# Direct effect\nam.coef\n#>   A \n#> 1.3\n# Total effect\na.coef\n#>    A \n#> 1.48\n# Indirect effect\na.coef - am.coef\n#>    A \n#> 0.18\n```\n:::\n\n\n#### Baron and Kenny (1986) approach 2\n\n\n::: {.cell hash='mediation1_cache/html/m24_f229e67b75ee72df8fcfa1bd3bac8bd6'}\n\n```{.r .cell-code}\n# Indirect effect\nm.coef * ma.coef\n#>    M \n#> 0.25\n```\n:::\n\n\n### Binary outcome, binary mediator\n\n-   True treatment effect = 1.3\n\n#### Data generating process\n\n\n::: {.cell hash='mediation1_cache/html/m25_bf308a80d9665a4fe1df6b7f6c29f798'}\n\n```{.r .cell-code}\nrequire(simcausal)\nD <- DAG.empty()\nD <- D + \n  node(\"A\", distr = \"rnorm\", mean = 0, sd = 1) + \n  node(\"M\", distr = \"rbern\", prob = plogis(0.5 * A)) + \n  node(\"Y\", distr = \"rbern\", prob = plogis(0.5 * M + 1.3 * A)) \nDset <- set.DAG(D)\n#> ...automatically assigning order attribute to some nodes...\n#> node A, order:1\n#> node M, order:2\n#> node Y, order:3\n```\n:::\n\n\n#### Generate DAG\n\n\n::: {.cell hash='mediation1_cache/html/m26_91ea80e4bb920793085da58b1f37a4a7'}\n\n```{.r .cell-code}\nplotDAG(Dset, xjitter = 0.1, yjitter = .9,\n        edge_attrs = list(width = 0.5, arrow.width = 0.4, arrow.size = 0.7),\n        vertex_attrs = list(size = 12, label.cex = 0.8))\n#> using the following vertex attributes:\n#> 120.8NAdarkbluenone0\n#> using the following edge attributes:\n#> 0.50.40.7black1\n```\n\n::: {.cell-output-display}\n![](mediation1_files/figure-html/m26-1.png){width=672}\n:::\n:::\n\n\n#### Generate Data\n\n\n::: {.cell hash='mediation1_cache/html/m27_7e7d2a480b0611609942f084874d8d60'}\n\n```{.r .cell-code}\nObs.Data <- sim(DAG = Dset, n = 1000000, rndseed = 123)\n#> simulating observed dataset from the DAG object\nhead(Obs.Data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"ID\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"A\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"M\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Y\"],\"name\":[4],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"-0.56047565\",\"3\":\"0\",\"4\":\"1\",\"_rn_\":\"1\"},{\"1\":\"2\",\"2\":\"-0.23017749\",\"3\":\"0\",\"4\":\"1\",\"_rn_\":\"2\"},{\"1\":\"3\",\"2\":\"1.55870831\",\"3\":\"0\",\"4\":\"1\",\"_rn_\":\"3\"},{\"1\":\"4\",\"2\":\"0.07050839\",\"3\":\"0\",\"4\":\"0\",\"_rn_\":\"4\"},{\"1\":\"5\",\"2\":\"0.12928774\",\"3\":\"1\",\"4\":\"0\",\"_rn_\":\"5\"},{\"1\":\"6\",\"2\":\"1.71506499\",\"3\":\"0\",\"4\":\"1\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### Estimate effect (beta-coef)\n\n\n::: {.cell hash='mediation1_cache/html/m28_b5d3d341b24a63c0105cdc20607eda50'}\n\n```{.r .cell-code}\nfit <- glm(Y ~ A, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit),2)\n#> (Intercept)           A \n#>        0.25        1.34\nfit.am <- glm(Y ~ A + M, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit.am),2)\n#> (Intercept)           A           M \n#>         0.0         1.3         0.5\nfit.m <- glm(M ~ A, family=binomial(link = \"logit\"), data=Obs.Data)\nround(coef(fit.m),2)\n#> (Intercept)           A \n#>         0.0         0.5\n```\n:::\n\n::: {.cell hash='mediation1_cache/html/m29_fa58f866cb660da4c50188536a2b9709'}\n\n```{.r .cell-code}\n# from 1st model\na.coef <- round(coef(fit),2)[2]\na.coef\n#>    A \n#> 1.34\n# from 2nd (adjusted) model\nam.coef <- round(coef(fit.am),2)[2]\nam.coef\n#>   A \n#> 1.3\nm.coef <- round(coef(fit.am),2)[3]\nm.coef\n#>   M \n#> 0.5\n# from 3rd (mediator) model\nma.coef <- round(coef(fit.m),2)[2]\nma.coef\n#>   A \n#> 0.5\n```\n:::\n\n\n#### Baron and Kenny (1986) approach 1\n\n\n::: {.cell hash='mediation1_cache/html/m30_139558dd4ce2db3ba5f1557a2e97cb65'}\n\n```{.r .cell-code}\n# Direct effect\nam.coef\n#>   A \n#> 1.3\n# Total effect\na.coef\n#>    A \n#> 1.34\n# Indirect effect\na.coef - am.coef\n#>    A \n#> 0.04\n```\n:::\n\n\n#### Baron and Kenny (1986) approach 2\n\n\n::: {.cell hash='mediation1_cache/html/m31_4949157141050c109ebc0b5da5de0a14'}\n\n```{.r .cell-code}\n# Indirect effect\nm.coef * ma.coef\n#>    M \n#> 0.25\n```\n:::\n\n\n\n### Video content (optional)\n\n::: callout-tip\nFor those who prefer a video walkthrough, feel free to watch the video below, which offers a description of an earlier version of the above content.\n:::\n\n::: {style=\"position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\"}\n<iframe src=\"https://www.youtube.com/embed/gdtBdvyVZYk\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;\" allowfullscreen>\n\n</iframe>\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}