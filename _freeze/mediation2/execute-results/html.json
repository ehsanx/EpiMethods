{
  "hash": "e5a43deec2d7c2de5bf73bcee70112a9",
  "result": {
    "markdown": "## Justification {.unnumbered}\n\n\n::: {.cell hash='mediation2_cache/html/setup_5b3355640b9ad53e6477c1272c02f40e'}\n\n```{.r .cell-code}\n# Load required packages\nrequire(survey)\nrequire(DiagrammeR)\nrequire(DiagrammeRsvg)\nrequire(rsvg)\nlibrary(magrittr)\nlibrary(svglite)\nlibrary(png)\n```\n:::\n\n\n### Pre-processing\n\n#### Load saved data\n\n\n::: {.cell hash='mediation2_cache/html/loading_9ea16333735afe1b811d1ecf076c0769'}\n\n```{.r .cell-code}\nload(\"Data/mediation/cchs123pain.RData\")\n```\n:::\n\n\n#### Prepared the data\n\n\n::: {.cell hash='mediation2_cache/html/prepare_21ad13e1d136e995e3facb4eada75cfc'}\n\n```{.r .cell-code}\nanalytic.miss$mediator <- ifelse(analytic.miss$painmed == \"Yes\", 1, 0)\nanalytic.miss$exposure <- ifelse(analytic.miss$OA == \"OA\", 1, 0)\nanalytic.miss$outcome <- ifelse(analytic.miss$CVD == \"event\", 1, 0)\n```\n:::\n\n\n### Analysis\n\n-   Outcome ($Y$): CVD\n-   Exposure ($A$): OA\n-   Mediator ($M$): Pain medication\n-   Adjustment covariates ($C$)\n\n#### Hypothesis\n\n1.  For total effect (TE): Is OA ($A$) associated with CVD ($Y$)?\n\n\n::: {.cell hash='mediation2_cache/html/h00_693627ccab769c7156455f832742f6b4'}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](images/mediation/H00relation.png){width=50%}\n:::\n:::\n\n\n2.  For mediation analysis: Does pain-medication ($M$) play a mediating role in the causal payway between OA ($A$) and CVD ($Y$)? Here, we will decompose total effect (TE) to a natural direct effect (NDE) and a natural indirect effect (NIE).\n\n\n::: {.cell hash='mediation2_cache/html/h01_10301a737b780fab0506ab8a51ea2cde'}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](Images/mediation/H01relation.png){width=50%}\n:::\n:::\n\n\nAdjustment variables ($C$):\n\n-   Demographics\n    -   age\n    -   sex\n    -   income\n    -   race\n    -   education status\n-   Important confounders\n    -   BMI\n    -   physical activity\n    -   smoking status\n    -   fruit and vegetable consumption\n-   Relation with other diseases\n    -   hypertension\n    -   COPD\n    -   diabetes\n\n#### Total effect\n\nOutcome model (weighted) is\n\n$logit [P(Y_{a}=1 | C = c] = \\theta_0 + \\theta_1 a + \\theta_3 c$\n\n#### Setting Design\n\n\n::: {.cell hash='mediation2_cache/html/design_581603df487cdafbad7ce69eed52f133'}\n\n```{.r .cell-code}\nrequire(survey)\nsummary(analytic.miss$weight)\n#>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n#>    0.39   21.76   42.21   66.70   81.07 2384.98\nw.design0 <- svydesign(id=~1, weights=~weight, \n                      data=analytic.miss)\nsummary(weights(w.design0))\n#>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n#>    0.39   21.76   42.21   66.70   81.07 2384.98\nsd(weights(w.design0))\n#> [1] 80.34263\nw.design <- subset(w.design0, miss == 0)\nsummary(weights(w.design))\n#>     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. \n#>    2.053   28.480   53.218   82.472  102.860 1295.970\nsd(weights(w.design))\n#> [1] 91.98946\n```\n:::\n\n::: {.cell hash='mediation2_cache/html/te_2d67a9a0edaf57e31fe25dc98981b3ee'}\n\n```{.r .cell-code}\nTE <- svyglm(outcome ~ exposure + \n               age + sex + income + race + bmi + edu +\n               phyact + smoke + fruit + diab, \n                    design = w.design, \n                    family = quasibinomial(\"logit\"))\n# painmed is mediator; not included here.\nTE.save <- exp(c(summary(TE)$coef[\"exposure\",1], \n                confint(TE)[\"exposure\",]))\nTE.save\n#>             2.5 %   97.5 % \n#> 1.537005 1.230735 1.919489\n```\n:::\n\n\nExposure to OA has a detrimental effect on CVD risk (significant!).\n\n#### Effect on the mediators\n\n\n::: {.cell hash='mediation2_cache/html/mediator_33149a96936c33abb703aceb861def78'}\n\n```{.r .cell-code}\nfit.m = svyglm(mediator ~ exposure + \n                 age + sex + income + race + bmi + edu +\n                 phyact + smoke + fruit + diab,\n                design = w.design, \n                family = binomial(\"logit\"))\n#> Warning in eval(family$initialize): non-integer #successes in a binomial glm!\nmed.save <- exp(c(summary(fit.m)$coef[\"exposure\",1], \n                confint(fit.m)[\"exposure\",]))\nmed.save\n#>             2.5 %   97.5 % \n#> 2.428463 2.059265 2.863853\n```\n:::\n\n\nExposure to OA has a substantial effect on the mediator (Pain medication) as well (significant!). It will be interesting to explore a mediation analysis to assess the mediating role.\n\n### Save data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsave(w.design, file = \"Data/mediation/cchs123painW.RData\")\n```\n:::\n\n\n\n### Video content (optional)\n\n::: callout-tip\nFor those who prefer a video walkthrough, feel free to watch the video below, which offers a description of an earlier version of the above content.\n:::\n\n::: {style=\"position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\"}\n<iframe src=\"https://www.youtube.com/embed/vh0TJV3aSi4\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;\" allowfullscreen>\n\n</iframe>\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}