{
  "hash": "c434225600ae3222d5f05fa9475277de",
  "result": {
    "markdown": "## Motivation {.unnumbered}\n\n-   When using methods like propensity score approaches, we are making assumptions about the model specification. For example, we must specify any interaction terms.\n\n-   With machine learning methods, these assumptions can be relaxed somewhat, as some machine learning methods allow automatic detection of data structures such as interactions.\n\n-   However, machine learning was created for prediction modeling, not with causal inference in mind. Statistical inference such as calculating standard errors and confidence intervals is not as straightforward since the estimator given by machine learning methods does not follow a known statistical distribution. By contrast, the estimators resulting from a standard regression using maximum likelihood estimation will follow an approximately normal distribution, where it is easy to calculate standard errors and confidence intervals.\n\n-   **Targeted maximum likelihood estimation (TMLE)** is a causal inference method that can incorporate machine learning in a way that still allows straightforward statistical inference based on theoretical development grounded in semi-parametric theory.\n\n    -   TMLE is a **doubly robust** method. This means it uses both the exposure (AKA propensity score) model *and* the outcome model. As long as *one* of these models is correctly specified, TMLE will give a **consistent estimator**, meaning it gets closer and closer to the true value as the sample size increases.\n\n    -   Since TMLE uses both the exposure and the outcome model, machine learning can be used in each of these intermediary modeling steps while allowing straightforward statistical inference.\n\n-   It has been shown that TMLE outperform singly robust methods with machine learning, such as IPTW.\n\n\n\n\n\n\n\n\n\n### Revisiting RHC Data  {-}\n\n::: callout-note\nThis tutorial uses the same data as some of the previous tutorials, including [working with a predictive question](researchquestion1.html), [machine learning with a continuous outocome](machinelearning1.html), and [machine learning with a binary outcome](machinelearning4.html).\n:::\n\n\n\n\n::: {.cell hash='machinelearningCausal1_cache/pdf/unnamed-chunk-1_9ee4a2b9c348e85f4ff96fb82e660426'}\n\n```{.r .cell-code}\nObsData <- readRDS(file = \n                     \"Data/machinelearningCausal/rhcAnalyticTest.RDS\")\nbaselinevars <- names(dplyr::select(ObsData, \n                         !c(RHC.use,Length.of.Stay,Death)))\nhead(ObsData)\n#>   Disease.category          Cancer Cardiovascular Congestive.HF Dementia\n#> 1            Other Localized (Yes)              0             0        0\n#> 2             MOSF            None              1             1        0\n#> 3             MOSF Localized (Yes)              0             0        0\n#> 4              ARF            None              0             0        0\n#> 5             MOSF            None              0             0        0\n#> 6            Other            None              0             1        0\n#>   Psychiatric Pulmonary Renal Hepatic GI.Bleed Tumor Immunosupperssion\n#> 1           0         1     0       0        0     1                 0\n#> 2           0         0     0       0        0     0                 1\n#> 3           0         0     0       0        0     1                 1\n#> 4           0         0     0       0        0     0                 1\n#> 5           0         0     0       0        0     0                 0\n#> 6           0         1     0       0        0     0                 0\n#>   Transfer.hx MI       age    sex       edu DASIndex APACHE.score\n#> 1           0  0   [70,80)   Male 12.000000 23.50000           46\n#> 2           1  0   [70,80) Female 12.000000 14.75195           50\n#> 3           0  0 [-Inf,50) Female 14.069916 18.13672           82\n#> 4           0  0   [70,80) Female  9.000000 22.92969           48\n#> 5           0  0   [60,70)   Male  9.945259 21.05078           72\n#> 6           0  0 [80, Inf) Female  8.000000 17.50000           38\n#>   Glasgow.Coma.Score blood.pressure         WBC Heart.rate Respiratory.rate\n#> 1                  0             41 22.09765620        124               10\n#> 2                  0             63 28.89843750        137               38\n#> 3                  0             57  0.04999542        130               40\n#> 4                  0             55 23.29687500         58               26\n#> 5                 41             65 29.69921880        125               27\n#> 6                  0            115 18.00000000        134               36\n#>   Temperature PaO2vs.FIO2  Albumin Hematocrit Bilirubin Creatinine Sodium\n#> 1    38.69531     68.0000 3.500000   58.00000 1.0097656  1.1999512    145\n#> 2    38.89844    218.3125 2.599609   32.50000 0.6999512  0.5999756    137\n#> 3    36.39844    275.5000 3.500000   21.09766 1.0097656  2.5996094    146\n#> 4    35.79688    156.6562 3.500000   26.29688 0.3999634  1.6999512    117\n#> 5    34.79688    478.0000 3.500000   24.00000 1.0097656  3.5996094    126\n#> 6    39.19531    184.1875 3.099609   30.50000 1.0097656  1.3999023    138\n#>   Potassium PaCo2       PH   Weight DNR.status  Medical.insurance\n#> 1  4.000000    40 7.359375 64.69995         No           Medicare\n#> 2  3.299805    34 7.329102 45.69998         No Private & Medicare\n#> 3  2.899902    16 7.359375  0.00000         No            Private\n#> 4  5.799805    30 7.459961 54.59998         No Private & Medicare\n#> 5  5.799805    17 7.229492 78.39996        Yes           Medicare\n#> 6  5.399414    68 7.299805 54.89999         No           Medicare\n#>   Respiratory.Diag Cardiovascular.Diag Neurological.Diag Gastrointestinal.Diag\n#> 1              Yes                 Yes                No                    No\n#> 2               No                  No                No                    No\n#> 3               No                 Yes                No                    No\n#> 4              Yes                  No                No                    No\n#> 5               No                 Yes                No                    No\n#> 6              Yes                  No                No                    No\n#>   Renal.Diag Metabolic.Diag Hematologic.Diag Sepsis.Diag Trauma.Diag\n#> 1         No             No               No          No          No\n#> 2         No             No               No         Yes          No\n#> 3         No             No               No          No          No\n#> 4         No             No               No          No          No\n#> 5         No             No               No          No          No\n#> 6         No             No               No          No          No\n#>   Orthopedic.Diag  race     income Length.of.Stay Death RHC.use\n#> 1              No white Under $11k              9     0       0\n#> 2              No white Under $11k             45     1       1\n#> 3              No white   $25-$50k             60     0       1\n#> 4              No white   $11-$25k             37     1       0\n#> 5              No white Under $11k              2     1       1\n#> 6              No white Under $11k              7     0       0\n```\n:::\n\n\n\n\n### Table 1  {-}\n\nOnly for some demographic and comorbidity variables; matches with Table 1 in @connors1996effectiveness.\n\n\n\n\n::: {.cell hash='machinelearningCausal1_cache/pdf/unnamed-chunk-2_ac6441fd529ad9381dc495bd68e5ab80'}\n\n```{.r .cell-code}\ntab0 <- CreateTableOne(vars = c(\"age\", \"sex\", \"race\", \n                                \"Disease.category\", \"Cancer\"),\n                       data = ObsData, \n                       strata = \"RHC.use\", \n                       test = FALSE)\nprint(tab0, showAllLevels = FALSE)\n#>                       Stratified by RHC.use\n#>                        0            1           \n#>   n                    3551         2184        \n#>   age (%)                                       \n#>      [-Inf,50)          884 (24.9)   540 (24.7) \n#>      [50,60)            546 (15.4)   371 (17.0) \n#>      [60,70)            812 (22.9)   577 (26.4) \n#>      [70,80)            809 (22.8)   529 (24.2) \n#>      [80, Inf)          500 (14.1)   167 ( 7.6) \n#>   sex = Female (%)     1637 (46.1)   906 (41.5) \n#>   race (%)                                      \n#>      white             2753 (77.5)  1707 (78.2) \n#>      black              585 (16.5)   335 (15.3) \n#>      other              213 ( 6.0)   142 ( 6.5) \n#>   Disease.category (%)                          \n#>      ARF               1581 (44.5)   909 (41.6) \n#>      CHF                247 ( 7.0)   209 ( 9.6) \n#>      Other              955 (26.9)   208 ( 9.5) \n#>      MOSF               768 (21.6)   858 (39.3) \n#>   Cancer (%)                                    \n#>      None              2652 (74.7)  1727 (79.1) \n#>      Localized (Yes)    638 (18.0)   334 (15.3) \n#>      Metastatic         261 ( 7.4)   123 ( 5.6)\n```\n:::\n\n::: {.cell hash='machinelearningCausal1_cache/pdf/unnamed-chunk-3_91bdec00bdae7350e149be016fa92df8'}\n\n:::\n\n\n\n\n\n### References  {-}",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}