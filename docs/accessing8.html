<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Advanced Epidemiological Methods - Replicate Data Creation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./accessingF.html" rel="next">
<link href="./accessing7.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CVBPG0RQMY"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CVBPG0RQMY', { 'anonymize_ip': true});
</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<meta name="twitter:title" content="Advanced Epidemiological Methods - Replicate Data Creation">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./accessing.html">Accessing data</a></li><li class="breadcrumb-item"><a href="./accessing8.html">Replicate Data Creation</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Advanced Epidemiological Methods</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Project</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data wrangling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1c.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Automating tasks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Importing dataset</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data manipulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Import external data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summary tables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Functions (W)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (W)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App (W)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (W)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./accessing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accessing data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (A)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Survey data sources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing1i.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Descriptions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Importing CCHS to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Importing NHANES to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reproducing NHANES results</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Importing NHIS to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linking mortality data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing8.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Replicate Data Creation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Functions (A)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (A)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App (A)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 1 (A)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingEsolution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 1 Solution (A)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingE2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 2 (A)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./researchquestion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research questions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (Q)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive question-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive question-2a</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive question-2b</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Causal question-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Causal question-2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (Q)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (Q)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App (Q)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./confounding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Causal roles</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (R)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Confounding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mediator</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collider</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding3b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simpsonâ€™s Paradox</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Z-bias</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collapsibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Change-in-estimate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (R)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (R)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 1 (R)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingE2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 2 (R)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./predictivefactors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prediction ideas</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (P)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collinear predictors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Binary outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overfitting and performance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Splitting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cross-validation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bootstrap</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (P)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (P)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./surveydata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Survey data analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (D)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Revisiting PICOT</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Assessing data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Bivariate analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Performance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NHANES: Blood Pressure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NHANES: Cholesterol</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NHANES: Subsetting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (D)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (D)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App (D)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (D)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./missingdata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing data analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (M)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Imputation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Imputation in NHANES</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing in outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Performance with NA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subpopulations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MCAR tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Effect modification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (M)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (M)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App (M)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (M)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./propensityscore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Propensity score</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (S)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exact Matching (CCHS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM in OA-CVD (CCHS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM in OA-CVD (US)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM in BMI-diabetes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM with MI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PS Weighting (US)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM with MI in subset</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSW with MI in subset</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSW with multiple tx</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (S)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (S)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App (S)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (S)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Machine learning (ML)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (L)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data spliting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cross-validation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Binary outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Supervised learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unsupervised learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning6a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NHIS Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning6b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Replicate Results</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (L)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (L)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (L)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearningCausal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ML in causal inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (C)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SuperLearner</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Binary Outcomes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous Outcomes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comparing results</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausalQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (C)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausalF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (C)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./nonbinary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Complex outcomes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (N)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Polytomous and ordinal</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Survival analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary2a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Survival analysis: NHANES</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Poisson</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinaryF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (N)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinaryQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (N)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./longitudinal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Longitudinal data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinal0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (T)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinal1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed effects models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinal2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GEE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinalF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (T)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinalQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (T)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./mediation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mediation analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts (I)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Baron and Kenny</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Justification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mediation Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediationF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (I)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediationQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (I)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./reporting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reporting1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collaborative Writing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reporting2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Formatting Tools</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#national-health-and-nutrition-examination-survey-nhanes" id="toc-national-health-and-nutrition-examination-survey-nhanes" class="nav-link active" data-scroll-target="#national-health-and-nutrition-examination-survey-nhanes">National Health and Nutrition Examination Survey (NHANES)</a></li>
  <li><a href="#current-analysis" id="toc-current-analysis" class="nav-link" data-scroll-target="#current-analysis">Current Analysis</a></li>
  <li><a href="#general-aim" id="toc-general-aim" class="nav-link" data-scroll-target="#general-aim">General aim</a></li>
  <li><a href="#picot-of-the-analysis" id="toc-picot-of-the-analysis" class="nav-link" data-scroll-target="#picot-of-the-analysis">PICOT of the Analysis</a></li>
  <li><a href="#variables-under-consideration" id="toc-variables-under-consideration" class="nav-link" data-scroll-target="#variables-under-consideration">Variables under consideration</a></li>
  <li><a href="#code-hints" id="toc-code-hints" class="nav-link" data-scroll-target="#code-hints">Code Hints</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./accessing.html">Accessing data</a></li><li class="breadcrumb-item"><a href="./accessing8.html">Replicate Data Creation</a></li></ol></nav><div class="quarto-title">
<h1 class="title">Replicate Data Creation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="national-health-and-nutrition-examination-survey-nhanes" class="level3"><h3 class="anchored" data-anchor-id="national-health-and-nutrition-examination-survey-nhanes">National Health and Nutrition Examination Survey (NHANES)</h3>
<p>The National Health and Nutrition Examination Survey (NHANES) is a program of studies designed to assess the health and nutritional status of adults and children in the United States. The survey is unique in that it combines interviews, physical examinations, and laboratory data, providing comprehensive health information. NHANES data are collected by the National Center for Health Statistics (NCHS), part of the Centers for Disease Control and Prevention (CDC). NHANES has data releases in two-year cycles. Each cycle contains a representative sample of the U.S. population, collected using a complex, multistage probability sampling design. NHANES is also linked to <strong>mortality data</strong> through the National Death Index (NDI), allowing researchers to examine the relationship between health status, risk factors, and mortality.</p>
</section><section id="current-analysis" class="level3"><h3 class="anchored" data-anchor-id="current-analysis">Current Analysis</h3>
<p>The NHANES datasets used in this analysis for <a href="accessingE2.html">lab exercise (2)</a> are extracted from multiple cycles (1999-2014) and harmonized to ensure consistency across survey waves. The variables examined in this study include demographic information, health status, medical conditions, prescription medication use, and mortality status.</p>
</section><section id="general-aim" class="level3"><h3 class="anchored" data-anchor-id="general-aim">General aim</h3>
<p>The primary aim of this analysis is to investigate the association between benzodiazepine use, with or without opioids, and all-cause mortality in adults aged 20 years or older. The study will compare the mortality risk between benzodiazepine users and a comparator group using selective serotonin reuptake inhibitors (SSRIs). The analysis will adjust for potential confounders.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="accessing8_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="picot-of-the-analysis" class="level3"><h3 class="anchored" data-anchor-id="picot-of-the-analysis">PICOT of the Analysis</h3>
<ul>
<li><p>P (Population): Adults aged 20 years or older who participated in the NHANES from 1999 to 2015.</p></li>
<li><p>I (Intervention): Use of benzodiazepines with or without opioids.</p></li>
<li><p>C (Comparison): Selective serotonin reuptake inhibitors (SSRIs) as an active comparator group. This group includes individuals using SSRIs but not opioids or benzodiazepines.</p></li>
<li><p>O (Outcome): All-cause mortality, ascertained via linkage to the National Death Index. The hazard ratios for mortality were compared between the intervention groups and the SSRI comparator group.</p></li>
<li><p>T (Time): 1999 to 2015. A median follow-up time of 6.7 years (range, 0.2 to 16.8 years) was used to measure outcomes.</p></li>
</ul></section><section id="variables-under-consideration" class="level3"><h3 class="anchored" data-anchor-id="variables-under-consideration">Variables under consideration</h3>
<section id="mortality-data" class="level4"><h4 class="anchored" data-anchor-id="mortality-data">1. Mortality Data</h4>
<p>The mortality data is critical for assessing all-cause mortality and linking it to other variables such as medication use and comorbidities. NHANES data is linked to the National Death Index (NDI) for mortality follow-up.</p>
<ul>
<li>
<strong>SEQN</strong>: Participant ID (unique identifier for each survey participant)</li>
<li>
<strong>mortstat</strong>: Mortality status (1 = deceased, 0 = alive)</li>
<li>
<strong>permth_int</strong>: Number of months between the date of NHANES exam and death or last follow-up (used to calculate follow-up time for mortality analysis)</li>
<li>
<strong>permth_exm</strong>: Number of months between the date of examination and mortality ascertainment (useful for establishing the timeline of events)</li>
<li>
<strong>CYCLE</strong>: NHANES survey cycle (e.g., 1999-2000, 2001-2002), used for cohort stratification</li>
</ul></section><section id="demographic-data" class="level4"><h4 class="anchored" data-anchor-id="demographic-data">2. Demographic Data</h4>
<p>Demographic data is important for adjusting models based on confounders such as age, gender, and socioeconomic status.</p>
<ul>
<li>
<strong>SEQN</strong>: Participant ID (unique identifier for each survey participant)</li>
<li>
<strong>CYCLE</strong>: NHANES survey cycle (e.g., 1999-2000, 2001-2002)</li>
<li>
<strong>SDMVSTRA</strong>: Masked variance pseudo-stratum (used for complex survey design to account for the stratified sample design)</li>
<li>
<strong>SDMVPSU</strong>: Masked variance pseudo-primary sampling unit (PSU) (used for adjusting the sampling structure in analyses)</li>
<li>
<strong>WTMEC2YR</strong>: Sample MEC (Mobile Examination Center) exam weight for 2-year analysis (used to weight the sample to be nationally representative)</li>
<li>
<strong>RIDSTATR</strong>: Interview/examination status (1 = Interviewed only, 2 = Both interviewed and MEC examined, used for completeness of the data)</li>
<li>
<strong>RIDAGEYR</strong>: Age in years at screening (collected as part of the demographic questionnaire, age is a critical confounder in mortality analyses)</li>
<li>
<strong>RIAGENDR</strong>: Gender (1 = Male, 2 = Female, often included in stratified analyses)</li>
<li>
<strong>DMDEDUC2</strong>: Education level (assessed for adults aged 20 years or older, higher education often correlates with better health outcomes)</li>
<li>
<strong>INDFMPIR</strong>: Family monthly poverty income ratio (calculated from household income and family size, used as a proxy for socioeconomic status)</li>
<li>
<strong>RIDRETH1</strong>: Race/ethnicity (1 = Mexican American, 2 = Other Hispanic, 3 = Non-Hispanic White, 4 = Non-Hispanic Black, 5 = Other Race, including multiracial)</li>
<li>
<strong>DMDMARTL</strong>: Marital status (1 = Married, 2 = Widowed, 3 = Divorced, marital status can impact social support, which is linked to health outcomes)</li>
</ul></section><section id="smoking-questionnaire-smq-data" class="level4"><h4 class="anchored" data-anchor-id="smoking-questionnaire-smq-data">3. Smoking Questionnaire (SMQ) Data</h4>
<p>Smoking is a significant risk factor for many chronic conditions and can interact with medication use.</p>
<ul>
<li>
<strong>SMOKING_HARMONIZED</strong>: Harmonized smoking variable [SMQ020/SMQ040] created by harmonizing data across survey cycles.
<ul>
<li>
<strong>SMQ020</strong>: Smoking status (Have you smoked at least 100 cigarettes in your life? Yes/No). This determines if the participant is ever a smoker.</li>
<li>
<strong>SMQ040</strong>: Smoking frequency (Do you now smoke cigarettes? Responses: Every day, Some days, Not at all), used to assess current smoking behavior.</li>
</ul>
</li>
</ul></section><section id="blood-pressure-bpq-data" class="level4"><h4 class="anchored" data-anchor-id="blood-pressure-bpq-data">4. Blood Pressure (BPQ) Data</h4>
<p>Blood pressure is a well-established predictor of cardiovascular disease and is often controlled by medications that could influence mortality.</p>
<ul>
<li>
<strong>BPQ020</strong>: Ever told had high blood pressure (diagnosis of hypertension, one of the most important cardiovascular risk factors)</li>
<li>
<strong>LIPIDEM_HARMONIZED</strong>: Harmonized lipidemia variable [BPQ060/BPQ080], combining data on cholesterol treatment across cycles.
<ul>
<li>
<strong>BPQ060</strong>: Taking prescription for hypertension (Are you now taking prescribed medicine for high blood pressure?)</li>
<li>
<strong>BPQ080</strong>: Blood pressure checked in past 6 months (Have you had your blood pressure checked by a doctor or health professional in the past 6 months?)</li>
</ul>
</li>
</ul></section><section id="diabetes-questionnaire-diq-data" class="level4"><h4 class="anchored" data-anchor-id="diabetes-questionnaire-diq-data">5. Diabetes Questionnaire (DIQ) Data</h4>
<p>Diabetes is a major chronic condition that affects many body systems, and managing blood sugar levels is crucial in preventing complications.</p>
<ul>
<li>
<strong>DIQ010</strong>: Doctor told you have diabetes (Has a doctor or other health professional ever told you that you have diabetes?)</li>
</ul></section><section id="medical-conditions-mcq-data" class="level4"><h4 class="anchored" data-anchor-id="medical-conditions-mcq-data">6. Medical Conditions (MCQ) Data</h4>
<p>This section includes a variety of conditions that are strongly linked to mortality outcomes, and their interactions with medication use are key areas of study.</p>
<ul>
<li>
<strong>MCQ160F</strong>: Ever told you had a stroke (Has a doctor or other health professional ever told you that you had a stroke?)</li>
<li>
<strong>MCQ160E</strong>: Ever told you had a heart attack (Has a doctor or other health professional ever told you that you had a heart attack?)</li>
<li>
<strong>MCQ160B</strong>: Ever told you had congestive heart failure (Has a doctor or health professional ever told you that you had congestive heart failure?)</li>
<li>
<strong>PULMOND_HARMONIZED</strong>: Harmonized pulmonary condition variable [MCQ160G/MCQ160K/MCQ160O] (this variable combines data on chronic lung diseases like asthma and emphysema)
<ul>
<li>
<strong>MCQ160G</strong>: Ever told you had emphysema? (Has a doctor or other health professional ever told you that you had emphysema?)</li>
<li>
<strong>MCQ160K</strong>: Ever told you had chronic bronchitis? (Has a doctor or other health professional ever told you that you had chronic bronchitis?)</li>
<li>
<strong>MCQ160O</strong>: Ever told you had asthma? (Has a doctor or other health professional ever told you that you had asthma?)</li>
</ul>
</li>
<li>
<strong>MCQ160L</strong>: Ever told you had liver condition (Has a doctor or other health professional ever told you that you had liver disease?)</li>
<li>
<strong>MCQ160A</strong>: Ever told you had arthritis (Has a doctor or other health professional ever told you that you have arthritis?)</li>
<li>
<strong>MCQ220</strong>: Ever told you had cancer or malignancy (Have you ever been told by a doctor or other health professional that you had cancer or a malignancy?)</li>
</ul></section><section id="kidney-conditions-kiq-data" class="level4"><h4 class="anchored" data-anchor-id="kidney-conditions-kiq-data">7. Kidney Conditions (KIQ) Data</h4>
<p>Kidney disease can complicate treatment for other conditions and impacts drug clearance, influencing the effectiveness and toxicity of medications.</p>
<ul>
<li>
<strong>KIDNEYD_HARMONIZED</strong>: Harmonized kidney disease variable [KIQ020/KIQ022], capturing the presence of chronic kidney disease across survey cycles.
<ul>
<li>
<strong>KIQ020</strong>: Ever told you had weak/failing kidneys (Has a doctor or other health professional ever told you that you had weak or failing kidneys?)</li>
<li>
<strong>KIQ022</strong>: On regular dialysis (Are you now on regular dialysis?)</li>
</ul>
</li>
</ul></section><section id="alcohol-use-alq-data" class="level4"><h4 class="anchored" data-anchor-id="alcohol-use-alq-data">8. Alcohol Use (ALQ) Data</h4>
<p>Alcohol use can interact with many medications, influencing their effectiveness and the risk of side effects.</p>
<ul>
<li>
<strong>REGULAR_DRINKING</strong>: Harmonized regular drinker status [ALQ100/ALD100/ALQ110/ALQ120U/ALQ120Q]
<ul>
<li>
<strong>ALQ100</strong>: Had at least 12 drinks in a year (Have you had at least 12 drinks of any kind of alcoholic beverage in any one year?)</li>
<li>
<strong>ALQ120Q</strong>: Number of days per week/month/year drank alcohol over the past 12 months (On how many days per week, per month, or per year did you have at least one alcoholic drink?)</li>
<li>
<strong>ALQ120U</strong>: Time unit for drinking frequency (week, month, or year; used in conjunction with ALQ120Q to specify drinking frequency over the past 12 months)</li>
<li>
<strong>ALQ130</strong>: Days had 5 or more drinks in past year (During the past 12 months, on how many days did you have 5 or more drinks of any alcoholic beverage?)</li>
</ul>
</li>
</ul></section><section id="physical-functioning-questionnaire-pfq-data" class="level4"><h4 class="anchored" data-anchor-id="physical-functioning-questionnaire-pfq-data">9. Physical Functioning Questionnaire (PFQ) Data</h4>
<p>Physical functioning measures are important indicators of overall health and functional status, especially in older adults.</p>
<ul>
<li>
<strong>PFQ090</strong>: Emergency room care in the last 12 months (During the past 12 months, have you been to a hospital emergency room about your health?)</li>
</ul></section><section id="health-questionnaire-huq-data" class="level4"><h4 class="anchored" data-anchor-id="health-questionnaire-huq-data">10. Health Questionnaire (HUQ) Data</h4>
<p>Healthcare utilization and self-reported health are important predictors of future healthcare needs and mortality.</p>
<ul>
<li>
<strong>ANYHOSP_INLASTYEAR</strong>: Harmonized indicator of any hospital visit in last year [HUD070/HUQ070/HUQ071]
<ul>
<li>
<strong>HUQ070</strong>: Overnight stay in the hospital in the past 12 months (In the past 12 months, how many times have you been hospitalized for one night or more?)</li>
<li>
<strong>HUD070</strong>: Overnight hospital stays in the past 12 months (In the past 12 months, how many nights have you spent in the hospital?)</li>
<li>
<strong>HUQ071</strong>: Seen a mental health professional in the past year (In the past 12 months, have you seen or talked to a mental health professional?)</li>
</ul>
</li>
<li>
<strong>NUMHOSP_INLASTYEAR</strong>: Harmonized number of hospitalizations in last year [HUD080/HUQ080] (How many overnight hospital stays did you have in the past 12 months?)</li>
<li>
<strong>REGULAR_EDCARE</strong>: Harmonized type or place most often go for healthcare [HUQ040/HUQ041]</li>
<li>
<strong>HUQ090</strong>: Seen a mental health professional in past year (In the past 12 months, have you seen or talked to a mental health professional?)</li>
<li>
<strong>HUQ010</strong>: General health condition (Would you say your health in general is: Excellent, Very Good, Good, Fair, or Poor?)</li>
<li>
<strong>HUQ070</strong>, <strong>HUQ071</strong>: Hospital visits in the past year (indicator of healthcare utilization)</li>
</ul></section><section id="prescription-drug-data-rxq" class="level4"><h4 class="anchored" data-anchor-id="prescription-drug-data-rxq">11. Prescription Drug Data (RXQ)</h4>
<p>The prescription drug data is extracted from the <strong>RXQ_RX</strong> and <strong>RXQ_DRUG</strong> tables, focusing on different classes of medications. The following are the specific drug classes and their associated codes from the dataset:</p>
<ul>
<li>
<p><strong>benzodiazepines</strong>: Medications typically used for anxiety, insomnia, and other conditions. The following drug codes were used for benzodiazepines:</p>
<ul>
<li>
<code>d00238</code>, <code>d00917</code>, <code>a56545</code>, <code>d00384</code>, <code>d00189</code>, <code>d03492</code>, <code>d00329</code>, <code>h00012</code>, <code>d05416</code>, <code>d03462</code>, <code>d00198</code>, <code>d00148</code>, <code>a54760</code>, <code>d04557</code>, <code>d00197</code>, <code>d00149</code>, <code>d00168</code>, <code>d00040</code>, <code>h00001</code>, <code>d00397</code>, <code>d00915</code>, <code>d00910</code>, <code>d04452</code>, <code>d07994</code>
</li>
</ul>
</li>
<li>
<p><strong>opioids</strong>: Prescription pain medications. The drug codes for opioids include:</p>
<ul>
<li>
<code>a10129</code>, <code>d00012</code>, <code>d00017</code>, <code>d00050</code>, <code>d00233</code>, <code>d00255</code>, <code>d00308</code>, <code>d00329</code>, <code>d00334</code>, <code>d00360</code>, <code>d00824</code>, <code>d00833</code>, <code>d00840</code>, <code>d03075</code>, <code>d03340</code>, <code>d03346</code>, <code>d03352</code>, <code>d03353</code>, <code>d03356</code>, <code>d03357</code>, <code>d03361</code>, <code>d03362</code>, <code>d03363</code>, <code>d03364</code>, <code>d03366</code>, <code>d03367</code>, <code>d03375</code>, <code>d03393</code>, <code>d03394</code>, <code>d03396</code>, <code>d03398</code>, <code>d03399</code>, <code>d03403</code>, <code>d03404</code>, <code>d03407</code>, <code>d03416</code>, <code>d03423</code>, <code>d03424</code>, <code>d03425</code>, <code>d03426</code>, <code>d03428</code>, <code>d03429</code>, <code>d03430</code>, <code>d03431</code>, <code>d03432</code>, <code>d03433</code>, <code>d03434</code>, <code>d03435</code>, <code>d03436</code>, <code>d03470</code>, <code>d03576</code>, <code>d03630</code>, <code>d03676</code>, <code>d03682</code>, <code>d03826</code>, <code>d03915</code>, <code>d04152</code>, <code>d04225</code>, <code>d04269</code>, <code>d04752</code>, <code>d04766</code>, <code>d04819</code>, <code>d04870</code>, <code>d04880</code>, <code>d04904</code>, <code>d04925</code>, <code>d05426</code>, <code>d06058</code>, <code>d06669</code>, <code>d07453</code>, <code>h00008</code>, <code>h00018</code>
</li>
</ul>
</li>
<li>
<p><strong>SSRIs (Selective serotonin reuptake inhibitors)</strong>: These are a class of antidepressants used to treat depression and anxiety disorders. The following drug codes represent SSRIs:</p>
<ul>
<li>
<code>d00236</code>, <code>d00880</code>, <code>d03157</code>, <code>d03804</code>, <code>d04332</code>, <code>d04812</code>
</li>
</ul>
</li>
<li>
<p><strong>antidepressants</strong>: This category includes other antidepressants like SNRIs, MAOIs, or TCAs. The codes include:</p>
<ul>
<li>These are medications used for treating major depressive disorders.</li>
<li>Antidepressants codes: Derived from RDX/RX_DRUG data tables and include various types of antidepressants.</li>
</ul>
</li>
<li><p><strong>antidepres_othr</strong>: Other antidepressants reported. Includes drugs classified under various types of antidepressants not captured by the major classes (SNRIs, MAOIs, SSRIs).</p></li>
<li>
<p><strong>antipsychotics</strong>: Medications used to manage psychosis (including schizophrenia and bipolar disorder). The codes for antipsychotics include:</p>
<ul>
<li>
<code>d00148</code>, <code>d00917</code>, <code>d00197</code>, <code>d00329</code>, <code>d03462</code>, <code>d04557</code>, <code>d05416</code>, <code>d03492</code>, <code>d00149</code>, <code>d00198</code>, <code>d00384</code>, <code>d00915</code>, <code>d04452</code>, <code>d00910</code>, <code>d07994</code>, <code>d00397</code>, <code>h00012</code>, <code>a54760</code>, <code>d00168</code>, <code>d00040</code>, <code>h00001</code>
</li>
</ul>
</li>
<li>
<p><strong>analgesics</strong>: Pain relief medications.</p>
<ul>
<li>Codes include: <code>d00012</code>, <code>d03403</code>, <code>d03404</code>, <code>d03407</code>, <code>d03416</code>, <code>d03423</code>, <code>d03424</code>, <code>d03425</code>, <code>d03426</code>, <code>d03428</code>, <code>d03429</code>, <code>d03430</code>, <code>d03431</code>, <code>d03432</code>, <code>d03433</code>, <code>d03434</code>, <code>d03435</code>, <code>d03436</code>, <code>d03470</code>
</li>
</ul>
</li>
<li>
<p><strong>muscle_relax</strong>: Medications used to relax muscles and relieve pain caused by muscle conditions.</p>
<ul>
<li>Codes include: <code>d03340</code>, <code>d03356</code>
</li>
</ul>
</li>
<li>
<p><strong>anticonvulsants</strong>: Medications used to prevent or treat seizures.</p>
<ul>
<li>Codes include: <code>d03423</code>, <code>d03436</code>
</li>
</ul>
</li>
<li>
<p><strong>hormonalagents</strong>: Medications used for hormone replacement or modulation (such as estrogen, progesterone).</p>
<ul>
<li>Codes include: <code>d04052</code>, <code>d00119</code>
</li>
</ul>
</li>
<li>
<p><strong>gastrointestin</strong>: Medications used for gastrointestinal issues, such as GERD or ulcers.</p>
<ul>
<li>Codes include: <code>d03075</code>, <code>d00149</code>
</li>
</ul>
</li>
<li>
<p><strong>cardi_metab_ag</strong>: Cardiovascular and metabolic agents, including medications for hypertension, cholesterol management, etc.</p>
<ul>
<li>Codes include: <code>d00578</code>, <code>d00913</code>
</li>
</ul>
</li>
<li>
<p><strong>resp_antihist</strong>: Respiratory medications and antihistamines used for asthma, allergies, or other respiratory conditions.</p>
<ul>
<li>Codes include: <code>d00221</code>, <code>d00360</code>
</li>
</ul>
</li>
<li><p><strong>cns_morethan2</strong>: Indicates cases where &gt; 2 CNS (central nervous system) medications are reported.</p></li>
<li><p><strong>ncns_lessthan5</strong>: Indicates cases where &lt; 5 NCNS (non-CNS) medications are reported.</p></li>
</ul>
<p>The drug codes are mapped to each class of medications using the NHANES <strong>RXQ_RX</strong> and <strong>RXQ_DRUG</strong> tables.</p>
</section></section><section id="code-hints" class="level3"><h3 class="anchored" data-anchor-id="code-hints">Code Hints</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Loading packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"tidyverse"</span>)) <span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)      </span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># To wrangle data using Tidyverse principles</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"nhanesA"</span>)) <span class="fu">install.packages</span>(<span class="st">"nhanesA"</span>)          </span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># To load NHANES data directly from CDC</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"rio"</span>)) <span class="fu">install.packages</span>(<span class="st">"rio"</span>)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># A package to simplify data import/export</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(nhanesA)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">library</span>(rio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="mortality-data-table" class="level4"><h4 class="anchored" data-anchor-id="mortality-data-table">MORTALITY DATA TABLE</h4>
<p>This section loads the mortality data from NHANES, which has been linked to the National Death Index (NDI). Mortality data are critical for survival analyses, allowing us to study the relationship between health risk factors, treatments (such as medication use), and all-cause mortality. Variables like mortality status (mortstat) and follow-up time (permth_int, permth_exm) are used to calculate the time-to-event and identify if and when a participant passed away. See previous tutorial about <a href="accessing7.html">how to access</a> such data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="do">## Specifying files</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>infile <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste0</span>(<span class="fu">getwd</span>(), <span class="st">'/Data/nhanes-external-data/'</span>), <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="do">## Specifying variables</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'mortstat'</span>, <span class="st">'permth_int'</span>, <span class="st">'permth_exm'</span>, <span class="st">'CYCLE'</span>)</span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="do">## Loading data</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>d.nhanes <span class="ot">&lt;-</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>  <span class="fu">lapply</span>(<span class="at">X =</span> infile[<span class="sc">-</span><span class="dv">10</span>],</span>
<span id="cb2-10"><a href="#cb2-10"></a>         <span class="at">FUN =</span> <span class="cf">function</span>(.x) <span class="fu">read_fwf</span>(<span class="at">file =</span> .x,</span>
<span id="cb2-11"><a href="#cb2-11"></a>                                     <span class="at">col_types =</span> <span class="st">"ciiiiiiidd"</span>,</span>
<span id="cb2-12"><a href="#cb2-12"></a>                                     <span class="fu">fwf_cols</span>(<span class="at">SEQN =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), </span>
<span id="cb2-13"><a href="#cb2-13"></a>                                              <span class="at">eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb2-14"><a href="#cb2-14"></a>                                              <span class="at">mortstat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb2-15"><a href="#cb2-15"></a>                                              <span class="at">ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb2-16"><a href="#cb2-16"></a>                                              <span class="at">diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb2-17"><a href="#cb2-17"></a>                                              <span class="at">hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb2-18"><a href="#cb2-18"></a>                                              <span class="at">permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb2-19"><a href="#cb2-19"></a>                                              <span class="at">permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb2-20"><a href="#cb2-20"></a>                                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb2-21"><a href="#cb2-21"></a>  <span class="fu">bind_rows</span>(<span class="at">.id =</span> <span class="st">'CYCLE'</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>  <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)) <span class="sc">|&gt;</span></span>
<span id="cb2-23"><a href="#cb2-23"></a>  </span>
<span id="cb2-24"><a href="#cb2-24"></a>  <span class="do">## Generating a survey cycle identifier</span></span>
<span id="cb2-25"><a href="#cb2-25"></a>  <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="fu">case_when</span>(CYCLE <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">'1999-2000'</span>,</span>
<span id="cb2-26"><a href="#cb2-26"></a>                           CYCLE <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">'2001-2002'</span>,</span>
<span id="cb2-27"><a href="#cb2-27"></a>                           CYCLE <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">'2003-2004'</span>,</span>
<span id="cb2-28"><a href="#cb2-28"></a>                           CYCLE <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">'2005-2006'</span>,</span>
<span id="cb2-29"><a href="#cb2-29"></a>                           CYCLE <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">'2007-2008'</span>,</span>
<span id="cb2-30"><a href="#cb2-30"></a>                           CYCLE <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">'2009-2010'</span>,</span>
<span id="cb2-31"><a href="#cb2-31"></a>                           CYCLE <span class="sc">==</span> <span class="dv">7</span> <span class="sc">~</span> <span class="st">'2011-2012'</span>,</span>
<span id="cb2-32"><a href="#cb2-32"></a>                           CYCLE <span class="sc">==</span> <span class="dv">8</span> <span class="sc">~</span> <span class="st">'2013-2014'</span>,</span>
<span id="cb2-33"><a href="#cb2-33"></a>                           CYCLE <span class="sc">==</span> <span class="dv">9</span> <span class="sc">~</span> <span class="st">'2015-2016 [UNUSED]'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="demographic-data-table" class="level4"><h4 class="anchored" data-anchor-id="demographic-data-table">DEMOGRAPHIC DATA TABLE</h4>
<p>Demographic data from NHANES, including age, gender, race/ethnicity, and socioeconomic status, are essential covariates in the analysis. These variables help in adjusting for potential confounders when studying health outcomes like mortality. NHANES data is collected in multiple cycles, and variables like sampling weights (WTMEC2YR), masked variance strata (SDMVSTRA, SDMVPSU), and interview status (RIDSTATR) ensure accurate analysis using the complex survey design. See previous tutorial about <a href="accessing4.html">how to access</a> demographic data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'CYCLE'</span>, <span class="st">'SDMVSTRA'</span>, <span class="st">'SDMVPSU'</span>, <span class="st">'WTMEC2YR'</span>, <span class="st">'RIDSTATR'</span>,</span>
<span id="cb3-3"><a href="#cb3-3"></a>            <span class="st">'RIDAGEYR'</span>, <span class="st">'RIAGENDR'</span>, <span class="st">'DMDEDUC2'</span>, <span class="st">'INDFMPIR'</span>, <span class="st">'RIDRETH1'</span>, <span class="st">'DMDMARTL'</span>)</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="do">## Loading data</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="do">## </span><span class="al">NOTE</span><span class="do">: A variable `CYCLE` is generated reflecting the survey cycle</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DEMO'</span>)   <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="st">'1999-2000'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb3-9"><a href="#cb3-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DEMO_B'</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="st">'2001-2002'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb3-10"><a href="#cb3-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DEMO_C'</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="st">'2003-2004'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb3-11"><a href="#cb3-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DEMO_D'</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="st">'2005-2006'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb3-12"><a href="#cb3-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DEMO_E'</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="st">'2007-2008'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb3-13"><a href="#cb3-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DEMO_F'</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="st">'2009-2010'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb3-14"><a href="#cb3-14"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DEMO_G'</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="st">'2011-2012'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb3-15"><a href="#cb3-15"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DEMO_H'</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CYCLE =</span> <span class="st">'2013-2014'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>  <span class="fu">tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>  </span>
<span id="cb3-18"><a href="#cb3-18"></a>  <span class="do">## Correcting inconsistencies with RIDSTATR coding</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>  <span class="fu">mutate</span>(<span class="at">RIDSTATR =</span> <span class="fu">fct_collapse</span>(RIDSTATR,</span>
<span id="cb3-20"><a href="#cb3-20"></a>                                 <span class="st">'interview only'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'Interviewed Only'</span>, <span class="st">'Interviewed only'</span>),</span>
<span id="cb3-21"><a href="#cb3-21"></a>                                 <span class="st">'int + mec exam'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'Both Interviewed and MEC examined'</span>,</span>
<span id="cb3-22"><a href="#cb3-22"></a>                                                      <span class="st">'Both interviewed and MEC examined'</span>))) <span class="sc">|&gt;</span></span>
<span id="cb3-23"><a href="#cb3-23"></a>  </span>
<span id="cb3-24"><a href="#cb3-24"></a>  <span class="do">## Resetting `Don't know` and `Refused` factor levels to missing</span></span>
<span id="cb3-25"><a href="#cb3-25"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), <span class="sc">~</span><span class="fu">fct_recode</span>(., </span>
<span id="cb3-26"><a href="#cb3-26"></a>                                              <span class="at">NULL =</span> <span class="st">"Don't know"</span>,</span>
<span id="cb3-27"><a href="#cb3-27"></a>                                              <span class="at">NULL =</span> <span class="st">"Don't Know"</span>,</span>
<span id="cb3-28"><a href="#cb3-28"></a>                                              <span class="at">NULL =</span> <span class="st">"Refused"</span>)))</span>
<span id="cb3-29"><a href="#cb3-29"></a></span>
<span id="cb3-30"><a href="#cb3-30"></a><span class="do">## Joining data tables</span></span>
<span id="cb3-31"><a href="#cb3-31"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb3-32"><a href="#cb3-32"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.integer</span>(SEQN)), </span>
<span id="cb3-33"><a href="#cb3-33"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.integer</span>(SEQN)), </span>
<span id="cb3-34"><a href="#cb3-34"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN, CYCLE))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="smoking-questionnaire-smq-data-table" class="level4"><h4 class="anchored" data-anchor-id="smoking-questionnaire-smq-data-table">SMOKING QUESTIONNAIRE (SMQ) DATA TABLE</h4>
<p>Smoking is a significant health risk factor associated with various diseases. This section harmonizes data across cycles for the smoking variables. SMQ020 captures whether a participant has ever smoked, while SMQ040 assesses their current smoking frequency (daily, some days, or not at all). Harmonized smoking data is used in regression models to adjust for smoking-related risks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'SMQ020'</span>, <span class="st">'SMQ040'</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="do">## Loading data</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'SMQ'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb4-7"><a href="#cb4-7"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'SMQ_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb4-8"><a href="#cb4-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'SMQ_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb4-9"><a href="#cb4-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'SMQ_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb4-10"><a href="#cb4-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'SMQ_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb4-11"><a href="#cb4-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'SMQ_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb4-12"><a href="#cb4-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'SMQ_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb4-13"><a href="#cb4-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'SMQ_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="fu">tibble</span>()</span>
<span id="cb4-15"><a href="#cb4-15"></a></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="do">## Joining data tables</span></span>
<span id="cb4-17"><a href="#cb4-17"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb4-18"><a href="#cb4-18"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb4-19"><a href="#cb4-19"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb4-20"><a href="#cb4-20"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="blood-pressure-bpq-data-table" class="level4"><h4 class="anchored" data-anchor-id="blood-pressure-bpq-data-table">BLOOD PRESSURE (BPQ) DATA TABLE</h4>
<p>Blood pressure data are vital for assessing cardiovascular risk. High blood pressure (hypertension) is one of the primary risk factors for heart disease, stroke, and mortality. The data captures whether participants were diagnosed with high blood pressure (BPQ020), whether they are taking medications for hypertension (BPQ060), and if they have had their blood pressure checked recently (BPQ080).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'BPQ020'</span>, <span class="st">'BPQ060'</span>, <span class="st">'BPQ080'</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="do">## Loading data</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'BPQ'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb5-7"><a href="#cb5-7"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'BPQ_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb5-8"><a href="#cb5-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'BPQ_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb5-9"><a href="#cb5-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'BPQ_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb5-10"><a href="#cb5-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'BPQ_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb5-11"><a href="#cb5-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'BPQ_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb5-12"><a href="#cb5-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'BPQ_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb5-13"><a href="#cb5-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'BPQ_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="fu">tibble</span>() </span>
<span id="cb5-15"><a href="#cb5-15"></a></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="do">## Joining data tables</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb5-18"><a href="#cb5-18"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb5-19"><a href="#cb5-19"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb5-20"><a href="#cb5-20"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="diabetes-questionnaire-diq-data-table" class="level4"><h4 class="anchored" data-anchor-id="diabetes-questionnaire-diq-data-table">DIABETES QUESTIONNAIRE (DIQ) DATA TABLE</h4>
<p>Diabetes is a major chronic condition that impacts overall health and mortality risk. This section loads data on diabetes diagnoses (DIQ010). Diabetes status is essential in the analysis as it affects multiple organ systems and interacts with other risk factors like medication use, making it an important variable in mortality analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'DIQ010'</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="do">## Loading data</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DIQ'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb6-7"><a href="#cb6-7"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DIQ_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb6-8"><a href="#cb6-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DIQ_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb6-9"><a href="#cb6-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DIQ_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb6-10"><a href="#cb6-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DIQ_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb6-11"><a href="#cb6-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DIQ_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb6-12"><a href="#cb6-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DIQ_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb6-13"><a href="#cb6-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'DIQ_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>  <span class="fu">tibble</span>()</span>
<span id="cb6-15"><a href="#cb6-15"></a></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="do">## Joining data tables</span></span>
<span id="cb6-17"><a href="#cb6-17"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb6-18"><a href="#cb6-18"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb6-19"><a href="#cb6-19"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb6-20"><a href="#cb6-20"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="medical-conditions-mcq-data-table" class="level4"><h4 class="anchored" data-anchor-id="medical-conditions-mcq-data-table">MEDICAL CONDITIONS (MCQ) DATA TABLE</h4>
<p>NHANES collects self-reported data on various medical conditions, many of which are associated with higher mortality. The data includes conditions such as stroke (MCQ160F), heart attack (MCQ160E), congestive heart failure (MCQ160B), and liver disease (MCQ160L). Harmonized variables like PULMOND_HARMONIZED combine data across cycles for conditions like emphysema, chronic bronchitis, and asthma. This section integrates these variables for assessing the health status of participants.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'MCQ160F'</span>, <span class="st">'MCQ160E'</span>, <span class="st">'MCQ160B'</span>, <span class="st">'MCQ160G'</span>, <span class="st">'MCQ160K'</span>, <span class="st">'MCQ160O'</span>, <span class="st">'MCQ160L'</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>            <span class="st">'MCQ160A'</span>, <span class="st">'MCQ220'</span>)</span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="do">## Loading data</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'MCQ'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb7-8"><a href="#cb7-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'MCQ_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb7-9"><a href="#cb7-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'MCQ_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb7-10"><a href="#cb7-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'MCQ_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb7-11"><a href="#cb7-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'MCQ_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb7-12"><a href="#cb7-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'MCQ_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb7-13"><a href="#cb7-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'MCQ_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb7-14"><a href="#cb7-14"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'MCQ_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="fu">tibble</span>()</span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="do">## Joining data tables</span></span>
<span id="cb7-18"><a href="#cb7-18"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb7-19"><a href="#cb7-19"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb7-20"><a href="#cb7-20"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb7-21"><a href="#cb7-21"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="kidney-conditions-kiq-data-table" class="level4"><h4 class="anchored" data-anchor-id="kidney-conditions-kiq-data-table">KIDNEY CONDITIONS (KIQ) DATA TABLE</h4>
<p>Chronic kidney disease (CKD) is associated with increased mortality due to its effects on cardiovascular health and drug metabolism. This section captures kidney disease status (KIQ020) and whether participants are on dialysis (KIQ022). These variables are used to stratify participants by kidney function in the analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'KIQ020'</span>, <span class="st">'KIQ022'</span>)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="do">## Loading data</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'KIQ'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb8-7"><a href="#cb8-7"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'KIQ_U_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb8-8"><a href="#cb8-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'KIQ_U_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb8-9"><a href="#cb8-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'KIQ_U_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb8-10"><a href="#cb8-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'KIQ_U_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb8-11"><a href="#cb8-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'KIQ_U_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb8-12"><a href="#cb8-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'KIQ_U_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb8-13"><a href="#cb8-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'KIQ_U_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="fu">tibble</span>()</span>
<span id="cb8-15"><a href="#cb8-15"></a></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="do">## Joining data tables</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb8-19"><a href="#cb8-19"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb8-20"><a href="#cb8-20"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="alcohol-use-alq-data-table" class="level4"><h4 class="anchored" data-anchor-id="alcohol-use-alq-data-table">ALCOHOL USE (ALQ) DATA TABLE</h4>
<p>Alcohol use affects overall health and interacts with many medications. NHANES collects data on drinking habits, including the frequency of alcohol consumption (ALQ120Q, ALQ120U) and binge drinking behavior (ALQ130). Harmonized variables like REGULAR_DRINKING are derived from these data to capture regular alcohol use, which is a critical covariate in mortality models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'ALQ100'</span>, <span class="st">'ALD100'</span>, <span class="st">'ALQ101'</span>, <span class="st">'ALQ110'</span>, <span class="st">'ALQ120Q'</span>, <span class="st">'ALQ120U'</span>, <span class="st">'ALQ130'</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="do">## Loading data</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'ALQ'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb9-7"><a href="#cb9-7"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'ALQ_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb9-8"><a href="#cb9-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'ALQ_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb9-9"><a href="#cb9-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'ALQ_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb9-10"><a href="#cb9-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'ALQ_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb9-11"><a href="#cb9-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'ALQ_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb9-12"><a href="#cb9-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'ALQ_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb9-13"><a href="#cb9-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'ALQ_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>  <span class="fu">tibble</span>()</span>
<span id="cb9-15"><a href="#cb9-15"></a></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="do">## Joining data tables</span></span>
<span id="cb9-17"><a href="#cb9-17"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb9-18"><a href="#cb9-18"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb9-19"><a href="#cb9-19"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb9-20"><a href="#cb9-20"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="physical-functioning-questionnaire-pfq-data-table" class="level4"><h4 class="anchored" data-anchor-id="physical-functioning-questionnaire-pfq-data-table">PHYSICAL FUNCTIONING QUESTIONNAIRE (PFQ) DATA TABLE</h4>
<p>The Physical Functioning Questionnaire assesses participantsâ€™ functional status, which is particularly important in older adults. This section includes data on emergency room visits in the past 12 months (PFQ090), which indicates acute health problems and healthcare utilization, often linked with higher mortality risk.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'PFQ090'</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="do">## Loading data</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'PFQ'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb10-7"><a href="#cb10-7"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'PFQ_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb10-8"><a href="#cb10-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'PFQ_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb10-9"><a href="#cb10-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'PFQ_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb10-10"><a href="#cb10-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'PFQ_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb10-11"><a href="#cb10-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'PFQ_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb10-12"><a href="#cb10-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'PFQ_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb10-13"><a href="#cb10-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'PFQ_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>  <span class="fu">tibble</span>()</span>
<span id="cb10-15"><a href="#cb10-15"></a></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="do">## Joining data tables</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb10-18"><a href="#cb10-18"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb10-19"><a href="#cb10-19"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb10-20"><a href="#cb10-20"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="health-questionnaire-huq-data-table" class="level4"><h4 class="anchored" data-anchor-id="health-questionnaire-huq-data-table">HEALTH QUESTIONNAIRE (HUQ) DATA TABLE</h4>
<p>The Health Questionnaire provides insight into healthcare utilization and self-reported health status, both of which are predictors of mortality. This section integrates variables like mental health visits (HUQ090), overall health ratings (HUQ010), and hospitalizations (ANYHOSP_INLASTYEAR, NUMHOSP_INLASTYEAR). These variables help capture participantsâ€™ interactions with the healthcare system and their overall well-being.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'HUQ090'</span>, <span class="st">'HUQ010'</span>, <span class="st">'HUQ030'</span>, <span class="st">'HUQ040'</span>, <span class="st">'HUQ041'</span>, <span class="st">'HUQ020'</span>, <span class="st">'HUQ070'</span>, </span>
<span id="cb11-3"><a href="#cb11-3"></a>            <span class="st">'HUQ071'</span>, <span class="st">'HUD080'</span>, <span class="st">'HUD070'</span>, <span class="st">'HUQ080'</span>)</span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="do">## Loading data</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'HUQ'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">HUD080 =</span> <span class="fu">as.integer</span>(HUD080)),</span>
<span id="cb11-8"><a href="#cb11-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'HUQ_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb11-9"><a href="#cb11-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'HUQ_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb11-10"><a href="#cb11-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'HUQ_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb11-11"><a href="#cb11-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'HUQ_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb11-12"><a href="#cb11-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'HUQ_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb11-13"><a href="#cb11-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'HUQ_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb11-14"><a href="#cb11-14"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'HUQ_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">HUD080 =</span> <span class="fu">as.integer</span>(HUD080))) <span class="sc">|&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="fu">tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-16"><a href="#cb11-16"></a>  </span>
<span id="cb11-17"><a href="#cb11-17"></a>  <span class="do">## Standardizing coding of HUD080, for which valid values are only 1-6</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>  <span class="fu">mutate</span>(<span class="at">HUD080 =</span> <span class="fu">case_when</span>(HUD080 <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span> <span class="sc">~</span> HUD080, HUD080 <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> HUD080 <span class="sc">==</span> <span class="dv">99999</span> <span class="sc">~</span> <span class="cn">NA</span>))</span>
<span id="cb11-19"><a href="#cb11-19"></a></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="do">## Joining data tables</span></span>
<span id="cb11-21"><a href="#cb11-21"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb11-22"><a href="#cb11-22"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb11-23"><a href="#cb11-23"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb11-24"><a href="#cb11-24"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="prescription-medications---drug-data-rxq_drug-table" class="level4"><h4 class="anchored" data-anchor-id="prescription-medications---drug-data-rxq_drug-table">PRESCRIPTION MEDICATIONS - DRUG DATA (RXQ_DRUG) TABLE</h4>
<p>Prescription drug data from NHANES is essential for analyzing the impact of medications on mortality. This section focuses on drug classes such as benzodiazepines, opioids, SSRIs, and other medications. Drug data are harmonized across cycles to account for polypharmacy and potential drug interactions. Variables like benzodiazepines, opioids, and SSRIs are used to assess whether the participant was taking these medications, which are the main exposures in the study.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="do">## BENZODIAZEPINES</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>d.bz <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"d00238"</span>, <span class="st">"d00917"</span>, <span class="st">"a56545"</span>, <span class="st">"d00384"</span>, <span class="st">"d00189"</span>, </span>
<span id="cb12-3"><a href="#cb12-3"></a>          <span class="st">"d03492"</span>, <span class="st">"d00329"</span>, <span class="st">"h00012"</span>, <span class="st">"d05416"</span>, </span>
<span id="cb12-4"><a href="#cb12-4"></a>          <span class="st">"d03462"</span>, <span class="st">"d00198"</span>, <span class="st">"d00148"</span>, <span class="st">"a54760"</span>, <span class="st">"d04557"</span>, </span>
<span id="cb12-5"><a href="#cb12-5"></a>          <span class="st">"d00197"</span>, <span class="st">"d00149"</span>, <span class="st">"d00168"</span>, <span class="st">"d00040"</span>,</span>
<span id="cb12-6"><a href="#cb12-6"></a>          <span class="st">"h00001"</span>, <span class="st">"d00397"</span>, <span class="st">"d00915"</span>, <span class="st">"d00910"</span>, <span class="st">"d04452"</span>, </span>
<span id="cb12-7"><a href="#cb12-7"></a>          <span class="st">"d07994"</span>)</span>
<span id="cb12-8"><a href="#cb12-8"></a></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co"># OPIOIDS</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>d.op <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a10129"</span>, <span class="st">"d00012"</span>, <span class="st">"d00017"</span>, <span class="st">"d00050"</span>, <span class="st">"d00233"</span>, </span>
<span id="cb12-11"><a href="#cb12-11"></a>          <span class="st">"d00255"</span>, <span class="st">"d00308"</span>, <span class="st">"d00329"</span>, <span class="st">"d00334"</span>, </span>
<span id="cb12-12"><a href="#cb12-12"></a>          <span class="st">"d00360"</span>, <span class="st">"d00824"</span>, <span class="st">"d00833"</span>, <span class="st">"d00840"</span>, <span class="st">"d03075"</span>, </span>
<span id="cb12-13"><a href="#cb12-13"></a>          <span class="st">"d03340"</span>, <span class="st">"d03346"</span>, <span class="st">"d03352"</span>, <span class="st">"d03353"</span>, </span>
<span id="cb12-14"><a href="#cb12-14"></a>          <span class="st">"d03356"</span>, <span class="st">"d03357"</span>, <span class="st">"d03361"</span>, <span class="st">"d03362"</span>, <span class="st">"d03363"</span>, </span>
<span id="cb12-15"><a href="#cb12-15"></a>          <span class="st">"d03364"</span>, <span class="st">"d03366"</span>, <span class="st">"d03367"</span>, <span class="st">"d03375"</span>, </span>
<span id="cb12-16"><a href="#cb12-16"></a>          <span class="st">"d03393"</span>, <span class="st">"d03394"</span>, <span class="st">"d03396"</span>, <span class="st">"d03398"</span>, <span class="st">"d03399"</span>, </span>
<span id="cb12-17"><a href="#cb12-17"></a>          <span class="st">"d03403"</span>, <span class="st">"d03404"</span>, <span class="st">"d03407"</span>, <span class="st">"d03416"</span>, </span>
<span id="cb12-18"><a href="#cb12-18"></a>          <span class="st">"d03423"</span>, <span class="st">"d03424"</span>, <span class="st">"d03425"</span>, <span class="st">"d03426"</span>, <span class="st">"d03428"</span>, </span>
<span id="cb12-19"><a href="#cb12-19"></a>          <span class="st">"d03429"</span>, <span class="st">"d03430"</span>, <span class="st">"d03431"</span>, <span class="st">"d03432"</span>, </span>
<span id="cb12-20"><a href="#cb12-20"></a>          <span class="st">"d03433"</span>, <span class="st">"d03434"</span>, <span class="st">"d03435"</span>, <span class="st">"d03436"</span>, <span class="st">"d03470"</span>, </span>
<span id="cb12-21"><a href="#cb12-21"></a>          <span class="st">"d03576"</span>, <span class="st">"d03630"</span>, <span class="st">"d03676"</span>, <span class="st">"d03682"</span>, </span>
<span id="cb12-22"><a href="#cb12-22"></a>          <span class="st">"d03826"</span>, <span class="st">"d03915"</span>, <span class="st">"d04152"</span>, <span class="st">"d04225"</span>, <span class="st">"d04269"</span>, </span>
<span id="cb12-23"><a href="#cb12-23"></a>          <span class="st">"d04752"</span>, <span class="st">"d04766"</span>, <span class="st">"d04819"</span>, <span class="st">"d04870"</span>, </span>
<span id="cb12-24"><a href="#cb12-24"></a>          <span class="st">"d04880"</span>, <span class="st">"d04904"</span>, <span class="st">"d04925"</span>, <span class="st">"d05426"</span>, <span class="st">"d06058"</span>, </span>
<span id="cb12-25"><a href="#cb12-25"></a>          <span class="st">"d06669"</span>, <span class="st">"d07453"</span>, <span class="st">"h00008"</span>, <span class="st">"h00018"</span>)</span>
<span id="cb12-26"><a href="#cb12-26"></a></span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="co"># SSRIs</span></span>
<span id="cb12-28"><a href="#cb12-28"></a>d.ss <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"d00236"</span>, <span class="st">"d00880"</span>, <span class="st">"d03157"</span>, <span class="st">"d03804"</span>, <span class="st">"d04332"</span>, </span>
<span id="cb12-29"><a href="#cb12-29"></a>          <span class="st">"d04812"</span>)</span>
<span id="cb12-30"><a href="#cb12-30"></a></span>
<span id="cb12-31"><a href="#cb12-31"></a><span class="do">## Wrangling prescription data</span></span>
<span id="cb12-32"><a href="#cb12-32"></a>ref.rxq <span class="ot">&lt;-</span> </span>
<span id="cb12-33"><a href="#cb12-33"></a>  </span>
<span id="cb12-34"><a href="#cb12-34"></a>  <span class="do">##-- Importing data</span></span>
<span id="cb12-35"><a href="#cb12-35"></a>  rio<span class="sc">::</span><span class="fu">import</span>(infile[<span class="dv">10</span>], <span class="at">setclass =</span> <span class="st">'tibble'</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-36"><a href="#cb12-36"></a>  </span>
<span id="cb12-37"><a href="#cb12-37"></a>  <span class="do">##-- Subsetting columns</span></span>
<span id="cb12-38"><a href="#cb12-38"></a>  <span class="fu">select</span>(RXDDRGID, </span>
<span id="cb12-39"><a href="#cb12-39"></a>         RXDDCI1C, RXDDCI2C, RXDDCI3C, RXDDCI4C,                       <span class="co"># Third-level category ID</span></span>
<span id="cb12-40"><a href="#cb12-40"></a>         RXDDCI1B, RXDDCI2B, RXDDCI3B, RXDDCI4B,                       <span class="co"># Second-level category ID</span></span>
<span id="cb12-41"><a href="#cb12-41"></a>         RXDDCI1A, RXDDCI2A, RXDDCI3A, RXDDCI4A) <span class="sc">|&gt;</span>                    <span class="co"># First-level category ID</span></span>
<span id="cb12-42"><a href="#cb12-42"></a>  </span>
<span id="cb12-43"><a href="#cb12-43"></a>  <span class="do">##-- Changing `NA` to `0` in order to sum rowwise</span></span>
<span id="cb12-44"><a href="#cb12-44"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1C<span class="sc">:</span>RXDDCI4A), <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb12-45"><a href="#cb12-45"></a>  </span>
<span id="cb12-46"><a href="#cb12-46"></a>  <span class="do">##-- RX classification</span></span>
<span id="cb12-47"><a href="#cb12-47"></a>  <span class="do">##-- </span><span class="al">NOTE</span><span class="do">: Xu et al. (2020) provide insufficient instruction for replication, thus classification</span></span>
<span id="cb12-48"><a href="#cb12-48"></a>  <span class="do">##--       here relies upon labels from the "Multum Lexicon Therapeutic Classification Scheme"</span></span>
<span id="cb12-49"><a href="#cb12-49"></a>  <span class="do">##--       which can be found in the RXQ_DRUG table</span></span>
<span id="cb12-50"><a href="#cb12-50"></a>  <span class="fu">mutate</span>(<span class="at">.benzodiazepines =</span> RXDDRGID <span class="sc">%in%</span> d.bz) <span class="sc">|&gt;</span></span>
<span id="cb12-51"><a href="#cb12-51"></a>  <span class="fu">mutate</span>(<span class="at">.opioids =</span> RXDDRGID <span class="sc">%in%</span> d.op) <span class="sc">|&gt;</span></span>
<span id="cb12-52"><a href="#cb12-52"></a>  <span class="fu">mutate</span>(<span class="at">.ssris =</span> RXDDRGID <span class="sc">%in%</span> d.ss) <span class="sc">|&gt;</span></span>
<span id="cb12-53"><a href="#cb12-53"></a>  <span class="fu">mutate</span>(<span class="at">.antidepressants =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1C<span class="sc">:</span>RXDDCI4C), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">250</span>, <span class="dv">307</span>, <span class="dv">308</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-54"><a href="#cb12-54"></a>  <span class="fu">mutate</span>(<span class="at">.antidepres_othr =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1C<span class="sc">:</span>RXDDCI4C), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">76</span>, <span class="dv">209</span>, <span class="dv">306</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-55"><a href="#cb12-55"></a>  <span class="fu">mutate</span>(<span class="at">.antipsychotics =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1C<span class="sc">:</span>RXDDCI4C), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">77</span>, <span class="dv">210</span>, <span class="dv">280</span>, <span class="dv">341</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-56"><a href="#cb12-56"></a>  <span class="fu">mutate</span>(<span class="at">.analgesics =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1B<span class="sc">:</span>RXDDCI4B), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">58</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-57"><a href="#cb12-57"></a>  <span class="fu">mutate</span>(<span class="at">.muscle_relaxants =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1B<span class="sc">:</span>RXDDCI4B), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">73</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-58"><a href="#cb12-58"></a>  <span class="fu">mutate</span>(<span class="at">.anticonvulsants =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1B<span class="sc">:</span>RXDDCI4B), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">64</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-59"><a href="#cb12-59"></a>  <span class="fu">mutate</span>(<span class="at">.hormonal_agents =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1A<span class="sc">:</span>RXDDCI4A), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">97</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-60"><a href="#cb12-60"></a>  <span class="fu">mutate</span>(<span class="at">.gastrointestinal_agents =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1A<span class="sc">:</span>RXDDCI4A), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">87</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-61"><a href="#cb12-61"></a>  <span class="fu">mutate</span>(<span class="at">.cardi_metab_agents =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1A<span class="sc">:</span>RXDDCI4A), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">331</span>, <span class="dv">358</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-62"><a href="#cb12-62"></a>  <span class="fu">mutate</span>(<span class="at">.respiratory_antihist =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1A<span class="sc">:</span>RXDDCI4A), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">122</span>))) <span class="sc">|</span></span>
<span id="cb12-63"><a href="#cb12-63"></a>           <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1C<span class="sc">:</span>RXDDCI4C), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">246</span>, <span class="dv">267</span>, <span class="dv">382</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-64"><a href="#cb12-64"></a>  <span class="fu">mutate</span>(<span class="at">.cns =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(RXDDCI1A<span class="sc">:</span>RXDDCI4A), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">57</span>))) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-65"><a href="#cb12-65"></a>  <span class="fu">select</span>(RXDDRGID, <span class="fu">starts_with</span>(<span class="st">'.'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="prescription-medications-rxq_rx-table" class="level4"><h4 class="anchored" data-anchor-id="prescription-medications-rxq_rx-table">PRESCRIPTION MEDICATIONS (RXQ_RX) TABLE</h4>
<p>This chunk extracts prescription medication data from the NHANES RXQ_RX dataset, which records the medications reported by participants. Variables like RXD030 (indicating if the participant has taken any prescription medication in the past month) and RXDUSE (another medication use indicator) are included. The data is joined with the RXQ_DRUG table to classify medications into categories (e.g., benzodiazepines, opioids, SSRIs, etc.) for analysis. It converts the data into a wide format, where medication use across different categories is captured for each participant.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="do">## Specifying variables</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>vnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'SEQN'</span>, <span class="st">'RXD030'</span>, <span class="st">'RXDUSE'</span>, <span class="st">'RXDDRGID'</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="do">## Loading data</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>d.add <span class="ot">&lt;-</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="fu">bind_rows</span>(<span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'RXQ_RX'</span>)   <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb13-7"><a href="#cb13-7"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'RXQ_RX_B'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb13-8"><a href="#cb13-8"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'RXQ_RX_C'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb13-9"><a href="#cb13-9"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'RXQ_RX_D'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb13-10"><a href="#cb13-10"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'RXQ_RX_E'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb13-11"><a href="#cb13-11"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'RXQ_RX_F'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb13-12"><a href="#cb13-12"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'RXQ_RX_G'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames)),</span>
<span id="cb13-13"><a href="#cb13-13"></a>            <span class="fu">nhanes</span>(<span class="at">translated =</span> <span class="cn">TRUE</span>, <span class="at">nh_table =</span> <span class="st">'RXQ_RX_H'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vnames))) <span class="sc">|&gt;</span></span>
<span id="cb13-14"><a href="#cb13-14"></a>  <span class="fu">tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-15"><a href="#cb13-15"></a>  </span>
<span id="cb13-16"><a href="#cb13-16"></a>  <span class="do">##-- Joining the RXQ_DRUG data table</span></span>
<span id="cb13-17"><a href="#cb13-17"></a>  <span class="fu">left_join</span>(<span class="at">x =</span> _, <span class="at">y =</span> ref.rxq, <span class="at">by =</span> <span class="fu">join_by</span>(RXDDRGID)) <span class="sc">|&gt;</span></span>
<span id="cb13-18"><a href="#cb13-18"></a>  </span>
<span id="cb13-19"><a href="#cb13-19"></a>  <span class="do">##-- RXDDRGID is dropped</span></span>
<span id="cb13-20"><a href="#cb13-20"></a>  <span class="fu">select</span>(<span class="sc">-</span>RXDDRGID) <span class="sc">|&gt;</span></span>
<span id="cb13-21"><a href="#cb13-21"></a>  </span>
<span id="cb13-22"><a href="#cb13-22"></a>  <span class="do">##-- The long-form data are converted to wide-form</span></span>
<span id="cb13-23"><a href="#cb13-23"></a>  <span class="fu">mutate</span>(<span class="at">index =</span> <span class="fu">row_number</span>(), <span class="at">.by =</span> SEQN) <span class="sc">|&gt;</span></span>
<span id="cb13-24"><a href="#cb13-24"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(SEQN, RXD030, RXDUSE),</span>
<span id="cb13-25"><a href="#cb13-25"></a>              <span class="at">names_from =</span> index,</span>
<span id="cb13-26"><a href="#cb13-26"></a>              <span class="at">values_from =</span> <span class="fu">starts_with</span>(<span class="st">'.'</span>))</span>
<span id="cb13-27"><a href="#cb13-27"></a></span>
<span id="cb13-28"><a href="#cb13-28"></a><span class="do">## Joining data tables</span></span>
<span id="cb13-29"><a href="#cb13-29"></a>d.nhanes <span class="ot">&lt;-</span> </span>
<span id="cb13-30"><a href="#cb13-30"></a>  <span class="fu">full_join</span>(<span class="at">x =</span> d.nhanes <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb13-31"><a href="#cb13-31"></a>            <span class="at">y =</span> d.add    <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">SEQN =</span> <span class="fu">as.numeric</span>(SEQN)), </span>
<span id="cb13-32"><a href="#cb13-32"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(SEQN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="merging" class="level4"><h4 class="anchored" data-anchor-id="merging">Merging</h4>
<p>The merged dataset includes the main NHANES data, with harmonized variables from multiple sources. The process involves harmonizing factors like smoking, drinking, and medical conditions (e.g., pulmonary disease, kidney disease). Variables are standardized across different NHANES cycles for consistency. Key variables such as SMOKING_HARMONIZED, LIPIDEM_HARMONIZED, and REGULAR_DRINKING capture important lifestyle and medical information. The data also harmonizes prescription drug information by categorizing participants based on whether they reported taking medications like benzodiazepines, opioids, SSRIs, or other drug classes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>d.final <span class="ot">&lt;-</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  d.nhanes <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  </span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="do">## Converting `Don't know` and `Refused` responses to NA for factors</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), </span>
<span id="cb14-6"><a href="#cb14-6"></a>                <span class="sc">~</span><span class="fu">fct_recode</span>(., <span class="at">NULL =</span> <span class="st">"Don't know"</span>, <span class="at">NULL =</span> <span class="st">"Don't Know"</span>, <span class="at">NULL =</span> <span class="st">"Refused"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>  </span>
<span id="cb14-8"><a href="#cb14-8"></a>  <span class="do">## Harmonizing `smoking` [SMQ020/SMQ040]</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>  <span class="fu">mutate</span>(<span class="at">SMOKING_HARMONIZED =</span> <span class="fu">case_when</span>(SMQ020 <span class="sc">==</span> <span class="st">'No'</span> <span class="sc">~</span> <span class="st">'LOGICAL SKIP'</span>,</span>
<span id="cb14-10"><a href="#cb14-10"></a>                                        <span class="fu">str_detect</span>(SMQ040, <span class="st">'Not at all'</span>) <span class="sc">~</span> <span class="st">'Not at all'</span>,</span>
<span id="cb14-11"><a href="#cb14-11"></a>                                        <span class="fu">str_detect</span>(SMQ040, <span class="st">'Some days'</span>) <span class="sc">~</span> <span class="st">'Some days'</span>,</span>
<span id="cb14-12"><a href="#cb14-12"></a>                                        <span class="fu">str_detect</span>(SMQ040, <span class="st">'Every day'</span>) <span class="sc">~</span> <span class="st">'Every day'</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-13"><a href="#cb14-13"></a>           <span class="fu">factor</span>()) <span class="sc">|&gt;</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>  </span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="do">## Harmonizing 'lipidemia' [BPQ060/BPQ080]</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>  <span class="fu">mutate</span>(<span class="at">LIPIDEM_HARMONIZED =</span> <span class="fu">case_when</span>(<span class="at">.default =</span> BPQ080,</span>
<span id="cb14-17"><a href="#cb14-17"></a>                                        BPQ060 <span class="sc">==</span> <span class="st">'No'</span> <span class="sc">&amp;</span> CYCLE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'1999-2000'</span>,</span>
<span id="cb14-18"><a href="#cb14-18"></a>                                                                      <span class="st">'2001-2002'</span>,</span>
<span id="cb14-19"><a href="#cb14-19"></a>                                                                      <span class="st">'2003-2004'</span>,</span>
<span id="cb14-20"><a href="#cb14-20"></a>                                                                      <span class="st">'2005-2006'</span>,</span>
<span id="cb14-21"><a href="#cb14-21"></a>                                                                      <span class="st">'2007-2008'</span>,</span>
<span id="cb14-22"><a href="#cb14-22"></a>                                                                      <span class="st">'2009-2010'</span>) <span class="sc">~</span> <span class="st">'No'</span>)) <span class="sc">|&gt;</span></span>
<span id="cb14-23"><a href="#cb14-23"></a>  </span>
<span id="cb14-24"><a href="#cb14-24"></a>  <span class="do">## Harmonizing `pulmonary disease` [MCQ160G/MCQ160K/MCQ160O]</span></span>
<span id="cb14-25"><a href="#cb14-25"></a>  <span class="fu">mutate</span>(<span class="at">PULMOND_HARMONIZED =</span> <span class="fu">case_when</span>(<span class="at">.default =</span> <span class="st">'No'</span>,</span>
<span id="cb14-26"><a href="#cb14-26"></a>                                        MCQ160G <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">|</span> MCQ160K <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">|</span> MCQ160O <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">~</span> <span class="st">'Yes'</span>,</span>
<span id="cb14-27"><a href="#cb14-27"></a>                                        <span class="fu">is.na</span>(MCQ160G) <span class="sc">&amp;</span> <span class="fu">is.na</span>(MCQ160K) <span class="sc">&amp;</span> <span class="fu">is.na</span>(MCQ160O) <span class="sc">~</span> <span class="cn">NA</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-28"><a href="#cb14-28"></a>           <span class="fu">factor</span>()) <span class="sc">|&gt;</span></span>
<span id="cb14-29"><a href="#cb14-29"></a>  </span>
<span id="cb14-30"><a href="#cb14-30"></a>  <span class="do">## Harmonizing `kidney disease` [KIQ020/KIQ022]</span></span>
<span id="cb14-31"><a href="#cb14-31"></a>  <span class="fu">mutate</span>(<span class="at">KIDNEYD_HARMONIZED =</span> <span class="fu">case_when</span>(CYCLE <span class="sc">==</span> <span class="st">'1999-2000'</span> <span class="sc">~</span> KIQ020,</span>
<span id="cb14-32"><a href="#cb14-32"></a>                                        <span class="sc">!</span><span class="fu">is.na</span>(CYCLE) <span class="sc">&amp;</span> CYCLE <span class="sc">!=</span> <span class="st">'1999-2000'</span> <span class="sc">~</span> KIQ022) <span class="sc">|&gt;</span></span>
<span id="cb14-33"><a href="#cb14-33"></a>           <span class="fu">factor</span>()) <span class="sc">|&gt;</span></span>
<span id="cb14-34"><a href="#cb14-34"></a>  </span>
<span id="cb14-35"><a href="#cb14-35"></a>  <span class="do">## Harmonizing `regular drinking` [ALQ120Q/ALQ120U]</span></span>
<span id="cb14-36"><a href="#cb14-36"></a>  <span class="do">## </span><span class="al">NOTE</span><span class="do">: Operationalized as "on average &gt;= 1 times per week in last year (i.e., at least 52 times in past year).</span></span>
<span id="cb14-37"><a href="#cb14-37"></a>  <span class="do">##       Here, we estimate the number of "average drinking days" per year and use that as an indicator.</span></span>
<span id="cb14-38"><a href="#cb14-38"></a>  <span class="do">##       Respondents who were not shown ALQ120U are coded as 'No' (e.g., &lt; 12 drinks in past year)</span></span>
<span id="cb14-39"><a href="#cb14-39"></a>  <span class="fu">mutate</span>(<span class="at">ALQ120Q =</span> <span class="fu">case_when</span>(ALQ120Q <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">777</span>, <span class="dv">999</span>) <span class="sc">~</span> <span class="cn">NA</span>, <span class="at">.default =</span> ALQ120Q)) <span class="sc">|&gt;</span></span>
<span id="cb14-40"><a href="#cb14-40"></a>  <span class="fu">mutate</span>(<span class="at">REGULAR_DRINKING =</span> <span class="fu">case_when</span>(ALD100 <span class="sc">==</span> <span class="st">'No'</span> <span class="sc">&amp;</span> ALQ110 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'No'</span>, <span class="st">'Yes'</span>) <span class="sc">~</span> <span class="st">'No'</span>,</span>
<span id="cb14-41"><a href="#cb14-41"></a>                                      ALQ100 <span class="sc">==</span> <span class="st">'No'</span> <span class="sc">&amp;</span> ALQ110 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'No'</span>, <span class="st">'Yes'</span>) <span class="sc">~</span> <span class="st">'No'</span>,</span>
<span id="cb14-42"><a href="#cb14-42"></a>                                      ALQ101 <span class="sc">==</span> <span class="st">'No'</span> <span class="sc">&amp;</span> ALQ110 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'No'</span>, <span class="st">'Yes'</span>) <span class="sc">~</span> <span class="st">'No'</span>,</span>
<span id="cb14-43"><a href="#cb14-43"></a>                                      ALQ120U <span class="sc">==</span> <span class="st">'Year'</span>  <span class="sc">&amp;</span> (ALQ120Q <span class="sc">*</span> <span class="dv">1</span>)  <span class="sc">&gt;=</span> <span class="dv">52</span> <span class="sc">~</span> <span class="st">'Yes'</span>,</span>
<span id="cb14-44"><a href="#cb14-44"></a>                                      ALQ120U <span class="sc">==</span> <span class="st">'Year'</span>  <span class="sc">&amp;</span> (ALQ120Q <span class="sc">*</span> <span class="dv">1</span>)  <span class="sc">&lt;</span>  <span class="dv">52</span> <span class="sc">~</span> <span class="st">'No'</span>,</span>
<span id="cb14-45"><a href="#cb14-45"></a>                                      ALQ120U <span class="sc">==</span> <span class="st">'Month'</span> <span class="sc">&amp;</span> (ALQ120Q <span class="sc">*</span> <span class="dv">12</span>) <span class="sc">&gt;=</span> <span class="dv">52</span> <span class="sc">~</span> <span class="st">'Yes'</span>,</span>
<span id="cb14-46"><a href="#cb14-46"></a>                                      ALQ120U <span class="sc">==</span> <span class="st">'Month'</span> <span class="sc">&amp;</span> (ALQ120Q <span class="sc">*</span> <span class="dv">12</span>) <span class="sc">&lt;</span>  <span class="dv">52</span> <span class="sc">~</span> <span class="st">'No'</span>,</span>
<span id="cb14-47"><a href="#cb14-47"></a>                                      ALQ120U <span class="sc">==</span> <span class="st">'Week'</span>  <span class="sc">&amp;</span> (ALQ120Q <span class="sc">*</span> <span class="dv">52</span>) <span class="sc">&gt;=</span> <span class="dv">52</span> <span class="sc">~</span> <span class="st">'Yes'</span>,</span>
<span id="cb14-48"><a href="#cb14-48"></a>                                      ALQ120U <span class="sc">==</span> <span class="st">'Week'</span>  <span class="sc">&amp;</span> (ALQ120Q <span class="sc">*</span> <span class="dv">52</span>) <span class="sc">&lt;</span>  <span class="dv">52</span> <span class="sc">~</span> <span class="st">'No'</span>)) <span class="sc">|&gt;</span></span>
<span id="cb14-49"><a href="#cb14-49"></a>  </span>
<span id="cb14-50"><a href="#cb14-50"></a>  <span class="do">## Harmonizing `any hospitalization in &lt; 1 yr` [HUD070/HUQ070/HUQ071]</span></span>
<span id="cb14-51"><a href="#cb14-51"></a>  <span class="fu">mutate</span>(<span class="at">ANYHOSP_INLASTYEAR =</span> <span class="fu">case_when</span>(CYCLE <span class="sc">==</span> <span class="st">'1999-2000'</span> <span class="sc">~</span> HUQ070,</span>
<span id="cb14-52"><a href="#cb14-52"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2001-2002'</span> <span class="sc">~</span> HUD070,</span>
<span id="cb14-53"><a href="#cb14-53"></a>                                        CYCLE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'2003-2004'</span>,</span>
<span id="cb14-54"><a href="#cb14-54"></a>                                                     <span class="st">'2005-2006'</span>,</span>
<span id="cb14-55"><a href="#cb14-55"></a>                                                     <span class="st">'2007-2008'</span>,</span>
<span id="cb14-56"><a href="#cb14-56"></a>                                                     <span class="st">'2009-2010'</span>,</span>
<span id="cb14-57"><a href="#cb14-57"></a>                                                     <span class="st">'2011-2012'</span>,</span>
<span id="cb14-58"><a href="#cb14-58"></a>                                                     <span class="st">'2013-2014'</span>) <span class="sc">~</span> HUQ071)) <span class="sc">|&gt;</span></span>
<span id="cb14-59"><a href="#cb14-59"></a>  </span>
<span id="cb14-60"><a href="#cb14-60"></a>  <span class="do">## Harmonizing `&gt; 2 overnight hospitalizations in 1 yr` [HUD080/HUQ080]</span></span>
<span id="cb14-61"><a href="#cb14-61"></a>  <span class="fu">mutate</span>(<span class="at">NUMHOSP_INLASTYEAR =</span> <span class="fu">case_when</span>(CYCLE <span class="sc">==</span> <span class="st">'1999-2000'</span> <span class="sc">&amp;</span> HUQ070 <span class="sc">==</span> <span class="st">'No'</span>  <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-62"><a href="#cb14-62"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'1999-2000'</span> <span class="sc">&amp;</span> HUQ070 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">~</span> HUD080,</span>
<span id="cb14-63"><a href="#cb14-63"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2003-2004'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'No'</span>  <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-64"><a href="#cb14-64"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2003-2004'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">~</span> HUD080,</span>
<span id="cb14-65"><a href="#cb14-65"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2005-2006'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'No'</span>  <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-66"><a href="#cb14-66"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2005-2006'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">~</span> HUD080,</span>
<span id="cb14-67"><a href="#cb14-67"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2007-2008'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'No'</span>  <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-68"><a href="#cb14-68"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2007-2008'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">~</span> HUD080,</span>
<span id="cb14-69"><a href="#cb14-69"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2009-2010'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'No'</span>  <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-70"><a href="#cb14-70"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2009-2010'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">~</span> HUD080,</span>
<span id="cb14-71"><a href="#cb14-71"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2011-2012'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'No'</span>  <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-72"><a href="#cb14-72"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2011-2012'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">~</span> HUD080,</span>
<span id="cb14-73"><a href="#cb14-73"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2013-2014'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'No'</span>  <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-74"><a href="#cb14-74"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2013-2014'</span> <span class="sc">&amp;</span> HUQ071 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">~</span> HUD080,</span>
<span id="cb14-75"><a href="#cb14-75"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2001-2002'</span> <span class="sc">&amp;</span> HUD070 <span class="sc">==</span> <span class="st">'No'</span>  <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-76"><a href="#cb14-76"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2001-2002'</span> <span class="sc">&amp;</span> HUD070 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">&amp;</span> HUQ080 <span class="sc">&lt;</span> <span class="dv">6</span> <span class="sc">~</span> HUQ080,</span>
<span id="cb14-77"><a href="#cb14-77"></a>                                        CYCLE <span class="sc">==</span> <span class="st">'2001-2002'</span> <span class="sc">&amp;</span> HUD070 <span class="sc">==</span> <span class="st">'Yes'</span> <span class="sc">&amp;</span> HUQ080 <span class="sc">%in%</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">12</span> <span class="sc">~</span> <span class="dv">6</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-78"><a href="#cb14-78"></a>           <span class="fu">factor</span>(<span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'0'</span>, <span class="st">'1'</span>, <span class="st">'2'</span>, <span class="st">'3'</span>, <span class="st">'4'</span>, <span class="st">'5'</span>, <span class="st">'6 or more'</span>))) <span class="sc">|&gt;</span></span>
<span id="cb14-79"><a href="#cb14-79"></a>  </span>
<span id="cb14-80"><a href="#cb14-80"></a>  <span class="do">## Harmonizing `regular ED care` [HUQ030/HUQ040/HUQ041]</span></span>
<span id="cb14-81"><a href="#cb14-81"></a>  <span class="fu">mutate</span>(<span class="at">REGULAR_EDCARE =</span> <span class="fu">case_when</span>(CYCLE <span class="sc">!=</span> <span class="st">'2013-2014'</span> <span class="sc">&amp;</span> HUQ030 <span class="sc">==</span> <span class="st">'There is no place'</span> <span class="sc">~</span> <span class="st">'There is no place'</span>,</span>
<span id="cb14-82"><a href="#cb14-82"></a>                                    CYCLE <span class="sc">!=</span> <span class="st">'2013-2014'</span> <span class="sc">&amp;</span> HUQ030 <span class="sc">!=</span> <span class="st">'There is no place'</span> <span class="sc">~</span> HUQ040,</span>
<span id="cb14-83"><a href="#cb14-83"></a>                                    CYCLE <span class="sc">==</span> <span class="st">'2013-2014'</span> <span class="sc">&amp;</span> HUQ030 <span class="sc">==</span> <span class="st">'There is no place'</span> <span class="sc">~</span> <span class="st">'There is no place'</span>,</span>
<span id="cb14-84"><a href="#cb14-84"></a>                                    CYCLE <span class="sc">==</span> <span class="st">'2013-2014'</span> <span class="sc">&amp;</span> HUQ030 <span class="sc">!=</span> <span class="st">'There is no place'</span> <span class="sc">~</span> HUQ041) <span class="sc">|&gt;</span></span>
<span id="cb14-85"><a href="#cb14-85"></a>           <span class="fu">factor</span>()) <span class="sc">|&gt;</span></span>
<span id="cb14-86"><a href="#cb14-86"></a>  </span>
<span id="cb14-87"><a href="#cb14-87"></a>  <span class="do">## Harmonizing `taken prescription medication in last month` [RDX030/RDXUSE]</span></span>
<span id="cb14-88"><a href="#cb14-88"></a>  <span class="fu">mutate</span>(<span class="at">TAKERX_INLASTMONTH =</span> <span class="fu">case_when</span>(CYCLE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'1999-2000'</span>, <span class="st">'2001-2002'</span>) <span class="sc">~</span> RXD030,</span>
<span id="cb14-89"><a href="#cb14-89"></a>                                        CYCLE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'2003-2004'</span>,</span>
<span id="cb14-90"><a href="#cb14-90"></a>                                                     <span class="st">'2005-2006'</span>,</span>
<span id="cb14-91"><a href="#cb14-91"></a>                                                     <span class="st">'2007-2008'</span>,</span>
<span id="cb14-92"><a href="#cb14-92"></a>                                                     <span class="st">'2009-2010'</span>,</span>
<span id="cb14-93"><a href="#cb14-93"></a>                                                     <span class="st">'2011-2012'</span>,</span>
<span id="cb14-94"><a href="#cb14-94"></a>                                                     <span class="st">'2013-2014'</span>) <span class="sc">~</span> RXDUSE)) <span class="sc">|&gt;</span></span>
<span id="cb14-95"><a href="#cb14-95"></a>  </span>
<span id="cb14-96"><a href="#cb14-96"></a>  <span class="do">## To generate an indicator reflecting whether a given RX is observed across all RXs reported</span></span>
<span id="cb14-97"><a href="#cb14-97"></a>  <span class="do">## by a given participant, we convert the TRUE/FALSE RX series into 0/1 integer vectors.</span></span>
<span id="cb14-98"><a href="#cb14-98"></a>  <span class="do">## Values of NA are converted to 0, then the max value across all RXs is taken. Afterwards,</span></span>
<span id="cb14-99"><a href="#cb14-99"></a>  <span class="do">## the resulting summary/indicator vectors are converted into factors ('No' v/s 'Yes'), and</span></span>
<span id="cb14-100"><a href="#cb14-100"></a>  <span class="do">## values of 'No' are replaced with NA if `TAKERX_INLASTMONTH` is missing.</span></span>
<span id="cb14-101"><a href="#cb14-101"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">'.'</span>), as.integer)) <span class="sc">|&gt;</span></span>
<span id="cb14-102"><a href="#cb14-102"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">'.'</span>), <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb14-103"><a href="#cb14-103"></a>  <span class="fu">mutate</span>(<span class="at">benzodiazepines =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".benzodiazepines"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-104"><a href="#cb14-104"></a>  <span class="fu">mutate</span>(<span class="at">opioids =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".opioids"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-105"><a href="#cb14-105"></a>  <span class="fu">mutate</span>(<span class="at">ssris =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".ssris"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-106"><a href="#cb14-106"></a>  <span class="fu">mutate</span>(<span class="at">antidepressants =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".antidepressants"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-107"><a href="#cb14-107"></a>  <span class="fu">mutate</span>(<span class="at">antidepres_othr =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".antidepres_othr"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-108"><a href="#cb14-108"></a>  <span class="fu">mutate</span>(<span class="at">antipsychotics =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".antipsychotics"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-109"><a href="#cb14-109"></a>  <span class="fu">mutate</span>(<span class="at">analgesics =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".analgesics"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-110"><a href="#cb14-110"></a>  <span class="fu">mutate</span>(<span class="at">muscle_relax =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".muscle_relaxants"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-111"><a href="#cb14-111"></a>  <span class="fu">mutate</span>(<span class="at">anticonvulsant =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".anticonvulsants"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-112"><a href="#cb14-112"></a>  <span class="fu">mutate</span>(<span class="at">hormonalagents =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".hormonal_agents"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-113"><a href="#cb14-113"></a>  <span class="fu">mutate</span>(<span class="at">gastrointestin =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".gastrointestinal_agents"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-114"><a href="#cb14-114"></a>  <span class="fu">mutate</span>(<span class="at">cardi_metab_ag =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".cardi_metab_agents"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-115"><a href="#cb14-115"></a>  <span class="fu">mutate</span>(<span class="at">resp_antihist =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".respiratory_antihist"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-116"><a href="#cb14-116"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(benzodiazepines, opioids, ssris, antidepressants, antidepres_othr,</span>
<span id="cb14-117"><a href="#cb14-117"></a>                  antipsychotics, analgesics, muscle_relax, anticonvulsant, hormonalagents,</span>
<span id="cb14-118"><a href="#cb14-118"></a>                  gastrointestin, cardi_metab_ag, resp_antihist),</span>
<span id="cb14-119"><a href="#cb14-119"></a>                <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(TAKERX_INLASTMONTH), <span class="cn">NA</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb14-120"><a href="#cb14-120"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(benzodiazepines, opioids, ssris, antidepressants, antidepres_othr,</span>
<span id="cb14-121"><a href="#cb14-121"></a>                  antipsychotics, analgesics, muscle_relax, anticonvulsant, hormonalagents,</span>
<span id="cb14-122"><a href="#cb14-122"></a>                  gastrointestin, cardi_metab_ag, resp_antihist),</span>
<span id="cb14-123"><a href="#cb14-123"></a>                <span class="sc">~</span><span class="fu">factor</span>(., <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'No'</span>, <span class="st">'Yes'</span>)))) <span class="sc">|&gt;</span></span>
<span id="cb14-124"><a href="#cb14-124"></a>  </span>
<span id="cb14-125"><a href="#cb14-125"></a>  <span class="do">## The process above is repeated for the `&gt; 2 CNS medications` and `&lt; 5 Non-CNS medication`</span></span>
<span id="cb14-126"><a href="#cb14-126"></a>  <span class="do">## indicators, with a slight variation in the steps.</span></span>
<span id="cb14-127"><a href="#cb14-127"></a>  <span class="fu">mutate</span>(<span class="at">cnsmax =</span> <span class="fu">do.call</span>(pmax, <span class="fu">c</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">".cns"</span>))))) <span class="sc">|&gt;</span></span>
<span id="cb14-128"><a href="#cb14-128"></a>  <span class="fu">mutate</span>(<span class="at">cns_morethan2  =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">'.cns'</span>), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>))) <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-129"><a href="#cb14-129"></a>  <span class="fu">mutate</span>(<span class="at">ncns_lessthan5 =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">'.cns'</span>), <span class="sc">~</span> . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>))) <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-130"><a href="#cb14-130"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(cns_morethan2, ncns_lessthan5), <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(TAKERX_INLASTMONTH), <span class="cn">NA</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb14-131"><a href="#cb14-131"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(cns_morethan2, ncns_lessthan5), </span>
<span id="cb14-132"><a href="#cb14-132"></a>                <span class="sc">~</span><span class="fu">factor</span>(., <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'No'</span>, <span class="st">'Yes'</span>)))) <span class="sc">|&gt;</span></span>
<span id="cb14-133"><a href="#cb14-133"></a>  </span>
<span id="cb14-134"><a href="#cb14-134"></a>  <span class="do">## Finalizing columns for export</span></span>
<span id="cb14-135"><a href="#cb14-135"></a>  <span class="fu">select</span>(</span>
<span id="cb14-136"><a href="#cb14-136"></a>    SEQN,                  <span class="co"># Respondent sequence number</span></span>
<span id="cb14-137"><a href="#cb14-137"></a>    mortstat,              <span class="co"># Derived or harmonized variable</span></span>
<span id="cb14-138"><a href="#cb14-138"></a>    permth_int,            <span class="co"># Derived or harmonized variable (related to mortality linkage)</span></span>
<span id="cb14-139"><a href="#cb14-139"></a>    permth_exm,            <span class="co"># Derived or harmonized variable (related to mortality linkage)</span></span>
<span id="cb14-140"><a href="#cb14-140"></a>    CYCLE,                 <span class="co"># Derived or harmonized variable (likely study cycle)</span></span>
<span id="cb14-141"><a href="#cb14-141"></a>    SDMVSTRA,              <span class="co"># Masked variance pseudo-stratum</span></span>
<span id="cb14-142"><a href="#cb14-142"></a>    SDMVPSU,               <span class="co"># Masked variance pseudo-PSU</span></span>
<span id="cb14-143"><a href="#cb14-143"></a>    WTMEC2YR,              <span class="co"># Full sample 2-year MEC exam weight</span></span>
<span id="cb14-144"><a href="#cb14-144"></a>    RIDSTATR,              <span class="co"># Interview/examination status</span></span>
<span id="cb14-145"><a href="#cb14-145"></a>    RIDAGEYR,              <span class="co"># Age in years at screening</span></span>
<span id="cb14-146"><a href="#cb14-146"></a>    RIAGENDR,              <span class="co"># Gender</span></span>
<span id="cb14-147"><a href="#cb14-147"></a>    DMDEDUC2,              <span class="co"># Education level (adults 20+)</span></span>
<span id="cb14-148"><a href="#cb14-148"></a>    INDFMPIR,              <span class="co"># Family monthly poverty income ratio</span></span>
<span id="cb14-149"><a href="#cb14-149"></a>    RIDRETH1,              <span class="co"># Race/ethnicity</span></span>
<span id="cb14-150"><a href="#cb14-150"></a>    DMDMARTL,              <span class="co"># Marital status</span></span>
<span id="cb14-151"><a href="#cb14-151"></a>    SMOKING_HARMONIZED,    <span class="co"># Harmonized smoking variable [SMQ020/SMQ040]</span></span>
<span id="cb14-152"><a href="#cb14-152"></a>    BPQ020,                <span class="co"># Ever told had high blood pressure</span></span>
<span id="cb14-153"><a href="#cb14-153"></a>    LIPIDEM_HARMONIZED,    <span class="co"># Lipidemia harmonized [BPQ060/BPQ080]</span></span>
<span id="cb14-154"><a href="#cb14-154"></a>    MCQ160F,               <span class="co"># Ever told you had a stroke</span></span>
<span id="cb14-155"><a href="#cb14-155"></a>    MCQ160E,               <span class="co"># Ever told you had a heart attack</span></span>
<span id="cb14-156"><a href="#cb14-156"></a>    DIQ010,                <span class="co"># Doctor told you have diabetes</span></span>
<span id="cb14-157"><a href="#cb14-157"></a>    MCQ160B,               <span class="co"># Ever told you had congestive heart failure</span></span>
<span id="cb14-158"><a href="#cb14-158"></a>    PULMOND_HARMONIZED,    <span class="co"># Harmonized pulmonary condition variable [MCQ160G/MCQ160K/MCQ160O]</span></span>
<span id="cb14-159"><a href="#cb14-159"></a>    MCQ160L,               <span class="co"># Ever told you had liver condition</span></span>
<span id="cb14-160"><a href="#cb14-160"></a>    MCQ160A,               <span class="co"># Ever told you had arthritis</span></span>
<span id="cb14-161"><a href="#cb14-161"></a>    KIDNEYD_HARMONIZED,    <span class="co"># Harmonized kidney disease variable [KIQ020/KIQ022]</span></span>
<span id="cb14-162"><a href="#cb14-162"></a>    MCQ220,                <span class="co"># Ever told you had cancer or malignancy</span></span>
<span id="cb14-163"><a href="#cb14-163"></a>    ANYHOSP_INLASTYEAR,    <span class="co"># Harmonized indicator of any hospital visit in last year [HUD070/HUQ070/HUQ071]</span></span>
<span id="cb14-164"><a href="#cb14-164"></a>    HUQ090,                <span class="co"># Seen a mental health professional in past year</span></span>
<span id="cb14-165"><a href="#cb14-165"></a>    HUQ010,                <span class="co"># General health condition [Excellent/Very Good/Good/Fair/Poor]</span></span>
<span id="cb14-166"><a href="#cb14-166"></a>    PFQ090,                <span class="co"># Last 12 months, received care at emergency room</span></span>
<span id="cb14-167"><a href="#cb14-167"></a>    REGULAR_EDCARE,        <span class="co"># Harmonized type or place most often go for healthcare [HUQ040/HUQ041]</span></span>
<span id="cb14-168"><a href="#cb14-168"></a>    HUQ020,                <span class="co"># Health condition compared to a year ago</span></span>
<span id="cb14-169"><a href="#cb14-169"></a>    NUMHOSP_INLASTYEAR,    <span class="co"># Harmonized number of hospitalizations in last year [HUD080/HUQ080]</span></span>
<span id="cb14-170"><a href="#cb14-170"></a>    TAKERX_INLASTMONTH,    <span class="co"># Harmonized taken prescription/medicine in past month [RDX030/RDXUSE]</span></span>
<span id="cb14-171"><a href="#cb14-171"></a>    benzodiazepines,       <span class="co"># Any benzodiazepines reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-172"><a href="#cb14-172"></a>    opioids,               <span class="co"># Any opioids reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-173"><a href="#cb14-173"></a>    ssris,                 <span class="co"># Any ssris reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-174"><a href="#cb14-174"></a>    antidepressants,       <span class="co"># Any anti-depressants (SNRIs, MAOIs, or TCAs) reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-175"><a href="#cb14-175"></a>    antidepres_othr,       <span class="co"># Any other anti-depressants reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-176"><a href="#cb14-176"></a>    antipsychotics,        <span class="co"># Any anti-psychotics reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-177"><a href="#cb14-177"></a>    analgesics,            <span class="co"># Any analgesics reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-178"><a href="#cb14-178"></a>    muscle_relax,          <span class="co"># Any muscle relaxants reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-179"><a href="#cb14-179"></a>    anticonvulsant,        <span class="co"># Any anti-convulsants reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-180"><a href="#cb14-180"></a>    hormonalagents,        <span class="co"># Any hormonal agents reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-181"><a href="#cb14-181"></a>    gastrointestin,        <span class="co"># Any gastrointestinal agents reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-182"><a href="#cb14-182"></a>    cardi_metab_ag,        <span class="co"># Any cardiac or metabolic medications reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-183"><a href="#cb14-183"></a>    resp_antihist,         <span class="co"># Any respiratory medicators or antihistamines reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-184"><a href="#cb14-184"></a>    cns_morethan2,         <span class="co"># &gt; 2 CNS medications reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-185"><a href="#cb14-185"></a>    ncns_lessthan5,        <span class="co"># &lt; 5 NCNS medications reported, harmonized from RDX/RDX_DRUG data tables</span></span>
<span id="cb14-186"><a href="#cb14-186"></a>    REGULAR_DRINKING       <span class="co"># Harmonized regular drinker status [ALQ100/ALD100/ALQ110/ALQ120U/ALQ120Q]</span></span>
<span id="cb14-187"><a href="#cb14-187"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="exporting-and-saving-data" class="level4"><h4 class="anchored" data-anchor-id="exporting-and-saving-data">Exporting and Saving Data</h4>
<p>This chunk exports the harmonized and processed NHANES dataset to an RDS file for future use. It also subsets the data based on specific NHANES cycles (1999-2000, 2001-2002, etc.), allowing for cycle-specific analysis. This ensures that both the full dataset and individual cycle-specific datasets are available for later use in mortality and health outcome analyses. The data includes key demographic, lifestyle, and prescription medication variables needed for analysis, particularly the survival and mortality data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="do">## Exporting data</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>rio<span class="sc">::</span><span class="fu">export</span>(<span class="at">x =</span> d.final, <span class="at">file =</span> <span class="st">'xu-et-al-2020-nhanes-data.rds'</span>)</span>
<span id="cb15-3"><a href="#cb15-3"></a></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co"># Mortality data - cycle specific</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>dat.mortality99 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.nhanes, CYCLE <span class="sc">==</span> <span class="st">'1999-2000'</span>)</span>
<span id="cb15-6"><a href="#cb15-6"></a>dat.mortality01 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.nhanes, CYCLE <span class="sc">==</span> <span class="st">'2001-2002'</span>)</span>
<span id="cb15-7"><a href="#cb15-7"></a>dat.mortality03 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.nhanes, CYCLE <span class="sc">==</span> <span class="st">'2003-2004'</span>)</span>
<span id="cb15-8"><a href="#cb15-8"></a>dat.mortality05 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.nhanes, CYCLE <span class="sc">==</span> <span class="st">'2005-2006'</span>)</span>
<span id="cb15-9"><a href="#cb15-9"></a>dat.mortality07 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.nhanes, CYCLE <span class="sc">==</span> <span class="st">'2007-2008'</span>)</span>
<span id="cb15-10"><a href="#cb15-10"></a>dat.mortality09 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.nhanes, CYCLE <span class="sc">==</span> <span class="st">'2009-2010'</span>)</span>
<span id="cb15-11"><a href="#cb15-11"></a>dat.mortality11 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.nhanes, CYCLE <span class="sc">==</span> <span class="st">'2011-2012'</span>)</span>
<span id="cb15-12"><a href="#cb15-12"></a>dat.mortality13 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.nhanes, CYCLE <span class="sc">==</span> <span class="st">'2013-2014'</span>)</span>
<span id="cb15-13"><a href="#cb15-13"></a></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co"># NHANES data - cycle specific</span></span>
<span id="cb15-15"><a href="#cb15-15"></a>d.final <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"xu-et-al-2020-nhanes-data.rds"</span>)</span>
<span id="cb15-16"><a href="#cb15-16"></a>d.final<span class="sc">$</span>mortstat <span class="ot">&lt;-</span> d.final<span class="sc">$</span>permth_int <span class="ot">&lt;-</span> d.final<span class="sc">$</span>permth_exm <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb15-17"><a href="#cb15-17"></a></span>
<span id="cb15-18"><a href="#cb15-18"></a>dat.nhanes99 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.final, CYCLE <span class="sc">==</span> <span class="st">'1999-2000'</span>)</span>
<span id="cb15-19"><a href="#cb15-19"></a>dat.nhanes01 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.final, CYCLE <span class="sc">==</span> <span class="st">'2001-2002'</span>)</span>
<span id="cb15-20"><a href="#cb15-20"></a>dat.nhanes03 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.final, CYCLE <span class="sc">==</span> <span class="st">'2003-2004'</span>)</span>
<span id="cb15-21"><a href="#cb15-21"></a>dat.nhanes05 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.final, CYCLE <span class="sc">==</span> <span class="st">'2005-2006'</span>)</span>
<span id="cb15-22"><a href="#cb15-22"></a>dat.nhanes07 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.final, CYCLE <span class="sc">==</span> <span class="st">'2007-2008'</span>)</span>
<span id="cb15-23"><a href="#cb15-23"></a>dat.nhanes09 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.final, CYCLE <span class="sc">==</span> <span class="st">'2009-2010'</span>)</span>
<span id="cb15-24"><a href="#cb15-24"></a>dat.nhanes11 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.final, CYCLE <span class="sc">==</span> <span class="st">'2011-2012'</span>)</span>
<span id="cb15-25"><a href="#cb15-25"></a>dat.nhanes13 <span class="ot">&lt;-</span> <span class="fu">subset</span>(d.final, CYCLE <span class="sc">==</span> <span class="st">'2013-2014'</span>)</span>
<span id="cb15-26"><a href="#cb15-26"></a></span>
<span id="cb15-27"><a href="#cb15-27"></a><span class="co"># Save mortality and NHANES datasets</span></span>
<span id="cb15-28"><a href="#cb15-28"></a><span class="fu">save</span>(dat.mortality99, dat.nhanes99,</span>
<span id="cb15-29"><a href="#cb15-29"></a>     dat.mortality01, dat.nhanes01,</span>
<span id="cb15-30"><a href="#cb15-30"></a>     dat.mortality03, dat.nhanes03,</span>
<span id="cb15-31"><a href="#cb15-31"></a>     dat.mortality05, dat.nhanes05,</span>
<span id="cb15-32"><a href="#cb15-32"></a>     dat.mortality07, dat.nhanes07,</span>
<span id="cb15-33"><a href="#cb15-33"></a>     dat.mortality09, dat.nhanes09,</span>
<span id="cb15-34"><a href="#cb15-34"></a>     dat.mortality11, dat.nhanes11,</span>
<span id="cb15-35"><a href="#cb15-35"></a>     dat.mortality13, dat.nhanes13,</span>
<span id="cb15-36"><a href="#cb15-36"></a>     <span class="at">file =</span> <span class="st">"Data/nhanes_mortality_1999_2014.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./accessing7.html" class="pagination-link" aria-label="Linking mortality data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Linking mortality data</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./accessingF.html" class="pagination-link" aria-label="R Functions (A)">
        <span class="nav-page-text">R Functions (A)</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>