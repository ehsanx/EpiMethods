<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>OER: Advanced Epidemiological Methods - Collapsibility</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./confounding6.html" rel="next">
<link href="./confounding4.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CVBPG0RQMY"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CVBPG0RQMY', { 'anonymize_ip': true});
</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
<meta name="twitter:title" content="OER: Advanced Epidemiological Methods - Collapsibility">
<meta name="twitter:description" content="Explanation of collapsibility property of an estimate (RD, RR and OR: conditional or marginal) in absence of confounding">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar docked">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Collapsibility</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">OER: Advanced Epidemiological Methods</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">The Project</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./wrangling.html" class="sidebar-item-text sidebar-link">Data wrangling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1a.html" class="sidebar-item-text sidebar-link">R basics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1b.html" class="sidebar-item-text sidebar-link">Data types</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1c.html" class="sidebar-item-text sidebar-link">Automating tasks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling2.html" class="sidebar-item-text sidebar-link">Importing dataset</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling3.html" class="sidebar-item-text sidebar-link">Data manipulation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling4.html" class="sidebar-item-text sidebar-link">Import external data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling5.html" class="sidebar-item-text sidebar-link">Summary tables</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling6.html" class="sidebar-item-text sidebar-link">R Markdown</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingF.html" class="sidebar-item-text sidebar-link">R Functions (W)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingQ.html" class="sidebar-item-text sidebar-link">Quiz (W)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingE.html" class="sidebar-item-text sidebar-link">Exercise (W)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./accessing.html" class="sidebar-item-text sidebar-link">Data accessing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing1.html" class="sidebar-item-text sidebar-link">Survey data sources</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing2.html" class="sidebar-item-text sidebar-link">Importing CCHS to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing3.html" class="sidebar-item-text sidebar-link">Importing NHANES to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing4.html" class="sidebar-item-text sidebar-link">Reproducing results</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing5.html" class="sidebar-item-text sidebar-link">Importing NHIS to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingF.html" class="sidebar-item-text sidebar-link">R Functions (A)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingQ.html" class="sidebar-item-text sidebar-link">Quiz (A)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingE.html" class="sidebar-item-text sidebar-link">Exercise (A)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./researchquestion.html" class="sidebar-item-text sidebar-link">Research questions</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion1.html" class="sidebar-item-text sidebar-link">Predictive question-1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2a.html" class="sidebar-item-text sidebar-link">Predictive question-2a</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2b.html" class="sidebar-item-text sidebar-link">Predictive question-2b</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion3.html" class="sidebar-item-text sidebar-link">Causal question-1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion4.html" class="sidebar-item-text sidebar-link">Causal question-2</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionF.html" class="sidebar-item-text sidebar-link">R functions (Q)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionQ.html" class="sidebar-item-text sidebar-link">Quiz (Q)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./confounding.html" class="sidebar-item-text sidebar-link">Causal roles</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding1.html" class="sidebar-item-text sidebar-link">Confounding</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding2.html" class="sidebar-item-text sidebar-link">Mediator</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding3.html" class="sidebar-item-text sidebar-link">Collider</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding4.html" class="sidebar-item-text sidebar-link">Z-bias</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding5.html" class="sidebar-item-text sidebar-link active">Collapsibility</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding6.html" class="sidebar-item-text sidebar-link">Change-in-estimate</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingF.html" class="sidebar-item-text sidebar-link">R functions (R)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingQ.html" class="sidebar-item-text sidebar-link">Quiz (R)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./predictivefactors.html" class="sidebar-item-text sidebar-link">Prediction ideas</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors1.html" class="sidebar-item-text sidebar-link">Collinear predictors</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors2.html" class="sidebar-item-text sidebar-link">Continuous outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors3.html" class="sidebar-item-text sidebar-link">Binary outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors4.html" class="sidebar-item-text sidebar-link">Overfitting and performance</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors5.html" class="sidebar-item-text sidebar-link">Data spliting</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors6.html" class="sidebar-item-text sidebar-link">Cross-validation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors7.html" class="sidebar-item-text sidebar-link">Bootstrap</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsF.html" class="sidebar-item-text sidebar-link">R functions (P)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsQ.html" class="sidebar-item-text sidebar-link">Quiz (P)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./surveydata.html" class="sidebar-item-text sidebar-link">Survey data analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata1.html" class="sidebar-item-text sidebar-link">CCHS: Revisiting PICOT</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata2.html" class="sidebar-item-text sidebar-link">CCHS: Assessing data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata3.html" class="sidebar-item-text sidebar-link">CCHS: Bivariate analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata4.html" class="sidebar-item-text sidebar-link">CCHS: Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata5.html" class="sidebar-item-text sidebar-link">CCHS: Performance</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata6.html" class="sidebar-item-text sidebar-link">NHANES: Blood Pressure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata7.html" class="sidebar-item-text sidebar-link">NHANES: Cholesterol</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata8.html" class="sidebar-item-text sidebar-link">NHANES: Subsetting</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataF.html" class="sidebar-item-text sidebar-link">R functions (D)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataQ.html" class="sidebar-item-text sidebar-link">Quiz (D)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataE.html" class="sidebar-item-text sidebar-link">Exercise (D)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./missingdata.html" class="sidebar-item-text sidebar-link">Missing data analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata1.html" class="sidebar-item-text sidebar-link">Imputation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata2.html" class="sidebar-item-text sidebar-link">Imputation in NHANES</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata3.html" class="sidebar-item-text sidebar-link">Missing in outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata4.html" class="sidebar-item-text sidebar-link">Performance with NA</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata5.html" class="sidebar-item-text sidebar-link">Subpopulations</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata6.html" class="sidebar-item-text sidebar-link">MCAR tests</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata7.html" class="sidebar-item-text sidebar-link">Effect modification</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataF.html" class="sidebar-item-text sidebar-link">R functions (M)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataQ.html" class="sidebar-item-text sidebar-link">Quiz (M)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataE.html" class="sidebar-item-text sidebar-link">Exercise (M)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./propensityscore.html" class="sidebar-item-text sidebar-link">Propensity score</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore1.html" class="sidebar-item-text sidebar-link">Exact Matching (CCHS)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore2.html" class="sidebar-item-text sidebar-link">PSM in OA-CVD (CCHS)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore3.html" class="sidebar-item-text sidebar-link">PSM in OA-CVD (US)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore4.html" class="sidebar-item-text sidebar-link">PSM in BMI-diabetes</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore5.html" class="sidebar-item-text sidebar-link">PSM with MI</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreF.html" class="sidebar-item-text sidebar-link">R functions (S)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreQ.html" class="sidebar-item-text sidebar-link">Quiz (S)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreE.html" class="sidebar-item-text sidebar-link">Exercise (S)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearning.html" class="sidebar-item-text sidebar-link">Machine learning</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning1.html" class="sidebar-item-text sidebar-link">Continuous outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning2.html" class="sidebar-item-text sidebar-link">Data spliting</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning3.html" class="sidebar-item-text sidebar-link">Cross-validation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning4.html" class="sidebar-item-text sidebar-link">Binary outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning5.html" class="sidebar-item-text sidebar-link">Supervised learning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning6.html" class="sidebar-item-text sidebar-link">Unsupervised learning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningF.html" class="sidebar-item-text sidebar-link">R functions (L)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearningCausal.html" class="sidebar-item-text sidebar-link">Causal learning</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausalF.html" class="sidebar-item-text sidebar-link">R functions (C)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./nonbinary.html" class="sidebar-item-text sidebar-link">Complex outcomes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary1.html" class="sidebar-item-text sidebar-link">Polytomous and ordinal</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary2.html" class="sidebar-item-text sidebar-link">Survival analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary3.html" class="sidebar-item-text sidebar-link">Poisson</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinaryF.html" class="sidebar-item-text sidebar-link">R functions (N)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinaryQ.html" class="sidebar-item-text sidebar-link">Quiz (N)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./longitudinal.html" class="sidebar-item-text sidebar-link">Longitudinal data</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinal1.html" class="sidebar-item-text sidebar-link">Mixed effects models</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinal2.html" class="sidebar-item-text sidebar-link">GEE</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinalF.html" class="sidebar-item-text sidebar-link">R functions (T)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinalQ.html" class="sidebar-item-text sidebar-link">Quiz (T)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./mediation.html" class="sidebar-item-text sidebar-link">Mediation analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation1.html" class="sidebar-item-text sidebar-link">Baron and Kenny</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation2.html" class="sidebar-item-text sidebar-link">Justification</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation3.html" class="sidebar-item-text sidebar-link">Mediation Example</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediationF.html" class="sidebar-item-text sidebar-link">R functions (I)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediationQ.html" class="sidebar-item-text sidebar-link">Quiz (I)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./reporting.html" class="sidebar-item-text sidebar-link">Writing Tools</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reporting1.html" class="sidebar-item-text sidebar-link">Collaborative Writing</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reporting2.html" class="sidebar-item-text sidebar-link">Formatting Tools</a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#data-generating-process" id="toc-data-generating-process" class="nav-link active" data-scroll-target="#data-generating-process">Data generating process</a></li>
  <li><a href="#conditional-and-crude-rd" id="toc-conditional-and-crude-rd" class="nav-link" data-scroll-target="#conditional-and-crude-rd">Conditional and crude RD</a></li>
  <li><a href="#conditional-and-crude-rr" id="toc-conditional-and-crude-rr" class="nav-link" data-scroll-target="#conditional-and-crude-rr">Conditional and crude RR</a></li>
  <li><a href="#conditional-and-crude-or" id="toc-conditional-and-crude-or" class="nav-link" data-scroll-target="#conditional-and-crude-or">Conditional and crude OR</a></li>
  <li><a href="#marginal-rd-rr-and-or" id="toc-marginal-rd-rr-and-or" class="nav-link" data-scroll-target="#marginal-rd-rr-and-or">Marginal RD, RR and OR</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#video-content-optional" id="toc-video-content-optional" class="nav-link" data-scroll-target="#video-content-optional">Video content (optional)</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">Collapsibility</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i></button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>Explanation of collapsibility property of an estimate (RD, RR and OR: conditional or marginal) in absence of confounding</p>
<div class="cell" data-hash="confounding5_cache/html/setup_f43e5b8ecc2d9316962c802da4e61e86">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load required packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(simcausal)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(tableone)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(Publish)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(lawstat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="data-generating-process" class="level3"><h3 class="anchored" data-anchor-id="data-generating-process">Data generating process</h3>
<div class="cell" data-hash="confounding5_cache/html/dgm5_d309cee292f9bef213bd2a47b95f01db">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">require</span>(simcausal)</span>
<span id="cb2-2"><a href="#cb2-2"></a>D <span class="ot">&lt;-</span> <span class="fu">DAG.empty</span>()</span>
<span id="cb2-3"><a href="#cb2-3"></a>D <span class="ot">&lt;-</span> D <span class="sc">+</span> </span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="fu">node</span>(<span class="st">"gender"</span>, <span class="at">distr =</span> <span class="st">"rbern"</span>, </span>
<span id="cb2-5"><a href="#cb2-5"></a>       <span class="at">prob =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="fu">node</span>(<span class="st">"age"</span>, <span class="at">distr =</span> <span class="st">"rnorm"</span>, </span>
<span id="cb2-7"><a href="#cb2-7"></a>       <span class="at">mean =</span> <span class="dv">2</span>, <span class="at">sd =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="fu">node</span>(<span class="st">"smoking"</span>, <span class="at">distr =</span> <span class="st">"rbern"</span>, </span>
<span id="cb2-9"><a href="#cb2-9"></a>       <span class="at">prob =</span> <span class="fu">plogis</span>(.<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="fu">node</span>(<span class="st">"hypertension"</span>, <span class="at">distr =</span> <span class="st">"rbern"</span>, </span>
<span id="cb2-11"><a href="#cb2-11"></a>       <span class="at">prob =</span> <span class="fu">plogis</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="fu">log</span>(<span class="fl">3.5</span>) <span class="sc">*</span> smoking </span>
<span id="cb2-12"><a href="#cb2-12"></a>                     <span class="sc">+</span> <span class="fu">log</span>(.<span class="dv">1</span>) <span class="sc">*</span> gender  </span>
<span id="cb2-13"><a href="#cb2-13"></a>                       <span class="sc">+</span> <span class="fu">log</span>(<span class="dv">7</span>) <span class="sc">*</span> age))</span>
<span id="cb2-14"><a href="#cb2-14"></a>Dset <span class="ot">&lt;-</span> <span class="fu">set.DAG</span>(D)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="generate-dag" class="level4"><h4 class="anchored" data-anchor-id="generate-dag">Generate DAG</h4>
<div class="cell" data-hash="confounding5_cache/html/dag5_af75c6de1aee706f18a7846793419b01">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">plotDAG</span>(Dset, <span class="at">xjitter =</span> <span class="fl">0.1</span>, <span class="at">yjitter =</span> .<span class="dv">9</span>,</span>
<span id="cb3-2"><a href="#cb3-2"></a>        <span class="at">edge_attrs =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">arrow.width =</span> <span class="fl">0.4</span>, <span class="at">arrow.size =</span> <span class="fl">0.7</span>),</span>
<span id="cb3-3"><a href="#cb3-3"></a>        <span class="at">vertex_attrs =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">label.cex =</span> <span class="fl">0.8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="confounding5_files/figure-html/dag5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="generate-data" class="level4"><h4 class="anchored" data-anchor-id="generate-data">Generate Data</h4>
<div class="cell" data-hash="confounding5_cache/html/data5_5c83fd2d406da53a9654894b79eeae97">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>Obs.Data <span class="ot">&lt;-</span> <span class="fu">sim</span>(<span class="at">DAG =</span> Dset, <span class="at">n =</span> <span class="dv">100000</span>, <span class="at">rndseed =</span> <span class="dv">123</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">head</span>(Obs.Data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["ID"],"name":[1],"type":["int"],"align":["right"]},{"label":["gender"],"name":[2],"type":["int"],"align":["right"]},{"label":["age"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["smoking"],"name":[4],"type":["int"],"align":["right"]},{"label":["hypertension"],"name":[5],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"3.0383589","4":"0","5":"1","_rn_":"1"},{"1":"2","2":"0","3":"5.6700429","4":"1","5":"1","_rn_":"2"},{"1":"3","2":"1","3":"-0.8892734","4":"0","5":"0","_rn_":"3"},{"1":"4","2":"0","3":"-1.2331361","4":"1","5":"1","_rn_":"4"},{"1":"5","2":"0","3":"1.4345919","4":"0","5":"1","_rn_":"5"},{"1":"6","2":"1","3":"11.0280538","4":"1","5":"1","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="balance-check" class="level4"><h4 class="anchored" data-anchor-id="balance-check">Balance check</h4>
<div class="cell" data-hash="confounding5_cache/html/balance5_38911dea5c1587315c5a446f90ffeba4">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">require</span>(tableone)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">CreateTableOne</span>(<span class="at">data =</span> Obs.Data, </span>
<span id="cb5-3"><a href="#cb5-3"></a>               <span class="at">strata =</span> <span class="st">"smoking"</span>, </span>
<span id="cb5-4"><a href="#cb5-4"></a>               <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"age"</span>))</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt;                     Stratified by smoking</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt;                      0            1            p      test</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;   n                  47720        52280                   </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;   gender (mean (SD))  0.70 (0.46)  0.70 (0.46)  0.403     </span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt;   age (mean (SD))     2.02 (4.02)  2.01 (4.00)  0.690</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="conditional-and-crude-rd" class="level3"><h3 class="anchored" data-anchor-id="conditional-and-crude-rd">Conditional and crude RD</h3>
<section id="full-list-of-risk-factors-for-outcome-2-variables" class="level4"><h4 class="anchored" data-anchor-id="full-list-of-risk-factors-for-outcome-2-variables">Full list of risk factors for outcome (2 variables)</h4>
<div class="cell" data-hash="confounding5_cache/html/rd5_24b11519d97ce248ecea591e470cd3d1">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="do">## RD</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">require</span>(Publish)</span>
<span id="cb6-3"><a href="#cb6-3"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender <span class="sc">+</span> age, </span>
<span id="cb6-4"><a href="#cb6-4"></a>             <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb6-6"><a href="#cb6-6"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.06","4":"[0.05;0.06]","5":"< 1e-04","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Ref:</p>
<ul>
<li>
<span class="citation" data-cites="naimi2020estimating">(<a href="#ref-naimi2020estimating" role="doc-biblioref">Naimi and Whitcomb 2020</a>)</span> (“For the risk difference, one may use a GLM with a Gaussian (i.e., normal) distribution and identity link function, or, equivalently, an ordinary least squares estimator …robust variance estimator (or bootstrap) should be used to obtain valid standard errors.”)</li>
</ul></section><section id="strtatum-specific-2-variables" class="level4"><h4 class="anchored" data-anchor-id="strtatum-specific-2-variables">Strtatum specific (2 variables)</h4>
<div class="cell" data-hash="confounding5_cache/html/eststrata_1e653b24c1ff3e3abffeb7541952a6c1">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb7-2"><a href="#cb7-2"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb7-4"><a href="#cb7-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.11","4":"[0.10;0.12]","5":"< 1e-04","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a></span>
<span id="cb8-2"><a href="#cb8-2"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb8-3"><a href="#cb8-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb8-5"><a href="#cb8-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.10","4":"[0.08;0.12]","5":"< 1e-04","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a></span>
<span id="cb9-2"><a href="#cb9-2"></a>fitx3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb9-3"><a href="#cb9-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="fu">publish</span>(fitx3, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb9-5"><a href="#cb9-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.01","4":"[0.00;0.01]","5":"< 1e-04","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a></span>
<span id="cb10-2"><a href="#cb10-2"></a>fitx4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb10-3"><a href="#cb10-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="fu">publish</span>(fitx4, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb10-5"><a href="#cb10-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.00","4":"[-0.00;0.00]","5":"0.3754","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Unweighted mean from all strata (for simplicity, 2 variables)</p>
<div class="cell" data-hash="confounding5_cache/html/unwgtmean_6d12b8703d20b9b410008629fc1b38b5">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb11-2"><a href="#cb11-2"></a>             <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>],</span>
<span id="cb11-3"><a href="#cb11-3"></a>             <span class="fu">coef</span>(fitx3)[<span class="st">"smoking"</span>],</span>
<span id="cb11-4"><a href="#cb11-4"></a>             <span class="fu">coef</span>(fitx4)[<span class="st">"smoking"</span>])),<span class="dv">2</span>)</span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">#&gt; [1] 0.05</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="partial-list-of-risk-factors-for-outcome-1-variable" class="level4"><h4 class="anchored" data-anchor-id="partial-list-of-risk-factors-for-outcome-1-variable">Partial list of risk factors for outcome (1 variable)</h4>
<div class="cell" data-hash="confounding5_cache/html/riskfactor_aa98e57e08990a77e9ef8de75d1a0e0d">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender, </span>
<span id="cb12-2"><a href="#cb12-2"></a>             <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb12-4"><a href="#cb12-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.05","4":"[0.05;0.06]","5":"< 1e-04","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="strtatum-specific-1-variable" class="level4"><h4 class="anchored" data-anchor-id="strtatum-specific-1-variable">Strtatum specific (1 variable)</h4>
<div class="cell" data-hash="confounding5_cache/html/strata1_6984d894b8e3ea5778243a4225c2edf2">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb13-2"><a href="#cb13-2"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb13-4"><a href="#cb13-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.06","4":"[0.05;0.07]","5":"< 1e-04","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a></span>
<span id="cb14-2"><a href="#cb14-2"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb14-3"><a href="#cb14-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span>))</span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb14-5"><a href="#cb14-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.05","4":"[0.04;0.06]","5":"< 1e-04","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Unweighted mean from all strata (for simplicity, 1 variables)</p>
<div class="cell" data-hash="confounding5_cache/html/wmean_40e7dab34ac61bcc37c0d705b266dbeb">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb15-2"><a href="#cb15-2"></a>             <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>])),<span class="dv">2</span>)</span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">#&gt; [1] 0.05</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="crude-in-absence-of-confounding" class="level4"><h4 class="anchored" data-anchor-id="crude-in-absence-of-confounding">Crude (in absence of confounding)</h4>
<div class="cell" data-hash="confounding5_cache/html/crude_82fbca3267e9217156cfd4c57142fd6c">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb16-2"><a href="#cb16-2"></a>             <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb16-4"><a href="#cb16-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"0.05","4":"[0.05;0.06]","5":"< 1e-04","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section></section><section id="conditional-and-crude-rr" class="level3"><h3 class="anchored" data-anchor-id="conditional-and-crude-rr">Conditional and crude RR</h3>
<p>Ref:</p>
<ul>
<li>
<span class="citation" data-cites="naimi2020estimating">(<a href="#ref-naimi2020estimating" role="doc-biblioref">Naimi and Whitcomb 2020</a>)</span> (“For the risk ratio, one may use a GLM with a Poisson distribution and log link function …. one should use the robust (or sandwich) variance estimator to obtain valid standard errors (the bootstrap can also be used)”).</li>
</ul>
<section id="full-list-of-risk-factors-for-outcome-2-variables-1" class="level4"><h4 class="anchored" data-anchor-id="full-list-of-risk-factors-for-outcome-2-variables-1">Full list of risk factors for outcome (2 variables)</h4>
<div class="cell" data-hash="confounding5_cache/html/fullrisk_138620ef2fe37a3047d937b53b31f3c0">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender <span class="sc">+</span> age, </span>
<span id="cb17-2"><a href="#cb17-2"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb17-4"><a href="#cb17-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.08","4":"[1.08;1.09]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="strtatum-specific-2-variables-1" class="level4"><h4 class="anchored" data-anchor-id="strtatum-specific-2-variables-1">Strtatum specific (2 variables)</h4>
<div class="cell" data-hash="confounding5_cache/html/strata2_764c91e2700f6a0e351e71e96519cbd2">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb18-2"><a href="#cb18-2"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb18-3"><a href="#cb18-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb18-5"><a href="#cb18-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.41","4":"[1.36;1.45]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a></span>
<span id="cb19-2"><a href="#cb19-2"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb19-3"><a href="#cb19-3"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb19-4"><a href="#cb19-4"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb19-6"><a href="#cb19-6"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.21","4":"[1.17;1.25]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a></span>
<span id="cb20-2"><a href="#cb20-2"></a>fitx3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb20-3"><a href="#cb20-3"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb20-4"><a href="#cb20-4"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="fu">publish</span>(fitx3, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb20-6"><a href="#cb20-6"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.01","4":"[1.00;1.01]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a></span>
<span id="cb21-2"><a href="#cb21-2"></a>fitx4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb21-3"><a href="#cb21-3"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb21-4"><a href="#cb21-4"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="fu">publish</span>(fitx4, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb21-6"><a href="#cb21-6"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.00","4":"[1.00;1.00]","5":"0.3754","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Unweighted mean from all strata (for simplicity, 2 variables)</p>
<div class="cell" data-hash="confounding5_cache/html/unwgtmean2_1e3bd3f300304521d8b29306b3daf87c">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">mean</span>(<span class="fu">exp</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb22-2"><a href="#cb22-2"></a>           <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>],</span>
<span id="cb22-3"><a href="#cb22-3"></a>           <span class="fu">coef</span>(fitx3)[<span class="st">"smoking"</span>],</span>
<span id="cb22-4"><a href="#cb22-4"></a>           <span class="fu">coef</span>(fitx4)[<span class="st">"smoking"</span>])))</span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co">#&gt; [1] 1.156387</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="partial-list-of-risk-factors-for-outcome-1-variable-1" class="level4"><h4 class="anchored" data-anchor-id="partial-list-of-risk-factors-for-outcome-1-variable-1">Partial list of risk factors for outcome (1 variable)</h4>
<div class="cell" data-hash="confounding5_cache/html/riskpartial_5a7b7ea775128bd80f8f137395eac381">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender, </span>
<span id="cb23-2"><a href="#cb23-2"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb23-4"><a href="#cb23-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.08","4":"[1.07;1.09]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="strtatum-specific-1-variable-1" class="level4"><h4 class="anchored" data-anchor-id="strtatum-specific-1-variable-1">Strtatum specific (1 variable)</h4>
<div class="cell" data-hash="confounding5_cache/html/strata11_442dd7abb7e7ee31a062281060e546c8">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb24-2"><a href="#cb24-2"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb24-3"><a href="#cb24-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb24-5"><a href="#cb24-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.09","4":"[1.08;1.10]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb25-2"><a href="#cb25-2"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb25-3"><a href="#cb25-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span>))</span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb25-5"><a href="#cb25-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.06","4":"[1.05;1.08]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Unweighted mean from all strata (for simplicity, 1 variable)</p>
<div class="cell" data-hash="confounding5_cache/html/unwgtmean3_e69ae9786d639615e3d37f508c74b7b8">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">mean</span>(<span class="fu">exp</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb26-2"><a href="#cb26-2"></a>           <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>])))</span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="co">#&gt; [1] 1.077402</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="crude-in-absence-of-confounding-1" class="level4"><h4 class="anchored" data-anchor-id="crude-in-absence-of-confounding-1">Crude (in absence of confounding)</h4>
<div class="cell" data-hash="confounding5_cache/html/crude11_453e3a86e7e09ba7815927bade2388cd">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb27-2"><a href="#cb27-2"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb27-4"><a href="#cb27-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["HazardRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.08","4":"[1.07;1.09]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section></section><section id="conditional-and-crude-or" class="level3"><h3 class="anchored" data-anchor-id="conditional-and-crude-or">Conditional and crude OR</h3>
<section id="full-list-of-risk-factors-for-outcome-2-variables-2" class="level4"><h4 class="anchored" data-anchor-id="full-list-of-risk-factors-for-outcome-2-variables-2">Full list of risk factors for outcome (2 variables)</h4>
<div class="cell" data-hash="confounding5_cache/html/orest_c84ddae4fe0bf8626b5631b1091f0a6b">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender <span class="sc">+</span> age, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"3.37","4":"[3.17;3.58]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="strtatum-specific-2-variables-2" class="level4"><h4 class="anchored" data-anchor-id="strtatum-specific-2-variables-2">Strtatum specific (2 variables)</h4>
<div class="cell" data-hash="confounding5_cache/html/strata12_5b3446810e020ade5ad38a3ece956a55">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb29-2"><a href="#cb29-2"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb29-3"><a href="#cb29-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb29-5"><a href="#cb29-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.65","4":"[1.57;1.73]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a></span>
<span id="cb30-2"><a href="#cb30-2"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb30-3"><a href="#cb30-3"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb30-4"><a href="#cb30-4"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb30-6"><a href="#cb30-6"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.49","4":"[1.40;1.59]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a></span>
<span id="cb31-2"><a href="#cb31-2"></a>fitx3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb31-3"><a href="#cb31-3"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb31-4"><a href="#cb31-4"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="fu">publish</span>(fitx3, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb31-6"><a href="#cb31-6"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"3.45","4":"[2.49;4.77]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a></span>
<span id="cb32-2"><a href="#cb32-2"></a>fitx4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb32-3"><a href="#cb32-3"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb32-4"><a href="#cb32-4"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="fu">publish</span>(fitx4, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb32-6"><a href="#cb32-6"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"2.14","4":"[0.39;11.66]","5":"0.3811","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Unweighted mean from all strata (for simplicity, 2 variables)</p>
<div class="cell" data-hash="confounding5_cache/html/unwgtmean4_464357743c18c2a914bcd67ca8cd1df4">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">mean</span>(<span class="fu">exp</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb33-2"><a href="#cb33-2"></a>           <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>],</span>
<span id="cb33-3"><a href="#cb33-3"></a>           <span class="fu">coef</span>(fitx3)[<span class="st">"smoking"</span>],</span>
<span id="cb33-4"><a href="#cb33-4"></a>           <span class="fu">coef</span>(fitx4)[<span class="st">"smoking"</span>])))</span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="co">#&gt; [1] 2.180804</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="partial-list-of-risk-factors-for-outcome-1-variable-2" class="level4"><h4 class="anchored" data-anchor-id="partial-list-of-risk-factors-for-outcome-1-variable-2">Partial list of risk factors for outcome (1 variable)</h4>
<div class="cell" data-hash="confounding5_cache/html/riskpartial11_69fc6d5791ff873f5d5949abd6cb3acb">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender, </span>
<span id="cb34-2"><a href="#cb34-2"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb34-4"><a href="#cb34-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.29","4":"[1.26;1.33]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="strtatum-specific-1-variable-2" class="level4"><h4 class="anchored" data-anchor-id="strtatum-specific-1-variable-2">Strtatum specific (1 variable)</h4>
<div class="cell" data-hash="confounding5_cache/html/strata21_1eb76d046bf1d0d04cea80b95f2c5061">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb35-2"><a href="#cb35-2"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb35-3"><a href="#cb35-3"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>,</span>
<span id="cb35-5"><a href="#cb35-5"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.29","4":"[1.25;1.34]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a></span>
<span id="cb36-2"><a href="#cb36-2"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb36-3"><a href="#cb36-3"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb36-4"><a href="#cb36-4"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span>))</span>
<span id="cb36-5"><a href="#cb36-5"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb36-6"><a href="#cb36-6"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.29","4":"[1.22;1.36]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Unweighted mean from all strata (for simplicity, 1 variable)</p>
<div class="cell" data-hash="confounding5_cache/html/wmean12_c015b310756bd3adda25c4726aef5a7a">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">mean</span>(<span class="fu">exp</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb37-2"><a href="#cb37-2"></a>           <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>])))</span>
<span id="cb37-3"><a href="#cb37-3"></a><span class="co">#&gt; [1] 1.290429</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mantel-haenszel-adjusted-ors-with-1-variable" class="level4"><h4 class="anchored" data-anchor-id="mantel-haenszel-adjusted-ors-with-1-variable">Mantel-Haenszel adjusted ORs with 1 variable</h4>
<div class="cell" data-hash="confounding5_cache/html/mhor_25f169be521027d0835bd1204e2a7c58">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>tabx <span class="ot">&lt;-</span> <span class="fu">xtabs</span>( <span class="sc">~</span> hypertension <span class="sc">+</span> smoking <span class="sc">+</span> gender, <span class="at">data =</span> Obs.Data)</span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="fu">ftable</span>(tabx)    </span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="co">#&gt;                      gender     0     1</span></span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="co">#&gt; hypertension smoking                   </span></span>
<span id="cb38-5"><a href="#cb38-5"></a><span class="co">#&gt; 0            0               3788 12401</span></span>
<span id="cb38-6"><a href="#cb38-6"></a><span class="co">#&gt;              1               3400 11504</span></span>
<span id="cb38-7"><a href="#cb38-7"></a><span class="co">#&gt; 1            0              10547 20984</span></span>
<span id="cb38-8"><a href="#cb38-8"></a><span class="co">#&gt;              1              12178 25198</span></span>
<span id="cb38-9"><a href="#cb38-9"></a><span class="co"># require(samplesizeCMH)</span></span>
<span id="cb38-10"><a href="#cb38-10"></a><span class="co"># apply(tabx, 3, odds.ratio)</span></span>
<span id="cb38-11"><a href="#cb38-11"></a></span>
<span id="cb38-12"><a href="#cb38-12"></a><span class="fu">library</span>(lawstat)</span>
<span id="cb38-13"><a href="#cb38-13"></a><span class="fu">cmh.test</span>(tabx)</span>
<span id="cb38-14"><a href="#cb38-14"></a><span class="co">#&gt; </span></span>
<span id="cb38-15"><a href="#cb38-15"></a><span class="co">#&gt;  Cochran-Mantel-Haenszel Chi-square Test</span></span>
<span id="cb38-16"><a href="#cb38-16"></a><span class="co">#&gt; </span></span>
<span id="cb38-17"><a href="#cb38-17"></a><span class="co">#&gt; data:  tabx</span></span>
<span id="cb38-18"><a href="#cb38-18"></a><span class="co">#&gt; CMH statistic = NA, df = 1.0000, p-value = NA, MH Estimate = 1.2924,</span></span>
<span id="cb38-19"><a href="#cb38-19"></a><span class="co">#&gt; Pooled Odd Ratio = 1.2876, Odd Ratio of level 1 = 1.2864, Odd Ratio of</span></span>
<span id="cb38-20"><a href="#cb38-20"></a><span class="co">#&gt; level 2 = 1.2945</span></span>
<span id="cb38-21"><a href="#cb38-21"></a><span class="co"># mantelhaen.test(tabx, exact = TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="crude-in-absence-of-confounding-2" class="level4"><h4 class="anchored" data-anchor-id="crude-in-absence-of-confounding-2">Crude (in absence of confounding)</h4>
<div class="cell" data-hash="confounding5_cache/html/crude12_ab2b2bd14322dbfaeee39a9917b946f2">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb39-2"><a href="#cb39-2"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb39-3"><a href="#cb39-3"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb39-4"><a href="#cb39-4"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Variable"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Units"],"name":[2],"type":["chr"],"align":["left"]},{"label":["OddsRatio"],"name":[3],"type":["chr"],"align":["left"]},{"label":["CI.95"],"name":[4],"type":["chr"],"align":["left"]},{"label":["p-value"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"smoking","2":"","3":"1.29","4":"[1.25;1.32]","5":"< 1e-04","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section></section><section id="marginal-rd-rr-and-or" class="level3"><h3 class="anchored" data-anchor-id="marginal-rd-rr-and-or">Marginal RD, RR and OR</h3>
<p>Below we show a procedure for calculating marginal probabilities <span class="math inline">\(p_1\)</span> (for treated) and <span class="math inline">\(p_0\)</span> (for untreated).</p>
<section id="adjustment-of-2-variables" class="level4"><h4 class="anchored" data-anchor-id="adjustment-of-2-variables">Adjustment of 2 variables</h4>
<div class="cell" data-hash="confounding5_cache/html/adj12_b019400153d8bebbc95dd084e1957e08">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>fitx3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender <span class="sc">+</span> age, </span>
<span id="cb40-2"><a href="#cb40-2"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb40-3"><a href="#cb40-3"></a>Obs.Data.all.tx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb40-4"><a href="#cb40-4"></a>Obs.Data.all.tx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb40-5"><a href="#cb40-5"></a>p1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx3, </span>
<span id="cb40-6"><a href="#cb40-6"></a>                   <span class="at">newdata =</span> Obs.Data.all.tx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb40-7"><a href="#cb40-7"></a>Obs.Data.all.utx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb40-8"><a href="#cb40-8"></a>Obs.Data.all.utx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-9"><a href="#cb40-9"></a>p0 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx3, </span>
<span id="cb40-10"><a href="#cb40-10"></a>                   <span class="at">newdata =</span> Obs.Data.all.utx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb40-11"><a href="#cb40-11"></a></span>
<span id="cb40-12"><a href="#cb40-12"></a>RDm <span class="ot">&lt;-</span> p1 <span class="sc">-</span> p0</span>
<span id="cb40-13"><a href="#cb40-13"></a>RRm <span class="ot">&lt;-</span> p1 <span class="sc">/</span> p0</span>
<span id="cb40-14"><a href="#cb40-14"></a>ORm <span class="ot">&lt;-</span> (p1 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p1)) <span class="sc">/</span> (p0 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p0))</span>
<span id="cb40-15"><a href="#cb40-15"></a>ORc <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(fitx3)[<span class="st">"smoking"</span>]))</span>
<span id="cb40-16"><a href="#cb40-16"></a>RRz <span class="ot">&lt;-</span> ORm <span class="sc">/</span> ((<span class="dv">1</span><span class="sc">-</span>p0) <span class="sc">+</span> p0 <span class="sc">*</span> ORm) <span class="co"># Zhang and Yu (1998)</span></span>
<span id="cb40-17"><a href="#cb40-17"></a><span class="fu">cat</span>(<span class="st">"RD marginal = "</span>, <span class="fu">round</span>(RDm,<span class="dv">2</span>), </span>
<span id="cb40-18"><a href="#cb40-18"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR marginal = "</span>, <span class="fu">round</span>(RRm,<span class="dv">2</span>), </span>
<span id="cb40-19"><a href="#cb40-19"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR marginal = "</span>, <span class="fu">round</span>(ORm,<span class="dv">2</span>), </span>
<span id="cb40-20"><a href="#cb40-20"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR conditional = "</span>, <span class="fu">round</span>(ORc,<span class="dv">2</span>), </span>
<span id="cb40-21"><a href="#cb40-21"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR (ZY)= "</span>, <span class="fu">round</span>(RRz,<span class="dv">2</span>))</span>
<span id="cb40-22"><a href="#cb40-22"></a><span class="co">#&gt; RD marginal =  0.05 </span></span>
<span id="cb40-23"><a href="#cb40-23"></a><span class="co">#&gt; RR marginal =  1.08 </span></span>
<span id="cb40-24"><a href="#cb40-24"></a><span class="co">#&gt; OR marginal =  1.29 </span></span>
<span id="cb40-25"><a href="#cb40-25"></a><span class="co">#&gt; OR conditional =  3.37 </span></span>
<span id="cb40-26"><a href="#cb40-26"></a><span class="co">#&gt; RR (ZY)=  1.08</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="adjustment-of-1-variable" class="level4"><h4 class="anchored" data-anchor-id="adjustment-of-1-variable">Adjustment of 1 variable</h4>
<div class="cell" data-hash="confounding5_cache/html/adj13_51884d5b1bd0d10ba9dc4d1c0dc65f23">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender, </span>
<span id="cb41-2"><a href="#cb41-2"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb41-3"><a href="#cb41-3"></a>Obs.Data.all.tx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb41-4"><a href="#cb41-4"></a>Obs.Data.all.tx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb41-5"><a href="#cb41-5"></a>p1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx2, </span>
<span id="cb41-6"><a href="#cb41-6"></a>                   <span class="at">newdata =</span> Obs.Data.all.tx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb41-7"><a href="#cb41-7"></a>Obs.Data.all.utx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb41-8"><a href="#cb41-8"></a>Obs.Data.all.utx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb41-9"><a href="#cb41-9"></a>p0 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx2, </span>
<span id="cb41-10"><a href="#cb41-10"></a>                   <span class="at">newdata =</span> Obs.Data.all.utx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb41-11"><a href="#cb41-11"></a></span>
<span id="cb41-12"><a href="#cb41-12"></a>RDm <span class="ot">&lt;-</span> p1 <span class="sc">-</span> p0</span>
<span id="cb41-13"><a href="#cb41-13"></a>RRm <span class="ot">&lt;-</span> p1 <span class="sc">/</span> p0</span>
<span id="cb41-14"><a href="#cb41-14"></a>ORm <span class="ot">&lt;-</span> (p1 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p1)) <span class="sc">/</span> (p0 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p0))</span>
<span id="cb41-15"><a href="#cb41-15"></a>ORc <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>]))</span>
<span id="cb41-16"><a href="#cb41-16"></a>RRz <span class="ot">&lt;-</span> ORm <span class="sc">/</span> ((<span class="dv">1</span><span class="sc">-</span>p0) <span class="sc">+</span> p0 <span class="sc">*</span> ORm) <span class="co"># Zhang and Yu (1998)</span></span>
<span id="cb41-17"><a href="#cb41-17"></a><span class="fu">cat</span>(<span class="st">"RD marginal = "</span>, <span class="fu">round</span>(RDm,<span class="dv">2</span>), </span>
<span id="cb41-18"><a href="#cb41-18"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR marginal = "</span>, <span class="fu">round</span>(RRm,<span class="dv">2</span>), </span>
<span id="cb41-19"><a href="#cb41-19"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR marginal = "</span>, <span class="fu">round</span>(ORm,<span class="dv">2</span>), </span>
<span id="cb41-20"><a href="#cb41-20"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR conditional = "</span>, <span class="fu">round</span>(ORc,<span class="dv">2</span>), </span>
<span id="cb41-21"><a href="#cb41-21"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR (ZY)= "</span>, <span class="fu">round</span>(RRz,<span class="dv">2</span>))</span>
<span id="cb41-22"><a href="#cb41-22"></a><span class="co">#&gt; RD marginal =  0.05 </span></span>
<span id="cb41-23"><a href="#cb41-23"></a><span class="co">#&gt; RR marginal =  1.08 </span></span>
<span id="cb41-24"><a href="#cb41-24"></a><span class="co">#&gt; OR marginal =  1.29 </span></span>
<span id="cb41-25"><a href="#cb41-25"></a><span class="co">#&gt; OR conditional =  1.29 </span></span>
<span id="cb41-26"><a href="#cb41-26"></a><span class="co">#&gt; RR (ZY)=  1.08</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="no-adjustment" class="level4"><h4 class="anchored" data-anchor-id="no-adjustment">No adjustment</h4>
<div class="cell" data-hash="confounding5_cache/html/crude15_29af8735b2a45aa0dd2bba470c84e9fc">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb42-2"><a href="#cb42-2"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb42-3"><a href="#cb42-3"></a>Obs.Data.all.tx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb42-4"><a href="#cb42-4"></a>Obs.Data.all.tx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb42-5"><a href="#cb42-5"></a>p1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx0, </span>
<span id="cb42-6"><a href="#cb42-6"></a>                   <span class="at">newdata =</span> Obs.Data.all.tx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb42-7"><a href="#cb42-7"></a>Obs.Data.all.utx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb42-8"><a href="#cb42-8"></a>Obs.Data.all.utx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb42-9"><a href="#cb42-9"></a>p0 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx0, </span>
<span id="cb42-10"><a href="#cb42-10"></a>                   <span class="at">newdata =</span> Obs.Data.all.utx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb42-11"><a href="#cb42-11"></a></span>
<span id="cb42-12"><a href="#cb42-12"></a>RDm <span class="ot">&lt;-</span> p1 <span class="sc">-</span> p0</span>
<span id="cb42-13"><a href="#cb42-13"></a>RRm <span class="ot">&lt;-</span> p1 <span class="sc">/</span> p0</span>
<span id="cb42-14"><a href="#cb42-14"></a>ORm <span class="ot">&lt;-</span> (p1 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p1)) <span class="sc">/</span> (p0 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p0))</span>
<span id="cb42-15"><a href="#cb42-15"></a>ORc <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>]))</span>
<span id="cb42-16"><a href="#cb42-16"></a>RRz <span class="ot">&lt;-</span> ORm <span class="sc">/</span> ((<span class="dv">1</span><span class="sc">-</span>p0) <span class="sc">+</span> p0 <span class="sc">*</span> ORm) <span class="co"># Zhang and Yu (1998)</span></span>
<span id="cb42-17"><a href="#cb42-17"></a><span class="fu">cat</span>(<span class="st">"RD marginal = "</span>, <span class="fu">round</span>(RDm,<span class="dv">2</span>), </span>
<span id="cb42-18"><a href="#cb42-18"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR marginal = "</span>, <span class="fu">round</span>(RRm,<span class="dv">2</span>), </span>
<span id="cb42-19"><a href="#cb42-19"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR marginal = "</span>, <span class="fu">round</span>(ORm,<span class="dv">2</span>), </span>
<span id="cb42-20"><a href="#cb42-20"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR conditional = "</span>, <span class="fu">round</span>(ORc,<span class="dv">2</span>), </span>
<span id="cb42-21"><a href="#cb42-21"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR (ZY)= "</span>, <span class="fu">round</span>(RRz,<span class="dv">2</span>))</span>
<span id="cb42-22"><a href="#cb42-22"></a><span class="co">#&gt; RD marginal =  0.05 </span></span>
<span id="cb42-23"><a href="#cb42-23"></a><span class="co">#&gt; RR marginal =  1.08 </span></span>
<span id="cb42-24"><a href="#cb42-24"></a><span class="co">#&gt; OR marginal =  1.29 </span></span>
<span id="cb42-25"><a href="#cb42-25"></a><span class="co">#&gt; OR conditional =  1.29 </span></span>
<span id="cb42-26"><a href="#cb42-26"></a><span class="co">#&gt; RR (ZY)=  1.08</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Bootstrap could be used to estimate confidence intervals.</p>
<p>Ref:</p>
<ul>
<li>
<span class="citation" data-cites="kleinman2009s">(<a href="#ref-kleinman2009s" role="doc-biblioref">Kleinman and Norton 2009</a>)</span> (“this paper demonstrates how to move from a nonlinear model to estimates of marginal effects that are quantified as the adjusted risk ratio or adjusted risk difference”)</li>
<li>
<span class="citation" data-cites="austin2010absolute">(<a href="#ref-austin2010absolute" role="doc-biblioref">Austin 2010</a>)</span> (“clinically meaningful measures of treatment effect using logistic regression model”)</li>
<li>
<span class="citation" data-cites="luijken2022comparison">(<a href="#ref-luijken2022comparison" role="doc-biblioref">Luijken et al. 2022</a>)</span> (“marginal odds ratio”)</li>
<li>
<span class="citation" data-cites="muller2014estimating">(<a href="#ref-muller2014estimating" role="doc-biblioref">Muller and MacLehose 2014</a>)</span> (“marginal standardization”)</li>
<li>
<span class="citation" data-cites="greenland2004model">(<a href="#ref-greenland2004model" role="doc-biblioref">Greenland 2004</a>)</span> (“standardized / population-averaged”)</li>
<li>
<span class="citation" data-cites="bieler2010estimating">(<a href="#ref-bieler2010estimating" role="doc-biblioref">Bieler et al. 2010</a>)</span> (“standardized /population-averaged risk from the logistic model”)</li>
</ul></section></section><section id="summary" class="level3"><h3 class="anchored" data-anchor-id="summary">Summary</h3>
<p>Here are the summary of the results based on a scenario where confounding was absent:</p>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 23%">
<col style="width: 23%">
<col style="width: 23%">
</colgroup>
<thead><tr class="header">
<th>Modelling strategy</th>
<th>RD (conditional)</th>
<th>RR (conditional)</th>
<th>OR (conditional)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>age + gender in regression</td>
<td>0.06 [0.05;0.06]</td>
<td>1.08 [1.08;1.09]</td>
<td>3.37 [3.17;3.58]</td>
</tr>
<tr class="even">
<td>stratified by age and gender (mean)</td>
<td>0.05 (<em>0.11, 0.1,0.01,0</em>)</td>
<td>1.16 (<em>1.41, 1.21, 1.01,1</em>)</td>
<td>2.18 (unweighted; <em>1.65, 1.49, 3.45, 2.14</em>)</td>
</tr>
<tr class="odd">
<td>gender in regression</td>
<td>0.05 [0.05;0.06]</td>
<td>1.08 [1.07;1.09]</td>
<td>1.29 [1.26;1.33]</td>
</tr>
<tr class="even">
<td>stratified by gender (mean)</td>
<td>0.05 (<em>0.6,0.5</em>)</td>
<td>1.08 (<em>1.09, 1.06</em>)</td>
<td>1.29 (<em>1.29, 1.29</em>; <strong>M-H</strong> 1.29)</td>
</tr>
<tr class="odd">
<td><strong>Marginal estimates</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>crude</td>
<td>0.05 [0.05;0.06]</td>
<td>1.08 [1.07;1.09]</td>
<td>1.29 [1.25;1.32]</td>
</tr>
<tr class="odd">
<td>Based on marginal probabilities (any variable combination)</td>
<td>0.05</td>
<td>1.08</td>
<td>1.29</td>
</tr>
</tbody>
</table>
<p>Let us assume we have a regression of hypertension (<span class="math inline">\(Y\)</span>), smoking (<span class="math inline">\(A\)</span>) and a risk factor for outcome, gender (<span class="math inline">\(L\)</span>). Then let us set up 2 regression models:</p>
<ul>
<li>1st regression model is <span class="math inline">\(Y \sim \beta \times A + \alpha \times L\)</span>. Here we are conditioning on gender (<span class="math inline">\(L\)</span>).</li>
<li>2nd regression model is <span class="math inline">\(Y \sim \beta' \times A\)</span>
</li>
</ul>
<p>Then regression is collapsible for <span class="math inline">\(\beta\)</span> over <span class="math inline">\(L\)</span> if <span class="math inline">\(\beta = \beta'\)</span> from the 2nd regression omitting <span class="math inline">\(L\)</span>. <span class="math inline">\(\beta \ne \beta'\)</span> would mean non-collapsibility. A measure of association (say, risk difference) is collapsible if the marginal measure of association is equal to a weighted average of the stratum-specific measures of association. Non-collapsibility is also knows as Simpson’s Paradox (in absence of confoinding of course): a statistical phenomenon where an association between two factors (say, hypertension and smoking) in a population (we are talking about marginal estimate here) is different than the associations of same relationship in subpopulations (conditional on some other factor, say, age; hence talking about conditional estimates).</p>
<p>Odds ratio can be non-collapsible. It can produce different treatment effect estimate for different covariate adjustment sets (see our above example of when adjusting form age and sex vs.&nbsp;when adjusting none). This is true even in the absence of confounding. However, according to our definition here, OR is collapsible when we consider gender in the adjustment set.</p>
<p>Note that, OR non-collapsibility is a consequence of the fact that it is estimated via a logit link function (nonlinearity of the logistic transformation).</p>
<p>Ref:</p>
<ul>
<li><span class="citation" data-cites="greenland1999confounding">(<a href="#ref-greenland1999confounding" role="doc-biblioref">Greenland, Pearl, and Robins 1999</a>)</span></li>
<li><span class="citation" data-cites="mansournia2015relation">(<a href="#ref-mansournia2015relation" role="doc-biblioref">Mansournia and Greenland 2015</a>)</span></li>
</ul></section><section id="video-content-optional" class="level3"><h3 class="anchored" data-anchor-id="video-content-optional">Video content (optional)</h3>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>For those who prefer a video walkthrough, feel free to watch the video below, which offers a description of an earlier version of the above content.</p>
</div>
</div>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
<iframe src="https://www.youtube.com/embed/h4q70cIPldQ" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen="">
</iframe>
</div>
</section><section id="references" class="level3"><h3 class="anchored" data-anchor-id="references">References</h3>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-austin2010absolute" class="csl-entry" role="doc-biblioentry">
Austin, Peter C. 2010. <span>“Absolute Risk Reductions, Relative Risks, Relative Risk Reductions, and Numbers Needed to Treat Can Be Obtained from a Logistic Regression Model.”</span> <em>Journal of Clinical Epidemiology</em> 63 (1): 2–6.
</div>
<div id="ref-bieler2010estimating" class="csl-entry" role="doc-biblioentry">
Bieler, Gayle S, G Gordon Brown, Rick L Williams, and Donna J Brogan. 2010. <span>“Estimating Model-Adjusted Risks, Risk Differences, and Risk Ratios from Complex Survey Data.”</span> <em>American Journal of Epidemiology</em> 171 (5): 618–23.
</div>
<div id="ref-greenland2004model" class="csl-entry" role="doc-biblioentry">
Greenland, Sander. 2004. <span>“Model-Based Estimation of Relative Risks and Other Epidemiologic Measures in Studies of Common Outcomes and in Case-Control Studies.”</span> <em>American Journal of Epidemiology</em> 160 (4): 301–5.
</div>
<div id="ref-greenland1999confounding" class="csl-entry" role="doc-biblioentry">
Greenland, Sander, Judea Pearl, and James M Robins. 1999. <span>“Confounding and Collapsibility in Causal Inference.”</span> <em>Statistical Science</em> 14 (1): 29–46.
</div>
<div id="ref-kleinman2009s" class="csl-entry" role="doc-biblioentry">
Kleinman, Lawrence C, and Edward C Norton. 2009. <span>“What’s the Risk? A Simple Approach for Estimating Adjusted Risk Measures from Nonlinear Models Including Logistic Regression.”</span> <em>Health Services Research</em> 44 (1): 288–302.
</div>
<div id="ref-luijken2022comparison" class="csl-entry" role="doc-biblioentry">
Luijken, Kim, Rolf HH Groenwold, Maarten van Smeden, Susanne Strohmaier, and Georg Heinze. 2022. <span>“A Comparison of Full Model Specification and Backward Elimination of Potential Confounders When Estimating Marginal and Conditional Causal Effects on Binary Outcomes from Observational Data.”</span> <em>Biometrical Journal</em>.
</div>
<div id="ref-mansournia2015relation" class="csl-entry" role="doc-biblioentry">
Mansournia, Mohammad Ali, and Sander Greenland. 2015. <span>“The Relation of Collapsibility and Confounding to Faithfulness and Stability.”</span> <em>Epidemiology</em> 26 (4): 466–72.
</div>
<div id="ref-muller2014estimating" class="csl-entry" role="doc-biblioentry">
Muller, Clemma J, and Richard F MacLehose. 2014. <span>“Estimating Predicted Probabilities from Logistic Regression: Different Methods Correspond to Different Target Populations.”</span> <em>International Journal of Epidemiology</em> 43 (3): 962–70.
</div>
<div id="ref-naimi2020estimating" class="csl-entry" role="doc-biblioentry">
Naimi, Ashley I, and Brian W Whitcomb. 2020. <span>“Estimating Risk Ratios and Risk Differences Using Regression.”</span> <em>American Journal of Epidemiology</em> 189 (6): 508–10.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./confounding4.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Z-bias</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./confounding6.html" class="pagination-link">
        <span class="nav-page-text">Change-in-estimate</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb43" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb43-1"><a href="#cb43-1"></a><span class="fu">## Collapsibility {.unnumbered}</span></span>
<span id="cb43-2"><a href="#cb43-2"></a></span>
<span id="cb43-3"><a href="#cb43-3"></a>Explanation of collapsibility property of an estimate (RD, RR and OR: conditional or marginal) in absence of confounding</span>
<span id="cb43-4"><a href="#cb43-4"></a></span>
<span id="cb43-5"><a href="#cb43-5"></a><span class="in">```{r setup, warning=FALSE, message=FALSE,cache=TRUE}</span></span>
<span id="cb43-6"><a href="#cb43-6"></a><span class="co"># Load required packages</span></span>
<span id="cb43-7"><a href="#cb43-7"></a><span class="fu">library</span>(simcausal)</span>
<span id="cb43-8"><a href="#cb43-8"></a><span class="fu">library</span>(tableone)</span>
<span id="cb43-9"><a href="#cb43-9"></a><span class="fu">library</span>(Publish)</span>
<span id="cb43-10"><a href="#cb43-10"></a><span class="fu">library</span>(lawstat)</span>
<span id="cb43-11"><a href="#cb43-11"></a><span class="in">```</span></span>
<span id="cb43-12"><a href="#cb43-12"></a></span>
<span id="cb43-13"><a href="#cb43-13"></a><span class="fu">### Data generating process</span></span>
<span id="cb43-14"><a href="#cb43-14"></a></span>
<span id="cb43-15"><a href="#cb43-15"></a><span class="in">```{r dgm5, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-16"><a href="#cb43-16"></a><span class="fu">require</span>(simcausal)</span>
<span id="cb43-17"><a href="#cb43-17"></a>D <span class="ot">&lt;-</span> <span class="fu">DAG.empty</span>()</span>
<span id="cb43-18"><a href="#cb43-18"></a>D <span class="ot">&lt;-</span> D <span class="sc">+</span> </span>
<span id="cb43-19"><a href="#cb43-19"></a>  <span class="fu">node</span>(<span class="st">"gender"</span>, <span class="at">distr =</span> <span class="st">"rbern"</span>, </span>
<span id="cb43-20"><a href="#cb43-20"></a>       <span class="at">prob =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb43-21"><a href="#cb43-21"></a>  <span class="fu">node</span>(<span class="st">"age"</span>, <span class="at">distr =</span> <span class="st">"rnorm"</span>, </span>
<span id="cb43-22"><a href="#cb43-22"></a>       <span class="at">mean =</span> <span class="dv">2</span>, <span class="at">sd =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb43-23"><a href="#cb43-23"></a>  <span class="fu">node</span>(<span class="st">"smoking"</span>, <span class="at">distr =</span> <span class="st">"rbern"</span>, </span>
<span id="cb43-24"><a href="#cb43-24"></a>       <span class="at">prob =</span> <span class="fu">plogis</span>(.<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb43-25"><a href="#cb43-25"></a>  <span class="fu">node</span>(<span class="st">"hypertension"</span>, <span class="at">distr =</span> <span class="st">"rbern"</span>, </span>
<span id="cb43-26"><a href="#cb43-26"></a>       <span class="at">prob =</span> <span class="fu">plogis</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="fu">log</span>(<span class="fl">3.5</span>) <span class="sc">*</span> smoking </span>
<span id="cb43-27"><a href="#cb43-27"></a>                     <span class="sc">+</span> <span class="fu">log</span>(.<span class="dv">1</span>) <span class="sc">*</span> gender  </span>
<span id="cb43-28"><a href="#cb43-28"></a>                       <span class="sc">+</span> <span class="fu">log</span>(<span class="dv">7</span>) <span class="sc">*</span> age))</span>
<span id="cb43-29"><a href="#cb43-29"></a>Dset <span class="ot">&lt;-</span> <span class="fu">set.DAG</span>(D)</span>
<span id="cb43-30"><a href="#cb43-30"></a><span class="in">```</span></span>
<span id="cb43-31"><a href="#cb43-31"></a></span>
<span id="cb43-32"><a href="#cb43-32"></a><span class="fu">#### Generate DAG</span></span>
<span id="cb43-33"><a href="#cb43-33"></a></span>
<span id="cb43-34"><a href="#cb43-34"></a><span class="in">```{r dag5, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-35"><a href="#cb43-35"></a><span class="fu">plotDAG</span>(Dset, <span class="at">xjitter =</span> <span class="fl">0.1</span>, <span class="at">yjitter =</span> .<span class="dv">9</span>,</span>
<span id="cb43-36"><a href="#cb43-36"></a>        <span class="at">edge_attrs =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">arrow.width =</span> <span class="fl">0.4</span>, <span class="at">arrow.size =</span> <span class="fl">0.7</span>),</span>
<span id="cb43-37"><a href="#cb43-37"></a>        <span class="at">vertex_attrs =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">label.cex =</span> <span class="fl">0.8</span>))</span>
<span id="cb43-38"><a href="#cb43-38"></a></span>
<span id="cb43-39"><a href="#cb43-39"></a><span class="in">```</span></span>
<span id="cb43-40"><a href="#cb43-40"></a></span>
<span id="cb43-41"><a href="#cb43-41"></a><span class="fu">#### Generate Data</span></span>
<span id="cb43-42"><a href="#cb43-42"></a></span>
<span id="cb43-43"><a href="#cb43-43"></a><span class="in">```{r data5, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-44"><a href="#cb43-44"></a>Obs.Data <span class="ot">&lt;-</span> <span class="fu">sim</span>(<span class="at">DAG =</span> Dset, <span class="at">n =</span> <span class="dv">100000</span>, <span class="at">rndseed =</span> <span class="dv">123</span>)</span>
<span id="cb43-45"><a href="#cb43-45"></a><span class="fu">head</span>(Obs.Data)</span>
<span id="cb43-46"><a href="#cb43-46"></a><span class="in">```</span></span>
<span id="cb43-47"><a href="#cb43-47"></a></span>
<span id="cb43-48"><a href="#cb43-48"></a><span class="fu">#### Balance check</span></span>
<span id="cb43-49"><a href="#cb43-49"></a></span>
<span id="cb43-50"><a href="#cb43-50"></a><span class="in">```{r balance5, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-51"><a href="#cb43-51"></a><span class="fu">require</span>(tableone)</span>
<span id="cb43-52"><a href="#cb43-52"></a><span class="fu">CreateTableOne</span>(<span class="at">data =</span> Obs.Data, </span>
<span id="cb43-53"><a href="#cb43-53"></a>               <span class="at">strata =</span> <span class="st">"smoking"</span>, </span>
<span id="cb43-54"><a href="#cb43-54"></a>               <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"age"</span>))</span>
<span id="cb43-55"><a href="#cb43-55"></a><span class="in">```</span></span>
<span id="cb43-56"><a href="#cb43-56"></a></span>
<span id="cb43-57"><a href="#cb43-57"></a><span class="fu">### Conditional and crude RD</span></span>
<span id="cb43-58"><a href="#cb43-58"></a></span>
<span id="cb43-59"><a href="#cb43-59"></a><span class="fu">#### Full list of risk factors for outcome (2 variables)</span></span>
<span id="cb43-60"><a href="#cb43-60"></a></span>
<span id="cb43-61"><a href="#cb43-61"></a><span class="in">```{r rd5, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-62"><a href="#cb43-62"></a><span class="do">## RD</span></span>
<span id="cb43-63"><a href="#cb43-63"></a><span class="fu">require</span>(Publish)</span>
<span id="cb43-64"><a href="#cb43-64"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender <span class="sc">+</span> age, </span>
<span id="cb43-65"><a href="#cb43-65"></a>             <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-66"><a href="#cb43-66"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-67"><a href="#cb43-67"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-68"><a href="#cb43-68"></a><span class="in">```</span></span>
<span id="cb43-69"><a href="#cb43-69"></a></span>
<span id="cb43-70"><a href="#cb43-70"></a>Ref:</span>
<span id="cb43-71"><a href="#cb43-71"></a></span>
<span id="cb43-72"><a href="#cb43-72"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@naimi2020estimating</span><span class="co">]</span> ("For the risk difference, one may use a GLM with a Gaussian (i.e., normal) distribution and identity link function, or, equivalently, an ordinary least squares estimator ...robust variance estimator (or bootstrap) should be used to obtain valid standard errors.")</span>
<span id="cb43-73"><a href="#cb43-73"></a></span>
<span id="cb43-74"><a href="#cb43-74"></a><span class="fu">#### Strtatum specific (2 variables)</span></span>
<span id="cb43-75"><a href="#cb43-75"></a></span>
<span id="cb43-76"><a href="#cb43-76"></a><span class="in">```{r eststrata, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-77"><a href="#cb43-77"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb43-78"><a href="#cb43-78"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb43-79"><a href="#cb43-79"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-80"><a href="#cb43-80"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-81"><a href="#cb43-81"></a></span>
<span id="cb43-82"><a href="#cb43-82"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb43-83"><a href="#cb43-83"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb43-84"><a href="#cb43-84"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-85"><a href="#cb43-85"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-86"><a href="#cb43-86"></a></span>
<span id="cb43-87"><a href="#cb43-87"></a>fitx3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb43-88"><a href="#cb43-88"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb43-89"><a href="#cb43-89"></a><span class="fu">publish</span>(fitx3, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-90"><a href="#cb43-90"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-91"><a href="#cb43-91"></a></span>
<span id="cb43-92"><a href="#cb43-92"></a>fitx4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb43-93"><a href="#cb43-93"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb43-94"><a href="#cb43-94"></a><span class="fu">publish</span>(fitx4, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-95"><a href="#cb43-95"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-96"><a href="#cb43-96"></a><span class="in">```</span></span>
<span id="cb43-97"><a href="#cb43-97"></a></span>
<span id="cb43-98"><a href="#cb43-98"></a>Unweighted mean from all strata (for simplicity, 2 variables)</span>
<span id="cb43-99"><a href="#cb43-99"></a></span>
<span id="cb43-100"><a href="#cb43-100"></a><span class="in">```{r unwgtmean, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-101"><a href="#cb43-101"></a><span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb43-102"><a href="#cb43-102"></a>             <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>],</span>
<span id="cb43-103"><a href="#cb43-103"></a>             <span class="fu">coef</span>(fitx3)[<span class="st">"smoking"</span>],</span>
<span id="cb43-104"><a href="#cb43-104"></a>             <span class="fu">coef</span>(fitx4)[<span class="st">"smoking"</span>])),<span class="dv">2</span>)</span>
<span id="cb43-105"><a href="#cb43-105"></a><span class="in">```</span></span>
<span id="cb43-106"><a href="#cb43-106"></a></span>
<span id="cb43-107"><a href="#cb43-107"></a><span class="fu">#### Partial list of risk factors for outcome (1 variable)</span></span>
<span id="cb43-108"><a href="#cb43-108"></a></span>
<span id="cb43-109"><a href="#cb43-109"></a><span class="in">```{r riskfactor, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-110"><a href="#cb43-110"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender, </span>
<span id="cb43-111"><a href="#cb43-111"></a>             <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-112"><a href="#cb43-112"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-113"><a href="#cb43-113"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-114"><a href="#cb43-114"></a><span class="in">```</span></span>
<span id="cb43-115"><a href="#cb43-115"></a></span>
<span id="cb43-116"><a href="#cb43-116"></a><span class="fu">#### Strtatum specific (1 variable)</span></span>
<span id="cb43-117"><a href="#cb43-117"></a></span>
<span id="cb43-118"><a href="#cb43-118"></a><span class="in">```{r strata1, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-119"><a href="#cb43-119"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb43-120"><a href="#cb43-120"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb43-121"><a href="#cb43-121"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-122"><a href="#cb43-122"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-123"><a href="#cb43-123"></a></span>
<span id="cb43-124"><a href="#cb43-124"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), </span>
<span id="cb43-125"><a href="#cb43-125"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span>))</span>
<span id="cb43-126"><a href="#cb43-126"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-127"><a href="#cb43-127"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-128"><a href="#cb43-128"></a><span class="in">```</span></span>
<span id="cb43-129"><a href="#cb43-129"></a></span>
<span id="cb43-130"><a href="#cb43-130"></a>Unweighted mean from all strata (for simplicity, 1 variables)</span>
<span id="cb43-131"><a href="#cb43-131"></a></span>
<span id="cb43-132"><a href="#cb43-132"></a><span class="in">```{r wmean, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-133"><a href="#cb43-133"></a><span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb43-134"><a href="#cb43-134"></a>             <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>])),<span class="dv">2</span>)</span>
<span id="cb43-135"><a href="#cb43-135"></a><span class="in">```</span></span>
<span id="cb43-136"><a href="#cb43-136"></a></span>
<span id="cb43-137"><a href="#cb43-137"></a><span class="fu">#### Crude (in absence of confounding)</span></span>
<span id="cb43-138"><a href="#cb43-138"></a></span>
<span id="cb43-139"><a href="#cb43-139"></a><span class="in">```{r crude, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-140"><a href="#cb43-140"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-141"><a href="#cb43-141"></a>             <span class="at">family=</span><span class="fu">gaussian</span>(<span class="at">link =</span> <span class="st">"identity"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-142"><a href="#cb43-142"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-143"><a href="#cb43-143"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">2</span>,]</span>
<span id="cb43-144"><a href="#cb43-144"></a><span class="in">```</span></span>
<span id="cb43-145"><a href="#cb43-145"></a></span>
<span id="cb43-146"><a href="#cb43-146"></a><span class="fu">### Conditional and crude RR</span></span>
<span id="cb43-147"><a href="#cb43-147"></a></span>
<span id="cb43-148"><a href="#cb43-148"></a>Ref:</span>
<span id="cb43-149"><a href="#cb43-149"></a></span>
<span id="cb43-150"><a href="#cb43-150"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@naimi2020estimating</span><span class="co">]</span> ("For the risk ratio, one may use a GLM with a Poisson distribution and log link function .... one should use the robust (or sandwich) variance estimator to obtain valid standard errors (the bootstrap can also be used)").</span>
<span id="cb43-151"><a href="#cb43-151"></a></span>
<span id="cb43-152"><a href="#cb43-152"></a><span class="fu">#### Full list of risk factors for outcome (2 variables)</span></span>
<span id="cb43-153"><a href="#cb43-153"></a></span>
<span id="cb43-154"><a href="#cb43-154"></a><span class="in">```{r fullrisk, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-155"><a href="#cb43-155"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender <span class="sc">+</span> age, </span>
<span id="cb43-156"><a href="#cb43-156"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-157"><a href="#cb43-157"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-158"><a href="#cb43-158"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-159"><a href="#cb43-159"></a><span class="in">```</span></span>
<span id="cb43-160"><a href="#cb43-160"></a></span>
<span id="cb43-161"><a href="#cb43-161"></a><span class="fu">#### Strtatum specific (2 variables)</span></span>
<span id="cb43-162"><a href="#cb43-162"></a></span>
<span id="cb43-163"><a href="#cb43-163"></a><span class="in">```{r strata2, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-164"><a href="#cb43-164"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-165"><a href="#cb43-165"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb43-166"><a href="#cb43-166"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb43-167"><a href="#cb43-167"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-168"><a href="#cb43-168"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-169"><a href="#cb43-169"></a></span>
<span id="cb43-170"><a href="#cb43-170"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-171"><a href="#cb43-171"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb43-172"><a href="#cb43-172"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb43-173"><a href="#cb43-173"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-174"><a href="#cb43-174"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-175"><a href="#cb43-175"></a></span>
<span id="cb43-176"><a href="#cb43-176"></a>fitx3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-177"><a href="#cb43-177"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb43-178"><a href="#cb43-178"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb43-179"><a href="#cb43-179"></a><span class="fu">publish</span>(fitx3, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-180"><a href="#cb43-180"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-181"><a href="#cb43-181"></a></span>
<span id="cb43-182"><a href="#cb43-182"></a>fitx4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-183"><a href="#cb43-183"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb43-184"><a href="#cb43-184"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb43-185"><a href="#cb43-185"></a><span class="fu">publish</span>(fitx4, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-186"><a href="#cb43-186"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-187"><a href="#cb43-187"></a><span class="in">```</span></span>
<span id="cb43-188"><a href="#cb43-188"></a></span>
<span id="cb43-189"><a href="#cb43-189"></a>Unweighted mean from all strata (for simplicity, 2 variables)</span>
<span id="cb43-190"><a href="#cb43-190"></a></span>
<span id="cb43-191"><a href="#cb43-191"></a><span class="in">```{r unwgtmean2, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-192"><a href="#cb43-192"></a><span class="fu">mean</span>(<span class="fu">exp</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb43-193"><a href="#cb43-193"></a>           <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>],</span>
<span id="cb43-194"><a href="#cb43-194"></a>           <span class="fu">coef</span>(fitx3)[<span class="st">"smoking"</span>],</span>
<span id="cb43-195"><a href="#cb43-195"></a>           <span class="fu">coef</span>(fitx4)[<span class="st">"smoking"</span>])))</span>
<span id="cb43-196"><a href="#cb43-196"></a><span class="in">```</span></span>
<span id="cb43-197"><a href="#cb43-197"></a></span>
<span id="cb43-198"><a href="#cb43-198"></a><span class="fu">#### Partial list of risk factors for outcome (1 variable)</span></span>
<span id="cb43-199"><a href="#cb43-199"></a></span>
<span id="cb43-200"><a href="#cb43-200"></a><span class="in">```{r riskpartial, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-201"><a href="#cb43-201"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender, </span>
<span id="cb43-202"><a href="#cb43-202"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-203"><a href="#cb43-203"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-204"><a href="#cb43-204"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-205"><a href="#cb43-205"></a><span class="in">```</span></span>
<span id="cb43-206"><a href="#cb43-206"></a></span>
<span id="cb43-207"><a href="#cb43-207"></a><span class="fu">#### Strtatum specific (1 variable)</span></span>
<span id="cb43-208"><a href="#cb43-208"></a></span>
<span id="cb43-209"><a href="#cb43-209"></a><span class="in">```{r strata11, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-210"><a href="#cb43-210"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-211"><a href="#cb43-211"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb43-212"><a href="#cb43-212"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb43-213"><a href="#cb43-213"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-214"><a href="#cb43-214"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-215"><a href="#cb43-215"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-216"><a href="#cb43-216"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), </span>
<span id="cb43-217"><a href="#cb43-217"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span>))</span>
<span id="cb43-218"><a href="#cb43-218"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-219"><a href="#cb43-219"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-220"><a href="#cb43-220"></a><span class="in">```</span></span>
<span id="cb43-221"><a href="#cb43-221"></a></span>
<span id="cb43-222"><a href="#cb43-222"></a>Unweighted mean from all strata (for simplicity, 1 variable)</span>
<span id="cb43-223"><a href="#cb43-223"></a></span>
<span id="cb43-224"><a href="#cb43-224"></a><span class="in">```{r unwgtmean3, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-225"><a href="#cb43-225"></a><span class="fu">mean</span>(<span class="fu">exp</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb43-226"><a href="#cb43-226"></a>           <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>])))</span>
<span id="cb43-227"><a href="#cb43-227"></a><span class="in">```</span></span>
<span id="cb43-228"><a href="#cb43-228"></a></span>
<span id="cb43-229"><a href="#cb43-229"></a><span class="fu">#### Crude (in absence of confounding)</span></span>
<span id="cb43-230"><a href="#cb43-230"></a></span>
<span id="cb43-231"><a href="#cb43-231"></a><span class="in">```{r crude11, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-232"><a href="#cb43-232"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-233"><a href="#cb43-233"></a>             <span class="at">family=</span><span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-234"><a href="#cb43-234"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-235"><a href="#cb43-235"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-236"><a href="#cb43-236"></a><span class="in">```</span></span>
<span id="cb43-237"><a href="#cb43-237"></a></span>
<span id="cb43-238"><a href="#cb43-238"></a><span class="fu">### Conditional and crude OR</span></span>
<span id="cb43-239"><a href="#cb43-239"></a></span>
<span id="cb43-240"><a href="#cb43-240"></a><span class="fu">#### Full list of risk factors for outcome (2 variables)</span></span>
<span id="cb43-241"><a href="#cb43-241"></a></span>
<span id="cb43-242"><a href="#cb43-242"></a><span class="in">```{r orest, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-243"><a href="#cb43-243"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender <span class="sc">+</span> age, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-244"><a href="#cb43-244"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-245"><a href="#cb43-245"></a><span class="in">```</span></span>
<span id="cb43-246"><a href="#cb43-246"></a></span>
<span id="cb43-247"><a href="#cb43-247"></a><span class="fu">#### Strtatum specific (2 variables)</span></span>
<span id="cb43-248"><a href="#cb43-248"></a></span>
<span id="cb43-249"><a href="#cb43-249"></a><span class="in">```{r strata12, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-250"><a href="#cb43-250"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-251"><a href="#cb43-251"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb43-252"><a href="#cb43-252"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb43-253"><a href="#cb43-253"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-254"><a href="#cb43-254"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-255"><a href="#cb43-255"></a></span>
<span id="cb43-256"><a href="#cb43-256"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-257"><a href="#cb43-257"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb43-258"><a href="#cb43-258"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">2</span>))</span>
<span id="cb43-259"><a href="#cb43-259"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-260"><a href="#cb43-260"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-261"><a href="#cb43-261"></a></span>
<span id="cb43-262"><a href="#cb43-262"></a>fitx3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-263"><a href="#cb43-263"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb43-264"><a href="#cb43-264"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb43-265"><a href="#cb43-265"></a><span class="fu">publish</span>(fitx3, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-266"><a href="#cb43-266"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-267"><a href="#cb43-267"></a></span>
<span id="cb43-268"><a href="#cb43-268"></a>fitx4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-269"><a href="#cb43-269"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb43-270"><a href="#cb43-270"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&gt;=</span> <span class="dv">2</span>))</span>
<span id="cb43-271"><a href="#cb43-271"></a><span class="fu">publish</span>(fitx4, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-272"><a href="#cb43-272"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-273"><a href="#cb43-273"></a><span class="in">```</span></span>
<span id="cb43-274"><a href="#cb43-274"></a></span>
<span id="cb43-275"><a href="#cb43-275"></a>Unweighted mean from all strata (for simplicity, 2 variables)</span>
<span id="cb43-276"><a href="#cb43-276"></a></span>
<span id="cb43-277"><a href="#cb43-277"></a><span class="in">```{r unwgtmean4, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-278"><a href="#cb43-278"></a><span class="fu">mean</span>(<span class="fu">exp</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb43-279"><a href="#cb43-279"></a>           <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>],</span>
<span id="cb43-280"><a href="#cb43-280"></a>           <span class="fu">coef</span>(fitx3)[<span class="st">"smoking"</span>],</span>
<span id="cb43-281"><a href="#cb43-281"></a>           <span class="fu">coef</span>(fitx4)[<span class="st">"smoking"</span>])))</span>
<span id="cb43-282"><a href="#cb43-282"></a><span class="in">```</span></span>
<span id="cb43-283"><a href="#cb43-283"></a></span>
<span id="cb43-284"><a href="#cb43-284"></a><span class="fu">#### Partial list of risk factors for outcome (1 variable)</span></span>
<span id="cb43-285"><a href="#cb43-285"></a></span>
<span id="cb43-286"><a href="#cb43-286"></a><span class="in">```{r riskpartial11, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-287"><a href="#cb43-287"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender, </span>
<span id="cb43-288"><a href="#cb43-288"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-289"><a href="#cb43-289"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-290"><a href="#cb43-290"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-291"><a href="#cb43-291"></a><span class="in">```</span></span>
<span id="cb43-292"><a href="#cb43-292"></a></span>
<span id="cb43-293"><a href="#cb43-293"></a><span class="fu">#### Strtatum specific (1 variable)</span></span>
<span id="cb43-294"><a href="#cb43-294"></a></span>
<span id="cb43-295"><a href="#cb43-295"></a><span class="in">```{r strata21, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-296"><a href="#cb43-296"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-297"><a href="#cb43-297"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb43-298"><a href="#cb43-298"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb43-299"><a href="#cb43-299"></a><span class="fu">publish</span>(fitx1, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>,</span>
<span id="cb43-300"><a href="#cb43-300"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-301"><a href="#cb43-301"></a></span>
<span id="cb43-302"><a href="#cb43-302"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-303"><a href="#cb43-303"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb43-304"><a href="#cb43-304"></a>             <span class="at">data=</span><span class="fu">subset</span>(Obs.Data, gender <span class="sc">==</span> <span class="dv">0</span>))</span>
<span id="cb43-305"><a href="#cb43-305"></a><span class="fu">publish</span>(fitx2, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-306"><a href="#cb43-306"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-307"><a href="#cb43-307"></a><span class="in">```</span></span>
<span id="cb43-308"><a href="#cb43-308"></a></span>
<span id="cb43-309"><a href="#cb43-309"></a>Unweighted mean from all strata (for simplicity, 1 variable)</span>
<span id="cb43-310"><a href="#cb43-310"></a></span>
<span id="cb43-311"><a href="#cb43-311"></a><span class="in">```{r wmean12, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-312"><a href="#cb43-312"></a><span class="fu">mean</span>(<span class="fu">exp</span>(<span class="fu">c</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>],</span>
<span id="cb43-313"><a href="#cb43-313"></a>           <span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>])))</span>
<span id="cb43-314"><a href="#cb43-314"></a><span class="in">```</span></span>
<span id="cb43-315"><a href="#cb43-315"></a></span>
<span id="cb43-316"><a href="#cb43-316"></a><span class="fu">#### Mantel-Haenszel adjusted ORs with 1 variable</span></span>
<span id="cb43-317"><a href="#cb43-317"></a></span>
<span id="cb43-318"><a href="#cb43-318"></a><span class="in">```{r mhor, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-319"><a href="#cb43-319"></a>tabx <span class="ot">&lt;-</span> <span class="fu">xtabs</span>( <span class="sc">~</span> hypertension <span class="sc">+</span> smoking <span class="sc">+</span> gender, <span class="at">data =</span> Obs.Data)</span>
<span id="cb43-320"><a href="#cb43-320"></a><span class="fu">ftable</span>(tabx)    </span>
<span id="cb43-321"><a href="#cb43-321"></a><span class="co"># require(samplesizeCMH)</span></span>
<span id="cb43-322"><a href="#cb43-322"></a><span class="co"># apply(tabx, 3, odds.ratio)</span></span>
<span id="cb43-323"><a href="#cb43-323"></a></span>
<span id="cb43-324"><a href="#cb43-324"></a><span class="fu">library</span>(lawstat)</span>
<span id="cb43-325"><a href="#cb43-325"></a><span class="fu">cmh.test</span>(tabx)</span>
<span id="cb43-326"><a href="#cb43-326"></a><span class="co"># mantelhaen.test(tabx, exact = TRUE)</span></span>
<span id="cb43-327"><a href="#cb43-327"></a><span class="in">```</span></span>
<span id="cb43-328"><a href="#cb43-328"></a></span>
<span id="cb43-329"><a href="#cb43-329"></a><span class="fu">#### Crude (in absence of confounding)</span></span>
<span id="cb43-330"><a href="#cb43-330"></a></span>
<span id="cb43-331"><a href="#cb43-331"></a><span class="in">```{r crude12, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-332"><a href="#cb43-332"></a>fitx0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-333"><a href="#cb43-333"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-334"><a href="#cb43-334"></a><span class="fu">publish</span>(fitx0, <span class="at">print =</span> <span class="cn">FALSE</span>, <span class="at">confint.method =</span> <span class="st">"robust"</span>, </span>
<span id="cb43-335"><a href="#cb43-335"></a>        <span class="at">pvalue.method =</span> <span class="st">"robust"</span>)<span class="sc">$</span>regressionTable[<span class="dv">1</span>,]</span>
<span id="cb43-336"><a href="#cb43-336"></a><span class="in">```</span></span>
<span id="cb43-337"><a href="#cb43-337"></a></span>
<span id="cb43-338"><a href="#cb43-338"></a><span class="fu">### Marginal RD, RR and OR</span></span>
<span id="cb43-339"><a href="#cb43-339"></a></span>
<span id="cb43-340"><a href="#cb43-340"></a>Below we show a procedure for calculating marginal probabilities $p_1$ (for treated) and $p_0$ (for untreated).</span>
<span id="cb43-341"><a href="#cb43-341"></a></span>
<span id="cb43-342"><a href="#cb43-342"></a><span class="fu">#### Adjustment of 2 variables</span></span>
<span id="cb43-343"><a href="#cb43-343"></a></span>
<span id="cb43-344"><a href="#cb43-344"></a><span class="in">```{r adj12, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-345"><a href="#cb43-345"></a>fitx3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender <span class="sc">+</span> age, </span>
<span id="cb43-346"><a href="#cb43-346"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-347"><a href="#cb43-347"></a>Obs.Data.all.tx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb43-348"><a href="#cb43-348"></a>Obs.Data.all.tx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-349"><a href="#cb43-349"></a>p1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx3, </span>
<span id="cb43-350"><a href="#cb43-350"></a>                   <span class="at">newdata =</span> Obs.Data.all.tx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb43-351"><a href="#cb43-351"></a>Obs.Data.all.utx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb43-352"><a href="#cb43-352"></a>Obs.Data.all.utx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb43-353"><a href="#cb43-353"></a>p0 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx3, </span>
<span id="cb43-354"><a href="#cb43-354"></a>                   <span class="at">newdata =</span> Obs.Data.all.utx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb43-355"><a href="#cb43-355"></a></span>
<span id="cb43-356"><a href="#cb43-356"></a>RDm <span class="ot">&lt;-</span> p1 <span class="sc">-</span> p0</span>
<span id="cb43-357"><a href="#cb43-357"></a>RRm <span class="ot">&lt;-</span> p1 <span class="sc">/</span> p0</span>
<span id="cb43-358"><a href="#cb43-358"></a>ORm <span class="ot">&lt;-</span> (p1 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p1)) <span class="sc">/</span> (p0 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p0))</span>
<span id="cb43-359"><a href="#cb43-359"></a>ORc <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(fitx3)[<span class="st">"smoking"</span>]))</span>
<span id="cb43-360"><a href="#cb43-360"></a>RRz <span class="ot">&lt;-</span> ORm <span class="sc">/</span> ((<span class="dv">1</span><span class="sc">-</span>p0) <span class="sc">+</span> p0 <span class="sc">*</span> ORm) <span class="co"># Zhang and Yu (1998)</span></span>
<span id="cb43-361"><a href="#cb43-361"></a><span class="fu">cat</span>(<span class="st">"RD marginal = "</span>, <span class="fu">round</span>(RDm,<span class="dv">2</span>), </span>
<span id="cb43-362"><a href="#cb43-362"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR marginal = "</span>, <span class="fu">round</span>(RRm,<span class="dv">2</span>), </span>
<span id="cb43-363"><a href="#cb43-363"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR marginal = "</span>, <span class="fu">round</span>(ORm,<span class="dv">2</span>), </span>
<span id="cb43-364"><a href="#cb43-364"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR conditional = "</span>, <span class="fu">round</span>(ORc,<span class="dv">2</span>), </span>
<span id="cb43-365"><a href="#cb43-365"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR (ZY)= "</span>, <span class="fu">round</span>(RRz,<span class="dv">2</span>))</span>
<span id="cb43-366"><a href="#cb43-366"></a><span class="in">```</span></span>
<span id="cb43-367"><a href="#cb43-367"></a></span>
<span id="cb43-368"><a href="#cb43-368"></a><span class="fu">#### Adjustment of 1 variable</span></span>
<span id="cb43-369"><a href="#cb43-369"></a></span>
<span id="cb43-370"><a href="#cb43-370"></a><span class="in">```{r adj13, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-371"><a href="#cb43-371"></a>fitx2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking <span class="sc">+</span> gender, </span>
<span id="cb43-372"><a href="#cb43-372"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-373"><a href="#cb43-373"></a>Obs.Data.all.tx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb43-374"><a href="#cb43-374"></a>Obs.Data.all.tx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-375"><a href="#cb43-375"></a>p1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx2, </span>
<span id="cb43-376"><a href="#cb43-376"></a>                   <span class="at">newdata =</span> Obs.Data.all.tx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb43-377"><a href="#cb43-377"></a>Obs.Data.all.utx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb43-378"><a href="#cb43-378"></a>Obs.Data.all.utx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb43-379"><a href="#cb43-379"></a>p0 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx2, </span>
<span id="cb43-380"><a href="#cb43-380"></a>                   <span class="at">newdata =</span> Obs.Data.all.utx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb43-381"><a href="#cb43-381"></a></span>
<span id="cb43-382"><a href="#cb43-382"></a>RDm <span class="ot">&lt;-</span> p1 <span class="sc">-</span> p0</span>
<span id="cb43-383"><a href="#cb43-383"></a>RRm <span class="ot">&lt;-</span> p1 <span class="sc">/</span> p0</span>
<span id="cb43-384"><a href="#cb43-384"></a>ORm <span class="ot">&lt;-</span> (p1 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p1)) <span class="sc">/</span> (p0 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p0))</span>
<span id="cb43-385"><a href="#cb43-385"></a>ORc <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(fitx2)[<span class="st">"smoking"</span>]))</span>
<span id="cb43-386"><a href="#cb43-386"></a>RRz <span class="ot">&lt;-</span> ORm <span class="sc">/</span> ((<span class="dv">1</span><span class="sc">-</span>p0) <span class="sc">+</span> p0 <span class="sc">*</span> ORm) <span class="co"># Zhang and Yu (1998)</span></span>
<span id="cb43-387"><a href="#cb43-387"></a><span class="fu">cat</span>(<span class="st">"RD marginal = "</span>, <span class="fu">round</span>(RDm,<span class="dv">2</span>), </span>
<span id="cb43-388"><a href="#cb43-388"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR marginal = "</span>, <span class="fu">round</span>(RRm,<span class="dv">2</span>), </span>
<span id="cb43-389"><a href="#cb43-389"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR marginal = "</span>, <span class="fu">round</span>(ORm,<span class="dv">2</span>), </span>
<span id="cb43-390"><a href="#cb43-390"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR conditional = "</span>, <span class="fu">round</span>(ORc,<span class="dv">2</span>), </span>
<span id="cb43-391"><a href="#cb43-391"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR (ZY)= "</span>, <span class="fu">round</span>(RRz,<span class="dv">2</span>))</span>
<span id="cb43-392"><a href="#cb43-392"></a><span class="in">```</span></span>
<span id="cb43-393"><a href="#cb43-393"></a></span>
<span id="cb43-394"><a href="#cb43-394"></a><span class="fu">#### No adjustment</span></span>
<span id="cb43-395"><a href="#cb43-395"></a></span>
<span id="cb43-396"><a href="#cb43-396"></a><span class="in">```{r crude15, warning=FALSE, message=FALSE, cache = TRUE}</span></span>
<span id="cb43-397"><a href="#cb43-397"></a>fitx1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(hypertension <span class="sc">~</span> smoking, </span>
<span id="cb43-398"><a href="#cb43-398"></a>             <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), <span class="at">data=</span>Obs.Data)</span>
<span id="cb43-399"><a href="#cb43-399"></a>Obs.Data.all.tx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb43-400"><a href="#cb43-400"></a>Obs.Data.all.tx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-401"><a href="#cb43-401"></a>p1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx0, </span>
<span id="cb43-402"><a href="#cb43-402"></a>                   <span class="at">newdata =</span> Obs.Data.all.tx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb43-403"><a href="#cb43-403"></a>Obs.Data.all.utx <span class="ot">&lt;-</span> Obs.Data</span>
<span id="cb43-404"><a href="#cb43-404"></a>Obs.Data.all.utx<span class="sc">$</span>smoking <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb43-405"><a href="#cb43-405"></a>p0 <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">predict</span>(fitx0, </span>
<span id="cb43-406"><a href="#cb43-406"></a>                   <span class="at">newdata =</span> Obs.Data.all.utx, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb43-407"><a href="#cb43-407"></a></span>
<span id="cb43-408"><a href="#cb43-408"></a>RDm <span class="ot">&lt;-</span> p1 <span class="sc">-</span> p0</span>
<span id="cb43-409"><a href="#cb43-409"></a>RRm <span class="ot">&lt;-</span> p1 <span class="sc">/</span> p0</span>
<span id="cb43-410"><a href="#cb43-410"></a>ORm <span class="ot">&lt;-</span> (p1 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p1)) <span class="sc">/</span> (p0 <span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>p0))</span>
<span id="cb43-411"><a href="#cb43-411"></a>ORc <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(fitx1)[<span class="st">"smoking"</span>]))</span>
<span id="cb43-412"><a href="#cb43-412"></a>RRz <span class="ot">&lt;-</span> ORm <span class="sc">/</span> ((<span class="dv">1</span><span class="sc">-</span>p0) <span class="sc">+</span> p0 <span class="sc">*</span> ORm) <span class="co"># Zhang and Yu (1998)</span></span>
<span id="cb43-413"><a href="#cb43-413"></a><span class="fu">cat</span>(<span class="st">"RD marginal = "</span>, <span class="fu">round</span>(RDm,<span class="dv">2</span>), </span>
<span id="cb43-414"><a href="#cb43-414"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR marginal = "</span>, <span class="fu">round</span>(RRm,<span class="dv">2</span>), </span>
<span id="cb43-415"><a href="#cb43-415"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR marginal = "</span>, <span class="fu">round</span>(ORm,<span class="dv">2</span>), </span>
<span id="cb43-416"><a href="#cb43-416"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">OR conditional = "</span>, <span class="fu">round</span>(ORc,<span class="dv">2</span>), </span>
<span id="cb43-417"><a href="#cb43-417"></a>    <span class="st">"</span><span class="sc">\n</span><span class="st">RR (ZY)= "</span>, <span class="fu">round</span>(RRz,<span class="dv">2</span>))</span>
<span id="cb43-418"><a href="#cb43-418"></a><span class="in">```</span></span>
<span id="cb43-419"><a href="#cb43-419"></a></span>
<span id="cb43-420"><a href="#cb43-420"></a>Bootstrap could be used to estimate confidence intervals.</span>
<span id="cb43-421"><a href="#cb43-421"></a></span>
<span id="cb43-422"><a href="#cb43-422"></a>Ref:</span>
<span id="cb43-423"><a href="#cb43-423"></a></span>
<span id="cb43-424"><a href="#cb43-424"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@kleinman2009s</span><span class="co">]</span> ("this paper demonstrates how to move from a nonlinear model to estimates of marginal effects that are quantified as the adjusted risk ratio or adjusted risk difference")</span>
<span id="cb43-425"><a href="#cb43-425"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@austin2010absolute</span><span class="co">]</span> ("clinically meaningful measures of treatment effect using logistic regression model")</span>
<span id="cb43-426"><a href="#cb43-426"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@luijken2022comparison</span><span class="co">]</span> ("marginal odds ratio")</span>
<span id="cb43-427"><a href="#cb43-427"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@muller2014estimating</span><span class="co">]</span> ("marginal standardization")</span>
<span id="cb43-428"><a href="#cb43-428"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@greenland2004model</span><span class="co">]</span> ("standardized / population-averaged")</span>
<span id="cb43-429"><a href="#cb43-429"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@bieler2010estimating</span><span class="co">]</span> ("standardized /population-averaged risk from the logistic model")</span>
<span id="cb43-430"><a href="#cb43-430"></a></span>
<span id="cb43-431"><a href="#cb43-431"></a><span class="fu">### Summary</span></span>
<span id="cb43-432"><a href="#cb43-432"></a></span>
<span id="cb43-433"><a href="#cb43-433"></a>Here are the summary of the results based on a scenario where confounding was absent:</span>
<span id="cb43-434"><a href="#cb43-434"></a></span>
<span id="cb43-435"><a href="#cb43-435"></a>| Modelling strategy                                         | RD (conditional)          | RR (conditional)            | OR (conditional)                            |</span>
<span id="cb43-436"><a href="#cb43-436"></a>|--------------------|-----------------|-----------------|-----------------|</span>
<span id="cb43-437"><a href="#cb43-437"></a>| age + gender in regression                                 | 0.06 <span class="sc">\[</span>0.05;0.06<span class="sc">\]</span>        | 1.08 <span class="sc">\[</span>1.08;1.09<span class="sc">\]</span>          | 3.37 <span class="sc">\[</span>3.17;3.58<span class="sc">\]</span>                          |</span>
<span id="cb43-438"><a href="#cb43-438"></a>| stratified by age and gender (mean)                        | 0.05 (*0.11, 0.1,0.01,0*) | 1.16 (*1.41, 1.21, 1.01,1*) | 2.18 (unweighted; *1.65, 1.49, 3.45, 2.14*) |</span>
<span id="cb43-439"><a href="#cb43-439"></a>| gender in regression                                       | 0.05 <span class="sc">\[</span>0.05;0.06<span class="sc">\]</span>        | 1.08 <span class="sc">\[</span>1.07;1.09<span class="sc">\]</span>          | 1.29 <span class="sc">\[</span>1.26;1.33<span class="sc">\]</span>                          |</span>
<span id="cb43-440"><a href="#cb43-440"></a>| stratified by gender (mean)                                | 0.05 (*0.6,0.5*)          | 1.08 (*1.09, 1.06*)         | 1.29 (*1.29, 1.29*; **M-H** 1.29)           |</span>
<span id="cb43-441"><a href="#cb43-441"></a>| **Marginal estimates**                                     |                           |                             |                                             |</span>
<span id="cb43-442"><a href="#cb43-442"></a>| crude                                                      | 0.05 <span class="sc">\[</span>0.05;0.06<span class="sc">\]</span>        | 1.08 <span class="sc">\[</span>1.07;1.09<span class="sc">\]</span>          | 1.29 <span class="sc">\[</span>1.25;1.32<span class="sc">\]</span>                          |</span>
<span id="cb43-443"><a href="#cb43-443"></a>| Based on marginal probabilities (any variable combination) | 0.05                      | 1.08                        | 1.29                                        |</span>
<span id="cb43-444"><a href="#cb43-444"></a></span>
<span id="cb43-445"><a href="#cb43-445"></a>Let us assume we have a regression of hypertension ($Y$), smoking ($A$) and a risk factor for outcome, gender ($L$). Then let us set up 2 regression models:</span>
<span id="cb43-446"><a href="#cb43-446"></a></span>
<span id="cb43-447"><a href="#cb43-447"></a><span class="ss">-   </span>1st regression model is $Y \sim \beta \times A + \alpha \times L$. Here we are conditioning on gender ($L$).</span>
<span id="cb43-448"><a href="#cb43-448"></a><span class="ss">-   </span>2nd regression model is $Y \sim \beta' \times A$</span>
<span id="cb43-449"><a href="#cb43-449"></a></span>
<span id="cb43-450"><a href="#cb43-450"></a>Then regression is collapsible for $\beta$ over $L$ if $\beta = \beta'$ from the 2nd regression omitting $L$. $\beta \ne \beta'$ would mean non-collapsibility. A measure of association (say, risk difference) is collapsible if the marginal measure of association is equal to a weighted average of the stratum-specific measures of association. Non-collapsibility is also knows as Simpson's Paradox (in absence of confoinding of course): a statistical phenomenon where an association between two factors (say, hypertension and smoking) in a population (we are talking about marginal estimate here) is different than the associations of same relationship in subpopulations (conditional on some other factor, say, age; hence talking about conditional estimates).</span>
<span id="cb43-451"><a href="#cb43-451"></a></span>
<span id="cb43-452"><a href="#cb43-452"></a>Odds ratio can be non-collapsible. It can produce different treatment effect estimate for different covariate adjustment sets (see our above example of when adjusting form age and sex vs. when adjusting none). This is true even in the absence of confounding. However, according to our definition here, OR is collapsible when we consider gender in the adjustment set.</span>
<span id="cb43-453"><a href="#cb43-453"></a></span>
<span id="cb43-454"><a href="#cb43-454"></a>Note that, OR non-collapsibility is a consequence of the fact that it is estimated via a logit link function (nonlinearity of the logistic transformation).</span>
<span id="cb43-455"><a href="#cb43-455"></a></span>
<span id="cb43-456"><a href="#cb43-456"></a>Ref:</span>
<span id="cb43-457"><a href="#cb43-457"></a></span>
<span id="cb43-458"><a href="#cb43-458"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@greenland1999confounding</span><span class="co">]</span></span>
<span id="cb43-459"><a href="#cb43-459"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">@mansournia2015relation</span><span class="co">]</span></span>
<span id="cb43-460"><a href="#cb43-460"></a></span>
<span id="cb43-461"><a href="#cb43-461"></a><span class="fu">### Video content (optional)</span></span>
<span id="cb43-462"><a href="#cb43-462"></a></span>
<span id="cb43-463"><a href="#cb43-463"></a>::: callout-tip</span>
<span id="cb43-464"><a href="#cb43-464"></a>For those who prefer a video walkthrough, feel free to watch the video below, which offers a description of an earlier version of the above content.</span>
<span id="cb43-465"><a href="#cb43-465"></a>:::</span>
<span id="cb43-466"><a href="#cb43-466"></a></span>
<span id="cb43-467"><a href="#cb43-467"></a>::: {style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"}</span>
<span id="cb43-468"><a href="#cb43-468"></a><span class="kw">&lt;iframe</span> <span class="er">src</span><span class="ot">=</span><span class="st">"https://www.youtube.com/embed/h4q70cIPldQ"</span> <span class="er">style</span><span class="ot">=</span><span class="st">"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;"</span> <span class="er">allowfullscreen</span><span class="kw">&gt;</span></span>
<span id="cb43-469"><a href="#cb43-469"></a></span>
<span id="cb43-470"><a href="#cb43-470"></a><span class="kw">&lt;/iframe&gt;</span></span>
<span id="cb43-471"><a href="#cb43-471"></a>:::</span>
<span id="cb43-472"><a href="#cb43-472"></a></span>
<span id="cb43-473"><a href="#cb43-473"></a><span class="fu">### References</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>