<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>OER: Advanced Epidemiological Methods - NHANES: Cholesterol</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./surveydata8.html" rel="next">
<link href="./surveydata6.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<meta name="twitter:title" content="OER: Advanced Epidemiological Methods - NHANES: Cholesterol">
<meta name="twitter:description" content="Fit a linear regression, and report the VIFs.">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar docked">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">NHANES: Cholesterol</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">OER: Advanced Epidemiological Methods</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">The Project</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./wrangling.html" class="sidebar-item-text sidebar-link">Data wrangling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1a.html" class="sidebar-item-text sidebar-link">R basics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1b.html" class="sidebar-item-text sidebar-link">Data types</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1c.html" class="sidebar-item-text sidebar-link">Automating tasks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling2.html" class="sidebar-item-text sidebar-link">Importing dataset</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling3.html" class="sidebar-item-text sidebar-link">Data manipulation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling4.html" class="sidebar-item-text sidebar-link">Import external data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling5.html" class="sidebar-item-text sidebar-link">Summary tables</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingF.html" class="sidebar-item-text sidebar-link">R Functions (W)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingQ.html" class="sidebar-item-text sidebar-link">Quiz (W)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingE.html" class="sidebar-item-text sidebar-link">Exercise (W)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./accessing.html" class="sidebar-item-text sidebar-link">Data accessing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing1.html" class="sidebar-item-text sidebar-link">Survey data sources</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing2.html" class="sidebar-item-text sidebar-link">Importing CCHS to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing3.html" class="sidebar-item-text sidebar-link">Importing NHANES to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing4.html" class="sidebar-item-text sidebar-link">Reproducing results</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingF.html" class="sidebar-item-text sidebar-link">R Functions (A)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingQ.html" class="sidebar-item-text sidebar-link">Quiz (A)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingE.html" class="sidebar-item-text sidebar-link">Exercise (A)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./researchquestion.html" class="sidebar-item-text sidebar-link">Research question</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion1.html" class="sidebar-item-text sidebar-link">Predictive question-1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2a.html" class="sidebar-item-text sidebar-link">Predictive question-2a</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2b.html" class="sidebar-item-text sidebar-link">Predictive question-2b</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion3.html" class="sidebar-item-text sidebar-link">Causal question-1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion4.html" class="sidebar-item-text sidebar-link">Causal question-2</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionF.html" class="sidebar-item-text sidebar-link">R functions (Q)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionQ.html" class="sidebar-item-text sidebar-link">Quiz (Q)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./confounding.html" class="sidebar-item-text sidebar-link">Role of variables</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding1.html" class="sidebar-item-text sidebar-link">Confounding</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding2.html" class="sidebar-item-text sidebar-link">Mediator</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding3.html" class="sidebar-item-text sidebar-link">Collider</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding4.html" class="sidebar-item-text sidebar-link">Z-bias</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding5.html" class="sidebar-item-text sidebar-link">Collapsibility</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding6.html" class="sidebar-item-text sidebar-link">Change-in-estimate</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingF.html" class="sidebar-item-text sidebar-link">R functions (R)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingQ.html" class="sidebar-item-text sidebar-link">Quiz (R)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./predictivefactors.html" class="sidebar-item-text sidebar-link">Prediction models</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors1.html" class="sidebar-item-text sidebar-link">Collinear predictors</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors2.html" class="sidebar-item-text sidebar-link">Continuous outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors3.html" class="sidebar-item-text sidebar-link">Binary outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors4.html" class="sidebar-item-text sidebar-link">Overfitting and performance</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors5.html" class="sidebar-item-text sidebar-link">Data spliting</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors6.html" class="sidebar-item-text sidebar-link">Cross-vaildation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors7.html" class="sidebar-item-text sidebar-link">Bootstrap</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsF.html" class="sidebar-item-text sidebar-link">R functions (P)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsQ.html" class="sidebar-item-text sidebar-link">Quiz (P)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./surveydata.html" class="sidebar-item-text sidebar-link">Survey data analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata1.html" class="sidebar-item-text sidebar-link">CCHS: Revisiting PICOT</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata2.html" class="sidebar-item-text sidebar-link">CCHS: Assessing data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata3.html" class="sidebar-item-text sidebar-link">CCHS: Bivariate analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata4.html" class="sidebar-item-text sidebar-link">CCHS: Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata5.html" class="sidebar-item-text sidebar-link">CCHS: Performance</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata6.html" class="sidebar-item-text sidebar-link">NHANES: Blood Pressure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata7.html" class="sidebar-item-text sidebar-link active">NHANES: Cholesterol</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata8.html" class="sidebar-item-text sidebar-link">NHANES: Subsetting</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataF.html" class="sidebar-item-text sidebar-link">R functions (D)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataQ.html" class="sidebar-item-text sidebar-link">Quiz (D)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataE.html" class="sidebar-item-text sidebar-link">Exercise (D)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./missingdata.html" class="sidebar-item-text sidebar-link">Missing data analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataF.html" class="sidebar-item-text sidebar-link">R functions (M)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataE.html" class="sidebar-item-text sidebar-link">Exercise (M)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./propensityscore.html" class="sidebar-item-text sidebar-link">Propensity score</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreF.html" class="sidebar-item-text sidebar-link">R functions (S)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreE.html" class="sidebar-item-text sidebar-link">Exercise (S)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./reporting.html" class="sidebar-item-text sidebar-link">Reporting guidelines</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reportingF.html" class="sidebar-item-text sidebar-link">R functions (G)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearning.html" class="sidebar-item-text sidebar-link">Machine learning</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningF.html" class="sidebar-item-text sidebar-link">R functions (L)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearningCausal.html" class="sidebar-item-text sidebar-link">ML in causal inference</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausalF.html" class="sidebar-item-text sidebar-link">R functions (C)</a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#preprocessing" id="toc-preprocessing" class="nav-link active" data-scroll-target="#preprocessing">Preprocessing</a></li>
  <li><a href="#linear-regression-when-cholesterol-is-continuous" id="toc-linear-regression-when-cholesterol-is-continuous" class="nav-link" data-scroll-target="#linear-regression-when-cholesterol-is-continuous">Linear regression when cholesterol is continuous</a></li>
  <li><a href="#test-of-association-when-cholesterol-is-binary" id="toc-test-of-association-when-cholesterol-is-binary" class="nav-link" data-scroll-target="#test-of-association-when-cholesterol-is-binary">Test of association when cholesterol is binary</a></li>
  <li><a href="#table-1-1" id="toc-table-1-1" class="nav-link" data-scroll-target="#table-1-1">Table 1</a></li>
  <li><a href="#logistic-regression-model" id="toc-logistic-regression-model" class="nav-link" data-scroll-target="#logistic-regression-model">Logistic regression model</a></li>
  <li><a href="#wald-test-survey-version" id="toc-wald-test-survey-version" class="nav-link" data-scroll-target="#wald-test-survey-version">Wald test (survey version)</a></li>
  <li><a href="#backward-elimination" id="toc-backward-elimination" class="nav-link" data-scroll-target="#backward-elimination">Backward elimination</a></li>
  <li><a href="#interaction-terms" id="toc-interaction-terms" class="nav-link" data-scroll-target="#interaction-terms">Interaction terms</a></li>
  <li><a href="#auc" id="toc-auc" class="nav-link" data-scroll-target="#auc">AUC</a></li>
  <li><a href="#archer-lemeshow-goodness-of-fit" id="toc-archer-lemeshow-goodness-of-fit" class="nav-link" data-scroll-target="#archer-lemeshow-goodness-of-fit">Archer-Lemeshow Goodness of fit</a></li>
  <li><a href="#add-age-as-a-predictor-for-linear-regression" id="toc-add-age-as-a-predictor-for-linear-regression" class="nav-link" data-scroll-target="#add-age-as-a-predictor-for-linear-regression">Add <code>age</code> as a predictor for linear regression</a></li>
  <li><a href="#comparing-with-previous-model-fit" id="toc-comparing-with-previous-model-fit" class="nav-link" data-scroll-target="#comparing-with-previous-model-fit">Comparing with previous model fit</a></li>
  <li><a href="#video-content-optional" id="toc-video-content-optional" class="nav-link" data-scroll-target="#video-content-optional">Video content (optional)</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">NHANES: Cholesterol</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i></button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="cell" data-hash="surveydata7_cache/html/setup_301d12ef8fbddc52cb4972aa2821de2b">
<details><summary>Show the code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load required packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/">survey</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">Publish</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kaz-yos/tableone">tableone</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ipa-tys.github.io/ROCR/">ROCR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tdhock/WeightedROC">WeightedROC</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jtools.jacob-long.com">jtools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="preprocessing" class="level3"><h3 class="anchored" data-anchor-id="preprocessing">Preprocessing</h3>
<section id="analytic-data-set" class="level4"><h4 class="anchored" data-anchor-id="analytic-data-set">Analytic data set</h4>
<p>We will use <code>cholesterolNHANES15part1.RData</code> in this prediction goal question (predicting cholesterol in adults).</p>
<p>For this exercise, we are assuming that:</p>
<ul>
<li><p>outcome: cholesterol</p></li>
<li>
<p>predictors:</p>
<ul>
<li>gender</li>
<li>whether born in US</li>
<li>race</li>
<li>education</li>
<li>whether married</li>
<li>income level</li>
<li>BMI</li>
<li>whether has diabetes</li>
</ul>
</li>
<li>
<p>survey features:</p>
<ul>
<li>survey weights</li>
<li>strata</li>
<li>cluster/PSU; where strata is nested within clusters</li>
</ul>
<p>– restrict to those participants who are of 18 years of age or older</p>
</li>
</ul>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"Data/surveydata/cholesterolNHANES15part1.rdata"</span><span class="op">)</span> <span class="co">#Loading the dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "analytic"           "analytic.with.miss" "analytic1"         </span></span>
<span><span class="co">#&gt;  [4] "analytic2"          "analytic2b"         "analytic3"         </span></span>
<span><span class="co">#&gt;  [7] "collinearity"       "correlationMatrix"  "diff.boot"         </span></span>
<span><span class="co">#&gt; [10] "extract.boot.fun"   "extract.fit"        "extract.lm.fun"    </span></span>
<span><span class="co">#&gt; [13] "fictitious.data"    "fit0"               "fit1"              </span></span>
<span><span class="co">#&gt; [16] "fit2"               "fit3"               "fit4"              </span></span>
<span><span class="co">#&gt; [19] "fit5"               "formula0"           "formula1"          </span></span>
<span><span class="co">#&gt; [22] "formula2"           "formula3"           "formula4"          </span></span>
<span><span class="co">#&gt; [25] "formula5"           "k.folds"            "numeric.names"     </span></span>
<span><span class="co">#&gt; [28] "perform"            "pred.y"             "rocobj"            </span></span>
<span><span class="co">#&gt; [31] "sel.names"          "var.cluster"        "var.summ"          </span></span>
<span><span class="co">#&gt; [34] "var.summ2"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="retaining-only-useful-variables" class="level4"><h4 class="anchored" data-anchor-id="retaining-only-useful-variables">Retaining only useful variables</h4>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Data dimensions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1267   33</span></span>
<span></span>
<span><span class="co"># Variable names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">analytic</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "ID"                    "gender"                "age"                  </span></span>
<span><span class="co">#&gt;  [4] "born"                  "race"                  "education"            </span></span>
<span><span class="co">#&gt;  [7] "married"               "income"                "weight"               </span></span>
<span><span class="co">#&gt; [10] "psu"                   "strata"                "diastolicBP"          </span></span>
<span><span class="co">#&gt; [13] "systolicBP"            "bodyweight"            "bodyheight"           </span></span>
<span><span class="co">#&gt; [16] "bmi"                   "waist"                 "smoke"                </span></span>
<span><span class="co">#&gt; [19] "alcohol"               "cholesterol"           "cholesterolM2"        </span></span>
<span><span class="co">#&gt; [22] "triglycerides"         "uric.acid"             "protein"              </span></span>
<span><span class="co">#&gt; [25] "bilirubin"             "phosphorus"            "sodium"               </span></span>
<span><span class="co">#&gt; [28] "potassium"             "globulin"              "calcium"              </span></span>
<span><span class="co">#&gt; [31] "physical.work"         "physical.recreational" "diabetes"</span></span>
<span></span>
<span><span class="co">#Subsetting dataset with variables needed:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">anadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">analytic</span>, </span>
<span>                  <span class="va">cholesterol</span>, <span class="co">#outcome</span></span>
<span>                  <span class="va">gender</span>, <span class="va">age</span>, <span class="va">born</span>, <span class="va">race</span>, <span class="va">education</span>, <span class="va">married</span>, <span class="va">income</span>, <span class="va">bmi</span>, <span class="va">diabetes</span>, <span class="co">#predictors</span></span>
<span>                  <span class="va">weight</span>, <span class="va">psu</span>, <span class="va">strata</span><span class="op">)</span> <span class="co">#survey features</span></span>
<span></span>
<span><span class="co"># new data sizes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1267   13</span></span>
<span></span>
<span><span class="co"># retained variable names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "cholesterol" "gender"      "age"         "born"        "race"       </span></span>
<span><span class="co">#&gt;  [6] "education"   "married"     "income"      "bmi"         "diabetes"   </span></span>
<span><span class="co">#&gt; [11] "weight"      "psu"         "strata"</span></span>
<span></span>
<span><span class="co">#Restricting to participants who are 18 or older</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">age</span><span class="op">)</span> <span class="co">#The age range is already 20-80</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   20.00   36.00   51.00   49.91   63.00   80.00</span></span>
<span></span>
<span><span class="co">#Recoding the born variable</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">born</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Born in 50 US states or Washingt                           Others </span></span>
<span><span class="co">#&gt;                              991                              276 </span></span>
<span><span class="co">#&gt;                             &lt;NA&gt; </span></span>
<span><span class="co">#&gt;                                0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">born</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="va">anadata</span><span class="op">$</span><span class="va">born</span> <span class="op">&lt;-</span> <span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">born</span>,</span>
<span>                            <span class="st">"'Born in 50 US states or Washingt' = 'Born.in.US';</span></span>
<span><span class="st">                            'Others' = 'Others';</span></span>
<span><span class="st">                            else=NA"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">born</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Born.in.US     Others       &lt;NA&gt; </span></span>
<span><span class="co">#&gt;        991        276          0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="checking-the-data-for-missing" class="level4"><h4 class="anchored" data-anchor-id="checking-the-data-for-missing">Checking the data for missing</h4>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="http://boxuancui.github.io/DataExplorer/">DataExplorer</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="http://boxuancui.github.io/DataExplorer/reference/plot_missing.html">plot_missing</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">)</span> <span class="co">#no missing data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="surveydata7_files/figure-html/miss0-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="preparing-factor-and-continuous-variables-appropriately" class="level4"><h4 class="anchored" data-anchor-id="preparing-factor-and-continuous-variables-appropriately">Preparing factor and continuous variables appropriately</h4>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">vars</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cholesterol"</span>, <span class="st">"gender"</span>, <span class="st">"born"</span>, <span class="st">"race"</span>, <span class="st">"education"</span>, </span>
<span>         <span class="st">"married"</span>, <span class="st">"income"</span>, <span class="st">"bmi"</span>, <span class="st">"diabetes"</span><span class="op">)</span></span>
<span><span class="va">numeric.names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cholesterol"</span>, <span class="st">"bmi"</span><span class="op">)</span></span>
<span><span class="va">factor.names</span> <span class="op">&lt;-</span> <span class="va">vars</span><span class="op">[</span><span class="op">!</span><span class="va">vars</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">numeric.names</span><span class="op">]</span> </span>
<span></span>
<span><span class="va">anadata</span><span class="op">[</span><span class="va">factor.names</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">anadata</span><span class="op">[</span><span class="va">factor.names</span><span class="op">]</span>,</span>
<span>                               MARGIN <span class="op">=</span> <span class="fl">2</span>, FUN <span class="op">=</span> <span class="va">as.factor</span><span class="op">)</span></span>
<span></span>
<span><span class="va">anadata</span><span class="op">[</span><span class="va">numeric.names</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">anadata</span><span class="op">[</span><span class="va">numeric.names</span><span class="op">]</span>,</span>
<span>                                MARGIN <span class="op">=</span> <span class="fl">2</span>, FUN <span class="op">=</span><span class="kw">function</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> </span>
<span>                                  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="table-1" class="level4"><h4 class="anchored" data-anchor-id="table-1">Table 1</h4>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kaz-yos/tableone">tableone</a></span><span class="op">)</span></span>
<span><span class="va">tab1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tableone/man/CreateTableOne.html">CreateTableOne</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">anadata</span>, includeNA <span class="op">=</span> <span class="cn">TRUE</span>, vars <span class="op">=</span> <span class="va">vars</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">tab1</span>, showAllLevels <span class="op">=</span> <span class="cn">TRUE</span>,  varLabels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;                          </span></span>
<span><span class="co">#&gt;                           level              Overall       </span></span>
<span><span class="co">#&gt;   n                                            1267        </span></span>
<span><span class="co">#&gt;   cholesterol (mean (SD))                    193.10 (43.22)</span></span>
<span><span class="co">#&gt;   gender (%)              Female                496 (39.1) </span></span>
<span><span class="co">#&gt;                           Male                  771 (60.9) </span></span>
<span><span class="co">#&gt;   born (%)                Born.in.US            991 (78.2) </span></span>
<span><span class="co">#&gt;                           Others                276 (21.8) </span></span>
<span><span class="co">#&gt;   race (%)                Black                 246 (19.4) </span></span>
<span><span class="co">#&gt;                           Hispanic              337 (26.6) </span></span>
<span><span class="co">#&gt;                           Other                 132 (10.4) </span></span>
<span><span class="co">#&gt;                           White                 552 (43.6) </span></span>
<span><span class="co">#&gt;   education (%)           College               648 (51.1) </span></span>
<span><span class="co">#&gt;                           High.School           523 (41.3) </span></span>
<span><span class="co">#&gt;                           School                 96 ( 7.6) </span></span>
<span><span class="co">#&gt;   married (%)             Married               751 (59.3) </span></span>
<span><span class="co">#&gt;                           Never.married         226 (17.8) </span></span>
<span><span class="co">#&gt;                           Previously.married    290 (22.9) </span></span>
<span><span class="co">#&gt;   income (%)              &lt;25k                  344 (27.2) </span></span>
<span><span class="co">#&gt;                           Between.25kto54k      435 (34.3) </span></span>
<span><span class="co">#&gt;                           Between.55kto99k      297 (23.4) </span></span>
<span><span class="co">#&gt;                           Over100k              191 (15.1) </span></span>
<span><span class="co">#&gt;   bmi (mean (SD))                             29.58 (6.84) </span></span>
<span><span class="co">#&gt;   diabetes (%)            No                   1064 (84.0) </span></span>
<span><span class="co">#&gt;                           Yes                   203 (16.0)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="linear-regression-when-cholesterol-is-continuous" class="level3"><h3 class="anchored" data-anchor-id="linear-regression-when-cholesterol-is-continuous">Linear regression when cholesterol is continuous</h3>
<p>Fit a linear regression, and report the VIFs.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Fitting initial regression</span></span>
<span></span>
<span><span class="va">fit0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">cholesterol</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">born</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">education</span> <span class="op">+</span></span>
<span>              <span class="va">married</span> <span class="op">+</span> <span class="va">income</span> <span class="op">+</span> <span class="va">bmi</span> <span class="op">+</span> <span class="va">diabetes</span>,</span>
<span>            data <span class="op">=</span> <span class="va">anadata</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">Publish</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Publish/man/publish.html">publish</a></span><span class="op">(</span><span class="va">fit0</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Variable              Units Coefficient           CI.95    p-value </span></span>
<span><span class="co">#&gt;  (Intercept)                         198.90 [184.82;212.97]    &lt; 1e-04 </span></span>
<span><span class="co">#&gt;       gender             Female         Ref                            </span></span>
<span><span class="co">#&gt;                            Male       -6.82  [-11.76;-1.89]   0.006854 </span></span>
<span><span class="co">#&gt;         born         Born.in.US         Ref                            </span></span>
<span><span class="co">#&gt;                          Others       15.65    [8.54;22.75]    &lt; 1e-04 </span></span>
<span><span class="co">#&gt;         race              Black         Ref                            </span></span>
<span><span class="co">#&gt;                        Hispanic       -2.75   [-10.61;5.10]   0.492333 </span></span>
<span><span class="co">#&gt;                           Other       -3.95   [-13.61;5.72]   0.423740 </span></span>
<span><span class="co">#&gt;                           White        5.36   [-1.20;11.92]   0.109403 </span></span>
<span><span class="co">#&gt;    education            College         Ref                            </span></span>
<span><span class="co">#&gt;                     High.School        3.51    [-1.61;8.63]   0.179871 </span></span>
<span><span class="co">#&gt;                          School        0.31   [-9.63;10.24]   0.951841 </span></span>
<span><span class="co">#&gt;      married            Married         Ref                            </span></span>
<span><span class="co">#&gt;                   Never.married      -11.05  [-17.67;-4.44]   0.001082 </span></span>
<span><span class="co">#&gt;              Previously.married        4.72   [-1.43;10.86]   0.132468 </span></span>
<span><span class="co">#&gt;       income               &lt;25k         Ref                            </span></span>
<span><span class="co">#&gt;                Between.25kto54k       -0.48    [-6.72;5.75]   0.879480 </span></span>
<span><span class="co">#&gt;                Between.55kto99k        3.41   [-3.60;10.43]   0.340491 </span></span>
<span><span class="co">#&gt;                        Over100k        2.24   [-6.02;10.51]   0.595131 </span></span>
<span><span class="co">#&gt;          bmi                          -0.21    [-0.56;0.15]   0.257105 </span></span>
<span><span class="co">#&gt;     diabetes                 No         Ref                            </span></span>
<span><span class="co">#&gt;                             Yes      -10.61  [-17.21;-4.02]   0.001652</span></span>
<span></span>
<span><span class="co">#Checking VIFs</span></span>
<span><span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/vif.html">vif</a></span><span class="op">(</span><span class="va">fit0</span><span class="op">)</span> </span>
<span><span class="co">#&gt;               GVIF Df GVIF^(1/(2*Df))</span></span>
<span><span class="co">#&gt; gender    1.065810  1        1.032381</span></span>
<span><span class="co">#&gt; born      1.578258  1        1.256288</span></span>
<span><span class="co">#&gt; race      1.684064  3        1.090753</span></span>
<span><span class="co">#&gt; education 1.280113  2        1.063683</span></span>
<span><span class="co">#&gt; married   1.225520  2        1.052156</span></span>
<span><span class="co">#&gt; income    1.277005  3        1.041595</span></span>
<span><span class="co">#&gt; bmi       1.086953  1        1.042570</span></span>
<span><span class="co">#&gt; diabetes  1.073619  1        1.036156</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>All VIFs are small.</p>
</section><section id="test-of-association-when-cholesterol-is-binary" class="level3"><h3 class="anchored" data-anchor-id="test-of-association-when-cholesterol-is-binary">Test of association when cholesterol is binary</h3>
<p>Dichotomize the outcome such that cholesterol&lt;200 is labeled as ‘healthy’; otherwise label it as ‘unhealthy’, and name it ‘cholesterol.bin’. Test the association between this binary variable and gender.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Creating binary variable for cholesterol</span></span>
<span><span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol</span> <span class="op">&lt;</span><span class="fl">200</span>, <span class="st">"healthy"</span>, <span class="st">"unhealthy"</span><span class="op">)</span></span>
<span><span class="co">#If cholesterol is &lt;200, then "healthy", if not, "unhealthy"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   healthy unhealthy </span></span>
<span><span class="co">#&gt;       738       529</span></span>
<span><span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span><span class="op">)</span></span>
<span><span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span>, ref <span class="op">=</span> <span class="st">"unhealthy"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="test-of-association-between-cholesterol-and-gender-no-survey-features" class="level4"><h4 class="anchored" data-anchor-id="test-of-association-between-cholesterol-and-gender-no-survey-features">Test of association between cholesterol and gender (no survey features)</h4>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Simple Chi-square testing</span></span>
<span><span class="va">chisq.chol.gen</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/chisq.test.html">chisq.test</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span>, <span class="va">anadata</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span></span>
<span><span class="va">chisq.chol.gen</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Pearson's Chi-squared test with Yates' continuity correction</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  anadata$cholesterol.bin and anadata$gender</span></span>
<span><span class="co">#&gt; X-squared = 5.1321, df = 1, p-value = 0.02349</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="setting-up-survey-design" class="level4"><h4 class="anchored" data-anchor-id="setting-up-survey-design">Setting up survey design</h4>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/">survey</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">anadata</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    5470   19540   30335   48904   63822  224892</span></span>
<span><span class="va">w.design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html">svydesign</a></span><span class="op">(</span>id <span class="op">=</span> <span class="op">~</span><span class="va">psu</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">weight</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">strata</span>,</span>
<span>                      nest <span class="op">=</span> <span class="cn">TRUE</span>, data <span class="op">=</span> <span class="va">anadata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/weights.html">weights</a></span><span class="op">(</span><span class="va">w.design</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    5470   19540   30335   48904   63822  224892</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="test-of-association-accounting-for-survey-design" class="level4"><h4 class="anchored" data-anchor-id="test-of-association-accounting-for-survey-design">Test of association accounting for survey design</h4>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Rao-Scott modifications (chi-sq)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html">svychisq</a></span><span class="op">(</span><span class="op">~</span><span class="va">cholesterol.bin</span> <span class="op">+</span> <span class="va">gender</span>, design <span class="op">=</span> <span class="va">w.design</span>, statistic <span class="op">=</span> <span class="st">"Chisq"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Pearson's X^2: Rao &amp; Scott adjustment</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  svychisq(~cholesterol.bin + gender, design = w.design, statistic = "Chisq")</span></span>
<span><span class="co">#&gt; X-squared = 11.092, df = 1, p-value = 0.02365</span></span>
<span></span>
<span><span class="co">#Thomas-Rao modifications (F)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html">svychisq</a></span><span class="op">(</span><span class="op">~</span><span class="va">cholesterol.bin</span> <span class="op">+</span> <span class="va">gender</span>, design <span class="op">=</span> <span class="va">w.design</span>, statistic <span class="op">=</span> <span class="st">"F"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Pearson's X^2: Rao &amp; Scott adjustment</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  svychisq(~cholesterol.bin + gender, design = w.design, statistic = "F")</span></span>
<span><span class="co">#&gt; F = 5.1205, ndf = 1, ddf = 15, p-value = 0.03891</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>All three tests indicate strong evidence to reject the H0. There seems to be an association between gender and cholesterol level (healthy/unhealthy)</p>
</section></section><section id="table-1-1" class="level3"><h3 class="anchored" data-anchor-id="table-1-1">Table 1</h3>
<p>Create a Table 1 (summarizing the covariates) stratified by the binary outcome: cholesterol.bin, utilizing the above survey features.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Creating Table 1 stratified by binary outcome (cholesterol)</span></span>
<span><span class="co"># Using the survey features</span></span>
<span></span>
<span><span class="va">vars2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"born"</span>, <span class="st">"race"</span>, <span class="st">"education"</span>, </span>
<span>         <span class="st">"married"</span>, <span class="st">"income"</span>, <span class="st">"bmi"</span>, <span class="st">"diabetes"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">kableone</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html">capture.output</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span>, showAllLevels<span class="op">=</span> <span class="cn">TRUE</span>, padColnames <span class="op">=</span> <span class="cn">TRUE</span>, insertLevel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tableone/man/kableone.html">kableone</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/tableone/man/svyCreateTableOne.html">svyCreateTableOne</a></span><span class="op">(</span>var <span class="op">=</span> <span class="va">vars2</span>, strata<span class="op">=</span> <span class="st">"cholesterol.bin"</span>, data<span class="op">=</span><span class="va">w.design</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 19%">
<col style="width: 23%">
<col style="width: 21%">
<col style="width: 21%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">level</th>
<th style="text-align: left;">unhealthy</th>
<th style="text-align: left;">healthy</th>
<th style="text-align: left;">p</th>
<th style="text-align: left;">test</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">n</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">27369732.3</td>
<td style="text-align: left;">34591444.0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">gender (%)</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">13573865.5 (49.6)</td>
<td style="text-align: left;">13917447.5 (40.2)</td>
<td style="text-align: left;">0.039</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">13795866.8 (50.4)</td>
<td style="text-align: left;">20673996.5 (59.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">born (%)</td>
<td style="text-align: left;">Born.in.US</td>
<td style="text-align: left;">23772751.7 (86.9)</td>
<td style="text-align: left;">31532673.3 (91.2)</td>
<td style="text-align: left;">0.028</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Others</td>
<td style="text-align: left;">3596980.6 (13.1)</td>
<td style="text-align: left;">3058770.7 ( 8.8)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">race (%)</td>
<td style="text-align: left;">Black</td>
<td style="text-align: left;">1832118.3 ( 6.7)</td>
<td style="text-align: left;">3696893.4 (10.7)</td>
<td style="text-align: left;">0.015</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Hispanic</td>
<td style="text-align: left;">3263992.3 (11.9)</td>
<td style="text-align: left;">3921344.6 (11.3)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">1887156.6 ( 6.9)</td>
<td style="text-align: left;">2601870.3 ( 7.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">20386465.2 (74.5)</td>
<td style="text-align: left;">24371335.7 (70.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">education (%)</td>
<td style="text-align: left;">College</td>
<td style="text-align: left;">15855712.5 (57.9)</td>
<td style="text-align: left;">20945710.7 (60.6)</td>
<td style="text-align: left;">0.522</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">High.School</td>
<td style="text-align: left;">10615218.7 (38.8)</td>
<td style="text-align: left;">12434827.2 (35.9)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">School</td>
<td style="text-align: left;">898801.1 ( 3.3)</td>
<td style="text-align: left;">1210906.1 ( 3.5)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">married (%)</td>
<td style="text-align: left;">Married</td>
<td style="text-align: left;">17489306.2 (63.9)</td>
<td style="text-align: left;">21170020.0 (61.2)</td>
<td style="text-align: left;">0.005</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Never.married</td>
<td style="text-align: left;">3086474.4 (11.3)</td>
<td style="text-align: left;">7175237.2 (20.7)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Previously.married</td>
<td style="text-align: left;">6793951.8 (24.8)</td>
<td style="text-align: left;">6246186.8 (18.1)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">income (%)</td>
<td style="text-align: left;">&lt;25k</td>
<td style="text-align: left;">4760281.8 (17.4)</td>
<td style="text-align: left;">6364208.6 (18.4)</td>
<td style="text-align: left;">0.915</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Between.25kto54k</td>
<td style="text-align: left;">8682481.6 (31.7)</td>
<td style="text-align: left;">10786198.6 (31.2)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Between.55kto99k</td>
<td style="text-align: left;">6939847.0 (25.4)</td>
<td style="text-align: left;">9190388.2 (26.6)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Over100k</td>
<td style="text-align: left;">6987121.9 (25.5)</td>
<td style="text-align: left;">8250648.6 (23.9)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">bmi (mean (SD))</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">29.35 (6.13)</td>
<td style="text-align: left;">29.64 (7.05)</td>
<td style="text-align: left;">0.593</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">diabetes (%)</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">25080412.0 (91.6)</td>
<td style="text-align: left;">30006523.6 (86.7)</td>
<td style="text-align: left;">0.012</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">2289320.3 ( 8.4)</td>
<td style="text-align: left;">4584920.4 (13.3)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="logistic-regression-model" class="level3"><h3 class="anchored" data-anchor-id="logistic-regression-model">Logistic regression model</h3>
<p>Run a logistic regression model using the same variables, utilizing the survey features. Report the corresponding odds ratios and the 95% confidence intervals.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">formula1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html">I</a></span><span class="op">(</span><span class="va">cholesterol.bin</span><span class="op">==</span><span class="st">"unhealthy"</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">born</span> <span class="op">+</span></span>
<span>                         <span class="va">race</span> <span class="op">+</span> <span class="va">education</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">income</span> <span class="op">+</span> <span class="va">bmi</span> <span class="op">+</span></span>
<span>                         <span class="va">diabetes</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyglm.html">svyglm</a></span><span class="op">(</span><span class="va">formula1</span>,</span>
<span>               design <span class="op">=</span> <span class="va">w.design</span>, </span>
<span>               family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"logit"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Publish/man/publish.html">publish</a></span><span class="op">(</span><span class="va">fit1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Variable              Units OddsRatio       CI.95  p-value </span></span>
<span><span class="co">#&gt;     gender             Female       Ref                      </span></span>
<span><span class="co">#&gt;                          Male      0.70 [0.49;0.98]   0.2866 </span></span>
<span><span class="co">#&gt;       born         Born.in.US       Ref                      </span></span>
<span><span class="co">#&gt;                        Others      2.10 [1.41;3.13]   0.1707 </span></span>
<span><span class="co">#&gt;       race              Black       Ref                      </span></span>
<span><span class="co">#&gt;                      Hispanic      1.15 [0.80;1.67]   0.5871 </span></span>
<span><span class="co">#&gt;                         Other      1.11 [0.69;1.80]   0.7406 </span></span>
<span><span class="co">#&gt;                         White      1.46 [1.00;2.14]   0.3003 </span></span>
<span><span class="co">#&gt;  education            College       Ref                      </span></span>
<span><span class="co">#&gt;                   High.School      1.21 [0.96;1.52]   0.3563 </span></span>
<span><span class="co">#&gt;                        School      0.86 [0.52;1.43]   0.6712 </span></span>
<span><span class="co">#&gt;    married            Married       Ref                      </span></span>
<span><span class="co">#&gt;                 Never.married      0.54 [0.32;0.90]   0.2526 </span></span>
<span><span class="co">#&gt;            Previously.married      1.31 [0.92;1.87]   0.3704 </span></span>
<span><span class="co">#&gt;     income               &lt;25k       Ref                      </span></span>
<span><span class="co">#&gt;              Between.25kto54k      1.03 [0.61;1.73]   0.9408 </span></span>
<span><span class="co">#&gt;              Between.55kto99k      1.02 [0.66;1.56]   0.9525 </span></span>
<span><span class="co">#&gt;                      Over100k      1.12 [0.73;1.72]   0.6920 </span></span>
<span><span class="co">#&gt;        bmi                         1.00 [0.97;1.03]   0.9361 </span></span>
<span><span class="co">#&gt;   diabetes                 No       Ref                      </span></span>
<span><span class="co">#&gt;                           Yes      0.62 [0.41;0.95]   0.2720</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="wald-test-survey-version" class="level3"><h3 class="anchored" data-anchor-id="wald-test-survey-version">Wald test (survey version)</h3>
<p>Perform a Wald test (survey version) to test the null hypothesis that all coefficients associated with the income variable are zero, and interpret.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Testing the H0 that all coefficients associated with the income variable are zero</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/regTermTest.html">regTermTest</a></span><span class="op">(</span><span class="va">fit1</span>, <span class="op">~</span><span class="va">income</span><span class="op">)</span></span>
<span><span class="co">#&gt; Wald test for income</span></span>
<span><span class="co">#&gt;  in svyglm(formula = formula1, design = w.design, family = binomial(link = "logit"))</span></span>
<span><span class="co">#&gt; F =  0.1050099  on  3  and  1  df: p= 0.94611</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The Wald test here gives a large p-value; We do not have evidence to reject the H0 of coefficient being 0. If the coefficient for income variable is 0, this means that the outcome in the model (cholesterol) is not affected by income. This suggests that removing income from the model does not statistically improve the model fit. So we can remove income variable from the model.</p>
</section><section id="backward-elimination" class="level3"><h3 class="anchored" data-anchor-id="backward-elimination">Backward elimination</h3>
<p>Run a backward elimination (using the AIC criteria) on the above logistic regression fit (keeping important variables gender, race, bmi, diabetes in the model), and report the odds ratios and the 95% confidence intervals from the resulting final logistic regression fit.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Running backward elimination based on AIC</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/">MASS</a></span><span class="op">)</span></span>
<span><span class="va">scope</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>upper <span class="op">=</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">born</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">education</span> <span class="op">+</span> </span>
<span>                <span class="va">married</span> <span class="op">+</span> <span class="va">income</span> <span class="op">+</span> <span class="va">bmi</span> <span class="op">+</span> <span class="va">diabetes</span>,</span>
<span>              lower <span class="op">=</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">bmi</span> <span class="op">+</span> <span class="va">diabetes</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/step.html">step</a></span><span class="op">(</span><span class="va">fit1</span>, scope <span class="op">=</span> <span class="va">scope</span>, trace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                k <span class="op">=</span> <span class="fl">2</span>, direction <span class="op">=</span> <span class="st">"backward"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Odds Ratios</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Publish/man/publish.html">publish</a></span><span class="op">(</span><span class="va">fit3</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Variable              Units OddsRatio       CI.95   p-value </span></span>
<span><span class="co">#&gt;    gender             Female       Ref                       </span></span>
<span><span class="co">#&gt;                         Male      0.71 [0.51;0.98]   0.08558 </span></span>
<span><span class="co">#&gt;      born         Born.in.US       Ref                       </span></span>
<span><span class="co">#&gt;                       Others      2.01 [1.37;2.96]   0.01184 </span></span>
<span><span class="co">#&gt;      race              Black       Ref                       </span></span>
<span><span class="co">#&gt;                     Hispanic      1.15 [0.81;1.65]   0.46785 </span></span>
<span><span class="co">#&gt;                        Other      1.11 [0.68;1.81]   0.69539 </span></span>
<span><span class="co">#&gt;                        White      1.46 [0.99;2.17]   0.10469 </span></span>
<span><span class="co">#&gt;   married            Married       Ref                       </span></span>
<span><span class="co">#&gt;                Never.married      0.54 [0.32;0.90]   0.05770 </span></span>
<span><span class="co">#&gt;           Previously.married      1.30 [0.93;1.80]   0.17125 </span></span>
<span><span class="co">#&gt;       bmi                         1.00 [0.97;1.03]   0.95146 </span></span>
<span><span class="co">#&gt;  diabetes                 No       Ref                       </span></span>
<span><span class="co">#&gt;                          Yes      0.61 [0.40;0.91]   0.05445</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Born and married are also found to be useful on top of gender + race + bmi + diabetes.</p>
</section><section id="interaction-terms" class="level3"><h3 class="anchored" data-anchor-id="interaction-terms">Interaction terms</h3>
<p>Checking interaction terms</p>
<p>– gender and whether married</p>
<p>– gender and whether born in the US</p>
<p>– gender and diabetes</p>
<p>– whether married and diabetes</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#gender and married</span></span>
<span><span class="va">fit4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">fit3</span>, <span class="va">.</span><span class="op">~</span><span class="va">.</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/interaction.html">interaction</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">married</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">fit3</span>, <span class="va">fit4</span><span class="op">)</span></span>
<span><span class="co">#&gt; Working (Rao-Scott+F) LRT for interaction(gender, married)</span></span>
<span><span class="co">#&gt;  in svyglm(formula = I(cholesterol.bin == "unhealthy") ~ gender + </span></span>
<span><span class="co">#&gt;     born + race + married + bmi + diabetes + interaction(gender, </span></span>
<span><span class="co">#&gt;     married), design = w.design, family = binomial(link = "logit"))</span></span>
<span><span class="co">#&gt; Working 2logLR =  0.7461308 p= 0.70903 </span></span>
<span><span class="co">#&gt; (scale factors:  1.1 0.93 );  denominator df= 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Do not include interaction term</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#gender and born in us</span></span>
<span><span class="va">fit5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">fit3</span>, <span class="va">.</span><span class="op">~</span><span class="va">.</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/interaction.html">interaction</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">born</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">fit3</span>, <span class="va">fit5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Working (Rao-Scott+F) LRT for interaction(gender, born)</span></span>
<span><span class="co">#&gt;  in svyglm(formula = I(cholesterol.bin == "unhealthy") ~ gender + </span></span>
<span><span class="co">#&gt;     born + race + married + bmi + diabetes + interaction(gender, </span></span>
<span><span class="co">#&gt;     born), design = w.design, family = binomial(link = "logit"))</span></span>
<span><span class="co">#&gt; Working 2logLR =  0.4635299 p= 0.52441 </span></span>
<span><span class="co">#&gt; df=1;  denominator df= 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Do not include interaction term</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#gender and diabetes</span></span>
<span><span class="va">fit6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">fit3</span>, <span class="va">.</span><span class="op">~</span><span class="va">.</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/interaction.html">interaction</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">diabetes</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">fit3</span>, <span class="va">fit6</span><span class="op">)</span></span>
<span><span class="co">#&gt; Working (Rao-Scott+F) LRT for interaction(gender, diabetes)</span></span>
<span><span class="co">#&gt;  in svyglm(formula = I(cholesterol.bin == "unhealthy") ~ gender + </span></span>
<span><span class="co">#&gt;     born + race + married + bmi + diabetes + interaction(gender, </span></span>
<span><span class="co">#&gt;     diabetes), design = w.design, family = binomial(link = "logit"))</span></span>
<span><span class="co">#&gt; Working 2logLR =  1.222596 p= 0.32211 </span></span>
<span><span class="co">#&gt; df=1;  denominator df= 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Do not include interaction term</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#married and diabetes</span></span>
<span><span class="va">fit7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">fit3</span>, <span class="va">.</span><span class="op">~</span><span class="va">.</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/interaction.html">interaction</a></span><span class="op">(</span><span class="va">married</span>, <span class="va">diabetes</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">fit3</span>, <span class="va">fit7</span><span class="op">)</span></span>
<span><span class="co">#&gt; Working (Rao-Scott+F) LRT for interaction(married, diabetes)</span></span>
<span><span class="co">#&gt;  in svyglm(formula = I(cholesterol.bin == "unhealthy") ~ gender + </span></span>
<span><span class="co">#&gt;     born + race + married + bmi + diabetes + interaction(married, </span></span>
<span><span class="co">#&gt;     diabetes), design = w.design, family = binomial(link = "logit"))</span></span>
<span><span class="co">#&gt; Working 2logLR =  0.3207507 p= 0.84547 </span></span>
<span><span class="co">#&gt; (scale factors:  1.4 0.62 );  denominator df= 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Do not include interaction term</p>
<p>None of the interaction terms are improving the model fit.</p>
</section><section id="auc" class="level3"><h3 class="anchored" data-anchor-id="auc">AUC</h3>
<p>Report AUC of the final model (only using weight argument) and interpret.</p>
<p>AUC of the final model (only using weight argument) and interpret</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="http://ipa-tys.github.io/ROCR/">ROCR</a></span><span class="op">)</span></span>
<span><span class="co"># WeightedROC may not be on cran for all R versions</span></span>
<span><span class="co"># devtools::install_github("tdhock/WeightedROC")</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tdhock/WeightedROC">WeightedROC</a></span><span class="op">)</span></span>
<span><span class="va">svyROCw</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fit</span> <span class="op">=</span> <span class="va">fit3</span>, <span class="va">outcome</span> <span class="op">=</span> <span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span> <span class="op">==</span> <span class="st">"unhealthy"</span>, <span class="va">weight</span> <span class="op">=</span> <span class="va">anadata</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span><span class="op">{</span> <span class="co"># require(ROCR)</span></span>
<span>    <span class="va">prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span>  <span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://ipa-tys.github.io/ROCR/reference/prediction.html">prediction</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="va">prob</span><span class="op">)</span>, <span class="va">outcome</span><span class="op">)</span></span>
<span>  <span class="va">perf</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://ipa-tys.github.io/ROCR/reference/performance.html">performance</a></span><span class="op">(</span><span class="va">pred</span>, <span class="st">"tpr"</span>, <span class="st">"fpr"</span><span class="op">)</span></span>
<span>  <span class="va">auc</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://ipa-tys.github.io/ROCR/reference/performance.html">performance</a></span><span class="op">(</span><span class="va">pred</span>, measure <span class="op">=</span> <span class="st">"auc"</span><span class="op">)</span></span>
<span>  <span class="va">auc</span> <span class="op">&lt;-</span> <span class="va">auc</span><span class="op">@</span><span class="va">y.values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">roc.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>fpr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">perf</span><span class="op">@</span><span class="va">x.values</span><span class="op">)</span>, tpr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">perf</span><span class="op">@</span><span class="va">y.values</span><span class="op">)</span>, </span>
<span>      model <span class="op">=</span> <span class="st">"Logistic"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">roc.data</span>,<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">fpr</span>, <span class="va">tpr</span>, type<span class="op">=</span><span class="st">"l"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, lwd<span class="op">=</span><span class="fl">1</span>,</span>
<span>     xlab<span class="op">=</span><span class="st">"1 - specificity"</span>, ylab<span class="op">=</span><span class="st">"Sensitivity"</span>,</span>
<span>     main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"AUC = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">auc</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html">mtext</a></span><span class="op">(</span><span class="st">"Unweighted ROC"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>, lty<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> </span>
<span>    <span class="va">outcome</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span></span>
<span>  <span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span>  <span class="va">tp.fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/WeightedROC/man/WeightedROC.html">WeightedROC</a></span><span class="op">(</span><span class="va">pred</span>, <span class="va">outcome</span>, <span class="va">weight</span><span class="op">)</span></span>
<span>  <span class="va">auc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/WeightedROC/man/WeightedAUC.html">WeightedAUC</a></span><span class="op">(</span><span class="va">tp.fp</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tp.fp</span>,<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">FPR</span>, <span class="va">TPR</span>, type<span class="op">=</span><span class="st">"l"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, lwd<span class="op">=</span><span class="fl">1</span>,</span>
<span>     xlab<span class="op">=</span><span class="st">"1 - specificity"</span>, ylab<span class="op">=</span><span class="st">"Sensitivity"</span>,</span>
<span>     main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"AUC = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">auc</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>, lty<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html">mtext</a></span><span class="op">(</span><span class="st">"Weighted ROC"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">svyROCw</span><span class="op">(</span>fit <span class="op">=</span> <span class="va">fit3</span>, outcome <span class="op">=</span> <span class="va">anadata</span><span class="op">$</span><span class="va">cholesterol.bin</span> <span class="op">==</span> <span class="st">"unhealthy"</span>, weight <span class="op">=</span> <span class="va">anadata</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="surveydata7_files/figure-html/auc-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The area under the curve in the final model is 0.611, using the survey weighted ROC. The AUC of 0.611 indicates that this model has poor discrimination.</p>
</section><section id="archer-lemeshow-goodness-of-fit" class="level3"><h3 class="anchored" data-anchor-id="archer-lemeshow-goodness-of-fit">Archer-Lemeshow Goodness of fit</h3>
<p>Report Archer-Lemeshow Goodness of fit test and interpret (utilizing all the survey features).</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Archer-Lemeshow Goodness of fit test utilizing all survey features</span></span>
<span><span class="va">AL.gof2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fit</span> <span class="op">=</span> <span class="va">fit3</span>, <span class="va">data</span> <span class="op">=</span> <span class="va">anadata</span>, </span>
<span>                   <span class="va">weight</span> <span class="op">=</span> <span class="st">"weight"</span>, <span class="va">psu</span> <span class="op">=</span> <span class="st">"psu"</span>, <span class="va">strata</span> <span class="op">=</span> <span class="st">"strata"</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/residuals.html">residuals</a></span><span class="op">(</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span> </span>
<span>  <span class="va">f</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/fitted.values.html">fitted</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> </span>
<span>  <span class="va">breaks.g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">f</span>, <span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">/</span><span class="fl">10</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span></span>
<span>  <span class="va">breaks.g</span> <span class="op">&lt;-</span> <span class="va">breaks.g</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="va">breaks.g</span><span class="op">)</span> <span class="op">*</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span></span>
<span>  <span class="va">g</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">f</span>, <span class="va">breaks.g</span><span class="op">)</span></span>
<span>  <span class="va">data2g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">data</span>,<span class="va">r</span>,<span class="va">g</span><span class="op">)</span></span>
<span>  <span class="va">newdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html">svydesign</a></span><span class="op">(</span>id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>,<span class="va">psu</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                         strata<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>,<span class="va">strata</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                         weights<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>,<span class="va">weight</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                         data<span class="op">=</span><span class="va">data2g</span>, nest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">decilemodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyglm.html">svyglm</a></span><span class="op">(</span><span class="va">r</span><span class="op">~</span><span class="va">g</span>, design<span class="op">=</span><span class="va">newdesign</span><span class="op">)</span> </span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/regTermTest.html">regTermTest</a></span><span class="op">(</span><span class="va">decilemodel</span>, <span class="op">~</span><span class="va">g</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span> </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">AL.gof2</span><span class="op">(</span><span class="va">fit3</span>, <span class="va">anadata</span>, weight <span class="op">=</span> <span class="st">"weight"</span>, psu <span class="op">=</span> <span class="st">"psu"</span>, strata <span class="op">=</span> <span class="st">"strata"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Wald test for g</span></span>
<span><span class="co">#&gt;  in svyglm(formula = r ~ g, design = newdesign)</span></span>
<span><span class="co">#&gt; F =  0.7569326  on  9  and  6  df: p= 0.66075</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Archer and Lemeshow GoF test was used to test the fit of this model. The p-value of 0.3043, which is greater than 0.05. This means that there is no evidence of lack of fit to this model.</p>
</section><section id="add-age-as-a-predictor-for-linear-regression" class="level3"><h3 class="anchored" data-anchor-id="add-age-as-a-predictor-for-linear-regression">Add <code>age</code> as a predictor for linear regression</h3>
<p>Fit another logistic regression (similar to Q1) with the above-mentioned predictors (as obtained in Q7) and age, utilizing the survey features. What difference do you see from the previous fit results?</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">aic.int.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="va">fit3</span><span class="op">$</span><span class="va">call</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">aic.int.model</span></span>
<span><span class="co">#&gt; I(cholesterol.bin == "unhealthy") ~ gender + born + race + married + </span></span>
<span><span class="co">#&gt;     bmi + diabetes</span></span>
<span></span>
<span><span class="va">formula3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="va">cholesterol.bin</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">born</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">bmi</span> <span class="op">+</span> <span class="va">diabetes</span> <span class="op">+</span> <span class="va">age</span><span class="op">)</span></span>
<span><span class="va">fit9</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyglm.html">svyglm</a></span><span class="op">(</span><span class="va">formula3</span>,</span>
<span>               design <span class="op">=</span> <span class="va">w.design</span>,</span>
<span>               family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">fit9</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; svyglm(formula = formula3, design = w.design, family = binomial(link = "logit"))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Survey design:</span></span>
<span><span class="co">#&gt; svydesign(id = ~psu, weights = ~weight, strata = ~strata, nest = TRUE, </span></span>
<span><span class="co">#&gt;     data = anadata)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                             Estimate Std. Error t value Pr(&gt;|t|)  </span></span>
<span><span class="co">#&gt; (Intercept)                1.0657919  0.6260889   1.702   0.1494  </span></span>
<span><span class="co">#&gt; genderMale                 0.3821902  0.1703394   2.244   0.0749 .</span></span>
<span><span class="co">#&gt; bornOthers                -0.6912102  0.2026407  -3.411   0.0190 *</span></span>
<span><span class="co">#&gt; raceHispanic              -0.2442019  0.1823190  -1.339   0.2381  </span></span>
<span><span class="co">#&gt; raceOther                 -0.1570271  0.2306208  -0.681   0.5262  </span></span>
<span><span class="co">#&gt; raceWhite                 -0.3638735  0.2029676  -1.793   0.1330  </span></span>
<span><span class="co">#&gt; marriedNever.married       0.4029107  0.2637962   1.527   0.1872  </span></span>
<span><span class="co">#&gt; marriedPreviously.married -0.2096009  0.1620478  -1.293   0.2524  </span></span>
<span><span class="co">#&gt; bmi                       -0.0002237  0.0134117  -0.017   0.9873  </span></span>
<span><span class="co">#&gt; diabetesYes                0.6534019  0.2456333   2.660   0.0449 *</span></span>
<span><span class="co">#&gt; age                       -0.0151364  0.0042038  -3.601   0.0155 *</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1.000456)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Publish/man/publish.html">publish</a></span><span class="op">(</span><span class="va">fit9</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Variable              Units OddsRatio       CI.95   p-value </span></span>
<span><span class="co">#&gt;    gender             Female       Ref                       </span></span>
<span><span class="co">#&gt;                         Male      1.47 [1.05;2.05]   0.07487 </span></span>
<span><span class="co">#&gt;      born         Born.in.US       Ref                       </span></span>
<span><span class="co">#&gt;                       Others      0.50 [0.34;0.75]   0.01902 </span></span>
<span><span class="co">#&gt;      race              Black       Ref                       </span></span>
<span><span class="co">#&gt;                     Hispanic      0.78 [0.55;1.12]   0.23809 </span></span>
<span><span class="co">#&gt;                        Other      0.85 [0.54;1.34]   0.52619 </span></span>
<span><span class="co">#&gt;                        White      0.69 [0.47;1.03]   0.13299 </span></span>
<span><span class="co">#&gt;   married            Married       Ref                       </span></span>
<span><span class="co">#&gt;                Never.married      1.50 [0.89;2.51]   0.18721 </span></span>
<span><span class="co">#&gt;           Previously.married      0.81 [0.59;1.11]   0.25238 </span></span>
<span><span class="co">#&gt;       bmi                         1.00 [0.97;1.03]   0.98734 </span></span>
<span><span class="co">#&gt;  diabetes                 No       Ref                       </span></span>
<span><span class="co">#&gt;                          Yes      1.92 [1.19;3.11]   0.04488 </span></span>
<span><span class="co">#&gt;       age                         0.98 [0.98;0.99]   0.01553</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="comparing-with-previous-model-fit" class="level3"><h3 class="anchored" data-anchor-id="comparing-with-previous-model-fit">Comparing with previous model fit</h3>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/Publish/man/publish.html">publish</a></span><span class="op">(</span><span class="va">fit3</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Variable              Units OddsRatio       CI.95   p-value </span></span>
<span><span class="co">#&gt;    gender             Female       Ref                       </span></span>
<span><span class="co">#&gt;                         Male      0.71 [0.51;0.98]   0.08558 </span></span>
<span><span class="co">#&gt;      born         Born.in.US       Ref                       </span></span>
<span><span class="co">#&gt;                       Others      2.01 [1.37;2.96]   0.01184 </span></span>
<span><span class="co">#&gt;      race              Black       Ref                       </span></span>
<span><span class="co">#&gt;                     Hispanic      1.15 [0.81;1.65]   0.46785 </span></span>
<span><span class="co">#&gt;                        Other      1.11 [0.68;1.81]   0.69539 </span></span>
<span><span class="co">#&gt;                        White      1.46 [0.99;2.17]   0.10469 </span></span>
<span><span class="co">#&gt;   married            Married       Ref                       </span></span>
<span><span class="co">#&gt;                Never.married      0.54 [0.32;0.90]   0.05770 </span></span>
<span><span class="co">#&gt;           Previously.married      1.30 [0.93;1.80]   0.17125 </span></span>
<span><span class="co">#&gt;       bmi                         1.00 [0.97;1.03]   0.95146 </span></span>
<span><span class="co">#&gt;  diabetes                 No       Ref                       </span></span>
<span><span class="co">#&gt;                          Yes      0.61 [0.40;0.91]   0.05445</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Publish/man/publish.html">publish</a></span><span class="op">(</span><span class="va">fit9</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Variable              Units OddsRatio       CI.95   p-value </span></span>
<span><span class="co">#&gt;    gender             Female       Ref                       </span></span>
<span><span class="co">#&gt;                         Male      1.47 [1.05;2.05]   0.07487 </span></span>
<span><span class="co">#&gt;      born         Born.in.US       Ref                       </span></span>
<span><span class="co">#&gt;                       Others      0.50 [0.34;0.75]   0.01902 </span></span>
<span><span class="co">#&gt;      race              Black       Ref                       </span></span>
<span><span class="co">#&gt;                     Hispanic      0.78 [0.55;1.12]   0.23809 </span></span>
<span><span class="co">#&gt;                        Other      0.85 [0.54;1.34]   0.52619 </span></span>
<span><span class="co">#&gt;                        White      0.69 [0.47;1.03]   0.13299 </span></span>
<span><span class="co">#&gt;   married            Married       Ref                       </span></span>
<span><span class="co">#&gt;                Never.married      1.50 [0.89;2.51]   0.18721 </span></span>
<span><span class="co">#&gt;           Previously.married      0.81 [0.59;1.11]   0.25238 </span></span>
<span><span class="co">#&gt;       bmi                         1.00 [0.97;1.03]   0.98734 </span></span>
<span><span class="co">#&gt;  diabetes                 No       Ref                       </span></span>
<span><span class="co">#&gt;                          Yes      1.92 [1.19;3.11]   0.04488 </span></span>
<span><span class="co">#&gt;       age                         0.98 [0.98;0.99]   0.01553</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/AIC.html">AIC</a></span><span class="op">(</span><span class="va">fit3</span><span class="op">)</span></span>
<span><span class="co">#&gt;       eff.p         AIC    deltabar </span></span>
<span><span class="co">#&gt;   11.121795 1706.792543    1.235755</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/AIC.html">AIC</a></span><span class="op">(</span><span class="va">fit9</span><span class="op">)</span></span>
<span><span class="co">#&gt;      eff.p        AIC   deltabar </span></span>
<span><span class="co">#&gt;   12.14310 1694.15974    1.21431</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="video-content-optional" class="level3"><h3 class="anchored" data-anchor-id="video-content-optional">Video content (optional)</h3>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>For those who prefer a video walkthrough, feel free to watch the video below, which offers a description of an earlier version of the above content.</p>
</div>
</div>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
<iframe src="https://www.youtube.com/embed/78EHsUZDePc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen="">
</iframe>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./surveydata6.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">NHANES: Blood Pressure</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./surveydata8.html" class="pagination-link">
        <span class="nav-page-text">NHANES: Subsetting</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>