<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>OER: Advanced Epidemiological Methods - Causal question</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./researchquestionF.html" rel="next">
<link href="./researchquestion1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<meta name="twitter:title" content="OER: Advanced Epidemiological Methods - Causal question">
<meta name="twitter:description" content="We are interested in exploring the relationship between diabetes (binary exposure variable defined as whether the doctor ever told the participant has diabetes) and cholesterol (binary outcome…">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar docked slimcontent">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Causal question</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">OER: Advanced Epidemiological Methods</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">The Project</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./wrangling.html" class="sidebar-item-text sidebar-link">Data wrangling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1a.html" class="sidebar-item-text sidebar-link">R basics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1b.html" class="sidebar-item-text sidebar-link">Data types</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1c.html" class="sidebar-item-text sidebar-link">Automating tasks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling2.html" class="sidebar-item-text sidebar-link">Importing dataset</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling3.html" class="sidebar-item-text sidebar-link">Data manipulation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling4.html" class="sidebar-item-text sidebar-link">Import external data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling5.html" class="sidebar-item-text sidebar-link">Summary tables</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingF.html" class="sidebar-item-text sidebar-link">Functions for wrangling</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingQ.html" class="sidebar-item-text sidebar-link">Quiz on wrangling</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./researchquestion.html" class="sidebar-item-text sidebar-link">Research question</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion1.html" class="sidebar-item-text sidebar-link">Predictive question</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2.html" class="sidebar-item-text sidebar-link active">Causal question</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionF.html" class="sidebar-item-text sidebar-link">Functions for research question</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionQ.html" class="sidebar-item-text sidebar-link">Quiz on research question</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./accessing.html" class="sidebar-item-text sidebar-link">Data accessing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing1.html" class="sidebar-item-text sidebar-link">Survey data sources</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing2.html" class="sidebar-item-text sidebar-link">Importing CCHS to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing3.html" class="sidebar-item-text sidebar-link">Importing NHANES to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing4.html" class="sidebar-item-text sidebar-link">Reproducing results</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingF.html" class="sidebar-item-text sidebar-link">Functions for data accessing</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingQ.html" class="sidebar-item-text sidebar-link">Quiz on accessing</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./confounding.html" class="sidebar-item-text sidebar-link">Confounding and bias</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingF.html" class="sidebar-item-text sidebar-link">R for confounding</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./predictivefactors.html" class="sidebar-item-text sidebar-link">Predictive factors</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsF.html" class="sidebar-item-text sidebar-link">R for predictive factors</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./surveydata.html" class="sidebar-item-text sidebar-link">Survey data analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataF.html" class="sidebar-item-text sidebar-link">R for survey data analysis</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./missingdata.html" class="sidebar-item-text sidebar-link">Missing data analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataF.html" class="sidebar-item-text sidebar-link">R for missing data</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./propensityscore.html" class="sidebar-item-text sidebar-link">Propensity score</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreF.html" class="sidebar-item-text sidebar-link">R for propensity score</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./reporting.html" class="sidebar-item-text sidebar-link">Reporting guidelines</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reportingF.html" class="sidebar-item-text sidebar-link">R for reporting</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearning.html" class="sidebar-item-text sidebar-link">Machine learning</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningF.html" class="sidebar-item-text sidebar-link">R for machine learning</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearningCausal.html" class="sidebar-item-text sidebar-link">ML in causal inference</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausalF.html" class="sidebar-item-text sidebar-link">R for ML in causal inference</a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#working-with-a-causal-question-using-nhanes" id="toc-working-with-a-causal-question-using-nhanes" class="nav-link active" data-scroll-target="#working-with-a-causal-question-using-nhanes">Working with a causal question using NHANES</a></li>
  <li><a href="#steps-for-creating-analytic-dataset" id="toc-steps-for-creating-analytic-dataset" class="nav-link" data-scroll-target="#steps-for-creating-analytic-dataset">Steps for creating analytic dataset</a></li>
  <li><a href="#saving-data" id="toc-saving-data" class="nav-link" data-scroll-target="#saving-data">Saving data</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">Causal question</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i></button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><section id="working-with-a-causal-question-using-nhanes" class="level3"><h3 class="anchored" data-anchor-id="working-with-a-causal-question-using-nhanes">Working with a causal question using NHANES</h3>
<p>We are interested in exploring the relationship between diabetes (binary exposure variable defined as whether the doctor ever told the participant has diabetes) and cholesterol (binary outcome variable defined as whether total cholesterol is more than 200 mg/dL). Below is the PICOT:</p>
<table class="table">
<thead><tr class="header">
<th>PICOT element</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>P</td>
<td>US adults</td>
</tr>
<tr class="even">
<td>I</td>
<td>Diabetes</td>
</tr>
<tr class="odd">
<td>C</td>
<td>No diabetes</td>
</tr>
<tr class="even">
<td>O</td>
<td>Total cholesterol &gt; 200 mg/dL</td>
</tr>
<tr class="odd">
<td>T</td>
<td>2017–2018</td>
</tr>
</tbody>
</table>
<p>First, we will prepare the analytic dataset from NHANES 2017–2018.</p>
<p>Second, we will work with subset of data to assess the association between diabetes and cholesterol, and to get proper SE and 95% CI for the estimate. We emphasize the correct usage of the survey’s design features (correct handling of survey design elements, such as stratification, clustering, and weighting) to obtain accurate population-level estimates.</p>
<div class="cell" data-hash="researchquestion2_cache/html/setup_97097d104c3b6c21b0f22bb5e4299344">
<details><summary>Show the code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load required packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/warnes/SASxport">SASxport</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rich-iannone/DiagrammeR">DiagrammeR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rich-iannone/DiagrammeRsvg">DiagrammeRsvg</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rsvg/">rsvg</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://svglite.r-lib.org">svglite</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.rforge.net/png/">png</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://cran.r-project.org/package=nhanesA">nhanesA</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/">survey</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va">Publish</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://jtools.jacob-long.com">jtools</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="steps-for-creating-analytic-dataset" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="steps-for-creating-analytic-dataset">Steps for creating analytic dataset</h3>
<p>We will combine multiple components (e.g., demographic, blood pressure) using the unique identifier to create our analytic dataset.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Within NHANES datasets in a given cycle, each sampled person has an unique identifier sequence number (variable SEQN).</p>
</div></div><div class="cell" data-hash="researchquestion2_cache/html/graph1ttt_f5f6014508084854e3e9241922d59f8d">

</div>
<section id="download-and-subsetting-to-retain-only-the-useful-variables" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="download-and-subsetting-to-retain-only-the-useful-variables">Download and Subsetting to retain only the useful variables</h4>
<p>Search literature for the relevant variables, and then see if some of them are available in the NHANES data.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><span class="citation" data-cites="peters2014combined">Peters, Fabian, and Levy (<a href="#ref-peters2014combined" role="doc-biblioref">2014</a>)</span></p>
</div></div><p>An an example, let us assume that variables listed in the following figures are known to be useful. Then we will try to indentify, in which NHANES component we have these variables.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Refer to the upcoming <a href="accessing3.html">chapter</a> to get a more detailed understanding of how we search for variables within NHANES.</p>
</div></div><div class="cell">
<div class="cell-output-display">
<p><img src="Images/accessing/overallnhanesplan.png" class="img-fluid" style="width:75.0%"></p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>NHANES Data Components:</p>
<ul>
<li>Demographic (variables like age, gender, income, etc.)</li>
<li>Blood Pressure (Diastolic and Systolic pressure)</li>
<li>Body Measures (BMI, Waist Circumference, etc.)</li>
<li>Smoking Status (Current smoker or not)</li>
<li>Cholesterol (Total cholesterol in different units)</li>
<li>Biochemistry Profile (Triglycerides, Uric acid, etc.)</li>
<li>Physical Activity (Vigorous work and recreational activities)</li>
<li>Diabetes (Whether the respondent has been told by a doctor that they have diabetes)</li>
</ul>
</div></div><p><strong>Demographic component</strong>:</p>
<div class="cell" data-hash="researchquestion2_cache/html/search4_dcf063170012503339e421852ccb46c0">
<details><summary>Show the code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanes.html">nhanes</a></span><span class="op">(</span><span class="st">'DEMO_J'</span><span class="op">)</span> <span class="co"># Both males and females 0 YEARS - 150 YEARS</span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="va">demo</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span>                 <span class="st">"RIAGENDR"</span>, <span class="co"># gender</span></span>
<span>                 <span class="st">"RIDAGEYR"</span>, <span class="co"># Age in years at screening</span></span>
<span>                 <span class="st">"DMDBORN4"</span>, <span class="co"># Country of birth</span></span>
<span>                 <span class="st">"RIDRETH3"</span>, <span class="co"># Race/Hispanic origin w/ NH Asian</span></span>
<span>                 <span class="st">"DMDEDUC3"</span>, <span class="co"># Education level - Children/Youth 6-19</span></span>
<span>                 <span class="st">"DMDEDUC2"</span>, <span class="co"># Education level - Adults 20+</span></span>
<span>                 <span class="st">"DMDMARTL"</span>, <span class="co"># Marital status: 20 YEARS - 150 YEARS</span></span>
<span>                 <span class="st">"INDHHIN2"</span>, <span class="co"># Total household income</span></span>
<span>                 <span class="st">"WTMEC2YR"</span>, <span class="st">"SDMVPSU"</span>, <span class="st">"SDMVSTRA"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">demo_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">demo</span><span class="op">)</span> <span class="co"># nhanesTableVars('DEMO', 'DEMO_J', namesonly=TRUE)</span></span>
<span><span class="va">demo1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanesTranslate.html">nhanesTranslate</a></span><span class="op">(</span><span class="st">'DEMO_J'</span>, <span class="va">demo_vars</span>, data<span class="op">=</span><span class="va">demo</span><span class="op">)</span></span>
<span><span class="co">#&gt; Translated columns: RIAGENDR DMDBORN4 RIDRETH3 DMDEDUC3 DMDEDUC2 DMDMARTL INDHHIN2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Blood pressure component</strong>:</p>
<div class="cell" data-hash="researchquestion2_cache/html/search5_ca99de1043e92104227c16a80aebdf3e">
<details><summary>Show the code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bpx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanes.html">nhanes</a></span><span class="op">(</span><span class="st">'BPX_J'</span><span class="op">)</span></span>
<span><span class="va">bpx</span> <span class="op">&lt;-</span> <span class="va">bpx</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span>             <span class="st">"BPXDI1"</span>, <span class="co">#Diastolic: Blood pres (1st rdg) mm Hg</span></span>
<span>             <span class="st">"BPXSY1"</span> <span class="co"># Systolic: Blood pres (1st rdg) mm Hg</span></span>
<span>             <span class="op">)</span><span class="op">]</span></span>
<span><span class="va">bpx_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bpx</span><span class="op">)</span> </span>
<span><span class="va">bpx1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanesTranslate.html">nhanesTranslate</a></span><span class="op">(</span><span class="st">'BPX_J'</span>, <span class="va">bpx_vars</span>, data<span class="op">=</span><span class="va">bpx</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in nhanesTranslate("BPX_J", bpx_vars, data = bpx): No columns were</span></span>
<span><span class="co">#&gt; translated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Body measure component</strong>:</p>
<div class="cell" data-hash="researchquestion2_cache/html/search5a_6fc1ed7dab7b9e5249be738efc425128">
<details><summary>Show the code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bmi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanes.html">nhanes</a></span><span class="op">(</span><span class="st">'BMX_J'</span><span class="op">)</span></span>
<span><span class="va">bmi</span> <span class="op">&lt;-</span> <span class="va">bmi</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span>               <span class="st">"BMXWT"</span>, <span class="co"># Weight (kg) </span></span>
<span>               <span class="st">"BMXHT"</span>, <span class="co"># Standing Height (cm)</span></span>
<span>               <span class="st">"BMXBMI"</span>, <span class="co"># Body Mass Index (kg/m**2): 2 YEARS - 150 YEARS</span></span>
<span>               <span class="co">#"BMDBMIC", # BMI Category - Children/Youth # 2 YEARS - 19 YEARS</span></span>
<span>               <span class="st">"BMXWAIST"</span> <span class="co"># Waist Circumference (cm): 2 YEARS - 150 YEARS</span></span>
<span>               <span class="op">)</span><span class="op">]</span></span>
<span><span class="va">bmi_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bmi</span><span class="op">)</span> </span>
<span><span class="va">bmi1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanesTranslate.html">nhanesTranslate</a></span><span class="op">(</span><span class="st">'BMX_J'</span>, <span class="va">bmi_vars</span>, data<span class="op">=</span><span class="va">bmi</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in nhanesTranslate("BMX_J", bmi_vars, data = bmi): No columns were</span></span>
<span><span class="co">#&gt; translated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Smoking component</strong>:</p>
<div class="cell" data-hash="researchquestion2_cache/html/search5b_bb00434458bb4b62acaccfac19ed2222">
<details><summary>Show the code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">smq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanes.html">nhanes</a></span><span class="op">(</span><span class="st">'SMQ_J'</span><span class="op">)</span></span>
<span><span class="va">smq</span> <span class="op">&lt;-</span> <span class="va">smq</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span>               <span class="st">"SMQ040"</span> <span class="co"># Do you now smoke cigarettes?: 18 YEARS - 150 YEARS</span></span>
<span>               <span class="op">)</span><span class="op">]</span></span>
<span><span class="va">smq_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">smq</span><span class="op">)</span> </span>
<span><span class="va">smq1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanesTranslate.html">nhanesTranslate</a></span><span class="op">(</span><span class="st">'SMQ_J'</span>, <span class="va">smq_vars</span>, data<span class="op">=</span><span class="va">smq</span><span class="op">)</span></span>
<span><span class="co">#&gt; Translated columns: SMQ040</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="researchquestion2_cache/html/search5c_d07713355d7702fb10430e6d7188d42a">
<details><summary>Show the code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># alq &lt;- nhanes('ALQ_J')</span></span>
<span><span class="co"># alq &lt;- alq[c("SEQN", # Respondent sequence number</span></span>
<span><span class="co">#                "ALQ130" # Avg # alcoholic drinks/day - past 12 mos</span></span>
<span><span class="co">#                # 18 YEARS - 150 YEARS</span></span>
<span><span class="co">#                )]</span></span>
<span><span class="co"># alq_vars &lt;- names(alq) </span></span>
<span><span class="co"># alq1 &lt;- nhanesTranslate('ALQ_J', alq_vars, data=alq)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Cholesterol component</strong>:</p>
<div class="cell" data-hash="researchquestion2_cache/html/search5d_9ad676e3264b4bc3ce3a831e3c311939">
<details><summary>Show the code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">chl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanes.html">nhanes</a></span><span class="op">(</span><span class="st">'TCHOL_J'</span><span class="op">)</span> <span class="co"># 6 YEARS - 150 YEARS</span></span>
<span><span class="va">chl</span> <span class="op">&lt;-</span> <span class="va">chl</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span>               <span class="st">"LBXTC"</span>, <span class="co"># Total Cholesterol (mg/dL)</span></span>
<span>               <span class="st">"LBDTCSI"</span> <span class="co"># Total Cholesterol (mmol/L)</span></span>
<span>               <span class="op">)</span><span class="op">]</span></span>
<span><span class="va">chl_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">chl</span><span class="op">)</span> </span>
<span><span class="va">chl1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanesTranslate.html">nhanesTranslate</a></span><span class="op">(</span><span class="st">'TCHOL_J'</span>, <span class="va">chl_vars</span>, data<span class="op">=</span><span class="va">chl</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in nhanesTranslate("TCHOL_J", chl_vars, data = chl): No columns were</span></span>
<span><span class="co">#&gt; translated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Biochemistry Profile component</strong>:</p>
<div class="cell" data-hash="researchquestion2_cache/html/search5e_3b02b9dbf9b501fa7e2ebe13479817b3">
<details><summary>Show the code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tri</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanes.html">nhanes</a></span><span class="op">(</span><span class="st">'BIOPRO_J'</span><span class="op">)</span> <span class="co"># 12 YEARS - 150 YEARS</span></span>
<span><span class="va">tri</span> <span class="op">&lt;-</span> <span class="va">tri</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span>               <span class="st">"LBXSTR"</span>, <span class="co"># Triglycerides, refrig serum (mg/dL)</span></span>
<span>               <span class="st">"LBXSUA"</span>, <span class="co"># Uric acid</span></span>
<span>               <span class="st">"LBXSTP"</span>, <span class="co"># total Protein (g/dL)</span></span>
<span>               <span class="st">"LBXSTB"</span>, <span class="co"># Total Bilirubin (mg/dL)</span></span>
<span>               <span class="st">"LBXSPH"</span>, <span class="co"># Phosphorus (mg/dL)</span></span>
<span>               <span class="st">"LBXSNASI"</span>, <span class="co"># Sodium (mmol/L)</span></span>
<span>               <span class="st">"LBXSKSI"</span>, <span class="co"># Potassium (mmol/L)</span></span>
<span>               <span class="st">"LBXSGB"</span>, <span class="co"># Globulin (g/dL)</span></span>
<span>               <span class="st">"LBXSCA"</span> <span class="co"># Total Calcium (mg/dL)</span></span>
<span>               <span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tri_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">tri</span><span class="op">)</span> </span>
<span><span class="va">tri1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanesTranslate.html">nhanesTranslate</a></span><span class="op">(</span><span class="st">'BIOPRO_J'</span>, <span class="va">tri_vars</span>, data<span class="op">=</span><span class="va">tri</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in nhanesTranslate("BIOPRO_J", tri_vars, data = tri): No columns were</span></span>
<span><span class="co">#&gt; translated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Physical activity component</strong>:</p>
<div class="cell" data-hash="researchquestion2_cache/html/search5f_9942244d92d284efcaac60b6d0a8d915">
<details><summary>Show the code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">paq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanes.html">nhanes</a></span><span class="op">(</span><span class="st">'PAQ_J'</span><span class="op">)</span></span>
<span><span class="va">paq</span> <span class="op">&lt;-</span> <span class="va">paq</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span>               <span class="st">"PAQ605"</span>, <span class="co"># Vigorous work activity </span></span>
<span>               <span class="st">"PAQ650"</span> <span class="co"># Vigorous recreational activities</span></span>
<span>               <span class="op">)</span><span class="op">]</span></span>
<span><span class="va">paq_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">paq</span><span class="op">)</span> </span>
<span><span class="va">paq1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanesTranslate.html">nhanesTranslate</a></span><span class="op">(</span><span class="st">'PAQ_J'</span>, <span class="va">paq_vars</span>, data<span class="op">=</span><span class="va">paq</span><span class="op">)</span></span>
<span><span class="co">#&gt; Translated columns: PAQ605 PAQ650</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Diabetes component</strong>:</p>
<div class="cell" data-hash="researchquestion2_cache/html/search5g_b0c08ad2b00115376f82b9e79f33eee7">
<details><summary>Show the code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">diq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanes.html">nhanes</a></span><span class="op">(</span><span class="st">'DIQ_J'</span><span class="op">)</span></span>
<span><span class="va">diq</span> <span class="op">&lt;-</span> <span class="va">diq</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span>               <span class="st">"DIQ010"</span> <span class="co"># Doctor told you have diabetes</span></span>
<span>               <span class="op">)</span><span class="op">]</span></span>
<span><span class="va">diq_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">diq</span><span class="op">)</span> </span>
<span><span class="va">diq1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/nhanesA/man/nhanesTranslate.html">nhanesTranslate</a></span><span class="op">(</span><span class="st">'DIQ_J'</span>, <span class="va">diq_vars</span>, data<span class="op">=</span><span class="va">diq</span><span class="op">)</span></span>
<span><span class="co">#&gt; Translated columns: DIQ010</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="merging-all-the-datasets" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="merging-all-the-datasets">Merging all the datasets</h4>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can use the <code>merge</code> or <code>Reduce</code> function to combine the datasets</p>
</div>
</div>
<div class="cell" data-hash="researchquestion2_cache/html/search8_5bc41c547056ba9ef4e2142a54dd2491">
<details><summary>Show the code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">analytic.data7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html">Reduce</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,by<span class="op">=</span><span class="st">"SEQN"</span>,all<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> ,</span>
<span>       <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">demo1</span>,<span class="va">bpx1</span>,<span class="va">bmi1</span>,<span class="va">smq1</span>,<span class="va">chl1</span>,<span class="va">tri1</span>,<span class="va">paq1</span>,<span class="va">diq1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data7</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>All these datasets are merged into one analytic dataset using the SEQN as the key. This can be done either all at once using the <code>Reduce</code> function or one by one (using <code>merge</code> once at a time).</p>
</div></div><div class="cell" data-hash="researchquestion2_cache/html/search8b4g_83ee2ecbd03058c9224e2eca8fbe1c64">
<details><summary>Show the code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Merging one by one</span></span>
<span><span class="co"># analytic.data0 &lt;- merge(demo1, bpx1, by = c("SEQN"), all=TRUE)</span></span>
<span><span class="co"># analytic.data1 &lt;- merge(analytic.data0, bmi1, by = c("SEQN"), all=TRUE)</span></span>
<span><span class="co"># analytic.data2 &lt;- merge(analytic.data1, smq1, by = c("SEQN"), all=TRUE)</span></span>
<span><span class="co"># analytic.data3 &lt;- merge(analytic.data2, alq1, by = c("SEQN"), all=TRUE)</span></span>
<span><span class="co"># analytic.data4 &lt;- merge(analytic.data3, chl1, by = c("SEQN"), all=TRUE)</span></span>
<span><span class="co"># analytic.data5 &lt;- merge(analytic.data4, tri1, by = c("SEQN"), all=TRUE)</span></span>
<span><span class="co"># analytic.data6 &lt;- merge(analytic.data5, paq1, by = c("SEQN"), all=TRUE)</span></span>
<span><span class="co"># analytic.data7 &lt;- merge(analytic.data6, diq1, by = c("SEQN"), all=TRUE)</span></span>
<span><span class="co"># dim(analytic.data7)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="check-target-population-and-avoid-zero-cell-cross-tabulation" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="check-target-population-and-avoid-zero-cell-cross-tabulation">Check Target population and avoid zero-cell cross-tabulation</h4>

<div class="no-row-height column-margin column-container"><div class="">
<p>The dataset is then filtered to only include adults (20 years and older) and avoid zero-cell cross-tabulation.</p>
</div></div><p>See that marital status variable was restricted to 20 YEARS - 150 YEARS.</p>
<div class="cell" data-hash="researchquestion2_cache/html/see1_25cecf05392e63ea902c6a3d522163fe">
<details><summary>Show the code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">analytic.data7</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    9254 obs. of  33 variables:</span></span>
<span><span class="co">#&gt;  $ SEQN    : num  93703 93704 93705 93706 93707 ...</span></span>
<span><span class="co">#&gt;  $ RIAGENDR: Factor w/ 2 levels "Male","Female": 2 1 2 1 1 2 2 2 1 1 ...</span></span>
<span><span class="co">#&gt;  $ RIDAGEYR: num  2 2 66 18 13 66 75 0 56 18 ...</span></span>
<span><span class="co">#&gt;  $ DMDBORN4: Factor w/ 4 levels "Born in 50 US states or Washingt",..: 1 1 1 1 1 2 1 1 2 2 ...</span></span>
<span><span class="co">#&gt;  $ RIDRETH3: Factor w/ 6 levels "Mexican American",..: 5 3 4 5 6 5 4 3 5 1 ...</span></span>
<span><span class="co">#&gt;  $ DMDEDUC3: Factor w/ 17 levels "Never attended / kindergarten on",..: NA NA NA 16 7 NA NA NA NA 13 ...</span></span>
<span><span class="co">#&gt;  $ DMDEDUC2: Factor w/ 7 levels "Less than 9th grade",..: NA NA 2 NA NA 1 4 NA 5 NA ...</span></span>
<span><span class="co">#&gt;  $ DMDMARTL: Factor w/ 7 levels "Married","Widowed",..: NA NA 3 NA NA 1 2 NA 1 NA ...</span></span>
<span><span class="co">#&gt;  $ INDHHIN2: Factor w/ 16 levels "$ 0 to $ 4,999",..: 14 14 3 NA 10 6 2 14 14 4 ...</span></span>
<span><span class="co">#&gt;  $ WTMEC2YR: num  8540 42567 8338 8723 7065 ...</span></span>
<span><span class="co">#&gt;  $ SDMVPSU : num  2 1 2 2 1 2 1 1 2 2 ...</span></span>
<span><span class="co">#&gt;  $ SDMVSTRA: num  145 143 145 134 138 138 136 134 134 147 ...</span></span>
<span><span class="co">#&gt;  $ BPXDI1  : num  NA NA NA 74 38 NA 66 NA 68 68 ...</span></span>
<span><span class="co">#&gt;  $ BPXSY1  : num  NA NA NA 112 128 NA 120 NA 108 112 ...</span></span>
<span><span class="co">#&gt;  $ BMXWT   : num  13.7 13.9 79.5 66.3 45.4 53.5 88.8 10.2 62.1 58.9 ...</span></span>
<span><span class="co">#&gt;  $ BMXHT   : num  88.6 94.2 158.3 175.7 158.4 ...</span></span>
<span><span class="co">#&gt;  $ BMXBMI  : num  17.5 15.7 31.7 21.5 18.1 23.7 38.9 NA 21.3 19.7 ...</span></span>
<span><span class="co">#&gt;  $ BMXWAIST: num  48.2 50 101.8 79.3 64.1 ...</span></span>
<span><span class="co">#&gt;  $ SMQ040  : Factor w/ 3 levels "Every day","Some days",..: NA NA 3 NA NA NA 1 NA NA 2 ...</span></span>
<span><span class="co">#&gt;  $ LBXTC   : num  NA NA 157 148 189 209 176 NA 238 182 ...</span></span>
<span><span class="co">#&gt;  $ LBDTCSI : num  NA NA 4.06 3.83 4.89 5.4 4.55 NA 6.15 4.71 ...</span></span>
<span><span class="co">#&gt;  $ LBXSTR  : num  NA NA 95 92 110 72 132 NA 59 124 ...</span></span>
<span><span class="co">#&gt;  $ LBXSUA  : num  NA NA 5.8 8 5.5 4.5 6.2 NA 4.2 5.8 ...</span></span>
<span><span class="co">#&gt;  $ LBXSTP  : num  NA NA 7.3 7.1 8 7.1 7 NA 7.1 8.1 ...</span></span>
<span><span class="co">#&gt;  $ LBXSTB  : num  NA NA 0.6 0.7 0.7 0.5 0.3 NA 0.3 0.8 ...</span></span>
<span><span class="co">#&gt;  $ LBXSPH  : num  NA NA 4 4 4.3 3.3 3.5 NA 3.4 5.1 ...</span></span>
<span><span class="co">#&gt;  $ LBXSNASI: num  NA NA 141 144 137 144 141 NA 140 141 ...</span></span>
<span><span class="co">#&gt;  $ LBXSKSI : num  NA NA 4 4.4 3.3 4.4 4.1 NA 4.9 4.3 ...</span></span>
<span><span class="co">#&gt;  $ LBXSGB  : num  NA NA 2.9 2.7 2.8 3.2 3.3 NA 3.1 3.3 ...</span></span>
<span><span class="co">#&gt;  $ LBXSCA  : num  NA NA 9.2 9.6 10.1 9.5 9.9 NA 9.4 9.6 ...</span></span>
<span><span class="co">#&gt;  $ PAQ605  : Factor w/ 3 levels "Yes","No","Don't know": NA NA 2 2 NA 2 2 NA 2 1 ...</span></span>
<span><span class="co">#&gt;  $ PAQ650  : Factor w/ 2 levels "Yes","No": NA NA 2 2 NA 2 2 NA 1 1 ...</span></span>
<span><span class="co">#&gt;  $ DIQ010  : Factor w/ 4 levels "Yes","No","Borderline",..: 2 2 2 2 2 3 2 NA 2 2 ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">analytic.data7</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["SEQN"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RIAGENDR"],"name":[2],"type":["fct"],"align":["left"]},{"label":["RIDAGEYR"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["DMDBORN4"],"name":[4],"type":["fct"],"align":["left"]},{"label":["RIDRETH3"],"name":[5],"type":["fct"],"align":["left"]},{"label":["DMDEDUC3"],"name":[6],"type":["fct"],"align":["left"]},{"label":["DMDEDUC2"],"name":[7],"type":["fct"],"align":["left"]},{"label":["DMDMARTL"],"name":[8],"type":["fct"],"align":["left"]},{"label":["INDHHIN2"],"name":[9],"type":["fct"],"align":["left"]},{"label":["WTMEC2YR"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["SDMVPSU"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["SDMVSTRA"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["BPXDI1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["BPXSY1"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["BMXWT"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["BMXHT"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["BMXBMI"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["BMXWAIST"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["SMQ040"],"name":[19],"type":["fct"],"align":["left"]},{"label":["LBXTC"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["LBDTCSI"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["LBXSTR"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["LBXSUA"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["LBXSTP"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["LBXSTB"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["LBXSPH"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["LBXSNASI"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["LBXSKSI"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["LBXSGB"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["LBXSCA"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["PAQ605"],"name":[31],"type":["fct"],"align":["left"]},{"label":["PAQ650"],"name":[32],"type":["fct"],"align":["left"]},{"label":["DIQ010"],"name":[33],"type":["fct"],"align":["left"]}],"data":[{"1":"93703","2":"Female","3":"2","4":"Born in 50 US states or Washingt","5":"Non-Hispanic Asian","6":"NA","7":"NA","8":"NA","9":"$100,000 and Over","10":"8539.731","11":"2","12":"145","13":"NA","14":"NA","15":"13.7","16":"88.6","17":"17.5","18":"48.2","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"No","_rn_":"1"},{"1":"93704","2":"Male","3":"2","4":"Born in 50 US states or Washingt","5":"Non-Hispanic White","6":"NA","7":"NA","8":"NA","9":"$100,000 and Over","10":"42566.615","11":"1","12":"143","13":"NA","14":"NA","15":"13.9","16":"94.2","17":"15.7","18":"50.0","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"No","_rn_":"2"},{"1":"93705","2":"Female","3":"66","4":"Born in 50 US states or Washingt","5":"Non-Hispanic Black","6":"NA","7":"9-11th grade (Includes 12th grad","8":"Divorced","9":"$10,000 to $14,999","10":"8338.420","11":"2","12":"145","13":"NA","14":"NA","15":"79.5","16":"158.3","17":"31.7","18":"101.8","19":"Not at all","20":"157","21":"4.06","22":"95","23":"5.8","24":"7.3","25":"0.6","26":"4.0","27":"141","28":"4.0","29":"2.9","30":"9.2","31":"No","32":"No","33":"No","_rn_":"3"},{"1":"93706","2":"Male","3":"18","4":"Born in 50 US states or Washingt","5":"Non-Hispanic Asian","6":"More than high school","7":"NA","8":"NA","9":"NA","10":"8723.440","11":"2","12":"134","13":"74","14":"112","15":"66.3","16":"175.7","17":"21.5","18":"79.3","19":"NA","20":"148","21":"3.83","22":"92","23":"8.0","24":"7.1","25":"0.7","26":"4.0","27":"144","28":"4.4","29":"2.7","30":"9.6","31":"No","32":"No","33":"No","_rn_":"4"},{"1":"93707","2":"Male","3":"13","4":"Born in 50 US states or Washingt","5":"Other Race - Including Multi-Rac","6":"6th grade","7":"NA","8":"NA","9":"$65,000 to $74,999","10":"7064.610","11":"1","12":"138","13":"38","14":"128","15":"45.4","16":"158.4","17":"18.1","18":"64.1","19":"NA","20":"189","21":"4.89","22":"110","23":"5.5","24":"8.0","25":"0.7","26":"4.3","27":"137","28":"3.3","29":"2.8","30":"10.1","31":"NA","32":"NA","33":"No","_rn_":"5"},{"1":"93708","2":"Female","3":"66","4":"Others","5":"Non-Hispanic Asian","6":"NA","7":"Less than 9th grade","8":"Married","9":"$25,000 to $34,999","10":"14372.489","11":"2","12":"138","13":"NA","14":"NA","15":"53.5","16":"150.2","17":"23.7","18":"88.2","19":"NA","20":"209","21":"5.40","22":"72","23":"4.5","24":"7.1","25":"0.5","26":"3.3","27":"144","28":"4.4","29":"3.2","30":"9.5","31":"No","32":"No","33":"Borderline","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">analytic.data7</span><span class="op">$</span><span class="va">RIDAGEYR</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    0.00   11.00   31.00   34.33   58.00   80.00</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="researchquestion2_cache/html/subset1_8761d5adad68b081fc7165e2a5ea3272">
<details><summary>Show the code</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data7</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   33</span></span>
<span><span class="va">analytic.data8</span> <span class="op">&lt;-</span> <span class="va">analytic.data7</span></span>
<span><span class="va">analytic.data8</span><span class="op">$</span><span class="va">RIDAGEYR</span><span class="op">[</span><span class="va">analytic.data8</span><span class="op">$</span><span class="va">RIDAGEYR</span> <span class="op">&lt;</span> <span class="fl">20</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="co">#analytic.data8 &lt;- subset(analytic.data7, RIDAGEYR &gt;= 20)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data8</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Get rid of variables where target was less than 20 years of age accordingly.</p>
<div class="cell" data-hash="researchquestion2_cache/html/subset2_62a15790a7f9ace22f96da5c026a7a70">
<details><summary>Show the code</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">analytic.data8</span><span class="op">$</span><span class="va">DMDEDUC3</span> <span class="op">&lt;-</span> <span class="cn">NULL</span> <span class="co"># not relevant for adults</span></span>
<span><span class="co">#analytic.data8$BMDBMIC &lt;- NULL # not relevant for adults</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="get-rid-of-invalid-responses" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="get-rid-of-invalid-responses">Get rid of invalid responses</h4>

<div class="no-row-height column-margin column-container"><div class="">
<p>Variables that have “Don’t Know” or “Refused” as responses are set to NA, effectively getting rid of invalid responses.</p>
</div></div><div class="cell" data-hash="researchquestion2_cache/html/subset3_4bfa6a208c34beb67c7467f926b5ecba">
<details><summary>Show the code</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">factor.names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"RIAGENDR"</span>,<span class="st">"DMDBORN4"</span>,<span class="st">"RIDRETH3"</span>,</span>
<span>                  <span class="st">"DMDEDUC2"</span>,<span class="st">"DMDMARTL"</span>,<span class="st">"INDHHIN2"</span>, </span>
<span>                  <span class="st">"SMQ040"</span>, <span class="st">"PAQ605"</span>, <span class="st">"PAQ650"</span>, <span class="st">"DIQ010"</span><span class="op">)</span></span>
<span><span class="va">numeric.names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SEQN"</span>,<span class="st">"RIDAGEYR"</span>,<span class="st">"WTMEC2YR"</span>,</span>
<span>                   <span class="st">"SDMVPSU"</span>, <span class="st">"SDMVSTRA"</span>,</span>
<span>                   <span class="st">"BPXDI1"</span>, <span class="st">"BPXSY1"</span>, <span class="st">"BMXWT"</span>, <span class="st">"BMXHT"</span>,</span>
<span>                   <span class="st">"BMXBMI"</span>, <span class="st">"BMXWAIST"</span>,</span>
<span>                   <span class="st">"ALQ130"</span>, <span class="st">"LBXTC"</span>, <span class="st">"LBDTCSI"</span>, </span>
<span>                   <span class="st">"LBXSTR"</span>, <span class="st">"LBXSUA"</span>, <span class="st">"LBXSTP"</span>, <span class="st">"LBXSTB"</span>, </span>
<span>                   <span class="st">"LBXSPH"</span>, <span class="st">"LBXSNASI"</span>, <span class="st">"LBXSKSI"</span>,</span>
<span>                   <span class="st">"LBXSGB"</span>,<span class="st">"LBXSCA"</span><span class="op">)</span></span>
<span><span class="va">analytic.data8</span><span class="op">[</span><span class="va">factor.names</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">analytic.data8</span><span class="op">[</span><span class="va">factor.names</span><span class="op">]</span>, </span>
<span>                                      MARGIN <span class="op">=</span> <span class="fl">2</span>, FUN <span class="op">=</span> <span class="va">as.factor</span><span class="op">)</span></span>
<span><span class="co"># analytic.data8[numeric.names] &lt;- apply(X = analytic.data8[numeric.names], </span></span>
<span><span class="co">#                                        MARGIN = 2, FUN = </span></span>
<span><span class="co">#                                          function (x) as.numeric(as.character(x)))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="researchquestion2_cache/html/subset3x_046d8224eaf625435ac6fe2d81ecaef0">
<details><summary>Show the code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">analytic.data9</span> <span class="op">&lt;-</span> <span class="va">analytic.data8</span></span>
<span><span class="va">analytic.data9</span><span class="op">$</span><span class="va">DMDBORN4</span><span class="op">[</span><span class="va">analytic.data9</span><span class="op">$</span><span class="va">DMDBORN4</span> <span class="op">==</span> <span class="st">"Don't Know"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="co">#analytic.data9 &lt;- subset(analytic.data8, DMDBORN4 != "Don't Know")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data9</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   32</span></span>
<span></span>
<span><span class="va">analytic.data10</span> <span class="op">&lt;-</span> <span class="va">analytic.data9</span></span>
<span><span class="va">analytic.data10</span><span class="op">$</span><span class="va">DMDEDUC2</span><span class="op">[</span><span class="va">analytic.data10</span><span class="op">$</span><span class="va">DMDEDUC2</span> <span class="op">==</span> <span class="st">"Don't Know"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="co">#analytic.data10 &lt;- subset(analytic.data9, DMDEDUC2 != "Don't Know")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   32</span></span>
<span></span>
<span><span class="va">analytic.data11</span> <span class="op">&lt;-</span> <span class="va">analytic.data10</span></span>
<span><span class="va">analytic.data11</span><span class="op">$</span><span class="va">DMDMARTL</span><span class="op">[</span><span class="va">analytic.data11</span><span class="op">$</span><span class="va">DMDMARTL</span> <span class="op">==</span> <span class="st">"Don't Know"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">analytic.data11</span><span class="op">$</span><span class="va">DMDMARTL</span><span class="op">[</span><span class="va">analytic.data11</span><span class="op">$</span><span class="va">DMDMARTL</span> <span class="op">==</span> <span class="st">"Refused"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="co"># analytic.data11 &lt;- subset(analytic.data10, DMDMARTL != "Don't Know" &amp; DMDMARTL != "Refused")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data11</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   32</span></span>
<span></span>
<span></span>
<span><span class="va">analytic.data12</span> <span class="op">&lt;-</span> <span class="va">analytic.data11</span></span>
<span><span class="va">analytic.data12</span><span class="op">$</span><span class="va">INDHHIN2</span><span class="op">[</span><span class="va">analytic.data12</span><span class="op">$</span><span class="va">INDHHIN2</span> <span class="op">==</span> <span class="st">"Don't Know"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">analytic.data12</span><span class="op">$</span><span class="va">INDHHIN2</span><span class="op">[</span><span class="va">analytic.data12</span><span class="op">$</span><span class="va">INDHHIN2</span> <span class="op">==</span> <span class="st">"Refused"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">analytic.data12</span><span class="op">$</span><span class="va">INDHHIN2</span><span class="op">[</span><span class="va">analytic.data12</span><span class="op">$</span><span class="va">INDHHIN2</span> <span class="op">==</span> <span class="st">"Under $20,000"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">analytic.data12</span><span class="op">$</span><span class="va">INDHHIN2</span><span class="op">[</span><span class="va">analytic.data12</span><span class="op">$</span><span class="va">INDHHIN2</span> <span class="op">==</span> <span class="st">"$20,000 and Over"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="co"># analytic.data12 &lt;- subset(analytic.data11, INDHHIN2 != "Don't know" &amp; INDHHIN2 !=  "Refused" &amp; INDHHIN2 != "Under $20,000" &amp; INDHHIN2 != "$20,000 and Over" )</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data12</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   32</span></span>
<span></span>
<span><span class="co">#analytic.data11 &lt;- subset(analytic.data10, ALQ130 != 777 &amp; ALQ130 != 999 )</span></span>
<span><span class="co">#dim(analytic.data11) # this are listed as NA anyway</span></span>
<span></span>
<span><span class="va">analytic.data13</span> <span class="op">&lt;-</span> <span class="va">analytic.data12</span></span>
<span><span class="va">analytic.data13</span><span class="op">$</span><span class="va">PAQ605</span><span class="op">[</span><span class="va">analytic.data13</span><span class="op">$</span><span class="va">PAQ605</span> <span class="op">==</span> <span class="st">"Don't know"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">analytic.data13</span><span class="op">$</span><span class="va">PAQ605</span><span class="op">[</span><span class="va">analytic.data13</span><span class="op">$</span><span class="va">PAQ605</span> <span class="op">==</span> <span class="st">"Refused"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="co"># analytic.data13 &lt;- subset(analytic.data12, PAQ605 != "Don't know" &amp; PAQ605 != "Refused")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data13</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   32</span></span>
<span></span>
<span><span class="va">analytic.data14</span> <span class="op">&lt;-</span> <span class="va">analytic.data13</span></span>
<span><span class="va">analytic.data14</span><span class="op">$</span><span class="va">PAQ650</span><span class="op">[</span><span class="va">analytic.data14</span><span class="op">$</span><span class="va">PAQ650</span> <span class="op">==</span> <span class="st">"Don't know"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">analytic.data14</span><span class="op">$</span><span class="va">PAQ650</span><span class="op">[</span><span class="va">analytic.data14</span><span class="op">$</span><span class="va">PAQ650</span> <span class="op">==</span> <span class="st">"Refused"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="co"># analytic.data14 &lt;- subset(analytic.data13, PAQ650 != "Don't Know" &amp; PAQ650 != "Refused")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data14</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   32</span></span>
<span></span>
<span><span class="va">analytic.data15</span> <span class="op">&lt;-</span> <span class="va">analytic.data14</span></span>
<span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DIQ010</span><span class="op">[</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DIQ010</span> <span class="op">==</span> <span class="st">"Don't know"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DIQ010</span><span class="op">[</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DIQ010</span> <span class="op">==</span> <span class="st">"Refused"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="co"># analytic.data15 &lt;- subset(analytic.data14, DIQ010 != "Don't Know" &amp; DIQ010 != "Refused")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9254   32</span></span>
<span></span>
<span></span>
<span><span class="co"># analytic.data15$ALQ130[analytic.data15$ALQ130 &gt; 100] &lt;- NA</span></span>
<span><span class="co"># summary(analytic.data15$ALQ130)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">SMQ040</span>,useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Every day Not at all  Some days       &lt;NA&gt; </span></span>
<span><span class="co">#&gt;        805       1338        216       6895</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">PAQ605</span>,useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   No  Yes &lt;NA&gt; </span></span>
<span><span class="co">#&gt; 4461 1389 3404</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">PAQ650</span>,useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   No  Yes &lt;NA&gt; </span></span>
<span><span class="co">#&gt; 4422 1434 3398</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">PAQ650</span>,useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   No  Yes &lt;NA&gt; </span></span>
<span><span class="co">#&gt; 4422 1434 3398</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="recode-values" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="recode-values">Recode values</h4>
<p>Let us recode the variables using the <code>recode</code> function:</p>
<div class="cell" data-hash="researchquestion2_cache/html/subset4_daf79fe981a46abf6f8a0e2d469545fb">
<details><summary>Show the code</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://r-forge.r-project.org/projects/car/">car</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: car</span></span>
<span><span class="co">#&gt; Loading required package: carData</span></span>
<span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">RIDRETH3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">RIDRETH3</span>, </span>
<span>                            <span class="st">"c('Mexican American','Other Hispanic')='Hispanic'; </span></span>
<span><span class="st">                            'Non-Hispanic White'='White'; </span></span>
<span><span class="st">                            'Non-Hispanic Black'='Black';</span></span>
<span><span class="st">                            c('Non-Hispanic Asian',</span></span>
<span><span class="st">                               'Other Race - Including Multi-Rac')='Other';</span></span>
<span><span class="st">                               else=NA"</span><span class="op">)</span></span>
<span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DMDEDUC2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DMDEDUC2</span>, </span>
<span>                            <span class="st">"c('Some college or AA degree',</span></span>
<span><span class="st">                             'College graduate or above')='College'; </span></span>
<span><span class="st">                            c('9-11th grade (Includes 12th grad', </span></span>
<span><span class="st">                              'High school graduate/GED or equi')</span></span>
<span><span class="st">                               ='High.School'; </span></span>
<span><span class="st">                            'Less than 9th grade'='School';</span></span>
<span><span class="st">                               else=NA"</span><span class="op">)</span></span>
<span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DMDMARTL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DMDMARTL</span>, </span>
<span>                            <span class="st">"c('Divorced','Separated','Widowed')</span></span>
<span><span class="st">                                ='Previously.married'; </span></span>
<span><span class="st">                            c('Living with partner', 'Married')</span></span>
<span><span class="st">                                ='Married'; </span></span>
<span><span class="st">                            'Never married'='Never.married';</span></span>
<span><span class="st">                               else=NA"</span><span class="op">)</span></span>
<span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">INDHHIN2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">INDHHIN2</span>, </span>
<span>                            <span class="st">"c('$ 0 to $ 4,999', '$ 5,000 to $ 9,999', </span></span>
<span><span class="st">                                 '$10,000 to $14,999', '$15,000 to $19,999', </span></span>
<span><span class="st">                                 '$20,000 to $24,999')='&lt;25k';</span></span>
<span><span class="st">                            c('$25,000 to $34,999', '$35,000 to $44,999', </span></span>
<span><span class="st">                                 '$45,000 to $54,999') = 'Between.25kto54k';</span></span>
<span><span class="st">                            c('$55,000 to $64,999', '$65,000 to $74,999',</span></span>
<span><span class="st">                                 '$75,000 to $99,999')='Between.55kto99k';</span></span>
<span><span class="st">                            '$100,000 and Over'= 'Over100k';</span></span>
<span><span class="st">                               else=NA"</span><span class="op">)</span></span>
<span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">SMQ040</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">SMQ040</span>, </span>
<span>                            <span class="st">"'Every day'='Every.day';</span></span>
<span><span class="st">                            'Not at all'='Not.at.all';</span></span>
<span><span class="st">                            'Some days'='Some.days';</span></span>
<span><span class="st">                               else=NA"</span><span class="op">)</span></span>
<span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DIQ010</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">$</span><span class="va">DIQ010</span>, </span>
<span>                            <span class="st">"'No'='No';</span></span>
<span><span class="st">                            c('Yes', 'Borderline')='Yes';</span></span>
<span><span class="st">                               else=NA"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Data types for various variables are set correctly; for instance, factor variables are converted to factor data types, and numeric variables to numeric data types.</p>
</div></div></section><section id="check-missingness" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="check-missingness">Check missingness</h4>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can use the <code>plot_missing</code> function to plot the profile of missing values, e.g., the percentage of missing per variable</p>
</div>
</div>
<div class="cell" data-hash="researchquestion2_cache/html/missing1_3fccf267608ae5bcc6a900ddacb1b18d">
<details><summary>Show the code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="http://boxuancui.github.io/DataExplorer/">DataExplorer</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: DataExplorer</span></span>
<span><span class="co">#&gt; Warning: package 'DataExplorer' was built under R version 4.3.1</span></span>
<span><span class="fu"><a href="http://boxuancui.github.io/DataExplorer/reference/plot_missing.html">plot_missing</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="researchquestion2_files/figure-html/missing1-1.png" class="img-fluid" width="672"></p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>A subsequent <a href="missingdata.html">chapter</a> will delve into the additional factors that impact how we handle missing data.</p>
</div></div></section><section id="check-data-summaries" class="level4"><h4 class="anchored" data-anchor-id="check-data-summaries">Check data summaries</h4>
<div class="cell" data-hash="researchquestion2_cache/html/analytic0_89f45fa3d05640ebd2dd3f213249420f">
<details><summary>Show the code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "SEQN"     "RIAGENDR" "RIDAGEYR" "DMDBORN4" "RIDRETH3" "DMDEDUC2"</span></span>
<span><span class="co">#&gt;  [7] "DMDMARTL" "INDHHIN2" "WTMEC2YR" "SDMVPSU"  "SDMVSTRA" "BPXDI1"  </span></span>
<span><span class="co">#&gt; [13] "BPXSY1"   "BMXWT"    "BMXHT"    "BMXBMI"   "BMXWAIST" "SMQ040"  </span></span>
<span><span class="co">#&gt; [19] "LBXTC"    "LBDTCSI"  "LBXSTR"   "LBXSUA"   "LBXSTP"   "LBXSTB"  </span></span>
<span><span class="co">#&gt; [25] "LBXSPH"   "LBXSNASI" "LBXSKSI"  "LBXSGB"   "LBXSCA"   "PAQ605"  </span></span>
<span><span class="co">#&gt; [31] "PAQ650"   "DIQ010"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">analytic.data15</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"gender"</span>, <span class="st">"age"</span>, <span class="st">"born"</span>, <span class="st">"race"</span>, <span class="st">"education"</span>, </span>
<span><span class="st">"married"</span>, <span class="st">"income"</span>, <span class="st">"weight"</span>, <span class="st">"psu"</span>, <span class="st">"strata"</span>, <span class="st">"diastolicBP"</span>, </span>
<span><span class="st">"systolicBP"</span>, <span class="st">"bodyweight"</span>, <span class="st">"bodyheight"</span>, <span class="st">"bmi"</span>, <span class="st">"waist"</span>, <span class="st">"smoke"</span>, </span>
<span><span class="st">"cholesterol"</span>, <span class="st">"cholesterolM2"</span>, <span class="st">"triglycerides"</span>, </span>
<span><span class="st">"uric.acid"</span>, <span class="st">"protein"</span>, <span class="st">"bilirubin"</span>, <span class="st">"phosphorus"</span>, <span class="st">"sodium"</span>, </span>
<span><span class="st">"potassium"</span>, <span class="st">"globulin"</span>, <span class="st">"calcium"</span>, <span class="st">"physical.work"</span>, </span>
<span><span class="st">"physical.recreational"</span>,<span class="st">"diabetes"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/kaz-yos/tableone">"tableone"</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: tableone</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tableone/man/CreateTableOne.html">CreateTableOne</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">analytic.data15</span>, includeNA <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                      </span></span>
<span><span class="co">#&gt;                                       Overall            </span></span>
<span><span class="co">#&gt;   n                                       9254           </span></span>
<span><span class="co">#&gt;   ID (mean (SD))                      98329.50 (2671.54) </span></span>
<span><span class="co">#&gt;   gender = Male (%)                       4557 (49.2)    </span></span>
<span><span class="co">#&gt;   age (mean (SD))                        51.50 (17.81)   </span></span>
<span><span class="co">#&gt;   born (%)                                               </span></span>
<span><span class="co">#&gt;      Born in 50 US states or Washingt     7303 (78.9)    </span></span>
<span><span class="co">#&gt;      Others                               1948 (21.1)    </span></span>
<span><span class="co">#&gt;      Refused                                 2 ( 0.0)    </span></span>
<span><span class="co">#&gt;      NA                                      1 ( 0.0)    </span></span>
<span><span class="co">#&gt;   race (%)                                               </span></span>
<span><span class="co">#&gt;      Black                                2115 (22.9)    </span></span>
<span><span class="co">#&gt;      Hispanic                             2187 (23.6)    </span></span>
<span><span class="co">#&gt;      Other                                1802 (19.5)    </span></span>
<span><span class="co">#&gt;      White                                3150 (34.0)    </span></span>
<span><span class="co">#&gt;   education (%)                                          </span></span>
<span><span class="co">#&gt;      College                              3114 (33.7)    </span></span>
<span><span class="co">#&gt;      High.School                          1963 (21.2)    </span></span>
<span><span class="co">#&gt;      School                                479 ( 5.2)    </span></span>
<span><span class="co">#&gt;      NA                                   3698 (40.0)    </span></span>
<span><span class="co">#&gt;   married (%)                                            </span></span>
<span><span class="co">#&gt;      Married                              3252 (35.1)    </span></span>
<span><span class="co">#&gt;      Never.married                        1006 (10.9)    </span></span>
<span><span class="co">#&gt;      Previously.married                   1305 (14.1)    </span></span>
<span><span class="co">#&gt;      NA                                   3691 (39.9)    </span></span>
<span><span class="co">#&gt;   income (%)                                             </span></span>
<span><span class="co">#&gt;      &lt;25k                                 1998 (21.6)    </span></span>
<span><span class="co">#&gt;      Between.25kto54k                     2460 (26.6)    </span></span>
<span><span class="co">#&gt;      Between.55kto99k                     1843 (19.9)    </span></span>
<span><span class="co">#&gt;      Over100k                             1624 (17.5)    </span></span>
<span><span class="co">#&gt;      NA                                   1329 (14.4)    </span></span>
<span><span class="co">#&gt;   weight (mean (SD))                  34670.71 (43344.00)</span></span>
<span><span class="co">#&gt;   psu (mean (SD))                         1.52 (0.50)    </span></span>
<span><span class="co">#&gt;   strata (mean (SD))                    140.97 (4.20)    </span></span>
<span><span class="co">#&gt;   diastolicBP (mean (SD))                67.84 (16.36)   </span></span>
<span><span class="co">#&gt;   systolicBP (mean (SD))                121.33 (19.98)   </span></span>
<span><span class="co">#&gt;   bodyweight (mean (SD))                 65.14 (32.89)   </span></span>
<span><span class="co">#&gt;   bodyheight (mean (SD))                156.59 (22.26)   </span></span>
<span><span class="co">#&gt;   bmi (mean (SD))                        26.58 (8.26)    </span></span>
<span><span class="co">#&gt;   waist (mean (SD))                      89.93 (22.81)   </span></span>
<span><span class="co">#&gt;   smoke (%)                                              </span></span>
<span><span class="co">#&gt;      Every.day                             805 ( 8.7)    </span></span>
<span><span class="co">#&gt;      Not.at.all                           1338 (14.5)    </span></span>
<span><span class="co">#&gt;      Some.days                             216 ( 2.3)    </span></span>
<span><span class="co">#&gt;      NA                                   6895 (74.5)    </span></span>
<span><span class="co">#&gt;   cholesterol (mean (SD))               179.89 (40.60)   </span></span>
<span><span class="co">#&gt;   cholesterolM2 (mean (SD))               4.65 (1.05)    </span></span>
<span><span class="co">#&gt;   triglycerides (mean (SD))             137.44 (109.13)  </span></span>
<span><span class="co">#&gt;   uric.acid (mean (SD))                   5.40 (1.48)    </span></span>
<span><span class="co">#&gt;   protein (mean (SD))                     7.17 (0.44)    </span></span>
<span><span class="co">#&gt;   bilirubin (mean (SD))                   0.46 (0.28)    </span></span>
<span><span class="co">#&gt;   phosphorus (mean (SD))                  3.66 (0.59)    </span></span>
<span><span class="co">#&gt;   sodium (mean (SD))                    140.32 (2.75)    </span></span>
<span><span class="co">#&gt;   potassium (mean (SD))                   4.09 (0.36)    </span></span>
<span><span class="co">#&gt;   globulin (mean (SD))                    3.09 (0.43)    </span></span>
<span><span class="co">#&gt;   calcium (mean (SD))                     9.32 (0.37)    </span></span>
<span><span class="co">#&gt;   physical.work (%)                                      </span></span>
<span><span class="co">#&gt;      No                                   4461 (48.2)    </span></span>
<span><span class="co">#&gt;      Yes                                  1389 (15.0)    </span></span>
<span><span class="co">#&gt;      NA                                   3404 (36.8)    </span></span>
<span><span class="co">#&gt;   physical.recreational (%)                              </span></span>
<span><span class="co">#&gt;      No                                   4422 (47.8)    </span></span>
<span><span class="co">#&gt;      Yes                                  1434 (15.5)    </span></span>
<span><span class="co">#&gt;      NA                                   3398 (36.7)    </span></span>
<span><span class="co">#&gt;   diabetes (%)                                           </span></span>
<span><span class="co">#&gt;      No                                   7816 (84.5)    </span></span>
<span><span class="co">#&gt;      Yes                                  1077 (11.6)    </span></span>
<span><span class="co">#&gt;      NA                                    361 ( 3.9)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="create-complete-case-data-for-now" class="level4"><h4 class="anchored" data-anchor-id="create-complete-case-data-for-now">Create complete case data (for now)</h4>
<div class="cell" data-hash="researchquestion2_cache/html/analytic1_1149465a2a596fcad2b1074ff564b590">
<details><summary>Show the code</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">analytic.with.miss</span> <span class="op">&lt;-</span> <span class="va">analytic.data15</span></span>
<span><span class="va">analytic.with.miss</span><span class="op">$</span><span class="va">cholesterol.bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">analytic.with.miss</span><span class="op">$</span><span class="va">cholesterol</span> <span class="op">&lt;</span><span class="fl">200</span>, <span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">analytic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="va">analytic.with.miss</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">analytic</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1562   33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="creating-table-1-from-the-complete-case-data" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="creating-table-1-from-the-complete-case-data">Creating Table 1 from the complete case data</h4>
<div class="cell" data-hash="researchquestion2_cache/html/analytic3_461d3f26063a3c7a67f2d5962d8235d4">
<details><summary>Show the code</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/kaz-yos/tableone">"tableone"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tableone/man/CreateTableOne.html">CreateTableOne</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">analytic</span>, includeNA <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                  </span></span>
<span><span class="co">#&gt;                                   Overall            </span></span>
<span><span class="co">#&gt;   n                                   1562           </span></span>
<span><span class="co">#&gt;   ID (mean (SD))                  98344.21 (2697.76) </span></span>
<span><span class="co">#&gt;   gender = Male (%)                    959 (61.4)    </span></span>
<span><span class="co">#&gt;   age (mean (SD))                    53.18 (17.18)   </span></span>
<span><span class="co">#&gt;   born = Others (%)                    299 (19.1)    </span></span>
<span><span class="co">#&gt;   race (%)                                           </span></span>
<span><span class="co">#&gt;      Black                             324 (20.7)    </span></span>
<span><span class="co">#&gt;      Hispanic                          284 (18.2)    </span></span>
<span><span class="co">#&gt;      Other                             228 (14.6)    </span></span>
<span><span class="co">#&gt;      White                             726 (46.5)    </span></span>
<span><span class="co">#&gt;   education (%)                                      </span></span>
<span><span class="co">#&gt;      College                           806 (51.6)    </span></span>
<span><span class="co">#&gt;      High.School                       658 (42.1)    </span></span>
<span><span class="co">#&gt;      School                             98 ( 6.3)    </span></span>
<span><span class="co">#&gt;   married (%)                                        </span></span>
<span><span class="co">#&gt;      Married                           921 (59.0)    </span></span>
<span><span class="co">#&gt;      Never.married                     228 (14.6)    </span></span>
<span><span class="co">#&gt;      Previously.married                413 (26.4)    </span></span>
<span><span class="co">#&gt;   income (%)                                         </span></span>
<span><span class="co">#&gt;      &lt;25k                              484 (31.0)    </span></span>
<span><span class="co">#&gt;      Between.25kto54k                  520 (33.3)    </span></span>
<span><span class="co">#&gt;      Between.55kto99k                  331 (21.2)    </span></span>
<span><span class="co">#&gt;      Over100k                          227 (14.5)    </span></span>
<span><span class="co">#&gt;   weight (mean (SD))              48538.53 (54106.24)</span></span>
<span><span class="co">#&gt;   psu (mean (SD))                     1.48 (0.50)    </span></span>
<span><span class="co">#&gt;   strata (mean (SD))                141.18 (4.07)    </span></span>
<span><span class="co">#&gt;   diastolicBP (mean (SD))            72.06 (14.17)   </span></span>
<span><span class="co">#&gt;   systolicBP (mean (SD))            127.06 (19.11)   </span></span>
<span><span class="co">#&gt;   bodyweight (mean (SD))             85.66 (22.41)   </span></span>
<span><span class="co">#&gt;   bodyheight (mean (SD))            168.96 (9.30)    </span></span>
<span><span class="co">#&gt;   bmi (mean (SD))                    29.96 (7.33)    </span></span>
<span><span class="co">#&gt;   waist (mean (SD))                 102.98 (17.15)   </span></span>
<span><span class="co">#&gt;   smoke (%)                                          </span></span>
<span><span class="co">#&gt;      Every.day                         530 (33.9)    </span></span>
<span><span class="co">#&gt;      Not.at.all                        903 (57.8)    </span></span>
<span><span class="co">#&gt;      Some.days                         129 ( 8.3)    </span></span>
<span><span class="co">#&gt;   cholesterol (mean (SD))           188.77 (43.51)   </span></span>
<span><span class="co">#&gt;   cholesterolM2 (mean (SD))           4.88 (1.13)    </span></span>
<span><span class="co">#&gt;   triglycerides (mean (SD))         154.71 (123.00)  </span></span>
<span><span class="co">#&gt;   uric.acid (mean (SD))               5.62 (1.53)    </span></span>
<span><span class="co">#&gt;   protein (mean (SD))                 7.09 (0.43)    </span></span>
<span><span class="co">#&gt;   bilirubin (mean (SD))               0.46 (0.27)    </span></span>
<span><span class="co">#&gt;   phosphorus (mean (SD))              3.53 (0.54)    </span></span>
<span><span class="co">#&gt;   sodium (mean (SD))                140.14 (2.83)    </span></span>
<span><span class="co">#&gt;   potassium (mean (SD))               4.10 (0.38)    </span></span>
<span><span class="co">#&gt;   globulin (mean (SD))                3.03 (0.44)    </span></span>
<span><span class="co">#&gt;   calcium (mean (SD))                 9.29 (0.37)    </span></span>
<span><span class="co">#&gt;   physical.work = Yes (%)              476 (30.5)    </span></span>
<span><span class="co">#&gt;   physical.recreational = Yes (%)      290 (18.6)    </span></span>
<span><span class="co">#&gt;   diabetes = Yes (%)                   330 (21.1)    </span></span>
<span><span class="co">#&gt;   cholesterol.bin (mean (SD))         0.63 (0.48)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Additional factors come into play when dealing with complex survey datasets; these will be explored in a subsequent <a href="surveydata.html">chapter</a>.</p>
</div></div></section></section><section id="saving-data" class="level3"><h3 class="anchored" data-anchor-id="saving-data">Saving data</h3>
<div class="cell" data-hash="researchquestion2_cache/html/search8save_01997cec93526abe28e5d45172cbad08">
<details><summary>Show the code</summary><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># getwd()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">analytic.with.miss</span>, <span class="va">analytic</span>, file<span class="op">=</span><span class="st">"Data/researchquestion/NHANES17.RData"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="references" class="level3"><h3 class="anchored" data-anchor-id="references">References</h3>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-peters2014combined" class="csl-entry" role="doc-biblioentry">
Peters, Junenette L, M Patricia Fabian, and Jonathan I Levy. 2014. <span>“Combined Impact of Lead, Cadmium, Polychlorinated Biphenyls and Non-Chemical Risk Factors on Blood Pressure in NHANES.”</span> <em>Environmental Research</em> 132: 93–99.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./researchquestion1.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Predictive question</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./researchquestionF.html" class="pagination-link">
        <span class="nav-page-text">Functions for research question</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>