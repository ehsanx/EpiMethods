<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Advanced Epidemiological Methods - CCHS: Revisiting PICOT</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./surveydata2.html" rel="next">
<link href="./surveydata.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CVBPG0RQMY"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CVBPG0RQMY', { 'anonymize_ip': true});
</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
<meta name="twitter:title" content="Advanced Epidemiological Methods - CCHS: Revisiting PICOT">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar docked slimcontent">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./surveydata.html">Survey data analysis</a></li><li class="breadcrumb-item"><a href="./surveydata1.html">CCHS: Revisiting PICOT</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Advanced Epidemiological Methods</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Project</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data wrangling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1c.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Automating tasks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Importing dataset</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data manipulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Import external data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summary tables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Functions (W)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (W)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (W)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./accessing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data accessing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Survey data sources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Importing CCHS to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Importing NHANES to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reproducing results</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Importing NHIS to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Functions (A)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (A)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (A)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./researchquestion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Research questions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive question-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive question-2a</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive question-2b</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Causal question-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Causal question-2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (Q)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (Q)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./confounding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Causal roles</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Confounding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mediator</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collider</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Z-bias</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collapsibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Change-in-estimate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (R)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (R)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./predictivefactors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prediction ideas</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collinear predictors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Binary outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overfitting and performance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data spliting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cross-validation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bootstrap</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (P)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (P)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./surveydata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Survey data analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">CCHS: Revisiting PICOT</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Assessing data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Bivariate analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CCHS: Performance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NHANES: Blood Pressure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NHANES: Cholesterol</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NHANES: Subsetting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (D)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (D)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (D)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./missingdata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing data analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Imputation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Imputation in NHANES</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing in outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Performance with NA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subpopulations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MCAR tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Effect modification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (M)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (M)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (M)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./propensityscore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Propensity score</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exact Matching (CCHS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM in OA-CVD (CCHS)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM in OA-CVD (US)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM in BMI-diabetes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PSM with MI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (S)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (S)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise (S)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Machine learning (ML)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data spliting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cross-validation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Binary outcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Supervised learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unsupervised learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning6a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NHIS Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning6b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Replicate Results</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (L)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearningCausal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ML Causal Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SuperLearner</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Binary Outcomes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous Outcomes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausal5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comparing results</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausalF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (C)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./nonbinary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Complex outcomes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Polytomous and ordinal</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Survival analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinary3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Poisson</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinaryF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (N)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonbinaryQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (N)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./longitudinal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Longitudinal data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinal1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed effects models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinal2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GEE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinalF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (T)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinalQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (T)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./mediation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mediation analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Baron and Kenny</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Justification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediation3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mediation Example</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediationF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R functions (I)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mediationQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quiz (I)</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./reporting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reporting1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collaborative Writing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reporting2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Formatting Tools</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#remembering-picot" id="toc-remembering-picot" class="nav-link active" data-scroll-target="#remembering-picot">Remembering PICOT</a></li>
  <li><a href="#creating-dataset" id="toc-creating-dataset" class="nav-link" data-scroll-target="#creating-dataset">Creating dataset</a></li>
  <li><a href="#load-data" id="toc-load-data" class="nav-link" data-scroll-target="#load-data">Load data</a></li>
  <li><a href="#subset-the-data-subset-variables" id="toc-subset-the-data-subset-variables" class="nav-link" data-scroll-target="#subset-the-data-subset-variables">Subset the data (subset variables)</a></li>
  <li><a href="#making-variable-names-the-same" id="toc-making-variable-names-the-same" class="nav-link" data-scroll-target="#making-variable-names-the-same">Making variable names the same</a></li>
  <li><a href="#appending" id="toc-appending" class="nav-link" data-scroll-target="#appending">Appending</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables">Variables</a></li>
  <li><a href="#saving-data" id="toc-saving-data" class="nav-link" data-scroll-target="#saving-data">Saving data</a></li>
  <li><a href="#video-content-optional" id="toc-video-content-optional" class="nav-link" data-scroll-target="#video-content-optional">Video content (optional)</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">CCHS: Revisiting PICOT</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>Welcome to this tutorial where we will examine the same research question presented in the <a href="researchquestion3.html">Causal question-1</a> tutorial. Our approach will be enriched this time by working with a more comprehensive set of covariates. We will follow the guidelines from the research article by <span class="citation" data-cites="rahman2013relationship">Rahman et al. (<a href="#ref-rahman2013relationship" role="doc-biblioref">2013</a>)</span> <a href="https://bmjopen.bmj.com/content/3/5/e002624">DOI:10.1136/bmjopen-2013-002624</a>. We will also will work properly with survey feature variables (e.g., sampling weights).</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><span class="citation" data-cites="rahman2013relationship">(<a href="#ref-rahman2013relationship" role="doc-biblioref">Rahman et al. 2013</a>)</span></p>
</div></div><section id="remembering-picot" class="level3"><h3 class="anchored" data-anchor-id="remembering-picot">Remembering PICOT</h3>
<p>Before diving into the data, let’s clarify and remember the research parameters using the PICOT framework:</p>
<ol type="1">
<li><p><strong>Target population</strong>: Canadian adults (CCHS data)</p></li>
<li><p><strong>Outcome</strong> (<span class="math inline">\(Y\)</span>): CVD (Heart disease/Cardiovascular Disease)</p></li>
<li><p><strong>Exposure group</strong> (<span class="math inline">\(A\)</span>): Osteoarthritis (OA)</p></li>
<li><p><strong>Control group</strong>: People without OA</p></li>
<li><p><strong>Timeline</strong>: Data collected from 2001 to 2005</p></li>
</ol>
<p>In addition, we’ll identify potential confounders based on literature to better understand the relationship between exposure and outcome.</p>
</section><section id="creating-dataset" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="creating-dataset">Creating dataset</h3>
<p>To start, we’ll load the required R packages:</p>
<div class="cell" data-hash="surveydata1_cache/html/setup_33d0e13e1460a11b0a6d28d4a5428590">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load required packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(survey)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(car)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="load-data" class="level3"><h3 class="anchored" data-anchor-id="load-data">Load data</h3>
<p>We’ll be using CCHS data from various cycles. Use the following code to load this data into your R environment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># CCHS 1.1</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">load</span>(<span class="st">"Data/surveydata/cchsc1.RData"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># CCHS 2.1</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">load</span>(<span class="st">"Data/surveydata/cchsc2.RData"</span>)</span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co"># CCHS 3.1</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="fu">load</span>(<span class="st">"Data/surveydata/cchsc3.RData"</span>)</span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co"># objects loaded</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="fu">ls</span>()</span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt; [1] "c1" "c2" "c3"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To check the dimensions of each data set:</p>
<div class="cell" data-hash="surveydata1_cache/html/dim_58e9db97139cd9d407f5eb893dc03df5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Dimensions</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">dim</span>(c1)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt; [1] 130880    614</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">dim</span>(c2)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt; [1] 134072   1068</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="fu">dim</span>(c3)</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; [1] 132221   1284</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="subset-the-data-subset-variables" class="level3"><h3 class="anchored" data-anchor-id="subset-the-data-subset-variables">Subset the data (subset variables)</h3>
<section id="understand-variable-coding" class="level4"><h4 class="anchored" data-anchor-id="understand-variable-coding">Understand variable coding</h4>
<p>Before subsetting the data, we need to comprehend the variables used in CCHS 3.1, which are described in detail in the official reference:</p>
<ul>
<li><p>page 60 in CCHS 3.1 guide <span class="citation" data-cites="statistics2005canadian">(<a href="#ref-statistics2005canadian" role="doc-biblioref">Canada 2005</a>)</span></p></li>
<li><p>link for variable list: <span class="citation" data-cites="varlist">(<a href="#ref-varlist" role="doc-biblioref">Karim 2023</a>)</span></p></li>
</ul>
<p>A table mapping variable concepts across different CCHS cycles can be found below.</p>
<table class="table">
<colgroup>
<col style="width: 29%">
<col style="width: 23%">
<col style="width: 23%">
<col style="width: 23%">
</colgroup>
<thead><tr class="header">
<th><strong>Variable Concept</strong></th>
<th><strong>CCHS 1.1</strong></th>
<th><strong>CCHS 2.1</strong></th>
<th><strong>CCHS 3.1</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Has heart disease</strong></td>
<td>CCCA_121</td>
<td>CCCC_121</td>
<td>CCCE_121</td>
</tr>
<tr class="even">
<td><strong>Has arthritis or rheumatism</strong></td>
<td>CCCA_051</td>
<td>CCCC_051</td>
<td>CCCE_051</td>
</tr>
<tr class="odd">
<td><strong>Kind of arthritis</strong></td>
<td>CCCA_05A</td>
<td>CCCC_05A</td>
<td>CCCE_05A</td>
</tr>
<tr class="even">
<td><strong>Age</strong></td>
<td>DHHAGAGE</td>
<td>DHHCGAGE</td>
<td>DHHEGAGE</td>
</tr>
<tr class="odd">
<td><strong>Sex</strong></td>
<td>DHHA_SEX</td>
<td>DHHC_SEX</td>
<td>DHHE_SEX</td>
</tr>
<tr class="even">
<td><strong>Marital Status</strong></td>
<td>DHHAGMS</td>
<td>DHHCGMS</td>
<td>DHHEGMS</td>
</tr>
<tr class="odd">
<td><strong>Cultural / racial origin</strong></td>
<td>SDCAGRAC</td>
<td>SDCCGRAC</td>
<td>SDCEGCGT</td>
</tr>
<tr class="even">
<td><strong>Immigrant status</strong></td>
<td>SDCAFIMM</td>
<td>SDCCFIMM</td>
<td>SDCEFIMM</td>
</tr>
<tr class="odd">
<td><strong>Length of time in Canada since immigration</strong></td>
<td>SDCAGRES</td>
<td>SDCCGRES</td>
<td>SDCEGRES</td>
</tr>
<tr class="even">
<td><strong>Highest level of education - respondent</strong></td>
<td>EDUADR04</td>
<td>EDUCDR04</td>
<td>EDUEDR04</td>
</tr>
<tr class="odd">
<td><strong>Total household income from all sources</strong></td>
<td>INCAGHH</td>
<td>INCCGHH</td>
<td>INCEGHH</td>
</tr>
<tr class="even">
<td><strong>Body mass index</strong></td>
<td>HWTAGBMI</td>
<td>HWTCGBMI</td>
<td>HWTEGBMI</td>
</tr>
<tr class="odd">
<td><strong>Physical activity index</strong></td>
<td>PACADPAI</td>
<td>PACCDPAI</td>
<td>PACEDPAI</td>
</tr>
<tr class="even">
<td><strong>Has a regular medical doctor</strong></td>
<td>TWDA_5</td>
<td>HCUC_1AA</td>
<td>HCUE_1AA</td>
</tr>
<tr class="odd">
<td><strong>Self-perceived stress</strong></td>
<td>GENA_07</td>
<td>GENC_07</td>
<td>GENE_07</td>
</tr>
<tr class="even">
<td><strong>Type of smoker</strong></td>
<td>SMKADSTY</td>
<td>SMKCDSTY</td>
<td>SMKEDSTY</td>
</tr>
<tr class="odd">
<td><strong>Type of drinker</strong></td>
<td>ALCADTYP</td>
<td>ALCCDTYP</td>
<td>ALCEDTYP</td>
</tr>
<tr class="even">
<td><strong>Daily consumption - total fruits and vegetables</strong></td>
<td>FVCADTOT</td>
<td>FVCCDTOT</td>
<td>FVCEDTOT</td>
</tr>
<tr class="odd">
<td><strong>Has high blood pressure</strong></td>
<td>CCCA_071</td>
<td>CCCC_071</td>
<td>CCCE_071</td>
</tr>
<tr class="even">
<td><strong>Has emphysema or chronic obstructive pulmonary disease (COPD)</strong></td>
<td>CCCA_91B</td>
<td>CCCC_91B</td>
<td>CCCE_91F</td>
</tr>
<tr class="odd">
<td><strong>Has diabetes</strong></td>
<td>CCCA_101</td>
<td>CCCC_101</td>
<td>CCCE_101</td>
</tr>
<tr class="even">
<td><strong>Province</strong></td>
<td>GEOAGPRV</td>
<td>GEOCGPRV</td>
<td>GEOEGPRV</td>
</tr>
<tr class="odd">
<td><strong>Sampling weight - master weight</strong></td>
<td>WTSAM</td>
<td>WTSC_M</td>
<td>WTSE_M</td>
</tr>
</tbody>
</table>
<p>While most variables in CCHS 3.1 are universally applicable to ‘All respondents,’ there are some exceptions. For example:</p>
<ul>
<li><p>CCCE_05A universe: (Kind of arthritis / rheumatism)</p></li>
<li><p>Respondents who answered CCCE_051 = (1, 7 or 8) or CCCE_011 = 8</p></li>
<li><p>CCCE_051: All respondents</p></li>
<li><p>CCCE_011: All respondents</p></li>
<li>
<p>SDCEGRES universe: (Length of time in Canada since immigration)</p>
<ul>
<li>Respondents who answered SDCE_2 = (2, 7 or 8) or SDCE_1 = (97 or 98)</li>
<li>SDCE_2 doesn’t exist!</li>
<li>(master file variable; not available in PUMF)</li>
<li>Public Use Microdata File (PUMF)</li>
<li>SDCE_1 doesn’t exist!</li>
<li>(master file variable; not available in PUMF)</li>
</ul>
</li>
<li>
<p>HWTEGBMI universe: (Body Mass Index (BMI) / self-report)</p>
<ul>
<li>All respondents excluding pregnant women (MAME_037 = 1)
<ul>
<li>MAME_037 doesn’t exist!</li>
<li>(master file variable; not available in PUMF)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>GENE_07 universe: (Self-perceived stress)</p>
<ul>
<li>Respondents aged 15 and over</li>
</ul>
</li>
<li>
<p>CCCE_91F universe: (Has chronic obstructive pulmonary disease)</p>
<ul>
<li>Respondents aged 30 and over</li>
</ul>
</li>
<li>
<p>FVCEDTOT universe: (Daily consumption - total fruits and vegetables)</p>
<ul>
<li>Respondents with FVCEFOPT = 1
<ul>
<li>FVCEFOPT: Optional module: Fruit and vegetable consumption - (F)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Ref:</p>
<ul>
<li><p>page 66 in CCHS 3.1 guide <span class="citation" data-cites="statistics2005canadian">(<a href="#ref-statistics2005canadian" role="doc-biblioref">Canada 2005</a>)</span></p></li>
<li>
<p>Potential problematic variables:</p>
<ul>
<li>Self-perceived stress</li>
<li>Has chronic obstructive pulmonary disease / copd</li>
<li>Daily consumption - total fruits and vegetables</li>
</ul>
</li>
</ul>
<p>We will make decisions about these variables later: for now, let’s keep them.</p>
</section><section id="restrict-the-dataset-with-variables-of-interest-only" class="level4"><h4 class="anchored" data-anchor-id="restrict-the-dataset-with-variables-of-interest-only">Restrict the dataset with variables of interest only</h4>
<section id="cycle-1.1" class="level5"><h5 class="anchored" data-anchor-id="cycle-1.1">Cycle 1.1</h5>
<ul>
<li>We define a vector of variable names <code>var.names1</code> that are of interest for the first cycle of the Canadian Community Health Survey (CCHS 1.1). These variables cover a range of topics such as heart disease, age, sex, etc.</li>
<li>Then we creates a new data frame <code>cc11</code> by subsetting the original data frame <code>c1</code> to include only the columns specified in <code>var.names1</code>.</li>
</ul>
<div class="cell" data-hash="surveydata1_cache/html/data1_061837c0212bd853027dab9413631b5e">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>var.names1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CCCA_121"</span>, </span>
<span id="cb4-2"><a href="#cb4-2"></a>                <span class="st">"CCCA_051"</span>, </span>
<span id="cb4-3"><a href="#cb4-3"></a>                <span class="st">"CCCA_05A"</span>, </span>
<span id="cb4-4"><a href="#cb4-4"></a>                <span class="st">"DHHAGAGE"</span>, </span>
<span id="cb4-5"><a href="#cb4-5"></a>                <span class="st">"DHHA_SEX"</span>, </span>
<span id="cb4-6"><a href="#cb4-6"></a>                <span class="st">"DHHAGMS"</span>, </span>
<span id="cb4-7"><a href="#cb4-7"></a>                <span class="st">"SDCAGRAC"</span>, </span>
<span id="cb4-8"><a href="#cb4-8"></a>                <span class="st">"SDCAFIMM"</span>, </span>
<span id="cb4-9"><a href="#cb4-9"></a>                <span class="st">"SDCAGRES"</span>, </span>
<span id="cb4-10"><a href="#cb4-10"></a>                <span class="st">"EDUADR04"</span>, </span>
<span id="cb4-11"><a href="#cb4-11"></a>                <span class="st">"INCAGHH"</span>, </span>
<span id="cb4-12"><a href="#cb4-12"></a>                <span class="st">"HWTAGBMI"</span>, </span>
<span id="cb4-13"><a href="#cb4-13"></a>                <span class="st">"PACADPAI"</span>, </span>
<span id="cb4-14"><a href="#cb4-14"></a>                <span class="st">"TWDA_5"</span>, </span>
<span id="cb4-15"><a href="#cb4-15"></a>                <span class="st">"GENA_07"</span>, </span>
<span id="cb4-16"><a href="#cb4-16"></a>                <span class="st">"SMKADSTY"</span>, </span>
<span id="cb4-17"><a href="#cb4-17"></a>                <span class="st">"ALCADTYP"</span>, </span>
<span id="cb4-18"><a href="#cb4-18"></a>                <span class="st">"FVCADTOT"</span>, </span>
<span id="cb4-19"><a href="#cb4-19"></a>                <span class="st">"CCCA_071"</span>,</span>
<span id="cb4-20"><a href="#cb4-20"></a>                <span class="st">"CCCA_91B"</span>,</span>
<span id="cb4-21"><a href="#cb4-21"></a>                <span class="st">"CCCA_101"</span>,</span>
<span id="cb4-22"><a href="#cb4-22"></a>                <span class="st">"GEOAGPRV"</span>,</span>
<span id="cb4-23"><a href="#cb4-23"></a>                <span class="st">"WTSAM"</span>)</span>
<span id="cb4-24"><a href="#cb4-24"></a>cc11 <span class="ot">&lt;-</span> c1[var.names1]</span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="fu">dim</span>(cc11)</span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co">#&gt; [1] 130880     23</span></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="fu">table</span>(cc11<span class="sc">$</span>CCCA_051)</span>
<span id="cb4-28"><a href="#cb4-28"></a><span class="co">#&gt; </span></span>
<span id="cb4-29"><a href="#cb4-29"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb4-30"><a href="#cb4-30"></a><span class="co">#&gt;          24511         106231              0            110              3 </span></span>
<span id="cb4-31"><a href="#cb4-31"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb4-32"><a href="#cb4-32"></a><span class="co">#&gt;             25</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The subsequent two code chunks do the same for CCHS 2.1 and CCHS 3.1, respectively, resulting in new data frames <code>cc21</code> and <code>cc31</code>.</p>
</section><section id="cycle-2.1" class="level5"><h5 class="anchored" data-anchor-id="cycle-2.1">Cycle 2.1</h5>
<div class="cell" data-hash="surveydata1_cache/html/data2_b48c63a4a10a163d2c1e1ee95092f3b1">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>var.names2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CCCC_121"</span>, </span>
<span id="cb5-2"><a href="#cb5-2"></a>                <span class="st">"CCCC_051"</span>, </span>
<span id="cb5-3"><a href="#cb5-3"></a>                <span class="st">"CCCC_05A"</span>, </span>
<span id="cb5-4"><a href="#cb5-4"></a>                <span class="st">"DHHCGAGE"</span>, </span>
<span id="cb5-5"><a href="#cb5-5"></a>                <span class="st">"DHHC_SEX"</span>, </span>
<span id="cb5-6"><a href="#cb5-6"></a>                <span class="st">"DHHCGMS"</span>, </span>
<span id="cb5-7"><a href="#cb5-7"></a>                <span class="st">"SDCCGRAC"</span>, </span>
<span id="cb5-8"><a href="#cb5-8"></a>                <span class="st">"SDCCFIMM"</span>, </span>
<span id="cb5-9"><a href="#cb5-9"></a>                <span class="st">"SDCCGRES"</span>, </span>
<span id="cb5-10"><a href="#cb5-10"></a>                <span class="st">"EDUCDR04"</span>, </span>
<span id="cb5-11"><a href="#cb5-11"></a>                <span class="st">"INCCGHH"</span>, </span>
<span id="cb5-12"><a href="#cb5-12"></a>                <span class="st">"HWTCGBMI"</span>, </span>
<span id="cb5-13"><a href="#cb5-13"></a>                <span class="st">"PACCDPAI"</span>, </span>
<span id="cb5-14"><a href="#cb5-14"></a>                <span class="st">"HCUC_1AA"</span>, </span>
<span id="cb5-15"><a href="#cb5-15"></a>                <span class="st">"GENC_07"</span>, </span>
<span id="cb5-16"><a href="#cb5-16"></a>                <span class="st">"SMKCDSTY"</span>, </span>
<span id="cb5-17"><a href="#cb5-17"></a>                <span class="st">"ALCCDTYP"</span>, </span>
<span id="cb5-18"><a href="#cb5-18"></a>                <span class="st">"FVCCDTOT"</span>, </span>
<span id="cb5-19"><a href="#cb5-19"></a>                <span class="st">"CCCC_071"</span>,</span>
<span id="cb5-20"><a href="#cb5-20"></a>                <span class="st">"CCCC_91B"</span>,</span>
<span id="cb5-21"><a href="#cb5-21"></a>                <span class="st">"CCCC_101"</span>,</span>
<span id="cb5-22"><a href="#cb5-22"></a>                <span class="st">"GEOCGPRV"</span>,</span>
<span id="cb5-23"><a href="#cb5-23"></a>                <span class="st">"WTSC_M"</span>)</span>
<span id="cb5-24"><a href="#cb5-24"></a>cc21 <span class="ot">&lt;-</span> c2[var.names2]</span>
<span id="cb5-25"><a href="#cb5-25"></a><span class="fu">dim</span>(cc21)</span>
<span id="cb5-26"><a href="#cb5-26"></a><span class="co">#&gt; [1] 134072     23</span></span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="fu">table</span>(cc21<span class="sc">$</span>CCCC_051)</span>
<span id="cb5-28"><a href="#cb5-28"></a><span class="co">#&gt; </span></span>
<span id="cb5-29"><a href="#cb5-29"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb5-30"><a href="#cb5-30"></a><span class="co">#&gt;          29293         104530              0            208             11 </span></span>
<span id="cb5-31"><a href="#cb5-31"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb5-32"><a href="#cb5-32"></a><span class="co">#&gt;             30</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="cycle-3.1" class="level5"><h5 class="anchored" data-anchor-id="cycle-3.1">Cycle 3.1</h5>
<div class="cell" data-hash="surveydata1_cache/html/data3_5a383e6ffe8067436b363cc541faf486">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>var.names3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CCCE_121"</span>, </span>
<span id="cb6-2"><a href="#cb6-2"></a>                <span class="st">"CCCE_051"</span>, </span>
<span id="cb6-3"><a href="#cb6-3"></a>                <span class="st">"CCCE_05A"</span>, </span>
<span id="cb6-4"><a href="#cb6-4"></a>                <span class="st">"DHHEGAGE"</span>, </span>
<span id="cb6-5"><a href="#cb6-5"></a>                <span class="st">"DHHE_SEX"</span>, </span>
<span id="cb6-6"><a href="#cb6-6"></a>                <span class="st">"DHHEGMS"</span>, </span>
<span id="cb6-7"><a href="#cb6-7"></a>                <span class="st">"SDCEGCGT"</span>, </span>
<span id="cb6-8"><a href="#cb6-8"></a>                <span class="st">"SDCEFIMM"</span>, </span>
<span id="cb6-9"><a href="#cb6-9"></a>                <span class="st">"SDCEGRES"</span>, </span>
<span id="cb6-10"><a href="#cb6-10"></a>                <span class="st">"EDUEDR04"</span>, </span>
<span id="cb6-11"><a href="#cb6-11"></a>                <span class="st">"INCEGHH"</span>, </span>
<span id="cb6-12"><a href="#cb6-12"></a>                <span class="st">"HWTEGBMI"</span>, </span>
<span id="cb6-13"><a href="#cb6-13"></a>                <span class="st">"PACEDPAI"</span>, </span>
<span id="cb6-14"><a href="#cb6-14"></a>                <span class="st">"HCUE_1AA"</span>, </span>
<span id="cb6-15"><a href="#cb6-15"></a>                <span class="st">"GENE_07"</span>, </span>
<span id="cb6-16"><a href="#cb6-16"></a>                <span class="st">"SMKEDSTY"</span>, </span>
<span id="cb6-17"><a href="#cb6-17"></a>                <span class="st">"ALCEDTYP"</span>, </span>
<span id="cb6-18"><a href="#cb6-18"></a>                <span class="st">"FVCEDTOT"</span>, </span>
<span id="cb6-19"><a href="#cb6-19"></a>                <span class="st">"CCCE_071"</span>, </span>
<span id="cb6-20"><a href="#cb6-20"></a>                <span class="st">"CCCE_91F"</span>, </span>
<span id="cb6-21"><a href="#cb6-21"></a>                <span class="st">"CCCE_101"</span>, </span>
<span id="cb6-22"><a href="#cb6-22"></a>                <span class="st">"GEOEGPRV"</span>, </span>
<span id="cb6-23"><a href="#cb6-23"></a>                <span class="st">"WTSE_M"</span>)</span>
<span id="cb6-24"><a href="#cb6-24"></a>cc31 <span class="ot">&lt;-</span> c3[var.names3]</span>
<span id="cb6-25"><a href="#cb6-25"></a><span class="fu">dim</span>(cc31)</span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="co">#&gt; [1] 132221     23</span></span>
<span id="cb6-27"><a href="#cb6-27"></a><span class="fu">table</span>(cc31<span class="sc">$</span>CCCE_051)</span>
<span id="cb6-28"><a href="#cb6-28"></a><span class="co">#&gt; </span></span>
<span id="cb6-29"><a href="#cb6-29"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb6-30"><a href="#cb6-30"></a><span class="co">#&gt;          28221         103781              0            191              4 </span></span>
<span id="cb6-31"><a href="#cb6-31"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb6-32"><a href="#cb6-32"></a><span class="co">#&gt;             24</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section></section><section id="making-variable-names-the-same" class="level3"><h3 class="anchored" data-anchor-id="making-variable-names-the-same">Making variable names the same</h3>
<p>We now create a new set of more readable and consistent variable names.</p>
<div class="cell" data-hash="surveydata1_cache/html/data4_02f090769eb35d07542448c9f5e5c1cc">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>new.var.names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CVD"</span>, </span>
<span id="cb7-2"><a href="#cb7-2"></a>                   <span class="st">"arthritis"</span>, </span>
<span id="cb7-3"><a href="#cb7-3"></a>                   <span class="st">"arthritis.kind"</span>, </span>
<span id="cb7-4"><a href="#cb7-4"></a>                   <span class="st">"age"</span>, </span>
<span id="cb7-5"><a href="#cb7-5"></a>                   <span class="st">"sex"</span>, </span>
<span id="cb7-6"><a href="#cb7-6"></a>                   <span class="st">"married"</span>, </span>
<span id="cb7-7"><a href="#cb7-7"></a>                   <span class="st">"race"</span>, </span>
<span id="cb7-8"><a href="#cb7-8"></a>                   <span class="st">"immigration"</span>, </span>
<span id="cb7-9"><a href="#cb7-9"></a>                   <span class="st">"recent.immigrant"</span>, </span>
<span id="cb7-10"><a href="#cb7-10"></a>                   <span class="st">"edu"</span>, </span>
<span id="cb7-11"><a href="#cb7-11"></a>                   <span class="st">"income"</span>, </span>
<span id="cb7-12"><a href="#cb7-12"></a>                   <span class="st">"bmi"</span>, </span>
<span id="cb7-13"><a href="#cb7-13"></a>                   <span class="st">"phyact"</span>, </span>
<span id="cb7-14"><a href="#cb7-14"></a>                   <span class="st">"doctor"</span>, </span>
<span id="cb7-15"><a href="#cb7-15"></a>                   <span class="st">"stress"</span>, </span>
<span id="cb7-16"><a href="#cb7-16"></a>                   <span class="st">"smoke"</span>, </span>
<span id="cb7-17"><a href="#cb7-17"></a>                   <span class="st">"drink"</span>, </span>
<span id="cb7-18"><a href="#cb7-18"></a>                   <span class="st">"fruit"</span>, </span>
<span id="cb7-19"><a href="#cb7-19"></a>                   <span class="st">"bp"</span>, </span>
<span id="cb7-20"><a href="#cb7-20"></a>                   <span class="st">"copd"</span>, </span>
<span id="cb7-21"><a href="#cb7-21"></a>                   <span class="st">"diab"</span>,  </span>
<span id="cb7-22"><a href="#cb7-22"></a>                   <span class="st">"province"</span>, </span>
<span id="cb7-23"><a href="#cb7-23"></a>                   <span class="st">"weight"</span>)</span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="fu">cbind</span>(new.var.names, var.names1, var.names2, var.names3)</span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="co">#&gt;       new.var.names      var.names1 var.names2 var.names3</span></span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="co">#&gt;  [1,] "CVD"              "CCCA_121" "CCCC_121" "CCCE_121"</span></span>
<span id="cb7-27"><a href="#cb7-27"></a><span class="co">#&gt;  [2,] "arthritis"        "CCCA_051" "CCCC_051" "CCCE_051"</span></span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="co">#&gt;  [3,] "arthritis.kind"   "CCCA_05A" "CCCC_05A" "CCCE_05A"</span></span>
<span id="cb7-29"><a href="#cb7-29"></a><span class="co">#&gt;  [4,] "age"              "DHHAGAGE" "DHHCGAGE" "DHHEGAGE"</span></span>
<span id="cb7-30"><a href="#cb7-30"></a><span class="co">#&gt;  [5,] "sex"              "DHHA_SEX" "DHHC_SEX" "DHHE_SEX"</span></span>
<span id="cb7-31"><a href="#cb7-31"></a><span class="co">#&gt;  [6,] "married"          "DHHAGMS"  "DHHCGMS"  "DHHEGMS" </span></span>
<span id="cb7-32"><a href="#cb7-32"></a><span class="co">#&gt;  [7,] "race"             "SDCAGRAC" "SDCCGRAC" "SDCEGCGT"</span></span>
<span id="cb7-33"><a href="#cb7-33"></a><span class="co">#&gt;  [8,] "immigration"      "SDCAFIMM" "SDCCFIMM" "SDCEFIMM"</span></span>
<span id="cb7-34"><a href="#cb7-34"></a><span class="co">#&gt;  [9,] "recent.immigrant" "SDCAGRES" "SDCCGRES" "SDCEGRES"</span></span>
<span id="cb7-35"><a href="#cb7-35"></a><span class="co">#&gt; [10,] "edu"              "EDUADR04" "EDUCDR04" "EDUEDR04"</span></span>
<span id="cb7-36"><a href="#cb7-36"></a><span class="co">#&gt; [11,] "income"           "INCAGHH"  "INCCGHH"  "INCEGHH" </span></span>
<span id="cb7-37"><a href="#cb7-37"></a><span class="co">#&gt; [12,] "bmi"              "HWTAGBMI" "HWTCGBMI" "HWTEGBMI"</span></span>
<span id="cb7-38"><a href="#cb7-38"></a><span class="co">#&gt; [13,] "phyact"           "PACADPAI" "PACCDPAI" "PACEDPAI"</span></span>
<span id="cb7-39"><a href="#cb7-39"></a><span class="co">#&gt; [14,] "doctor"           "TWDA_5"   "HCUC_1AA" "HCUE_1AA"</span></span>
<span id="cb7-40"><a href="#cb7-40"></a><span class="co">#&gt; [15,] "stress"           "GENA_07"  "GENC_07"  "GENE_07" </span></span>
<span id="cb7-41"><a href="#cb7-41"></a><span class="co">#&gt; [16,] "smoke"            "SMKADSTY" "SMKCDSTY" "SMKEDSTY"</span></span>
<span id="cb7-42"><a href="#cb7-42"></a><span class="co">#&gt; [17,] "drink"            "ALCADTYP" "ALCCDTYP" "ALCEDTYP"</span></span>
<span id="cb7-43"><a href="#cb7-43"></a><span class="co">#&gt; [18,] "fruit"            "FVCADTOT" "FVCCDTOT" "FVCEDTOT"</span></span>
<span id="cb7-44"><a href="#cb7-44"></a><span class="co">#&gt; [19,] "bp"               "CCCA_071" "CCCC_071" "CCCE_071"</span></span>
<span id="cb7-45"><a href="#cb7-45"></a><span class="co">#&gt; [20,] "copd"             "CCCA_91B" "CCCC_91B" "CCCE_91F"</span></span>
<span id="cb7-46"><a href="#cb7-46"></a><span class="co">#&gt; [21,] "diab"             "CCCA_101" "CCCC_101" "CCCE_101"</span></span>
<span id="cb7-47"><a href="#cb7-47"></a><span class="co">#&gt; [22,] "province"         "GEOAGPRV" "GEOCGPRV" "GEOEGPRV"</span></span>
<span id="cb7-48"><a href="#cb7-48"></a><span class="co">#&gt; [23,] "weight"           "WTSAM"    "WTSC_M"   "WTSE_M"</span></span>
<span id="cb7-49"><a href="#cb7-49"></a><span class="fu">names</span>(cc11) <span class="ot">&lt;-</span> <span class="fu">names</span>(cc21) <span class="ot">&lt;-</span> <span class="fu">names</span>(cc31) <span class="ot">&lt;-</span> new.var.names</span>
<span id="cb7-50"><a href="#cb7-50"></a></span>
<span id="cb7-51"><a href="#cb7-51"></a><span class="fu">table</span>(cc11<span class="sc">$</span>arthritis)</span>
<span id="cb7-52"><a href="#cb7-52"></a><span class="co">#&gt; </span></span>
<span id="cb7-53"><a href="#cb7-53"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb7-54"><a href="#cb7-54"></a><span class="co">#&gt;          24511         106231              0            110              3 </span></span>
<span id="cb7-55"><a href="#cb7-55"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb7-56"><a href="#cb7-56"></a><span class="co">#&gt;             25</span></span>
<span id="cb7-57"><a href="#cb7-57"></a><span class="fu">table</span>(cc21<span class="sc">$</span>arthritis)</span>
<span id="cb7-58"><a href="#cb7-58"></a><span class="co">#&gt; </span></span>
<span id="cb7-59"><a href="#cb7-59"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb7-60"><a href="#cb7-60"></a><span class="co">#&gt;          29293         104530              0            208             11 </span></span>
<span id="cb7-61"><a href="#cb7-61"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb7-62"><a href="#cb7-62"></a><span class="co">#&gt;             30</span></span>
<span id="cb7-63"><a href="#cb7-63"></a><span class="fu">table</span>(cc31<span class="sc">$</span>arthritis)</span>
<span id="cb7-64"><a href="#cb7-64"></a><span class="co">#&gt; </span></span>
<span id="cb7-65"><a href="#cb7-65"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb7-66"><a href="#cb7-66"></a><span class="co">#&gt;          28221         103781              0            191              4 </span></span>
<span id="cb7-67"><a href="#cb7-67"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb7-68"><a href="#cb7-68"></a><span class="co">#&gt;             24</span></span>
<span id="cb7-69"><a href="#cb7-69"></a></span>
<span id="cb7-70"><a href="#cb7-70"></a>cc11<span class="sc">$</span>cycle <span class="ot">&lt;-</span> <span class="dv">11</span></span>
<span id="cb7-71"><a href="#cb7-71"></a>cc21<span class="sc">$</span>cycle <span class="ot">&lt;-</span> <span class="dv">21</span></span>
<span id="cb7-72"><a href="#cb7-72"></a>cc31<span class="sc">$</span>cycle <span class="ot">&lt;-</span> <span class="dv">31</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="appending" class="level3"><h3 class="anchored" data-anchor-id="appending">Appending</h3>
<p>We now combine the data frames <code>cc11</code>, <code>cc21</code>, and <code>cc31</code> by stacking them on top of each other.</p>
<div class="cell" data-hash="surveydata1_cache/html/append_5457a603a03c224c6903a51c7890cd48">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>cc123a <span class="ot">&lt;-</span> <span class="fu">rbind</span>(cc11,cc21,cc31)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">dim</span>(cc123a)</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">#&gt; [1] 397173     24</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="fu">names</span>(cc123a)</span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">#&gt;  [1] "CVD"              "arthritis"        "arthritis.kind"   "age"             </span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt;  [5] "sex"              "married"          "race"             "immigration"     </span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt;  [9] "recent.immigrant" "edu"              "income"           "bmi"             </span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt; [13] "phyact"           "doctor"           "stress"           "smoke"           </span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt; [17] "drink"            "fruit"            "bp"               "copd"            </span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt; [21] "diab"             "province"         "weight"           "cycle"</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>cc123a<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(cc123a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="variables" class="level3"><h3 class="anchored" data-anchor-id="variables">Variables</h3>
<section id="sampling-weight" class="level4"><h4 class="anchored" data-anchor-id="sampling-weight">Sampling weight</h4>
<p>We use the <code>summary</code> function to provide basic statistics (like mean, median, min, max, etc.) for the <code>weight</code> column in the data frame <code>cc123a</code>.</p>
<div class="cell" data-hash="surveydata1_cache/html/summ_0cdc39b3e39ef2410ce6813fae47eaf2">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">summary</span>(cc123a<span class="sc">$</span>weight)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">#&gt;    1.17   65.28  126.63  200.09  243.21 7154.95</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="exposure" class="level4"><h4 class="anchored" data-anchor-id="exposure">Exposure</h4>
<p>This following chunk creates frequency tables for the ‘arthritis’ and ‘arthritis.kind’ columns.</p>
<div class="cell" data-hash="surveydata1_cache/html/tab0_cffcfaae6098a962199d81a6ccefbbed">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">table</span>(cc123a<span class="sc">$</span>arthritis)</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co">#&gt; </span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">#&gt;          82025         314542              0            509             18 </span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">#&gt;             79</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="fu">table</span>(cc123a<span class="sc">$</span>arthritis.kind)</span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">#&gt; </span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt; RHEUMATOID ARTH  OSTEOARTHRITIS           OTHER  NOT APPLICABLE      DON'T KNOW </span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">#&gt;           19099           40943            7305          314542           12354 </span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">#&gt;         REFUSAL      NOT STATED      RHEUMATISM </span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">#&gt;             215             619            2096</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="fu">sum</span>(cc123a<span class="sc">$</span>arthritis<span class="sc">==</span><span class="st">"NO"</span>)</span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt; [1] 314542</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="fu">sum</span>(cc123a<span class="sc">$</span>arthritis.kind<span class="sc">==</span><span class="st">"NOT APPLICABLE"</span>)</span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">#&gt; [1] 314542</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We create the exposure variable with exposure status vs controls.</p>
<div class="cell" data-hash="surveydata1_cache/html/recodeOA_9ef5f14f7ba13cfb7a9c2068d7fa6605">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>c123sub1 <span class="ot">&lt;-</span> cc123a</span>
<span id="cb11-2"><a href="#cb11-2"></a>c123sub1<span class="sc">$</span>arthritis.kind <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub1<span class="sc">$</span>arthritis.kind, </span>
<span id="cb11-3"><a href="#cb11-3"></a>                            <span class="st">"'OSTEOARTHRITIS'='OSTEOARTHRITIS';</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="st">                            'NOT APPLICABLE' = 'NOT APPLICABLE';</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="st">                            else = NA"</span>,  </span>
<span id="cb11-6"><a href="#cb11-6"></a>                            <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="fu">table</span>(c123sub1<span class="sc">$</span>arthritis.kind, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co">#&gt; </span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">#&gt; NOT APPLICABLE OSTEOARTHRITIS           &lt;NA&gt; </span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">#&gt;         314542          40943          41688</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="surveydata1_cache/html/recode1_3c858f4096f605a3ea8125e1a464ae0b">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># c123sub1 &lt;- subset(cc123a, arthritis.kind == "OSTEOARTHRITIS" | </span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="co">#                      arthritis.kind == "NOT APPLICABLE" )</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co"># dim(c123sub1)</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="fu">table</span>(c123sub1<span class="sc">$</span>arthritis.kind)</span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co">#&gt; </span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co">#&gt; NOT APPLICABLE OSTEOARTHRITIS </span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">#&gt;         314542          40943</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="fu">table</span>(c123sub1<span class="sc">$</span>arthritis)</span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">#&gt; </span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">#&gt;          82025         314542              0            509             18 </span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#&gt;             79</span></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="fu">require</span>(car)</span>
<span id="cb12-15"><a href="#cb12-15"></a>c123sub1<span class="sc">$</span>arthritis.kind <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub1<span class="sc">$</span>arthritis.kind, </span>
<span id="cb12-16"><a href="#cb12-16"></a>                                  <span class="st">"'OSTEOARTHRITIS'='OA';</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="st">                         'NOT APPLICABLE'='Control';</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="st">                         else=NA"</span>, <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="fu">table</span>(c123sub1<span class="sc">$</span>arthritis.kind, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb12-20"><a href="#cb12-20"></a><span class="co">#&gt; </span></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="co">#&gt; Control      OA    &lt;NA&gt; </span></span>
<span id="cb12-22"><a href="#cb12-22"></a><span class="co">#&gt;  314542   40943   41688</span></span>
<span id="cb12-23"><a href="#cb12-23"></a>c123sub1<span class="sc">$</span>OA <span class="ot">&lt;-</span> c123sub1<span class="sc">$</span>arthritis.kind</span>
<span id="cb12-24"><a href="#cb12-24"></a>c123sub1<span class="sc">$</span>arthritis.kind <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb12-25"><a href="#cb12-25"></a>c123sub1<span class="sc">$</span>arthritis <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb12-26"><a href="#cb12-26"></a><span class="fu">dim</span>(c123sub1)</span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="co">#&gt; [1] 397173     24</span></span>
<span id="cb12-28"><a href="#cb12-28"></a><span class="fu">dim</span>(c123sub1)[<span class="dv">1</span>]<span class="sc">-</span><span class="fu">dim</span>(cc123a)[<span class="dv">1</span>]</span>
<span id="cb12-29"><a href="#cb12-29"></a><span class="co">#&gt; [1] 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="outcome" class="level4"><h4 class="anchored" data-anchor-id="outcome">Outcome</h4>
<p>We create the outcome variable.</p>
<div class="cell" data-hash="surveydata1_cache/html/recodecvd_b716d1c43ad6a98aaf0ef2d00ab9a234">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>c123sub2 <span class="ot">&lt;-</span> c123sub1</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">table</span>(c123sub2<span class="sc">$</span>CVD)</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">#&gt; </span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co">#&gt;          25524         371121              0            399             50 </span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co">#&gt;             79</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>c123sub2<span class="sc">$</span>CVD <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub2<span class="sc">$</span>CVD, </span>
<span id="cb13-9"><a href="#cb13-9"></a>                            <span class="st">"'YES'='YES';</span></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="st">                            'NO' = 'NO';</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="st">                            else = NA"</span>,  </span>
<span id="cb13-12"><a href="#cb13-12"></a>                            <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="surveydata1_cache/html/recodecvd3_f31fb892b0444da15efb781cb7383f36">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># table(c123sub1$CVD)</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co"># c123sub2 &lt;- subset(c123sub1, CVD == "YES" | CVD == "NO")</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co"># table(c123sub2$CVD)</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="fu">dim</span>(c123sub2)</span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co">#&gt; [1] 397173     24</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>c123sub2<span class="sc">$</span>CVD <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub2<span class="sc">$</span>CVD, </span>
<span id="cb14-7"><a href="#cb14-7"></a>                       <span class="st">"'YES'='event';</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="st">                       'NO'='no event';</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="st">                       else=NA"</span>,</span>
<span id="cb14-10"><a href="#cb14-10"></a>                       <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="fu">table</span>(c123sub2<span class="sc">$</span>CVD, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="co">#&gt; </span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="co">#&gt;    event no event     &lt;NA&gt; </span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="co">#&gt;    25524   371121      528</span></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="fu">dim</span>(c123sub2)</span>
<span id="cb14-16"><a href="#cb14-16"></a><span class="co">#&gt; [1] 397173     24</span></span>
<span id="cb14-17"><a href="#cb14-17"></a><span class="fu">dim</span>(c123sub2)[<span class="dv">1</span>]<span class="sc">-</span><span class="fu">dim</span>(c123sub1)[<span class="dv">1</span>]</span>
<span id="cb14-18"><a href="#cb14-18"></a><span class="co">#&gt; [1] 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="covariates" class="level4"><h4 class="anchored" data-anchor-id="covariates">Covariates</h4>
<section id="age" class="level5"><h5 class="anchored" data-anchor-id="age">age</h5>
<p>Recodes the ‘age’ column into broader age categories.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode4_5bcfa6b94e0162f5390f1a603c8796ab">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>c123sub2<span class="sc">$</span>age <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub2<span class="sc">$</span>age, </span>
<span id="cb15-2"><a href="#cb15-2"></a>                       <span class="st">"c('12 TO 14 YEARS','15 TO 19 YEARS',</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="st">                       '15 TO 17 YEARS', '18 TO 19 YEARS')='teen';</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="st">                       c('20 TO 24 YEARS','25 TO 29 YEARS')='20-29 years';</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="st">                       c('30 TO 34 YEARS','35 TO 39 YEARS')='30-39 years';</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="st">                       c('40 TO 44 YEARS','45 TO 49 YEARS')='40-49 years';</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="st">                       c('50 TO 54 YEARS','55 TO 59 YEARS')='50-59 years';</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="st">                       c('60 TO 64 YEARS')='60-64 years';   </span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="st">                       else='65 years and over'"</span>,</span>
<span id="cb15-10"><a href="#cb15-10"></a>                       <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="fu">table</span>(c123sub2<span class="sc">$</span>age)</span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&gt; </span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#&gt;       20-29 years       30-39 years       40-49 years       50-59 years </span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">#&gt;             48652             63810             65111             61035 </span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">#&gt;       60-64 years 65 years and over              teen </span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">#&gt;             25265             80913             52387</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="surveydata1_cache/html/recode5_6fdb0d53af6d5272eef0ac2b146f5825">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>c123sub3 <span class="ot">&lt;-</span> c123sub2</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co"># c123sub3$age[c123sub3$age == 'teen'] &lt;- NA</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="co"># c123sub3$age[c123sub3$age == '65 years and over'] &lt;- NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="surveydata1_cache/html/tabage_0203ac66fb500b1c485ba67eff700c36">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># dim(c123sub2)</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co"># c123sub3 &lt;- subset(c123sub2, age != 'teen' &amp; age != '65 years and over')</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>age, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co">#&gt; </span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">#&gt;       20-29 years       30-39 years       40-49 years       50-59 years </span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#&gt;             48652             63810             65111             61035 </span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#&gt;       60-64 years 65 years and over              teen              &lt;NA&gt; </span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#&gt;             25265             80913             52387                 0</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="fu">dim</span>(c123sub3)</span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">#&gt; [1] 397173     24</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="sex" class="level5"><h5 class="anchored" data-anchor-id="sex">sex</h5>
<p>Recodes ‘sex’ to ‘Male’ or ‘Female’.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode6_09d32e087b077a7d4062ef874dfb4146">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>sex)</span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="co">#&gt; </span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">#&gt;           MALE         FEMALE NOT APPLICABLE     NOT STATED     DON'T KNOW </span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co">#&gt;         182523         214650              0              0              0 </span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co">#&gt;        REFUSAL </span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co">#&gt;              0</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>c123sub3<span class="sc">$</span>sex <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>sex, </span>
<span id="cb18-8"><a href="#cb18-8"></a>                            <span class="st">"'MALE'='Male';</span></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="st">                            'FEMALE' = 'Female';</span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="st">                            else = NA"</span>,  </span>
<span id="cb18-11"><a href="#cb18-11"></a>                            <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb18-12"><a href="#cb18-12"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>sex, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb18-13"><a href="#cb18-13"></a><span class="co">#&gt; </span></span>
<span id="cb18-14"><a href="#cb18-14"></a><span class="co">#&gt; Female   Male   &lt;NA&gt; </span></span>
<span id="cb18-15"><a href="#cb18-15"></a><span class="co">#&gt; 214650 182523      0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="marital-status" class="level5"><h5 class="anchored" data-anchor-id="marital-status">marital status</h5>
<p>Recodes the ‘married’ column into two categories: ‘not single’ and ‘single’.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode7_2d00a1b1611bf9e850cfac5566073bb2">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>married)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co">#&gt; </span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="co">#&gt;          MARRIED       COMMON-LAW    WIDOW/SEP/DIV           SINGLE </span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co">#&gt;           171304            30909            75885            78261 </span></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co">#&gt;          REFUSAL       NOT STATED   NOT APPLICABLE       DON'T KNOW </span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="co">#&gt;                0              661                0                0 </span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co">#&gt; SINGLE/NEVER MAR </span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="co">#&gt;            40153</span></span>
<span id="cb19-9"><a href="#cb19-9"></a>c123sub3<span class="sc">$</span>married <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>married, </span>
<span id="cb19-10"><a href="#cb19-10"></a>                             <span class="st">"c('MARRIED', 'COMMON-LAW')='not single';</span></span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="st">                             c('WIDOW/SEP/DIV', 'SINGLE', 'SINGLE/NEVER MAR') = 'single';</span></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="st">                             else = NA"</span>,  </span>
<span id="cb19-13"><a href="#cb19-13"></a>                             <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-14"><a href="#cb19-14"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>married, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="co">#&gt; </span></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="co">#&gt; not single     single       &lt;NA&gt; </span></span>
<span id="cb19-17"><a href="#cb19-17"></a><span class="co">#&gt;     202213     194299        661</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="race" class="level5"><h5 class="anchored" data-anchor-id="race">race</h5>
<p>Recodes ‘race’ into ‘White’ and ‘Non-white’.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode8_6045c427daa704b57fa78c2e989ca2cd">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>race)</span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="co">#&gt; </span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="co">#&gt;            WHITE VISIBLE MINORITY   NOT APPLICABLE       NOT STATED </span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co">#&gt;           349222            38641                0             9310 </span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="co">#&gt;       DON'T KNOW          REFUSAL </span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="co">#&gt;                0                0</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>c123sub3<span class="sc">$</span>race <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>race, </span>
<span id="cb20-8"><a href="#cb20-8"></a>                             <span class="st">"'WHITE'='White';</span></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="st">                             'VISIBLE MINORITY' = 'Non-white';</span></span>
<span id="cb20-10"><a href="#cb20-10"></a><span class="st">                             else = NA"</span>,  </span>
<span id="cb20-11"><a href="#cb20-11"></a>                             <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb20-12"><a href="#cb20-12"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>race, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb20-13"><a href="#cb20-13"></a><span class="co">#&gt; </span></span>
<span id="cb20-14"><a href="#cb20-14"></a><span class="co">#&gt; Non-white     White      &lt;NA&gt; </span></span>
<span id="cb20-15"><a href="#cb20-15"></a><span class="co">#&gt;     38641    349222      9310</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="immigration" class="level5"><h5 class="anchored" data-anchor-id="immigration">immigration</h5>
<p>Creates a new column for immigration status based on the ‘recent.immigrant’ column, then removes the original column.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode9_f4da1ff174b84ea7c48840933243c128">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>recent.immigrant)</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="co">#&gt; </span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="co">#&gt;     0 TO 9 YEARS 10 YEARS OR MORE   NOT APPLICABLE       NOT STATED </span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="co">#&gt;            10644            26746           338078             7975 </span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="co">#&gt;       DON'T KNOW          REFUSAL 10 OR MORE YEARS </span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="co">#&gt;                0                0            13730</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>c123sub3<span class="sc">$</span>immigrate <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>recent.immigrant,</span>
<span id="cb21-8"><a href="#cb21-8"></a>                            <span class="st">"'0 TO 9 YEARS'='recent';</span></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="st">                            '10 YEARS OR MORE' = '&gt; 10 years';</span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="st">                            'NOT APPLICABLE' = 'not immigrant';</span></span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="st">                            else = NA"</span>,</span>
<span id="cb21-12"><a href="#cb21-12"></a>                            <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>immigrate, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="co">#&gt; </span></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="co">#&gt;    &gt; 10 years not immigrant        recent          &lt;NA&gt; </span></span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="co">#&gt;         26746        338078         10644         21705</span></span>
<span id="cb21-17"><a href="#cb21-17"></a>c123sub3<span class="sc">$</span>recent.immigrant <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb21-18"><a href="#cb21-18"></a>c123sub3<span class="sc">$</span>immigration <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="education" class="level5"><h5 class="anchored" data-anchor-id="education">education</h5>
<p>Recodes educational status into specified categories.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode10_0f631b05eb9941daed55965da6c5885d">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>edu)</span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="co">#&gt; </span></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="co">#&gt; &lt; THAN SECONDARY  SECONDARY GRAD.  OTHER POST-SEC.  POST-SEC. GRAD. </span></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="co">#&gt;           124425            64753            29000           171972 </span></span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co">#&gt;   NOT APPLICABLE       NOT STATED       DON'T KNOW          REFUSAL </span></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="co">#&gt;                0             7023                0                0</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>c123sub3<span class="sc">$</span>edu <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>edu,</span>
<span id="cb22-8"><a href="#cb22-8"></a>                            <span class="st">"'&lt; THAN SECONDARY'='&lt; 2ndary';</span></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="st">                            'SECONDARY GRAD.' = '2nd grad.';</span></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="st">                            'POST-SEC. GRAD.' = 'Post-2nd grad.';</span></span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="st">                            'OTHER POST-SEC.' = 'Other 2nd grad.';</span></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="st">                            else = NA"</span>,</span>
<span id="cb22-13"><a href="#cb22-13"></a>                            <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb22-14"><a href="#cb22-14"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>edu, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb22-15"><a href="#cb22-15"></a><span class="co">#&gt; </span></span>
<span id="cb22-16"><a href="#cb22-16"></a><span class="co">#&gt;        &lt; 2ndary       2nd grad. Other 2nd grad.  Post-2nd grad.            &lt;NA&gt; </span></span>
<span id="cb22-17"><a href="#cb22-17"></a><span class="co">#&gt;          124425           64753           29000          171972            7023</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="income" class="level5"><h5 class="anchored" data-anchor-id="income">income</h5>
<p>Recodes income levels into broader categories.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode11_88d1dc1ceadc8ae0db8e0beb2e6588ab">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>income)</span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="co">#&gt; </span></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="co">#&gt;        NO INCOME LESS THAN 15,000  $15,000-$29,999  $30,000-$49,999 </span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co">#&gt;            12636            14103            63766            77940 </span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="co">#&gt;  $50,000-$79,999  $80,000 OR MORE   NOT APPLICABLE       NOT STATED </span></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="co">#&gt;            85108            75715                0            57079 </span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="co">#&gt;       DON'T KNOW          REFUSAL   NO OR &lt;$15,000 </span></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="co">#&gt;                0                0            10826</span></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="co"># cycle 1.1 has: 'NO INCOME','LESS THAN 15,000'</span></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="co"># Other cycles have: 'NO OR &lt;$15,000'</span></span>
<span id="cb23-11"><a href="#cb23-11"></a>c123sub3<span class="sc">$</span>income <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>income, </span>
<span id="cb23-12"><a href="#cb23-12"></a>                               <span class="st">"c('NO OR &lt;$15,000', 'NO INCOME','LESS THAN 15,000',</span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="st">                               '$15,000-$29,999')='$29,999 or less';</span></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="st">                               '$30,000-$49,999' = '$30,000-$49,999';</span></span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="st">                               '$50,000-$79,999' = '$50,000-$79,999';</span></span>
<span id="cb23-16"><a href="#cb23-16"></a><span class="st">                               '$80,000 OR MORE' = '$80,000 or more';</span></span>
<span id="cb23-17"><a href="#cb23-17"></a><span class="st">                               else = NA"</span>,  </span>
<span id="cb23-18"><a href="#cb23-18"></a>                               <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb23-19"><a href="#cb23-19"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>income, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb23-20"><a href="#cb23-20"></a><span class="co">#&gt; </span></span>
<span id="cb23-21"><a href="#cb23-21"></a><span class="co">#&gt; $29,999 or less $30,000-$49,999 $50,000-$79,999 $80,000 or more            &lt;NA&gt; </span></span>
<span id="cb23-22"><a href="#cb23-22"></a><span class="co">#&gt;          101331           77940           85108           75715           57079</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="bmi" class="level5"><h5 class="anchored" data-anchor-id="bmi">BMI</h5>
<p>Converts ‘bmi’ column values to numerical data and also categorizes it based on the BMI value.</p>
<p>If you want to reuse the continuous variable later (usually a good idea in statistical sense), keep a second copy of the variable.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode12_0d3aee27950066744aa4c175d89a1501">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># table(c123sub3$bmi)</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="fu">sum</span>(c123sub3<span class="sc">$</span>bmi<span class="sc">==</span><span class="st">"NOT APPLICABLE"</span>)<span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">sum</span>(c123sub3<span class="sc">$</span>bmi<span class="sc">==</span><span class="st">"REFUSAL"</span>)<span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="fu">sum</span>(c123sub3<span class="sc">$</span>bmi<span class="sc">==</span><span class="st">"NOT STATED"</span>)<span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">sum</span>(c123sub3<span class="sc">$</span>bmi<span class="sc">==</span><span class="st">"DON'T KNOW"</span>)</span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="co">#&gt; [1] 72303</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>c123sub3<span class="sc">$</span>bmi <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>bmi, </span>
<span id="cb24-8"><a href="#cb24-8"></a>                               <span class="st">'c("NOT APPLICABLE", "REFUSAL", "NOT STATED", "DON</span><span class="sc">\'</span><span class="st">T KNOW")=NA'</span>,</span>
<span id="cb24-9"><a href="#cb24-9"></a>                               <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="co">#table(c123sub3$bmi, useNA = "always")</span></span>
<span id="cb24-11"><a href="#cb24-11"></a>c123sub3<span class="sc">$</span>bmi <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(c123sub3<span class="sc">$</span>bmi))</span>
<span id="cb24-12"><a href="#cb24-12"></a><span class="fu">summary</span>(c123sub3<span class="sc">$</span>bmi)</span>
<span id="cb24-13"><a href="#cb24-13"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span></span>
<span id="cb24-14"><a href="#cb24-14"></a><span class="co">#&gt;   11.91   22.47   25.30   25.86   28.50   57.90   72303</span></span>
<span id="cb24-15"><a href="#cb24-15"></a>c123sub3<span class="sc">$</span>bmi2 <span class="ot">&lt;-</span> <span class="fu">cut</span>(c123sub3<span class="sc">$</span>bmi,</span>
<span id="cb24-16"><a href="#cb24-16"></a>                       <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">18.5</span>,<span class="dv">25</span>,<span class="cn">Inf</span>),</span>
<span id="cb24-17"><a href="#cb24-17"></a>                       <span class="at">right =</span> <span class="cn">TRUE</span>,</span>
<span id="cb24-18"><a href="#cb24-18"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Underweight"</span>, </span>
<span id="cb24-19"><a href="#cb24-19"></a>                                  <span class="st">"healthy weight"</span>, </span>
<span id="cb24-20"><a href="#cb24-20"></a>                                  <span class="st">"Overweight"</span>))</span>
<span id="cb24-21"><a href="#cb24-21"></a>c123sub3<span class="sc">$</span>bmi <span class="ot">&lt;-</span> c123sub3<span class="sc">$</span>bmi2</span>
<span id="cb24-22"><a href="#cb24-22"></a>c123sub3<span class="sc">$</span>bmi2 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb24-23"><a href="#cb24-23"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>bmi, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb24-24"><a href="#cb24-24"></a><span class="co">#&gt; </span></span>
<span id="cb24-25"><a href="#cb24-25"></a><span class="co">#&gt;    Underweight healthy weight     Overweight           &lt;NA&gt; </span></span>
<span id="cb24-26"><a href="#cb24-26"></a><span class="co">#&gt;          10116         148533         166221          72303</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="physical-activity" class="level5"><h5 class="anchored" data-anchor-id="physical-activity">physical activity</h5>
<p>Recodes physical activity levels.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode13_3fbc6c883240d9e719f238c131954e9e">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>phyact)</span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="co">#&gt; </span></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="co">#&gt;         ACTIVE       MODERATE       INACTIVE NOT APPLICABLE     NOT STATED </span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="co">#&gt;          98571          93507         190739              0          14356 </span></span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="co">#&gt;     DON'T KNOW        REFUSAL </span></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="co">#&gt;              0              0</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>c123sub3<span class="sc">$</span>phyact <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>phyact,</span>
<span id="cb25-8"><a href="#cb25-8"></a>                               <span class="st">"'ACTIVE'='Active';</span></span>
<span id="cb25-9"><a href="#cb25-9"></a><span class="st">                               'MODERATE' = 'Moderate';</span></span>
<span id="cb25-10"><a href="#cb25-10"></a><span class="st">                               'INACTIVE' = 'Inactive';</span></span>
<span id="cb25-11"><a href="#cb25-11"></a><span class="st">                               else = NA"</span>,</span>
<span id="cb25-12"><a href="#cb25-12"></a>                               <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb25-13"><a href="#cb25-13"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>phyact, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb25-14"><a href="#cb25-14"></a><span class="co">#&gt; </span></span>
<span id="cb25-15"><a href="#cb25-15"></a><span class="co">#&gt;   Active Inactive Moderate     &lt;NA&gt; </span></span>
<span id="cb25-16"><a href="#cb25-16"></a><span class="co">#&gt;    98571   190739    93507    14356</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="doctor" class="level5"><h5 class="anchored" data-anchor-id="doctor">doctor</h5>
<p>Recodes whether someone has access to a doctor into ‘Yes’ or ‘No’.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode14_a88dde1cfab008e03be38be782d26e45">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>doctor)</span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="co">#&gt; </span></span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="co">#&gt;         338105          58623              0            406             39 </span></span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="co">#&gt;              0</span></span>
<span id="cb26-7"><a href="#cb26-7"></a>c123sub3<span class="sc">$</span>doctor <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>doctor, </span>
<span id="cb26-8"><a href="#cb26-8"></a>                            <span class="st">"'YES'='Yes';</span></span>
<span id="cb26-9"><a href="#cb26-9"></a><span class="st">                            'NO' = 'No';</span></span>
<span id="cb26-10"><a href="#cb26-10"></a><span class="st">                            else = NA"</span>,  </span>
<span id="cb26-11"><a href="#cb26-11"></a>                            <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb26-12"><a href="#cb26-12"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>doctor, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb26-13"><a href="#cb26-13"></a><span class="co">#&gt; </span></span>
<span id="cb26-14"><a href="#cb26-14"></a><span class="co">#&gt;     No    Yes   &lt;NA&gt; </span></span>
<span id="cb26-15"><a href="#cb26-15"></a><span class="co">#&gt;  58623 338105    445</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="stress" class="level5"><h5 class="anchored" data-anchor-id="stress">stress</h5>
<p>Recodes stress levels into ‘Not too stressed’ or ‘stressed’.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode16_e6ce7914aa8aa533c425afa3a065357a">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>stress)</span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="co">#&gt; </span></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="co">#&gt;     NOT AT ALL       NOT VERY          A BIT    QUITE A BIT      EXTREMELY </span></span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="co">#&gt;          51020          89612         146112          68203          14094 </span></span>
<span id="cb27-5"><a href="#cb27-5"></a><span class="co">#&gt; NOT APPLICABLE     DON'T KNOW        REFUSAL     NOT STATED </span></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="co">#&gt;          26737           1244            145              6</span></span>
<span id="cb27-7"><a href="#cb27-7"></a>c123sub3<span class="sc">$</span>stress <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>stress,</span>
<span id="cb27-8"><a href="#cb27-8"></a>                              <span class="st">"c('NOT AT ALL','NOT VERY','A BIT')='Not too stressed';</span></span>
<span id="cb27-9"><a href="#cb27-9"></a><span class="st">                              c('QUITE A BIT','EXTREMELY') = 'stressed';</span></span>
<span id="cb27-10"><a href="#cb27-10"></a><span class="st">                              else = NA"</span>,</span>
<span id="cb27-11"><a href="#cb27-11"></a>                              <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb27-12"><a href="#cb27-12"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>stress, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb27-13"><a href="#cb27-13"></a><span class="co">#&gt; </span></span>
<span id="cb27-14"><a href="#cb27-14"></a><span class="co">#&gt; Not too stressed         stressed             &lt;NA&gt; </span></span>
<span id="cb27-15"><a href="#cb27-15"></a><span class="co">#&gt;           286744            82297            28132</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="smoking" class="level5"><h5 class="anchored" data-anchor-id="smoking">smoking</h5>
<p>Recodes smoking status into ‘Current smoker’, ‘Former smoker’, or ‘Never smoker’.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode17_caee86b349a8e51e79009e42a7d10058">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>smoke)</span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="co">#&gt; </span></span>
<span id="cb28-3"><a href="#cb28-3"></a><span class="co">#&gt;            DAILY       OCCASIONAL ALWAYS OCCASION.     FORMER DAILY </span></span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="co">#&gt;            79878            10931             7043            99450 </span></span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="co">#&gt; FORMER OCCASION.     NEVER SMOKED   NOT APPLICABLE       NOT STATED </span></span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="co">#&gt;            58120           140017                0             1734 </span></span>
<span id="cb28-7"><a href="#cb28-7"></a><span class="co">#&gt;       DON'T KNOW          REFUSAL </span></span>
<span id="cb28-8"><a href="#cb28-8"></a><span class="co">#&gt;                0                0</span></span>
<span id="cb28-9"><a href="#cb28-9"></a>c123sub3<span class="sc">$</span>smoke <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>smoke,</span>
<span id="cb28-10"><a href="#cb28-10"></a>                              <span class="st">"c('DAILY','OCCASIONAL',</span></span>
<span id="cb28-11"><a href="#cb28-11"></a><span class="st">                              'ALWAYS OCCASION.')='Current smoker';</span></span>
<span id="cb28-12"><a href="#cb28-12"></a><span class="st">                              c('FORMER DAILY','FORMER OCCASION.',</span></span>
<span id="cb28-13"><a href="#cb28-13"></a><span class="st">                              'ALWAYS OCCASION.') = 'Former smoker';</span></span>
<span id="cb28-14"><a href="#cb28-14"></a><span class="st">                              'NEVER SMOKED' = 'Never smoker';</span></span>
<span id="cb28-15"><a href="#cb28-15"></a><span class="st">                              else = NA"</span>,</span>
<span id="cb28-16"><a href="#cb28-16"></a>                              <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb28-17"><a href="#cb28-17"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>smoke, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb28-18"><a href="#cb28-18"></a><span class="co">#&gt; </span></span>
<span id="cb28-19"><a href="#cb28-19"></a><span class="co">#&gt; Current smoker  Former smoker   Never smoker           &lt;NA&gt; </span></span>
<span id="cb28-20"><a href="#cb28-20"></a><span class="co">#&gt;          97852         157570         140017           1734</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="alcohol" class="level5"><h5 class="anchored" data-anchor-id="alcohol">alcohol</h5>
<p>Recodes drinking habits into ‘Current drinker’, ‘Former driker’, or ‘Never drank’.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode18_74f668507de9f9578b133a0d8bd34b31">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>drink)</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="co">#&gt; </span></span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="co">#&gt; REGULAR DRINKER    OCC. DRINKER  FORMER DRINKER     NEVER DRANK  NOT APPLICABLE </span></span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="co">#&gt;          219334           76399           55299           40670               0 </span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="co">#&gt;      NOT STATED      DON'T KNOW         REFUSAL </span></span>
<span id="cb29-6"><a href="#cb29-6"></a><span class="co">#&gt;            5471               0               0</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>c123sub3<span class="sc">$</span>drink <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>drink,</span>
<span id="cb29-8"><a href="#cb29-8"></a>                              <span class="st">"c('REGULAR DRINKER',</span></span>
<span id="cb29-9"><a href="#cb29-9"></a><span class="st">                              'OCC. DRINKER')='Current drinker';</span></span>
<span id="cb29-10"><a href="#cb29-10"></a><span class="st">                              c('FORMER DRINKER') = 'Former driker';</span></span>
<span id="cb29-11"><a href="#cb29-11"></a><span class="st">                              'NEVER DRANK' = 'Never drank';</span></span>
<span id="cb29-12"><a href="#cb29-12"></a><span class="st">                              else = NA"</span>,</span>
<span id="cb29-13"><a href="#cb29-13"></a>                              <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb29-14"><a href="#cb29-14"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>drink, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb29-15"><a href="#cb29-15"></a><span class="co">#&gt; </span></span>
<span id="cb29-16"><a href="#cb29-16"></a><span class="co">#&gt; Current drinker   Former driker     Never drank            &lt;NA&gt; </span></span>
<span id="cb29-17"><a href="#cb29-17"></a><span class="co">#&gt;          295733           55299           40670            5471</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="fruit-and-vegetable-consumption" class="level5"><h5 class="anchored" data-anchor-id="fruit-and-vegetable-consumption">fruit and vegetable consumption</h5>
<p>Converts fruit and vegetable consumption to numerical values and then categorizes it.</p>
<p>If you want to reuse the continuous variable later (usually a good idea in statistical sense), keep a second copy of the variable.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode19_187a3ceb1325d6f531ac1b5661ad64ed">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">str</span>(c123sub3<span class="sc">$</span>fruit)</span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="co">#&gt;  Factor w/ 303 levels "0","0.1","0.2",..: 57 48 42 72 67 120 39 54 61 51 ...</span></span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="co">#c123sub3$fruit.cont &lt;- c123sub3$fruit</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>c123sub3<span class="sc">$</span>fruit2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(c123sub3<span class="sc">$</span>fruit))</span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="co"># Note: do not use as.numeric(c123sub3$fruit)</span></span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="fu">summary</span>(c123sub3<span class="sc">$</span>fruit2)</span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span></span>
<span id="cb30-8"><a href="#cb30-8"></a><span class="co">#&gt;    0.00    3.00    4.30    4.75    6.00   80.00   75347</span></span>
<span id="cb30-9"><a href="#cb30-9"></a>c123sub3<span class="sc">$</span>fruit2 <span class="ot">&lt;-</span> <span class="fu">cut</span>(c123sub3<span class="sc">$</span>fruit2,</span>
<span id="cb30-10"><a href="#cb30-10"></a>                       <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="cn">Inf</span>),</span>
<span id="cb30-11"><a href="#cb30-11"></a>                       <span class="at">right =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-12"><a href="#cb30-12"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0-3 daily serving"</span>,</span>
<span id="cb30-13"><a href="#cb30-13"></a>                                  <span class="st">"4-6 daily serving"</span>,</span>
<span id="cb30-14"><a href="#cb30-14"></a>                                  <span class="st">"6+ daily serving"</span>))</span>
<span id="cb30-15"><a href="#cb30-15"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>fruit2, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb30-16"><a href="#cb30-16"></a><span class="co">#&gt; </span></span>
<span id="cb30-17"><a href="#cb30-17"></a><span class="co">#&gt; 0-3 daily serving 4-6 daily serving  6+ daily serving              &lt;NA&gt; </span></span>
<span id="cb30-18"><a href="#cb30-18"></a><span class="co">#&gt;             83441            159380             78857             75495</span></span>
<span id="cb30-19"><a href="#cb30-19"></a>c123sub3<span class="sc">$</span>fruit <span class="ot">&lt;-</span> c123sub3<span class="sc">$</span>fruit2</span>
<span id="cb30-20"><a href="#cb30-20"></a>c123sub3<span class="sc">$</span>fruit2 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="hypertension" class="level5"><h5 class="anchored" data-anchor-id="hypertension">hypertension</h5>
<p>The following chunk of code is concerned with recoding the blood pressure column. The code also shows the distribution of the values before and after recoding.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode20_2b2b8874d69c9eb225125292209242e6">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>bp)</span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="co">#&gt; </span></span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="co">#&gt;          68071         328164              0            793             66 </span></span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="co">#&gt;             79</span></span>
<span id="cb31-7"><a href="#cb31-7"></a>c123sub3<span class="sc">$</span>bp <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>bp,</span>
<span id="cb31-8"><a href="#cb31-8"></a>                           <span class="st">"'YES'='Yes';</span></span>
<span id="cb31-9"><a href="#cb31-9"></a><span class="st">                           'NO' = 'No';</span></span>
<span id="cb31-10"><a href="#cb31-10"></a><span class="st">                           else = NA"</span>,</span>
<span id="cb31-11"><a href="#cb31-11"></a>                           <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb31-12"><a href="#cb31-12"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>bp, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb31-13"><a href="#cb31-13"></a><span class="co">#&gt; </span></span>
<span id="cb31-14"><a href="#cb31-14"></a><span class="co">#&gt;     No    Yes   &lt;NA&gt; </span></span>
<span id="cb31-15"><a href="#cb31-15"></a><span class="co">#&gt; 328164  68071    938</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="copd" class="level5"><h5 class="anchored" data-anchor-id="copd">COPD</h5>
<p>The following chunk of code is concerned with recoding the COPD column.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode21_329684efe0151cdc970ce332f37e1eea">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>copd)</span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="co">#&gt; </span></span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="co">#&gt;           4508         291191         101039            329             26 </span></span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="co">#&gt;             80</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>c123sub3<span class="sc">$</span>copd <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>copd,</span>
<span id="cb32-8"><a href="#cb32-8"></a>                             <span class="st">"'YES'='Yes';</span></span>
<span id="cb32-9"><a href="#cb32-9"></a><span class="st">                             'NO' = 'No';</span></span>
<span id="cb32-10"><a href="#cb32-10"></a><span class="st">                             else = NA"</span>,</span>
<span id="cb32-11"><a href="#cb32-11"></a>                             <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb32-12"><a href="#cb32-12"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>copd, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb32-13"><a href="#cb32-13"></a><span class="co">#&gt; </span></span>
<span id="cb32-14"><a href="#cb32-14"></a><span class="co">#&gt;     No    Yes   &lt;NA&gt; </span></span>
<span id="cb32-15"><a href="#cb32-15"></a><span class="co">#&gt; 291191   4508 101474</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="diabetes" class="level5"><h5 class="anchored" data-anchor-id="diabetes">Diabetes</h5>
<p>The following chunk of code is concerned with recoding the diabetes column.</p>
<div class="cell" data-hash="surveydata1_cache/html/recode22_25e0c31135bde488b69c8f59a63f3312">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>diab)</span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="co">#&gt; </span></span>
<span id="cb33-3"><a href="#cb33-3"></a><span class="co">#&gt;            YES             NO NOT APPLICABLE     DON'T KNOW        REFUSAL </span></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="co">#&gt;          22231         374589              0            236             38 </span></span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="co">#&gt;     NOT STATED </span></span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="co">#&gt;             79</span></span>
<span id="cb33-7"><a href="#cb33-7"></a>c123sub3<span class="sc">$</span>diab <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>diab,</span>
<span id="cb33-8"><a href="#cb33-8"></a>                             <span class="st">"'YES'='Yes';</span></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="st">                             'NO' = 'No';</span></span>
<span id="cb33-10"><a href="#cb33-10"></a><span class="st">                             else = NA"</span>,</span>
<span id="cb33-11"><a href="#cb33-11"></a>                             <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb33-12"><a href="#cb33-12"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>diab, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb33-13"><a href="#cb33-13"></a><span class="co">#&gt; </span></span>
<span id="cb33-14"><a href="#cb33-14"></a><span class="co">#&gt;     No    Yes   &lt;NA&gt; </span></span>
<span id="cb33-15"><a href="#cb33-15"></a><span class="co">#&gt; 374589  22231    353</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="north" class="level5"><h5 class="anchored" data-anchor-id="north">North</h5>
<p>This section is concerned with recoding the province column. It groups provinces into “North” and “South” based on their names.</p>
<ul>
<li>Note that the category names might not exactly match with the data dictionary:
<ul>
<li>Particularly note two versions of <code>QUEBEC</code>
</li>
<li>
<code>PEI</code> was written in short</li>
<li>None in
<ul>
<li>DON’T KNOW</li>
<li>REFUSAL</li>
<li>NOT STATED</li>
<li>NOT APPLICABLE</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="cell" data-hash="surveydata1_cache/html/recode23_601ece390fb8f49b556219ac0940469d">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>c123sub3<span class="sc">$</span>province.check <span class="ot">&lt;-</span> c123sub3<span class="sc">$</span>province</span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>province)</span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="co">#&gt; </span></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="co">#&gt;     NEWFOUNDLAND              PEI      NOVA SCOTIA    NEW BRUNSWICK </span></span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="co">#&gt;             7924             7744            15341            15025 </span></span>
<span id="cb34-6"><a href="#cb34-6"></a><span class="co">#&gt;        QU\xc9BEC          ONTARIO         MANITOBA     SASKATCHEWAN </span></span>
<span id="cb34-7"><a href="#cb34-7"></a><span class="co">#&gt;            22012           123821            23454            23361 </span></span>
<span id="cb34-8"><a href="#cb34-8"></a><span class="co">#&gt;          ALBERTA BRITISH COLUMBIA YUKON/NWT/NUNAVT   NOT APPLICABLE </span></span>
<span id="cb34-9"><a href="#cb34-9"></a><span class="co">#&gt;            40127            49767             5064                0 </span></span>
<span id="cb34-10"><a href="#cb34-10"></a><span class="co">#&gt;       DON'T KNOW          REFUSAL       NOT STATED           QUEBEC </span></span>
<span id="cb34-11"><a href="#cb34-11"></a><span class="co">#&gt;                0                0                0            56764 </span></span>
<span id="cb34-12"><a href="#cb34-12"></a><span class="co">#&gt;      NFLD &amp; LAB.  YUKON/NWT/NUNA. </span></span>
<span id="cb34-13"><a href="#cb34-13"></a><span class="co">#&gt;             4111             2658</span></span>
<span id="cb34-14"><a href="#cb34-14"></a><span class="co"># c123sub3$province &lt;- car::recode(c123sub3$province,</span></span>
<span id="cb34-15"><a href="#cb34-15"></a><span class="co">#                               "c('YUKON/NWT/NUNAVT','YUKON/NWT/NUNA.')='North';</span></span>
<span id="cb34-16"><a href="#cb34-16"></a><span class="co">#                               c('NEWFOUNDLAND', 'PEI', 'NOVA SCOTIA', 'NEW BRUNSWICK', </span></span>
<span id="cb34-17"><a href="#cb34-17"></a><span class="co"># 'QU?BEC', 'ONTARIO', 'MANITOBA', 'SASKATCHEWAN', 'ALBERTA', </span></span>
<span id="cb34-18"><a href="#cb34-18"></a><span class="co"># 'BRITISH COLUMBIA', 'QUEBEC', 'NFLD &amp; LAB.') = 'South';</span></span>
<span id="cb34-19"><a href="#cb34-19"></a><span class="co">#                               else = NA",</span></span>
<span id="cb34-20"><a href="#cb34-20"></a><span class="co">#                               as.factor = FALSE)</span></span>
<span id="cb34-21"><a href="#cb34-21"></a>c123sub3<span class="sc">$</span>province <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(c123sub3<span class="sc">$</span>province,</span>
<span id="cb34-22"><a href="#cb34-22"></a>                              <span class="st">"c('YUKON/NWT/NUNAVT','YUKON/NWT/NUNA.')='North';</span></span>
<span id="cb34-23"><a href="#cb34-23"></a><span class="st">                              else = 'South'"</span>,</span>
<span id="cb34-24"><a href="#cb34-24"></a>                              <span class="at">as.factor =</span> <span class="cn">FALSE</span>)</span>
<span id="cb34-25"><a href="#cb34-25"></a><span class="fu">table</span>(c123sub3<span class="sc">$</span>province, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb34-26"><a href="#cb34-26"></a><span class="co">#&gt; </span></span>
<span id="cb34-27"><a href="#cb34-27"></a><span class="co">#&gt;  North  South   &lt;NA&gt; </span></span>
<span id="cb34-28"><a href="#cb34-28"></a><span class="co">#&gt;   7722 389451      0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="dimension-testing" class="level5"><h5 class="anchored" data-anchor-id="dimension-testing">Dimension testing</h5>
<p>This chunk verifies the dimensions of the modified data frames and performs some other operations like setting factors.</p>
<div class="cell" data-hash="surveydata1_cache/html/dims2_206b377c0d8e0ecda8d165590750e14e">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>save.c123sub3 <span class="ot">&lt;-</span> c123sub3</span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="fu">names</span>(c123sub3)</span>
<span id="cb35-3"><a href="#cb35-3"></a><span class="co">#&gt;  [1] "CVD"            "age"            "sex"            "married"       </span></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="co">#&gt;  [5] "race"           "edu"            "income"         "bmi"           </span></span>
<span id="cb35-5"><a href="#cb35-5"></a><span class="co">#&gt;  [9] "phyact"         "doctor"         "stress"         "smoke"         </span></span>
<span id="cb35-6"><a href="#cb35-6"></a><span class="co">#&gt; [13] "drink"          "fruit"          "bp"             "copd"          </span></span>
<span id="cb35-7"><a href="#cb35-7"></a><span class="co">#&gt; [17] "diab"           "province"       "weight"         "cycle"         </span></span>
<span id="cb35-8"><a href="#cb35-8"></a><span class="co">#&gt; [21] "ID"             "OA"             "immigrate"      "province.check"</span></span>
<span id="cb35-9"><a href="#cb35-9"></a><span class="co"># c123sub3$phyact &lt;- NULL</span></span>
<span id="cb35-10"><a href="#cb35-10"></a><span class="co"># c123sub3$stress &lt;- NULL</span></span>
<span id="cb35-11"><a href="#cb35-11"></a><span class="co"># c123sub3$fruit &lt;- NULL</span></span>
<span id="cb35-12"><a href="#cb35-12"></a><span class="co"># c123sub3$copd &lt;- NULL</span></span>
<span id="cb35-13"><a href="#cb35-13"></a><span class="co"># c123sub3$province.check &lt;- NULL</span></span>
<span id="cb35-14"><a href="#cb35-14"></a><span class="fu">dim</span>(c123sub3)</span>
<span id="cb35-15"><a href="#cb35-15"></a><span class="co">#&gt; [1] 397173     24</span></span>
<span id="cb35-16"><a href="#cb35-16"></a><span class="fu">dim</span>(c123sub2)[<span class="dv">1</span>]<span class="sc">-</span><span class="fu">dim</span>(c123sub3)[<span class="dv">1</span>]</span>
<span id="cb35-17"><a href="#cb35-17"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb35-18"><a href="#cb35-18"></a>analytic <span class="ot">&lt;-</span> c123sub3</span>
<span id="cb35-19"><a href="#cb35-19"></a><span class="fu">dim</span>(analytic)</span>
<span id="cb35-20"><a href="#cb35-20"></a><span class="co">#&gt; [1] 397173     24</span></span>
<span id="cb35-21"><a href="#cb35-21"></a>analytic<span class="sc">$</span>cycle <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(analytic<span class="sc">$</span>cycle)</span>
<span id="cb35-22"><a href="#cb35-22"></a><span class="fu">names</span>(analytic)</span>
<span id="cb35-23"><a href="#cb35-23"></a><span class="co">#&gt;  [1] "CVD"            "age"            "sex"            "married"       </span></span>
<span id="cb35-24"><a href="#cb35-24"></a><span class="co">#&gt;  [5] "race"           "edu"            "income"         "bmi"           </span></span>
<span id="cb35-25"><a href="#cb35-25"></a><span class="co">#&gt;  [9] "phyact"         "doctor"         "stress"         "smoke"         </span></span>
<span id="cb35-26"><a href="#cb35-26"></a><span class="co">#&gt; [13] "drink"          "fruit"          "bp"             "copd"          </span></span>
<span id="cb35-27"><a href="#cb35-27"></a><span class="co">#&gt; [17] "diab"           "province"       "weight"         "cycle"         </span></span>
<span id="cb35-28"><a href="#cb35-28"></a><span class="co">#&gt; [21] "ID"             "OA"             "immigrate"      "province.check"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section></section><section id="saving-data" class="level3"><h3 class="anchored" data-anchor-id="saving-data">Saving data</h3>
<p>We save the data for future use:</p>
<div class="cell" data-hash="surveydata1_cache/html/save_5e109b974b97a8e392e9b40197fe09d7">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">save</span>(cc123a, analytic, <span class="at">file =</span> <span class="st">"Data/surveydata/cchs123.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="video-content-optional" class="level3"><h3 class="anchored" data-anchor-id="video-content-optional">Video content (optional)</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>For those who prefer a video walkthrough, feel free to watch the video below, which offers a description of an earlier version of the above content.</p>
</div>
</div>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
<iframe src="https://www.youtube.com/embed/OWVV1O3iYmA" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen="">
</iframe>
</div>
</section><section id="references" class="level2"><h2 class="anchored" data-anchor-id="references">References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-statistics2005canadian" class="csl-entry" role="listitem">
Canada, Statistics. 2005. <span>“Canadian Community Health Survey (CCHS), Cycle 3.1.”</span> Author Ottawa.
</div>
<div id="ref-varlist" class="csl-entry" role="listitem">
Karim, Ehsan. 2023. <span>“Case Study 2: Risk of Cardiovascular Disease Among Osteoarthritis Patients.”</span> <a href="https://ssc.ca/en/case-study/case-study-2-risk-cardiovascular-disease-among-osteoarthritis-patients">https://ssc.ca/en/case-study/case-study-2-risk-cardiovascular-disease-among-osteoarthritis-patients</a>.
</div>
<div id="ref-rahman2013relationship" class="csl-entry" role="listitem">
Rahman, M Mushfiqur, Jacek A Kopec, Jolanda Cibere, Charlie H Goldsmith, and Aslam H Anis. 2013. <span>“The Relationship Between Osteoarthritis and Cardiovascular Disease in a Population Health Survey: A Cross-Sectional Study.”</span> <em>BMJ Open</em> 3 (5): e002624.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./surveydata.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Survey data analysis</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./surveydata2.html" class="pagination-link">
        <span class="nav-page-text">CCHS: Assessing data</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>