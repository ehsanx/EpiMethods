<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>OER: Advanced Epidemiological Methods - Causal question-2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./researchquestionF.html" rel="next">
<link href="./researchquestion3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CVBPG0RQMY"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CVBPG0RQMY', { 'anonymize_ip': true});
</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<meta name="twitter:title" content="OER: Advanced Epidemiological Methods - Causal question-2">
<meta name="twitter:description" content="We are interested in exploring the relationship between diabetes (binary exposure variable defined as whether the doctor ever told the participant has diabetes) and cholesterol (binary outcome…">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar docked slimcontent">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Causal question-2</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">OER: Advanced Epidemiological Methods</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">The Project</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./wrangling.html" class="sidebar-item-text sidebar-link">Data wrangling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1a.html" class="sidebar-item-text sidebar-link">R basics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1b.html" class="sidebar-item-text sidebar-link">Data types</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling1c.html" class="sidebar-item-text sidebar-link">Automating tasks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling2.html" class="sidebar-item-text sidebar-link">Importing dataset</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling3.html" class="sidebar-item-text sidebar-link">Data manipulation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling4.html" class="sidebar-item-text sidebar-link">Import external data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling5.html" class="sidebar-item-text sidebar-link">Summary tables</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling6.html" class="sidebar-item-text sidebar-link">R Markdown</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingF.html" class="sidebar-item-text sidebar-link">R Functions (W)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingQ.html" class="sidebar-item-text sidebar-link">Quiz (W)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wranglingE.html" class="sidebar-item-text sidebar-link">Exercise (W)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./accessing.html" class="sidebar-item-text sidebar-link">Data accessing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing1.html" class="sidebar-item-text sidebar-link">Survey data sources</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing2.html" class="sidebar-item-text sidebar-link">Importing CCHS to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing3.html" class="sidebar-item-text sidebar-link">Importing NHANES to R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessing4.html" class="sidebar-item-text sidebar-link">Reproducing results</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingF.html" class="sidebar-item-text sidebar-link">R Functions (A)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingQ.html" class="sidebar-item-text sidebar-link">Quiz (A)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accessingE.html" class="sidebar-item-text sidebar-link">Exercise (A)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./researchquestion.html" class="sidebar-item-text sidebar-link">Research questions</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion1.html" class="sidebar-item-text sidebar-link">Predictive question-1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2a.html" class="sidebar-item-text sidebar-link">Predictive question-2a</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion2b.html" class="sidebar-item-text sidebar-link">Predictive question-2b</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion3.html" class="sidebar-item-text sidebar-link">Causal question-1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestion4.html" class="sidebar-item-text sidebar-link active">Causal question-2</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionF.html" class="sidebar-item-text sidebar-link">R functions (Q)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./researchquestionQ.html" class="sidebar-item-text sidebar-link">Quiz (Q)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./confounding.html" class="sidebar-item-text sidebar-link">Causal roles</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding1.html" class="sidebar-item-text sidebar-link">Confounding</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding2.html" class="sidebar-item-text sidebar-link">Mediator</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding3.html" class="sidebar-item-text sidebar-link">Collider</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding4.html" class="sidebar-item-text sidebar-link">Z-bias</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding5.html" class="sidebar-item-text sidebar-link">Collapsibility</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confounding6.html" class="sidebar-item-text sidebar-link">Change-in-estimate</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingF.html" class="sidebar-item-text sidebar-link">R functions (R)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confoundingQ.html" class="sidebar-item-text sidebar-link">Quiz (R)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./predictivefactors.html" class="sidebar-item-text sidebar-link">Prediction ideas</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors1.html" class="sidebar-item-text sidebar-link">Collinear predictors</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors2.html" class="sidebar-item-text sidebar-link">Continuous outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors3.html" class="sidebar-item-text sidebar-link">Binary outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors4.html" class="sidebar-item-text sidebar-link">Overfitting and performance</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors5.html" class="sidebar-item-text sidebar-link">Data spliting</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors6.html" class="sidebar-item-text sidebar-link">Cross-validation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactors7.html" class="sidebar-item-text sidebar-link">Bootstrap</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsF.html" class="sidebar-item-text sidebar-link">R functions (P)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictivefactorsQ.html" class="sidebar-item-text sidebar-link">Quiz (P)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./surveydata.html" class="sidebar-item-text sidebar-link">Survey data analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata1.html" class="sidebar-item-text sidebar-link">CCHS: Revisiting PICOT</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata2.html" class="sidebar-item-text sidebar-link">CCHS: Assessing data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata3.html" class="sidebar-item-text sidebar-link">CCHS: Bivariate analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata4.html" class="sidebar-item-text sidebar-link">CCHS: Regression</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata5.html" class="sidebar-item-text sidebar-link">CCHS: Performance</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata6.html" class="sidebar-item-text sidebar-link">NHANES: Blood Pressure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata7.html" class="sidebar-item-text sidebar-link">NHANES: Cholesterol</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydata8.html" class="sidebar-item-text sidebar-link">NHANES: Subsetting</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataF.html" class="sidebar-item-text sidebar-link">R functions (D)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataQ.html" class="sidebar-item-text sidebar-link">Quiz (D)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./surveydataE.html" class="sidebar-item-text sidebar-link">Exercise (D)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./missingdata.html" class="sidebar-item-text sidebar-link">Missing data analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata1.html" class="sidebar-item-text sidebar-link">Imputation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata2.html" class="sidebar-item-text sidebar-link">Imputation in NHANES</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata3.html" class="sidebar-item-text sidebar-link">Missing in outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata4.html" class="sidebar-item-text sidebar-link">Performance with NA</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata5.html" class="sidebar-item-text sidebar-link">Subpopulations</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata6.html" class="sidebar-item-text sidebar-link">MCAR tests</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdata7.html" class="sidebar-item-text sidebar-link">Effect modification</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataF.html" class="sidebar-item-text sidebar-link">R functions (M)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataQ.html" class="sidebar-item-text sidebar-link">Quiz (M)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missingdataE.html" class="sidebar-item-text sidebar-link">Exercise (M)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./propensityscore.html" class="sidebar-item-text sidebar-link">Propensity score</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore1.html" class="sidebar-item-text sidebar-link">Exact Matching (CCHS)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore2.html" class="sidebar-item-text sidebar-link">PSM in OA-CVD (CCHS)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore3.html" class="sidebar-item-text sidebar-link">PSM in OA-CVD (US)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore4.html" class="sidebar-item-text sidebar-link">PSM in BMI-diabetes</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscore5.html" class="sidebar-item-text sidebar-link">PSM with MI</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreF.html" class="sidebar-item-text sidebar-link">R functions (S)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreQ.html" class="sidebar-item-text sidebar-link">Quiz (S)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./propensityscoreE.html" class="sidebar-item-text sidebar-link">Exercise (S)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearning.html" class="sidebar-item-text sidebar-link">Machine learning</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning1.html" class="sidebar-item-text sidebar-link">Continuous outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning2.html" class="sidebar-item-text sidebar-link">Data spliting</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning3.html" class="sidebar-item-text sidebar-link">Cross-validation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning4.html" class="sidebar-item-text sidebar-link">Binary outcome</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning5.html" class="sidebar-item-text sidebar-link">Supervised learning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning6.html" class="sidebar-item-text sidebar-link">Unsupervised learning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningF.html" class="sidebar-item-text sidebar-link">R functions (L)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./machinelearningCausal.html" class="sidebar-item-text sidebar-link">ML in causal inference</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearningCausalF.html" class="sidebar-item-text sidebar-link">R functions (C)</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./reporting.html" class="sidebar-item-text sidebar-link">Writing Tools</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reporting1.html" class="sidebar-item-text sidebar-link">Collaborative Writing</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reporting2.html" class="sidebar-item-text sidebar-link">Formatting Tools</a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#working-with-a-causal-question-using-nhanes" id="toc-working-with-a-causal-question-using-nhanes" class="nav-link active" data-scroll-target="#working-with-a-causal-question-using-nhanes">Working with a causal question using NHANES</a></li>
  <li><a href="#steps-for-creating-analytic-dataset" id="toc-steps-for-creating-analytic-dataset" class="nav-link" data-scroll-target="#steps-for-creating-analytic-dataset">Steps for creating analytic dataset</a></li>
  <li><a href="#saving-data" id="toc-saving-data" class="nav-link" data-scroll-target="#saving-data">Saving data</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">Causal question-2</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i></button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><section id="working-with-a-causal-question-using-nhanes" class="level3"><h3 class="anchored" data-anchor-id="working-with-a-causal-question-using-nhanes">Working with a causal question using NHANES</h3>
<p>We are interested in exploring the relationship between diabetes (binary exposure variable defined as whether the doctor ever told the participant has diabetes) and cholesterol (binary outcome variable defined as whether total cholesterol is more than 200 mg/dL). Below is the PICOT:</p>
<table class="table">
<thead><tr class="header">
<th>PICOT element</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>P</td>
<td>US adults</td>
</tr>
<tr class="even">
<td>I</td>
<td>Diabetes</td>
</tr>
<tr class="odd">
<td>C</td>
<td>No diabetes</td>
</tr>
<tr class="even">
<td>O</td>
<td>Total cholesterol &gt; 200 mg/dL</td>
</tr>
<tr class="odd">
<td>T</td>
<td>2017–2018</td>
</tr>
</tbody>
</table>
<p>First, we will prepare the analytic dataset from NHANES 2017–2018.</p>
<p>Second, we will work with subset of data to assess the association between diabetes and cholesterol, and to get proper SE and 95% CI for the estimate. We emphasize the correct usage of the survey’s design features (correct handling of survey design elements, such as stratification, clustering, and weighting) to obtain accurate population-level estimates.</p>
<div class="cell" data-hash="researchquestion4_cache/html/setup_6afb60f8e15322228524997201ce7f0a">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load required packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">require</span>(SASxport)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">require</span>(DiagrammeR)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">require</span>(DiagrammeRsvg)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">require</span>(rsvg)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(svglite)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(png)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">require</span>(nhanesA)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">require</span>(survey)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">require</span>(Publish)</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">require</span>(jtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="steps-for-creating-analytic-dataset" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="steps-for-creating-analytic-dataset">Steps for creating analytic dataset</h3>
<p>We will combine multiple components (e.g., demographic, blood pressure) using the unique identifier to create our analytic dataset.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Within NHANES datasets in a given cycle, each sampled person has an unique identifier sequence number (variable SEQN).</p>
</div></div><div class="cell" data-hash="researchquestion4_cache/html/graph1ttt_3996bf101d2382d9d9d883555f9082f5">

</div>
<section id="download-and-subsetting-to-retain-only-the-useful-variables" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="download-and-subsetting-to-retain-only-the-useful-variables">Download and Subsetting to retain only the useful variables</h4>
<p>Search literature for the relevant variables, and then see if some of them are available in the NHANES data.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><span class="citation" data-cites="peters2014combined">Peters, Fabian, and Levy (<a href="#ref-peters2014combined" role="doc-biblioref">2014</a>)</span></p>
</div></div><p>An an example, let us assume that variables listed in the following figures are known to be useful. Then we will try to indentify, in which NHANES component we have these variables.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Refer to the earlier <a href="accessing3.html">chapter</a> to get a more detailed understanding of how we search for variables within NHANES.</p>
</div></div><div class="cell">
<div class="cell-output-display">
<p><img src="Images/accessing/overallnhanesplan.png" class="img-fluid" style="width:75.0%"></p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>NHANES Data Components:</p>
<ul>
<li>Demographic (variables like age, gender, income, etc.)</li>
<li>Blood Pressure (Diastolic and Systolic pressure)</li>
<li>Body Measures (BMI, Waist Circumference, etc.)</li>
<li>Smoking Status (Current smoker or not)</li>
<li>Cholesterol (Total cholesterol in different units)</li>
<li>Biochemistry Profile (Triglycerides, Uric acid, etc.)</li>
<li>Physical Activity (Vigorous work and recreational activities)</li>
<li>Diabetes (Whether the respondent has been told by a doctor that they have diabetes)</li>
</ul>
</div></div><p><strong>Demographic component</strong>:</p>
<div class="cell" data-hash="researchquestion4_cache/html/search4_07a87fa4a15e4a171f672e69295a8d99">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>demo <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'DEMO_J'</span>) <span class="co"># Both males and females 0 YEARS - 150 YEARS</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>demo <span class="ot">&lt;-</span> demo[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>                 <span class="st">"RIAGENDR"</span>, <span class="co"># gender</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>                 <span class="st">"RIDAGEYR"</span>, <span class="co"># Age in years at screening</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>                 <span class="st">"DMDBORN4"</span>, <span class="co"># Country of birth</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>                 <span class="st">"RIDRETH3"</span>, <span class="co"># Race/Hispanic origin w/ NH Asian</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>                 <span class="st">"DMDEDUC3"</span>, <span class="co"># Education level - Children/Youth 6-19</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>                 <span class="st">"DMDEDUC2"</span>, <span class="co"># Education level - Adults 20+</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>                 <span class="st">"DMDMARTL"</span>, <span class="co"># Marital status: 20 YEARS - 150 YEARS</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>                 <span class="st">"INDHHIN2"</span>, <span class="co"># Total household income</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>                 <span class="st">"WTMEC2YR"</span>, <span class="st">"SDMVPSU"</span>, <span class="st">"SDMVSTRA"</span>)]</span>
<span id="cb2-12"><a href="#cb2-12"></a>demo_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(demo) <span class="co"># nhanesTableVars('DEMO', 'DEMO_J', namesonly=TRUE)</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>demo1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'DEMO_J'</span>, demo_vars, <span class="at">data=</span>demo)</span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt; Translated columns: RIAGENDR DMDBORN4 RIDRETH3 DMDEDUC3 DMDEDUC2 DMDMARTL INDHHIN2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Blood pressure component</strong>:</p>
<div class="cell" data-hash="researchquestion4_cache/html/search5_e48bffdc4060bbf0cbfd5f90be5009fa">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>bpx <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'BPX_J'</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a>bpx <span class="ot">&lt;-</span> bpx[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>             <span class="st">"BPXDI1"</span>, <span class="co">#Diastolic: Blood pres (1st rdg) mm Hg</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>             <span class="st">"BPXSY1"</span> <span class="co"># Systolic: Blood pres (1st rdg) mm Hg</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>             )]</span>
<span id="cb3-6"><a href="#cb3-6"></a>bpx_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(bpx) </span>
<span id="cb3-7"><a href="#cb3-7"></a>bpx1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'BPX_J'</span>, bpx_vars, <span class="at">data=</span>bpx)</span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt; Warning in nhanesTranslate("BPX_J", bpx_vars, data = bpx): No columns were</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; translated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Body measure component</strong>:</p>
<div class="cell" data-hash="researchquestion4_cache/html/search5a_cbc711ba60769184d7bc14aa03a7184b">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>bmi <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'BMX_J'</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a>bmi <span class="ot">&lt;-</span> bmi[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>               <span class="st">"BMXWT"</span>, <span class="co"># Weight (kg) </span></span>
<span id="cb4-4"><a href="#cb4-4"></a>               <span class="st">"BMXHT"</span>, <span class="co"># Standing Height (cm)</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>               <span class="st">"BMXBMI"</span>, <span class="co"># Body Mass Index (kg/m**2): 2 YEARS - 150 YEARS</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>               <span class="co">#"BMDBMIC", # BMI Category - Children/Youth # 2 YEARS - 19 YEARS</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>               <span class="st">"BMXWAIST"</span> <span class="co"># Waist Circumference (cm): 2 YEARS - 150 YEARS</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>               )]</span>
<span id="cb4-9"><a href="#cb4-9"></a>bmi_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(bmi) </span>
<span id="cb4-10"><a href="#cb4-10"></a>bmi1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'BMX_J'</span>, bmi_vars, <span class="at">data=</span>bmi)</span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt; Warning in nhanesTranslate("BMX_J", bmi_vars, data = bmi): No columns were</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt; translated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Smoking component</strong>:</p>
<div class="cell" data-hash="researchquestion4_cache/html/search5b_afd3d4e65e8fed34cb42b2306c024067">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>smq <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'SMQ_J'</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>smq <span class="ot">&lt;-</span> smq[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>               <span class="st">"SMQ040"</span> <span class="co"># Do you now smoke cigarettes?: 18 YEARS - 150 YEARS</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>               )]</span>
<span id="cb5-5"><a href="#cb5-5"></a>smq_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(smq) </span>
<span id="cb5-6"><a href="#cb5-6"></a>smq1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'SMQ_J'</span>, smq_vars, <span class="at">data=</span>smq)</span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt; Translated columns: SMQ040</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="researchquestion4_cache/html/search5c_0eac4109a997225fd6c51930a0406926">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># alq &lt;- nhanes('ALQ_J')</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co"># alq &lt;- alq[c("SEQN", # Respondent sequence number</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#                "ALQ130" # Avg # alcoholic drinks/day - past 12 mos</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#                # 18 YEARS - 150 YEARS</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#                )]</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co"># alq_vars &lt;- names(alq) </span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co"># alq1 &lt;- nhanesTranslate('ALQ_J', alq_vars, data=alq)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Cholesterol component</strong>:</p>
<div class="cell" data-hash="researchquestion4_cache/html/search5d_8d5de952801e0cafbb84487f300a8980">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>chl <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'TCHOL_J'</span>) <span class="co"># 6 YEARS - 150 YEARS</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>chl <span class="ot">&lt;-</span> chl[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>               <span class="st">"LBXTC"</span>, <span class="co"># Total Cholesterol (mg/dL)</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>               <span class="st">"LBDTCSI"</span> <span class="co"># Total Cholesterol (mmol/L)</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>               )]</span>
<span id="cb7-6"><a href="#cb7-6"></a>chl_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(chl) </span>
<span id="cb7-7"><a href="#cb7-7"></a>chl1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'TCHOL_J'</span>, chl_vars, <span class="at">data=</span>chl)</span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">#&gt; Warning in nhanesTranslate("TCHOL_J", chl_vars, data = chl): No columns were</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">#&gt; translated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Biochemistry Profile component</strong>:</p>
<div class="cell" data-hash="researchquestion4_cache/html/search5e_03d58bc2182690cc35baf6eb0fb20f7d">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>tri <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'BIOPRO_J'</span>) <span class="co"># 12 YEARS - 150 YEARS</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>tri <span class="ot">&lt;-</span> tri[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>               <span class="st">"LBXSTR"</span>, <span class="co"># Triglycerides, refrig serum (mg/dL)</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>               <span class="st">"LBXSUA"</span>, <span class="co"># Uric acid</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>               <span class="st">"LBXSTP"</span>, <span class="co"># total Protein (g/dL)</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>               <span class="st">"LBXSTB"</span>, <span class="co"># Total Bilirubin (mg/dL)</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>               <span class="st">"LBXSPH"</span>, <span class="co"># Phosphorus (mg/dL)</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>               <span class="st">"LBXSNASI"</span>, <span class="co"># Sodium (mmol/L)</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>               <span class="st">"LBXSKSI"</span>, <span class="co"># Potassium (mmol/L)</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>               <span class="st">"LBXSGB"</span>, <span class="co"># Globulin (g/dL)</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>               <span class="st">"LBXSCA"</span> <span class="co"># Total Calcium (mg/dL)</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>               )]</span>
<span id="cb8-13"><a href="#cb8-13"></a>tri_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(tri) </span>
<span id="cb8-14"><a href="#cb8-14"></a>tri1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'BIOPRO_J'</span>, tri_vars, <span class="at">data=</span>tri)</span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co">#&gt; Warning in nhanesTranslate("BIOPRO_J", tri_vars, data = tri): No columns were</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#&gt; translated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Physical activity component</strong>:</p>
<div class="cell" data-hash="researchquestion4_cache/html/search5f_aee4c7ae739d4ec07a1b685d648c9d7c">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>paq <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'PAQ_J'</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a>paq <span class="ot">&lt;-</span> paq[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>               <span class="st">"PAQ605"</span>, <span class="co"># Vigorous work activity </span></span>
<span id="cb9-4"><a href="#cb9-4"></a>               <span class="st">"PAQ650"</span> <span class="co"># Vigorous recreational activities</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>               )]</span>
<span id="cb9-6"><a href="#cb9-6"></a>paq_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(paq) </span>
<span id="cb9-7"><a href="#cb9-7"></a>paq1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'PAQ_J'</span>, paq_vars, <span class="at">data=</span>paq)</span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">#&gt; Translated columns: PAQ605 PAQ650</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Diabetes component</strong>:</p>
<div class="cell" data-hash="researchquestion4_cache/html/search5g_cee0e4d50e69a93419de65bf235f1a66">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>diq <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'DIQ_J'</span>)</span>
<span id="cb10-2"><a href="#cb10-2"></a>diq <span class="ot">&lt;-</span> diq[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>               <span class="st">"DIQ010"</span> <span class="co"># Doctor told you have diabetes</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>               )]</span>
<span id="cb10-5"><a href="#cb10-5"></a>diq_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(diq) </span>
<span id="cb10-6"><a href="#cb10-6"></a>diq1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'DIQ_J'</span>, diq_vars, <span class="at">data=</span>diq)</span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">#&gt; Translated columns: DIQ010</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="merging-all-the-datasets" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="merging-all-the-datasets">Merging all the datasets</h4>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can use the <code>merge</code> or <code>Reduce</code> function to combine the datasets</p>
</div>
</div>
<div class="cell" data-hash="researchquestion4_cache/html/search8_d03f8898071f3e14f92a8842d2e0a4a6">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>analytic.data7 <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(<span class="cf">function</span>(x,y) <span class="fu">merge</span>(x,y,<span class="at">by=</span><span class="st">"SEQN"</span>,<span class="at">all=</span><span class="cn">TRUE</span>) ,</span>
<span id="cb11-2"><a href="#cb11-2"></a>       <span class="fu">list</span>(demo1,bpx1,bmi1,smq1,chl1,tri1,paq1,diq1))</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="fu">dim</span>(analytic.data7)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">#&gt; [1] 9254   33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>All these datasets are merged into one analytic dataset using the SEQN as the key. This can be done either all at once using the <code>Reduce</code> function or one by one (using <code>merge</code> once at a time).</p>
</div></div><div class="cell" data-hash="researchquestion4_cache/html/search8b4g_480c5e4fff436127c23cebf9cd5a7489">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Merging one by one</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="co"># analytic.data0 &lt;- merge(demo1, bpx1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co"># analytic.data1 &lt;- merge(analytic.data0, bmi1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># analytic.data2 &lt;- merge(analytic.data1, smq1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co"># analytic.data3 &lt;- merge(analytic.data2, alq1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co"># analytic.data4 &lt;- merge(analytic.data3, chl1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co"># analytic.data5 &lt;- merge(analytic.data4, tri1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co"># analytic.data6 &lt;- merge(analytic.data5, paq1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co"># analytic.data7 &lt;- merge(analytic.data6, diq1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co"># dim(analytic.data7)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="check-target-population-and-avoid-zero-cell-cross-tabulation" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="check-target-population-and-avoid-zero-cell-cross-tabulation">Check Target population and avoid zero-cell cross-tabulation</h4>

<div class="no-row-height column-margin column-container"><div class="">
<p>The dataset is then filtered to only include adults (20 years and older) and avoid zero-cell cross-tabulation.</p>
</div></div><p>See that marital status variable was restricted to 20 YEARS - 150 YEARS.</p>
<div class="cell" data-hash="researchquestion4_cache/html/see1_790967fcdbec14a83e144254c10287a2">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">str</span>(analytic.data7)</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co">#&gt; 'data.frame':    9254 obs. of  33 variables:</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">#&gt;  $ SEQN    : num  93703 93704 93705 93706 93707 ...</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">#&gt;  $ RIAGENDR: Factor w/ 2 levels "Male","Female": 2 1 2 1 1 2 2 2 1 1 ...</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co">#&gt;  $ RIDAGEYR: num  2 2 66 18 13 66 75 0 56 18 ...</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">#&gt;  $ DMDBORN4: Factor w/ 4 levels "Born in 50 US states or Washingt",..: 1 1 1 1 1 2 1 1 2 2 ...</span></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co">#&gt;  $ RIDRETH3: Factor w/ 6 levels "Mexican American",..: 5 3 4 5 6 5 4 3 5 1 ...</span></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co">#&gt;  $ DMDEDUC3: Factor w/ 17 levels "Never attended / kindergarten on",..: NA NA NA 16 7 NA NA NA NA 13 ...</span></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="co">#&gt;  $ DMDEDUC2: Factor w/ 7 levels "Less than 9th grade",..: NA NA 2 NA NA 1 4 NA 5 NA ...</span></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="co">#&gt;  $ DMDMARTL: Factor w/ 7 levels "Married","Widowed",..: NA NA 3 NA NA 1 2 NA 1 NA ...</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="co">#&gt;  $ INDHHIN2: Factor w/ 16 levels "$ 0 to $ 4,999",..: 14 14 3 NA 10 6 2 14 14 4 ...</span></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="co">#&gt;  $ WTMEC2YR: num  8540 42567 8338 8723 7065 ...</span></span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="co">#&gt;  $ SDMVPSU : num  2 1 2 2 1 2 1 1 2 2 ...</span></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="co">#&gt;  $ SDMVSTRA: num  145 143 145 134 138 138 136 134 134 147 ...</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="co">#&gt;  $ BPXDI1  : num  NA NA NA 74 38 NA 66 NA 68 68 ...</span></span>
<span id="cb13-16"><a href="#cb13-16"></a><span class="co">#&gt;  $ BPXSY1  : num  NA NA NA 112 128 NA 120 NA 108 112 ...</span></span>
<span id="cb13-17"><a href="#cb13-17"></a><span class="co">#&gt;  $ BMXWT   : num  13.7 13.9 79.5 66.3 45.4 53.5 88.8 10.2 62.1 58.9 ...</span></span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="co">#&gt;  $ BMXHT   : num  88.6 94.2 158.3 175.7 158.4 ...</span></span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="co">#&gt;  $ BMXBMI  : num  17.5 15.7 31.7 21.5 18.1 23.7 38.9 NA 21.3 19.7 ...</span></span>
<span id="cb13-20"><a href="#cb13-20"></a><span class="co">#&gt;  $ BMXWAIST: num  48.2 50 101.8 79.3 64.1 ...</span></span>
<span id="cb13-21"><a href="#cb13-21"></a><span class="co">#&gt;  $ SMQ040  : Factor w/ 3 levels "Every day","Some days",..: NA NA 3 NA NA NA 1 NA NA 2 ...</span></span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="co">#&gt;  $ LBXTC   : num  NA NA 157 148 189 209 176 NA 238 182 ...</span></span>
<span id="cb13-23"><a href="#cb13-23"></a><span class="co">#&gt;  $ LBDTCSI : num  NA NA 4.06 3.83 4.89 5.4 4.55 NA 6.15 4.71 ...</span></span>
<span id="cb13-24"><a href="#cb13-24"></a><span class="co">#&gt;  $ LBXSTR  : num  NA NA 95 92 110 72 132 NA 59 124 ...</span></span>
<span id="cb13-25"><a href="#cb13-25"></a><span class="co">#&gt;  $ LBXSUA  : num  NA NA 5.8 8 5.5 4.5 6.2 NA 4.2 5.8 ...</span></span>
<span id="cb13-26"><a href="#cb13-26"></a><span class="co">#&gt;  $ LBXSTP  : num  NA NA 7.3 7.1 8 7.1 7 NA 7.1 8.1 ...</span></span>
<span id="cb13-27"><a href="#cb13-27"></a><span class="co">#&gt;  $ LBXSTB  : num  NA NA 0.6 0.7 0.7 0.5 0.3 NA 0.3 0.8 ...</span></span>
<span id="cb13-28"><a href="#cb13-28"></a><span class="co">#&gt;  $ LBXSPH  : num  NA NA 4 4 4.3 3.3 3.5 NA 3.4 5.1 ...</span></span>
<span id="cb13-29"><a href="#cb13-29"></a><span class="co">#&gt;  $ LBXSNASI: num  NA NA 141 144 137 144 141 NA 140 141 ...</span></span>
<span id="cb13-30"><a href="#cb13-30"></a><span class="co">#&gt;  $ LBXSKSI : num  NA NA 4 4.4 3.3 4.4 4.1 NA 4.9 4.3 ...</span></span>
<span id="cb13-31"><a href="#cb13-31"></a><span class="co">#&gt;  $ LBXSGB  : num  NA NA 2.9 2.7 2.8 3.2 3.3 NA 3.1 3.3 ...</span></span>
<span id="cb13-32"><a href="#cb13-32"></a><span class="co">#&gt;  $ LBXSCA  : num  NA NA 9.2 9.6 10.1 9.5 9.9 NA 9.4 9.6 ...</span></span>
<span id="cb13-33"><a href="#cb13-33"></a><span class="co">#&gt;  $ PAQ605  : Factor w/ 3 levels "Yes","No","Don't know": NA NA 2 2 NA 2 2 NA 2 1 ...</span></span>
<span id="cb13-34"><a href="#cb13-34"></a><span class="co">#&gt;  $ PAQ650  : Factor w/ 2 levels "Yes","No": NA NA 2 2 NA 2 2 NA 1 1 ...</span></span>
<span id="cb13-35"><a href="#cb13-35"></a><span class="co">#&gt;  $ DIQ010  : Factor w/ 4 levels "Yes","No","Borderline",..: 2 2 2 2 2 3 2 NA 2 2 ...</span></span>
<span id="cb13-36"><a href="#cb13-36"></a><span class="fu">head</span>(analytic.data7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["SEQN"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RIAGENDR"],"name":[2],"type":["fct"],"align":["left"]},{"label":["RIDAGEYR"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["DMDBORN4"],"name":[4],"type":["fct"],"align":["left"]},{"label":["RIDRETH3"],"name":[5],"type":["fct"],"align":["left"]},{"label":["DMDEDUC3"],"name":[6],"type":["fct"],"align":["left"]},{"label":["DMDEDUC2"],"name":[7],"type":["fct"],"align":["left"]},{"label":["DMDMARTL"],"name":[8],"type":["fct"],"align":["left"]},{"label":["INDHHIN2"],"name":[9],"type":["fct"],"align":["left"]},{"label":["WTMEC2YR"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["SDMVPSU"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["SDMVSTRA"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["BPXDI1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["BPXSY1"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["BMXWT"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["BMXHT"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["BMXBMI"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["BMXWAIST"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["SMQ040"],"name":[19],"type":["fct"],"align":["left"]},{"label":["LBXTC"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["LBDTCSI"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["LBXSTR"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["LBXSUA"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["LBXSTP"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["LBXSTB"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["LBXSPH"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["LBXSNASI"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["LBXSKSI"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["LBXSGB"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["LBXSCA"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["PAQ605"],"name":[31],"type":["fct"],"align":["left"]},{"label":["PAQ650"],"name":[32],"type":["fct"],"align":["left"]},{"label":["DIQ010"],"name":[33],"type":["fct"],"align":["left"]}],"data":[{"1":"93703","2":"Female","3":"2","4":"Born in 50 US states or Washingt","5":"Non-Hispanic Asian","6":"NA","7":"NA","8":"NA","9":"$100,000 and Over","10":"8539.731","11":"2","12":"145","13":"NA","14":"NA","15":"13.7","16":"88.6","17":"17.5","18":"48.2","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"No","_rn_":"1"},{"1":"93704","2":"Male","3":"2","4":"Born in 50 US states or Washingt","5":"Non-Hispanic White","6":"NA","7":"NA","8":"NA","9":"$100,000 and Over","10":"42566.615","11":"1","12":"143","13":"NA","14":"NA","15":"13.9","16":"94.2","17":"15.7","18":"50.0","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"No","_rn_":"2"},{"1":"93705","2":"Female","3":"66","4":"Born in 50 US states or Washingt","5":"Non-Hispanic Black","6":"NA","7":"9-11th grade (Includes 12th grad","8":"Divorced","9":"$10,000 to $14,999","10":"8338.420","11":"2","12":"145","13":"NA","14":"NA","15":"79.5","16":"158.3","17":"31.7","18":"101.8","19":"Not at all","20":"157","21":"4.06","22":"95","23":"5.8","24":"7.3","25":"0.6","26":"4.0","27":"141","28":"4.0","29":"2.9","30":"9.2","31":"No","32":"No","33":"No","_rn_":"3"},{"1":"93706","2":"Male","3":"18","4":"Born in 50 US states or Washingt","5":"Non-Hispanic Asian","6":"More than high school","7":"NA","8":"NA","9":"NA","10":"8723.440","11":"2","12":"134","13":"74","14":"112","15":"66.3","16":"175.7","17":"21.5","18":"79.3","19":"NA","20":"148","21":"3.83","22":"92","23":"8.0","24":"7.1","25":"0.7","26":"4.0","27":"144","28":"4.4","29":"2.7","30":"9.6","31":"No","32":"No","33":"No","_rn_":"4"},{"1":"93707","2":"Male","3":"13","4":"Born in 50 US states or Washingt","5":"Other Race - Including Multi-Rac","6":"6th grade","7":"NA","8":"NA","9":"$65,000 to $74,999","10":"7064.610","11":"1","12":"138","13":"38","14":"128","15":"45.4","16":"158.4","17":"18.1","18":"64.1","19":"NA","20":"189","21":"4.89","22":"110","23":"5.5","24":"8.0","25":"0.7","26":"4.3","27":"137","28":"3.3","29":"2.8","30":"10.1","31":"NA","32":"NA","33":"No","_rn_":"5"},{"1":"93708","2":"Female","3":"66","4":"Others","5":"Non-Hispanic Asian","6":"NA","7":"Less than 9th grade","8":"Married","9":"$25,000 to $34,999","10":"14372.489","11":"2","12":"138","13":"NA","14":"NA","15":"53.5","16":"150.2","17":"23.7","18":"88.2","19":"NA","20":"209","21":"5.40","22":"72","23":"4.5","24":"7.1","25":"0.5","26":"3.3","27":"144","28":"4.4","29":"3.2","30":"9.5","31":"No","32":"No","33":"Borderline","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">summary</span>(analytic.data7<span class="sc">$</span>RIDAGEYR)</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co">#&gt;    0.00   11.00   31.00   34.33   58.00   80.00</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="researchquestion4_cache/html/subset1_89645b6b669768eebc1585c970082cfd">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">dim</span>(analytic.data7)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">#&gt; [1] 9254   33</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>analytic.data8 <span class="ot">&lt;-</span> analytic.data7</span>
<span id="cb15-4"><a href="#cb15-4"></a>analytic.data8<span class="sc">$</span>RIDAGEYR[analytic.data8<span class="sc">$</span>RIDAGEYR <span class="sc">&lt;</span> <span class="dv">20</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co">#analytic.data8 &lt;- subset(analytic.data7, RIDAGEYR &gt;= 20)</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="fu">dim</span>(analytic.data8)</span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">#&gt; [1] 9254   33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Get rid of variables where target was less than 20 years of age accordingly.</p>
<div class="cell" data-hash="researchquestion4_cache/html/subset2_817f1f96e1c1d70c31a3ecf3c2210140">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>analytic.data8<span class="sc">$</span>DMDEDUC3 <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># not relevant for adults</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co">#analytic.data8$BMDBMIC &lt;- NULL # not relevant for adults</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="get-rid-of-invalid-responses" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="get-rid-of-invalid-responses">Get rid of invalid responses</h4>

<div class="no-row-height column-margin column-container"><div class="">
<p>Variables that have “Don’t Know” or “Refused” as responses are set to NA, effectively getting rid of invalid responses.</p>
</div></div><div class="cell" data-hash="researchquestion4_cache/html/subset3_d2dabea23bbb1adf1a2b4af62a62eda2">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>factor.names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"RIAGENDR"</span>,<span class="st">"DMDBORN4"</span>,<span class="st">"RIDRETH3"</span>,</span>
<span id="cb17-2"><a href="#cb17-2"></a>                  <span class="st">"DMDEDUC2"</span>,<span class="st">"DMDMARTL"</span>,<span class="st">"INDHHIN2"</span>, </span>
<span id="cb17-3"><a href="#cb17-3"></a>                  <span class="st">"SMQ040"</span>, <span class="st">"PAQ605"</span>, <span class="st">"PAQ650"</span>, <span class="st">"DIQ010"</span>)</span>
<span id="cb17-4"><a href="#cb17-4"></a>numeric.names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"SEQN"</span>,<span class="st">"RIDAGEYR"</span>,<span class="st">"WTMEC2YR"</span>,</span>
<span id="cb17-5"><a href="#cb17-5"></a>                   <span class="st">"SDMVPSU"</span>, <span class="st">"SDMVSTRA"</span>,</span>
<span id="cb17-6"><a href="#cb17-6"></a>                   <span class="st">"BPXDI1"</span>, <span class="st">"BPXSY1"</span>, <span class="st">"BMXWT"</span>, <span class="st">"BMXHT"</span>,</span>
<span id="cb17-7"><a href="#cb17-7"></a>                   <span class="st">"BMXBMI"</span>, <span class="st">"BMXWAIST"</span>,</span>
<span id="cb17-8"><a href="#cb17-8"></a>                   <span class="st">"ALQ130"</span>, <span class="st">"LBXTC"</span>, <span class="st">"LBDTCSI"</span>, </span>
<span id="cb17-9"><a href="#cb17-9"></a>                   <span class="st">"LBXSTR"</span>, <span class="st">"LBXSUA"</span>, <span class="st">"LBXSTP"</span>, <span class="st">"LBXSTB"</span>, </span>
<span id="cb17-10"><a href="#cb17-10"></a>                   <span class="st">"LBXSPH"</span>, <span class="st">"LBXSNASI"</span>, <span class="st">"LBXSKSI"</span>,</span>
<span id="cb17-11"><a href="#cb17-11"></a>                   <span class="st">"LBXSGB"</span>,<span class="st">"LBXSCA"</span>)</span>
<span id="cb17-12"><a href="#cb17-12"></a>analytic.data8[factor.names] <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="at">X =</span> analytic.data8[factor.names], </span>
<span id="cb17-13"><a href="#cb17-13"></a>                                      <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> as.factor)</span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co"># analytic.data8[numeric.names] &lt;- apply(X = analytic.data8[numeric.names], </span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co">#                                        MARGIN = 2, FUN = </span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co">#                                          function (x) as.numeric(as.character(x)))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="researchquestion4_cache/html/subset3x_dc7348a07796bb122c318ae914f55c79">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>analytic.data9 <span class="ot">&lt;-</span> analytic.data8</span>
<span id="cb18-2"><a href="#cb18-2"></a>analytic.data9<span class="sc">$</span>DMDBORN4[analytic.data9<span class="sc">$</span>DMDBORN4 <span class="sc">==</span> <span class="st">"Don't Know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">#analytic.data9 &lt;- subset(analytic.data8, DMDBORN4 != "Don't Know")</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="fu">dim</span>(analytic.data9)</span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co">#&gt; [1] 9254   32</span></span>
<span id="cb18-6"><a href="#cb18-6"></a></span>
<span id="cb18-7"><a href="#cb18-7"></a>analytic.data10 <span class="ot">&lt;-</span> analytic.data9</span>
<span id="cb18-8"><a href="#cb18-8"></a>analytic.data10<span class="sc">$</span>DMDEDUC2[analytic.data10<span class="sc">$</span>DMDEDUC2 <span class="sc">==</span> <span class="st">"Don't Know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="co">#analytic.data10 &lt;- subset(analytic.data9, DMDEDUC2 != "Don't Know")</span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="fu">dim</span>(analytic.data10)</span>
<span id="cb18-11"><a href="#cb18-11"></a><span class="co">#&gt; [1] 9254   32</span></span>
<span id="cb18-12"><a href="#cb18-12"></a></span>
<span id="cb18-13"><a href="#cb18-13"></a>analytic.data11 <span class="ot">&lt;-</span> analytic.data10</span>
<span id="cb18-14"><a href="#cb18-14"></a>analytic.data11<span class="sc">$</span>DMDMARTL[analytic.data11<span class="sc">$</span>DMDMARTL <span class="sc">==</span> <span class="st">"Don't Know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-15"><a href="#cb18-15"></a>analytic.data11<span class="sc">$</span>DMDMARTL[analytic.data11<span class="sc">$</span>DMDMARTL <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-16"><a href="#cb18-16"></a><span class="co"># analytic.data11 &lt;- subset(analytic.data10, DMDMARTL != "Don't Know" &amp; DMDMARTL != "Refused")</span></span>
<span id="cb18-17"><a href="#cb18-17"></a><span class="fu">dim</span>(analytic.data11)</span>
<span id="cb18-18"><a href="#cb18-18"></a><span class="co">#&gt; [1] 9254   32</span></span>
<span id="cb18-19"><a href="#cb18-19"></a></span>
<span id="cb18-20"><a href="#cb18-20"></a></span>
<span id="cb18-21"><a href="#cb18-21"></a>analytic.data12 <span class="ot">&lt;-</span> analytic.data11</span>
<span id="cb18-22"><a href="#cb18-22"></a>analytic.data12<span class="sc">$</span>INDHHIN2[analytic.data12<span class="sc">$</span>INDHHIN2 <span class="sc">==</span> <span class="st">"Don't Know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-23"><a href="#cb18-23"></a>analytic.data12<span class="sc">$</span>INDHHIN2[analytic.data12<span class="sc">$</span>INDHHIN2 <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-24"><a href="#cb18-24"></a>analytic.data12<span class="sc">$</span>INDHHIN2[analytic.data12<span class="sc">$</span>INDHHIN2 <span class="sc">==</span> <span class="st">"Under $20,000"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-25"><a href="#cb18-25"></a>analytic.data12<span class="sc">$</span>INDHHIN2[analytic.data12<span class="sc">$</span>INDHHIN2 <span class="sc">==</span> <span class="st">"$20,000 and Over"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-26"><a href="#cb18-26"></a><span class="co"># analytic.data12 &lt;- subset(analytic.data11, INDHHIN2 != "Don't know" &amp; INDHHIN2 !=  "Refused" &amp; INDHHIN2 != "Under $20,000" &amp; INDHHIN2 != "$20,000 and Over" )</span></span>
<span id="cb18-27"><a href="#cb18-27"></a><span class="fu">dim</span>(analytic.data12)</span>
<span id="cb18-28"><a href="#cb18-28"></a><span class="co">#&gt; [1] 9254   32</span></span>
<span id="cb18-29"><a href="#cb18-29"></a></span>
<span id="cb18-30"><a href="#cb18-30"></a><span class="co">#analytic.data11 &lt;- subset(analytic.data10, ALQ130 != 777 &amp; ALQ130 != 999 )</span></span>
<span id="cb18-31"><a href="#cb18-31"></a><span class="co">#dim(analytic.data11) # this are listed as NA anyway</span></span>
<span id="cb18-32"><a href="#cb18-32"></a></span>
<span id="cb18-33"><a href="#cb18-33"></a>analytic.data13 <span class="ot">&lt;-</span> analytic.data12</span>
<span id="cb18-34"><a href="#cb18-34"></a>analytic.data13<span class="sc">$</span>PAQ605[analytic.data13<span class="sc">$</span>PAQ605 <span class="sc">==</span> <span class="st">"Don't know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-35"><a href="#cb18-35"></a>analytic.data13<span class="sc">$</span>PAQ605[analytic.data13<span class="sc">$</span>PAQ605 <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-36"><a href="#cb18-36"></a><span class="co"># analytic.data13 &lt;- subset(analytic.data12, PAQ605 != "Don't know" &amp; PAQ605 != "Refused")</span></span>
<span id="cb18-37"><a href="#cb18-37"></a><span class="fu">dim</span>(analytic.data13)</span>
<span id="cb18-38"><a href="#cb18-38"></a><span class="co">#&gt; [1] 9254   32</span></span>
<span id="cb18-39"><a href="#cb18-39"></a></span>
<span id="cb18-40"><a href="#cb18-40"></a>analytic.data14 <span class="ot">&lt;-</span> analytic.data13</span>
<span id="cb18-41"><a href="#cb18-41"></a>analytic.data14<span class="sc">$</span>PAQ650[analytic.data14<span class="sc">$</span>PAQ650 <span class="sc">==</span> <span class="st">"Don't know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-42"><a href="#cb18-42"></a>analytic.data14<span class="sc">$</span>PAQ650[analytic.data14<span class="sc">$</span>PAQ650 <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-43"><a href="#cb18-43"></a><span class="co"># analytic.data14 &lt;- subset(analytic.data13, PAQ650 != "Don't Know" &amp; PAQ650 != "Refused")</span></span>
<span id="cb18-44"><a href="#cb18-44"></a><span class="fu">dim</span>(analytic.data14)</span>
<span id="cb18-45"><a href="#cb18-45"></a><span class="co">#&gt; [1] 9254   32</span></span>
<span id="cb18-46"><a href="#cb18-46"></a></span>
<span id="cb18-47"><a href="#cb18-47"></a>analytic.data15 <span class="ot">&lt;-</span> analytic.data14</span>
<span id="cb18-48"><a href="#cb18-48"></a>analytic.data15<span class="sc">$</span>DIQ010[analytic.data15<span class="sc">$</span>DIQ010 <span class="sc">==</span> <span class="st">"Don't know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-49"><a href="#cb18-49"></a>analytic.data15<span class="sc">$</span>DIQ010[analytic.data15<span class="sc">$</span>DIQ010 <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb18-50"><a href="#cb18-50"></a><span class="co"># analytic.data15 &lt;- subset(analytic.data14, DIQ010 != "Don't Know" &amp; DIQ010 != "Refused")</span></span>
<span id="cb18-51"><a href="#cb18-51"></a><span class="fu">dim</span>(analytic.data15)</span>
<span id="cb18-52"><a href="#cb18-52"></a><span class="co">#&gt; [1] 9254   32</span></span>
<span id="cb18-53"><a href="#cb18-53"></a></span>
<span id="cb18-54"><a href="#cb18-54"></a></span>
<span id="cb18-55"><a href="#cb18-55"></a><span class="co"># analytic.data15$ALQ130[analytic.data15$ALQ130 &gt; 100] &lt;- NA</span></span>
<span id="cb18-56"><a href="#cb18-56"></a><span class="co"># summary(analytic.data15$ALQ130)</span></span>
<span id="cb18-57"><a href="#cb18-57"></a><span class="fu">table</span>(analytic.data15<span class="sc">$</span>SMQ040,<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb18-58"><a href="#cb18-58"></a><span class="co">#&gt; </span></span>
<span id="cb18-59"><a href="#cb18-59"></a><span class="co">#&gt;  Every day Not at all  Some days       &lt;NA&gt; </span></span>
<span id="cb18-60"><a href="#cb18-60"></a><span class="co">#&gt;        805       1338        216       6895</span></span>
<span id="cb18-61"><a href="#cb18-61"></a><span class="fu">table</span>(analytic.data15<span class="sc">$</span>PAQ605,<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb18-62"><a href="#cb18-62"></a><span class="co">#&gt; </span></span>
<span id="cb18-63"><a href="#cb18-63"></a><span class="co">#&gt;   No  Yes &lt;NA&gt; </span></span>
<span id="cb18-64"><a href="#cb18-64"></a><span class="co">#&gt; 4461 1389 3404</span></span>
<span id="cb18-65"><a href="#cb18-65"></a><span class="fu">table</span>(analytic.data15<span class="sc">$</span>PAQ650,<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb18-66"><a href="#cb18-66"></a><span class="co">#&gt; </span></span>
<span id="cb18-67"><a href="#cb18-67"></a><span class="co">#&gt;   No  Yes &lt;NA&gt; </span></span>
<span id="cb18-68"><a href="#cb18-68"></a><span class="co">#&gt; 4422 1434 3398</span></span>
<span id="cb18-69"><a href="#cb18-69"></a><span class="fu">table</span>(analytic.data15<span class="sc">$</span>PAQ650,<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb18-70"><a href="#cb18-70"></a><span class="co">#&gt; </span></span>
<span id="cb18-71"><a href="#cb18-71"></a><span class="co">#&gt;   No  Yes &lt;NA&gt; </span></span>
<span id="cb18-72"><a href="#cb18-72"></a><span class="co">#&gt; 4422 1434 3398</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="recode-values" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="recode-values">Recode values</h4>
<p>Let us recode the variables using the <code>recode</code> function:</p>
<div class="cell" data-hash="researchquestion4_cache/html/subset4_9df05dc5a8bc73bdb8b0518a0f7dafbc">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">require</span>(car)</span>
<span id="cb19-2"><a href="#cb19-2"></a>analytic.data15<span class="sc">$</span>RIDRETH3 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>RIDRETH3, </span>
<span id="cb19-3"><a href="#cb19-3"></a>                            <span class="st">"c('Mexican American','Other Hispanic')='Hispanic'; </span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="st">                            'Non-Hispanic White'='White'; </span></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="st">                            'Non-Hispanic Black'='Black';</span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="st">                            c('Non-Hispanic Asian',</span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="st">                               'Other Race - Including Multi-Rac')='Other';</span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb19-9"><a href="#cb19-9"></a>analytic.data15<span class="sc">$</span>DMDEDUC2 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>DMDEDUC2, </span>
<span id="cb19-10"><a href="#cb19-10"></a>                            <span class="st">"c('Some college or AA degree',</span></span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="st">                             'College graduate or above')='College'; </span></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="st">                            c('9-11th grade (Includes 12th grad', </span></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="st">                              'High school graduate/GED or equi')</span></span>
<span id="cb19-14"><a href="#cb19-14"></a><span class="st">                               ='High.School'; </span></span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="st">                            'Less than 9th grade'='School';</span></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb19-17"><a href="#cb19-17"></a>analytic.data15<span class="sc">$</span>DMDMARTL <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>DMDMARTL, </span>
<span id="cb19-18"><a href="#cb19-18"></a>                            <span class="st">"c('Divorced','Separated','Widowed')</span></span>
<span id="cb19-19"><a href="#cb19-19"></a><span class="st">                                ='Previously.married'; </span></span>
<span id="cb19-20"><a href="#cb19-20"></a><span class="st">                            c('Living with partner', 'Married')</span></span>
<span id="cb19-21"><a href="#cb19-21"></a><span class="st">                                ='Married'; </span></span>
<span id="cb19-22"><a href="#cb19-22"></a><span class="st">                            'Never married'='Never.married';</span></span>
<span id="cb19-23"><a href="#cb19-23"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb19-24"><a href="#cb19-24"></a>analytic.data15<span class="sc">$</span>INDHHIN2 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>INDHHIN2, </span>
<span id="cb19-25"><a href="#cb19-25"></a>                            <span class="st">"c('$ 0 to $ 4,999', '$ 5,000 to $ 9,999', </span></span>
<span id="cb19-26"><a href="#cb19-26"></a><span class="st">                                 '$10,000 to $14,999', '$15,000 to $19,999', </span></span>
<span id="cb19-27"><a href="#cb19-27"></a><span class="st">                                 '$20,000 to $24,999')='&lt;25k';</span></span>
<span id="cb19-28"><a href="#cb19-28"></a><span class="st">                            c('$25,000 to $34,999', '$35,000 to $44,999', </span></span>
<span id="cb19-29"><a href="#cb19-29"></a><span class="st">                                 '$45,000 to $54,999') = 'Between.25kto54k';</span></span>
<span id="cb19-30"><a href="#cb19-30"></a><span class="st">                            c('$55,000 to $64,999', '$65,000 to $74,999',</span></span>
<span id="cb19-31"><a href="#cb19-31"></a><span class="st">                                 '$75,000 to $99,999')='Between.55kto99k';</span></span>
<span id="cb19-32"><a href="#cb19-32"></a><span class="st">                            '$100,000 and Over'= 'Over100k';</span></span>
<span id="cb19-33"><a href="#cb19-33"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb19-34"><a href="#cb19-34"></a>analytic.data15<span class="sc">$</span>SMQ040 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>SMQ040, </span>
<span id="cb19-35"><a href="#cb19-35"></a>                            <span class="st">"'Every day'='Every.day';</span></span>
<span id="cb19-36"><a href="#cb19-36"></a><span class="st">                            'Not at all'='Not.at.all';</span></span>
<span id="cb19-37"><a href="#cb19-37"></a><span class="st">                            'Some days'='Some.days';</span></span>
<span id="cb19-38"><a href="#cb19-38"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb19-39"><a href="#cb19-39"></a>analytic.data15<span class="sc">$</span>DIQ010 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>DIQ010, </span>
<span id="cb19-40"><a href="#cb19-40"></a>                            <span class="st">"'No'='No';</span></span>
<span id="cb19-41"><a href="#cb19-41"></a><span class="st">                            c('Yes', 'Borderline')='Yes';</span></span>
<span id="cb19-42"><a href="#cb19-42"></a><span class="st">                               else=NA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Data types for various variables are set correctly; for instance, factor variables are converted to factor data types, and numeric variables to numeric data types.</p>
</div></div></section><section id="check-missingness" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="check-missingness">Check missingness</h4>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can use the <code>plot_missing</code> function to plot the profile of missing values, e.g., the percentage of missing per variable</p>
</div>
</div>
<div class="cell" data-hash="researchquestion4_cache/html/missing1_41339648a9489efdd9b8c7b1daa10269">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">require</span>(DataExplorer)</span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="fu">plot_missing</span>(analytic.data15)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="researchquestion4_files/figure-html/missing1-1.png" class="img-fluid" width="672"></p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>A subsequent <a href="missingdata.html">chapter</a> will delve into the additional factors that impact how we handle missing data.</p>
</div></div></section><section id="check-data-summaries" class="level4"><h4 class="anchored" data-anchor-id="check-data-summaries">Check data summaries</h4>
<div class="cell" data-hash="researchquestion4_cache/html/analytic0_ba5d314544317c1163939bc76c4aff4a">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">names</span>(analytic.data15)</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="co">#&gt;  [1] "SEQN"     "RIAGENDR" "RIDAGEYR" "DMDBORN4" "RIDRETH3" "DMDEDUC2"</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="co">#&gt;  [7] "DMDMARTL" "INDHHIN2" "WTMEC2YR" "SDMVPSU"  "SDMVSTRA" "BPXDI1"  </span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="co">#&gt; [13] "BPXSY1"   "BMXWT"    "BMXHT"    "BMXBMI"   "BMXWAIST" "SMQ040"  </span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="co">#&gt; [19] "LBXTC"    "LBDTCSI"  "LBXSTR"   "LBXSUA"   "LBXSTP"   "LBXSTB"  </span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="co">#&gt; [25] "LBXSPH"   "LBXSNASI" "LBXSKSI"  "LBXSGB"   "LBXSCA"   "PAQ605"  </span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="co">#&gt; [31] "PAQ650"   "DIQ010"</span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="fu">names</span>(analytic.data15) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"gender"</span>, <span class="st">"age"</span>, <span class="st">"born"</span>, <span class="st">"race"</span>, <span class="st">"education"</span>, </span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="st">"married"</span>, <span class="st">"income"</span>, <span class="st">"weight"</span>, <span class="st">"psu"</span>, <span class="st">"strata"</span>, <span class="st">"diastolicBP"</span>, </span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="st">"systolicBP"</span>, <span class="st">"bodyweight"</span>, <span class="st">"bodyheight"</span>, <span class="st">"bmi"</span>, <span class="st">"waist"</span>, <span class="st">"smoke"</span>, </span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="st">"cholesterol"</span>, <span class="st">"cholesterolM2"</span>, <span class="st">"triglycerides"</span>, </span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="st">"uric.acid"</span>, <span class="st">"protein"</span>, <span class="st">"bilirubin"</span>, <span class="st">"phosphorus"</span>, <span class="st">"sodium"</span>, </span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="st">"potassium"</span>, <span class="st">"globulin"</span>, <span class="st">"calcium"</span>, <span class="st">"physical.work"</span>, </span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="st">"physical.recreational"</span>,<span class="st">"diabetes"</span>)</span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="fu">require</span>(<span class="st">"tableone"</span>)</span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="fu">CreateTableOne</span>(<span class="at">data =</span> analytic.data15, <span class="at">includeNA =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-17"><a href="#cb21-17"></a><span class="co">#&gt;                                      </span></span>
<span id="cb21-18"><a href="#cb21-18"></a><span class="co">#&gt;                                       Overall            </span></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="co">#&gt;   n                                       9254           </span></span>
<span id="cb21-20"><a href="#cb21-20"></a><span class="co">#&gt;   ID (mean (SD))                      98329.50 (2671.54) </span></span>
<span id="cb21-21"><a href="#cb21-21"></a><span class="co">#&gt;   gender = Male (%)                       4557 (49.2)    </span></span>
<span id="cb21-22"><a href="#cb21-22"></a><span class="co">#&gt;   age (mean (SD))                        51.50 (17.81)   </span></span>
<span id="cb21-23"><a href="#cb21-23"></a><span class="co">#&gt;   born (%)                                               </span></span>
<span id="cb21-24"><a href="#cb21-24"></a><span class="co">#&gt;      Born in 50 US states or Washingt     7303 (78.9)    </span></span>
<span id="cb21-25"><a href="#cb21-25"></a><span class="co">#&gt;      Others                               1948 (21.1)    </span></span>
<span id="cb21-26"><a href="#cb21-26"></a><span class="co">#&gt;      Refused                                 2 ( 0.0)    </span></span>
<span id="cb21-27"><a href="#cb21-27"></a><span class="co">#&gt;      NA                                      1 ( 0.0)    </span></span>
<span id="cb21-28"><a href="#cb21-28"></a><span class="co">#&gt;   race (%)                                               </span></span>
<span id="cb21-29"><a href="#cb21-29"></a><span class="co">#&gt;      Black                                2115 (22.9)    </span></span>
<span id="cb21-30"><a href="#cb21-30"></a><span class="co">#&gt;      Hispanic                             2187 (23.6)    </span></span>
<span id="cb21-31"><a href="#cb21-31"></a><span class="co">#&gt;      Other                                1802 (19.5)    </span></span>
<span id="cb21-32"><a href="#cb21-32"></a><span class="co">#&gt;      White                                3150 (34.0)    </span></span>
<span id="cb21-33"><a href="#cb21-33"></a><span class="co">#&gt;   education (%)                                          </span></span>
<span id="cb21-34"><a href="#cb21-34"></a><span class="co">#&gt;      College                              3114 (33.7)    </span></span>
<span id="cb21-35"><a href="#cb21-35"></a><span class="co">#&gt;      High.School                          1963 (21.2)    </span></span>
<span id="cb21-36"><a href="#cb21-36"></a><span class="co">#&gt;      School                                479 ( 5.2)    </span></span>
<span id="cb21-37"><a href="#cb21-37"></a><span class="co">#&gt;      NA                                   3698 (40.0)    </span></span>
<span id="cb21-38"><a href="#cb21-38"></a><span class="co">#&gt;   married (%)                                            </span></span>
<span id="cb21-39"><a href="#cb21-39"></a><span class="co">#&gt;      Married                              3252 (35.1)    </span></span>
<span id="cb21-40"><a href="#cb21-40"></a><span class="co">#&gt;      Never.married                        1006 (10.9)    </span></span>
<span id="cb21-41"><a href="#cb21-41"></a><span class="co">#&gt;      Previously.married                   1305 (14.1)    </span></span>
<span id="cb21-42"><a href="#cb21-42"></a><span class="co">#&gt;      NA                                   3691 (39.9)    </span></span>
<span id="cb21-43"><a href="#cb21-43"></a><span class="co">#&gt;   income (%)                                             </span></span>
<span id="cb21-44"><a href="#cb21-44"></a><span class="co">#&gt;      &lt;25k                                 1998 (21.6)    </span></span>
<span id="cb21-45"><a href="#cb21-45"></a><span class="co">#&gt;      Between.25kto54k                     2460 (26.6)    </span></span>
<span id="cb21-46"><a href="#cb21-46"></a><span class="co">#&gt;      Between.55kto99k                     1843 (19.9)    </span></span>
<span id="cb21-47"><a href="#cb21-47"></a><span class="co">#&gt;      Over100k                             1624 (17.5)    </span></span>
<span id="cb21-48"><a href="#cb21-48"></a><span class="co">#&gt;      NA                                   1329 (14.4)    </span></span>
<span id="cb21-49"><a href="#cb21-49"></a><span class="co">#&gt;   weight (mean (SD))                  34670.71 (43344.00)</span></span>
<span id="cb21-50"><a href="#cb21-50"></a><span class="co">#&gt;   psu (mean (SD))                         1.52 (0.50)    </span></span>
<span id="cb21-51"><a href="#cb21-51"></a><span class="co">#&gt;   strata (mean (SD))                    140.97 (4.20)    </span></span>
<span id="cb21-52"><a href="#cb21-52"></a><span class="co">#&gt;   diastolicBP (mean (SD))                67.84 (16.36)   </span></span>
<span id="cb21-53"><a href="#cb21-53"></a><span class="co">#&gt;   systolicBP (mean (SD))                121.33 (19.98)   </span></span>
<span id="cb21-54"><a href="#cb21-54"></a><span class="co">#&gt;   bodyweight (mean (SD))                 65.14 (32.89)   </span></span>
<span id="cb21-55"><a href="#cb21-55"></a><span class="co">#&gt;   bodyheight (mean (SD))                156.59 (22.26)   </span></span>
<span id="cb21-56"><a href="#cb21-56"></a><span class="co">#&gt;   bmi (mean (SD))                        26.58 (8.26)    </span></span>
<span id="cb21-57"><a href="#cb21-57"></a><span class="co">#&gt;   waist (mean (SD))                      89.93 (22.81)   </span></span>
<span id="cb21-58"><a href="#cb21-58"></a><span class="co">#&gt;   smoke (%)                                              </span></span>
<span id="cb21-59"><a href="#cb21-59"></a><span class="co">#&gt;      Every.day                             805 ( 8.7)    </span></span>
<span id="cb21-60"><a href="#cb21-60"></a><span class="co">#&gt;      Not.at.all                           1338 (14.5)    </span></span>
<span id="cb21-61"><a href="#cb21-61"></a><span class="co">#&gt;      Some.days                             216 ( 2.3)    </span></span>
<span id="cb21-62"><a href="#cb21-62"></a><span class="co">#&gt;      NA                                   6895 (74.5)    </span></span>
<span id="cb21-63"><a href="#cb21-63"></a><span class="co">#&gt;   cholesterol (mean (SD))               179.89 (40.60)   </span></span>
<span id="cb21-64"><a href="#cb21-64"></a><span class="co">#&gt;   cholesterolM2 (mean (SD))               4.65 (1.05)    </span></span>
<span id="cb21-65"><a href="#cb21-65"></a><span class="co">#&gt;   triglycerides (mean (SD))             137.44 (109.13)  </span></span>
<span id="cb21-66"><a href="#cb21-66"></a><span class="co">#&gt;   uric.acid (mean (SD))                   5.40 (1.48)    </span></span>
<span id="cb21-67"><a href="#cb21-67"></a><span class="co">#&gt;   protein (mean (SD))                     7.17 (0.44)    </span></span>
<span id="cb21-68"><a href="#cb21-68"></a><span class="co">#&gt;   bilirubin (mean (SD))                   0.46 (0.28)    </span></span>
<span id="cb21-69"><a href="#cb21-69"></a><span class="co">#&gt;   phosphorus (mean (SD))                  3.66 (0.59)    </span></span>
<span id="cb21-70"><a href="#cb21-70"></a><span class="co">#&gt;   sodium (mean (SD))                    140.32 (2.75)    </span></span>
<span id="cb21-71"><a href="#cb21-71"></a><span class="co">#&gt;   potassium (mean (SD))                   4.09 (0.36)    </span></span>
<span id="cb21-72"><a href="#cb21-72"></a><span class="co">#&gt;   globulin (mean (SD))                    3.09 (0.43)    </span></span>
<span id="cb21-73"><a href="#cb21-73"></a><span class="co">#&gt;   calcium (mean (SD))                     9.32 (0.37)    </span></span>
<span id="cb21-74"><a href="#cb21-74"></a><span class="co">#&gt;   physical.work (%)                                      </span></span>
<span id="cb21-75"><a href="#cb21-75"></a><span class="co">#&gt;      No                                   4461 (48.2)    </span></span>
<span id="cb21-76"><a href="#cb21-76"></a><span class="co">#&gt;      Yes                                  1389 (15.0)    </span></span>
<span id="cb21-77"><a href="#cb21-77"></a><span class="co">#&gt;      NA                                   3404 (36.8)    </span></span>
<span id="cb21-78"><a href="#cb21-78"></a><span class="co">#&gt;   physical.recreational (%)                              </span></span>
<span id="cb21-79"><a href="#cb21-79"></a><span class="co">#&gt;      No                                   4422 (47.8)    </span></span>
<span id="cb21-80"><a href="#cb21-80"></a><span class="co">#&gt;      Yes                                  1434 (15.5)    </span></span>
<span id="cb21-81"><a href="#cb21-81"></a><span class="co">#&gt;      NA                                   3398 (36.7)    </span></span>
<span id="cb21-82"><a href="#cb21-82"></a><span class="co">#&gt;   diabetes (%)                                           </span></span>
<span id="cb21-83"><a href="#cb21-83"></a><span class="co">#&gt;      No                                   7816 (84.5)    </span></span>
<span id="cb21-84"><a href="#cb21-84"></a><span class="co">#&gt;      Yes                                  1077 (11.6)    </span></span>
<span id="cb21-85"><a href="#cb21-85"></a><span class="co">#&gt;      NA                                    361 ( 3.9)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="create-complete-case-data-for-now" class="level4"><h4 class="anchored" data-anchor-id="create-complete-case-data-for-now">Create complete case data (for now)</h4>
<div class="cell" data-hash="researchquestion4_cache/html/analytic1_f031a476e140c2a3095573137d4b7505">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>analytic.with.miss <span class="ot">&lt;-</span> analytic.data15</span>
<span id="cb22-2"><a href="#cb22-2"></a>analytic.with.miss<span class="sc">$</span>cholesterol.bin <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(analytic.with.miss<span class="sc">$</span>cholesterol <span class="sc">&lt;</span><span class="dv">200</span>, <span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb22-3"><a href="#cb22-3"></a>analytic <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">na.omit</span>(analytic.with.miss))</span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="fu">dim</span>(analytic)</span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co">#&gt; [1] 1562   33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="creating-table-1-from-the-complete-case-data" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="creating-table-1-from-the-complete-case-data">Creating Table 1 from the complete case data</h4>
<div class="cell" data-hash="researchquestion4_cache/html/analytic3_b0c292a598b6e132341a1079ee15ee45">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">require</span>(<span class="st">"tableone"</span>)</span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="fu">CreateTableOne</span>(<span class="at">data =</span> analytic, <span class="at">includeNA =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="co">#&gt;                                  </span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co">#&gt;                                   Overall            </span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="co">#&gt;   n                                   1562           </span></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="co">#&gt;   ID (mean (SD))                  98344.21 (2697.76) </span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="co">#&gt;   gender = Male (%)                    959 (61.4)    </span></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="co">#&gt;   age (mean (SD))                    53.18 (17.18)   </span></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="co">#&gt;   born = Others (%)                    299 (19.1)    </span></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="co">#&gt;   race (%)                                           </span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="co">#&gt;      Black                             324 (20.7)    </span></span>
<span id="cb23-12"><a href="#cb23-12"></a><span class="co">#&gt;      Hispanic                          284 (18.2)    </span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="co">#&gt;      Other                             228 (14.6)    </span></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="co">#&gt;      White                             726 (46.5)    </span></span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="co">#&gt;   education (%)                                      </span></span>
<span id="cb23-16"><a href="#cb23-16"></a><span class="co">#&gt;      College                           806 (51.6)    </span></span>
<span id="cb23-17"><a href="#cb23-17"></a><span class="co">#&gt;      High.School                       658 (42.1)    </span></span>
<span id="cb23-18"><a href="#cb23-18"></a><span class="co">#&gt;      School                             98 ( 6.3)    </span></span>
<span id="cb23-19"><a href="#cb23-19"></a><span class="co">#&gt;   married (%)                                        </span></span>
<span id="cb23-20"><a href="#cb23-20"></a><span class="co">#&gt;      Married                           921 (59.0)    </span></span>
<span id="cb23-21"><a href="#cb23-21"></a><span class="co">#&gt;      Never.married                     228 (14.6)    </span></span>
<span id="cb23-22"><a href="#cb23-22"></a><span class="co">#&gt;      Previously.married                413 (26.4)    </span></span>
<span id="cb23-23"><a href="#cb23-23"></a><span class="co">#&gt;   income (%)                                         </span></span>
<span id="cb23-24"><a href="#cb23-24"></a><span class="co">#&gt;      &lt;25k                              484 (31.0)    </span></span>
<span id="cb23-25"><a href="#cb23-25"></a><span class="co">#&gt;      Between.25kto54k                  520 (33.3)    </span></span>
<span id="cb23-26"><a href="#cb23-26"></a><span class="co">#&gt;      Between.55kto99k                  331 (21.2)    </span></span>
<span id="cb23-27"><a href="#cb23-27"></a><span class="co">#&gt;      Over100k                          227 (14.5)    </span></span>
<span id="cb23-28"><a href="#cb23-28"></a><span class="co">#&gt;   weight (mean (SD))              48538.53 (54106.24)</span></span>
<span id="cb23-29"><a href="#cb23-29"></a><span class="co">#&gt;   psu (mean (SD))                     1.48 (0.50)    </span></span>
<span id="cb23-30"><a href="#cb23-30"></a><span class="co">#&gt;   strata (mean (SD))                141.18 (4.07)    </span></span>
<span id="cb23-31"><a href="#cb23-31"></a><span class="co">#&gt;   diastolicBP (mean (SD))            72.06 (14.17)   </span></span>
<span id="cb23-32"><a href="#cb23-32"></a><span class="co">#&gt;   systolicBP (mean (SD))            127.06 (19.11)   </span></span>
<span id="cb23-33"><a href="#cb23-33"></a><span class="co">#&gt;   bodyweight (mean (SD))             85.66 (22.41)   </span></span>
<span id="cb23-34"><a href="#cb23-34"></a><span class="co">#&gt;   bodyheight (mean (SD))            168.96 (9.30)    </span></span>
<span id="cb23-35"><a href="#cb23-35"></a><span class="co">#&gt;   bmi (mean (SD))                    29.96 (7.33)    </span></span>
<span id="cb23-36"><a href="#cb23-36"></a><span class="co">#&gt;   waist (mean (SD))                 102.98 (17.15)   </span></span>
<span id="cb23-37"><a href="#cb23-37"></a><span class="co">#&gt;   smoke (%)                                          </span></span>
<span id="cb23-38"><a href="#cb23-38"></a><span class="co">#&gt;      Every.day                         530 (33.9)    </span></span>
<span id="cb23-39"><a href="#cb23-39"></a><span class="co">#&gt;      Not.at.all                        903 (57.8)    </span></span>
<span id="cb23-40"><a href="#cb23-40"></a><span class="co">#&gt;      Some.days                         129 ( 8.3)    </span></span>
<span id="cb23-41"><a href="#cb23-41"></a><span class="co">#&gt;   cholesterol (mean (SD))           188.77 (43.51)   </span></span>
<span id="cb23-42"><a href="#cb23-42"></a><span class="co">#&gt;   cholesterolM2 (mean (SD))           4.88 (1.13)    </span></span>
<span id="cb23-43"><a href="#cb23-43"></a><span class="co">#&gt;   triglycerides (mean (SD))         154.71 (123.00)  </span></span>
<span id="cb23-44"><a href="#cb23-44"></a><span class="co">#&gt;   uric.acid (mean (SD))               5.62 (1.53)    </span></span>
<span id="cb23-45"><a href="#cb23-45"></a><span class="co">#&gt;   protein (mean (SD))                 7.09 (0.43)    </span></span>
<span id="cb23-46"><a href="#cb23-46"></a><span class="co">#&gt;   bilirubin (mean (SD))               0.46 (0.27)    </span></span>
<span id="cb23-47"><a href="#cb23-47"></a><span class="co">#&gt;   phosphorus (mean (SD))              3.53 (0.54)    </span></span>
<span id="cb23-48"><a href="#cb23-48"></a><span class="co">#&gt;   sodium (mean (SD))                140.14 (2.83)    </span></span>
<span id="cb23-49"><a href="#cb23-49"></a><span class="co">#&gt;   potassium (mean (SD))               4.10 (0.38)    </span></span>
<span id="cb23-50"><a href="#cb23-50"></a><span class="co">#&gt;   globulin (mean (SD))                3.03 (0.44)    </span></span>
<span id="cb23-51"><a href="#cb23-51"></a><span class="co">#&gt;   calcium (mean (SD))                 9.29 (0.37)    </span></span>
<span id="cb23-52"><a href="#cb23-52"></a><span class="co">#&gt;   physical.work = Yes (%)              476 (30.5)    </span></span>
<span id="cb23-53"><a href="#cb23-53"></a><span class="co">#&gt;   physical.recreational = Yes (%)      290 (18.6)    </span></span>
<span id="cb23-54"><a href="#cb23-54"></a><span class="co">#&gt;   diabetes = Yes (%)                   330 (21.1)    </span></span>
<span id="cb23-55"><a href="#cb23-55"></a><span class="co">#&gt;   cholesterol.bin (mean (SD))         0.63 (0.48)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Additional factors come into play when dealing with complex survey datasets; these will be explored in a subsequent <a href="surveydata.html">chapter</a>.</p>
</div></div></section></section><section id="saving-data" class="level3"><h3 class="anchored" data-anchor-id="saving-data">Saving data</h3>
<div class="cell" data-hash="researchquestion4_cache/html/search8save_8daaf9311025ef8c8cee1ab3b1982c31">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># getwd()</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="fu">save</span>(analytic.with.miss, analytic, <span class="at">file=</span><span class="st">"Data/researchquestion/NHANES17.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="references" class="level3"><h3 class="anchored" data-anchor-id="references">References</h3>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-peters2014combined" class="csl-entry" role="doc-biblioentry">
Peters, Junenette L, M Patricia Fabian, and Jonathan I Levy. 2014. <span>“Combined Impact of Lead, Cadmium, Polychlorinated Biphenyls and Non-Chemical Risk Factors on Blood Pressure in NHANES.”</span> <em>Environmental Research</em> 132: 93–99.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./researchquestion3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Causal question-1</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./researchquestionF.html" class="pagination-link">
        <span class="nav-page-text">R functions (Q)</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb25" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">## Causal question-2 {.unnumbered}</span></span>
<span id="cb25-2"><a href="#cb25-2"></a></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="fu">### Working with a causal question using NHANES</span></span>
<span id="cb25-4"><a href="#cb25-4"></a></span>
<span id="cb25-5"><a href="#cb25-5"></a>We are interested in exploring the relationship between diabetes (binary exposure variable defined as whether the doctor ever told the participant has diabetes) and cholesterol (binary outcome variable defined as whether total cholesterol is more than 200 mg/dL). Below is the PICOT:</span>
<span id="cb25-6"><a href="#cb25-6"></a></span>
<span id="cb25-7"><a href="#cb25-7"></a>| PICOT element | Description                    |</span>
<span id="cb25-8"><a href="#cb25-8"></a>|---------------|--------------------------------|</span>
<span id="cb25-9"><a href="#cb25-9"></a>| P             | US adults                      |</span>
<span id="cb25-10"><a href="#cb25-10"></a>| I             | Diabetes                       |</span>
<span id="cb25-11"><a href="#cb25-11"></a>| C             | No diabetes                    |</span>
<span id="cb25-12"><a href="#cb25-12"></a>| O             | Total cholesterol <span class="sc">\&gt;</span> 200 mg/dL |</span>
<span id="cb25-13"><a href="#cb25-13"></a>| T             | 2017--2018                     |</span>
<span id="cb25-14"><a href="#cb25-14"></a></span>
<span id="cb25-15"><a href="#cb25-15"></a>First, we will prepare the analytic dataset from NHANES 2017--2018.</span>
<span id="cb25-16"><a href="#cb25-16"></a></span>
<span id="cb25-17"><a href="#cb25-17"></a>Second, we will work with subset of data to assess the association between diabetes and cholesterol, and to get proper SE and 95% CI for the estimate. We emphasize the correct usage of the survey's design features (correct handling of survey design elements, such as stratification, clustering, and weighting) to obtain accurate population-level estimates.</span>
<span id="cb25-18"><a href="#cb25-18"></a></span>
<span id="cb25-19"><a href="#cb25-19"></a><span class="in">```{r setup, warning=FALSE, message=FALSE, cache=TRUE}</span></span>
<span id="cb25-20"><a href="#cb25-20"></a><span class="co"># Load required packages</span></span>
<span id="cb25-21"><a href="#cb25-21"></a><span class="fu">require</span>(SASxport)</span>
<span id="cb25-22"><a href="#cb25-22"></a><span class="fu">require</span>(DiagrammeR)</span>
<span id="cb25-23"><a href="#cb25-23"></a><span class="fu">require</span>(DiagrammeRsvg)</span>
<span id="cb25-24"><a href="#cb25-24"></a><span class="fu">require</span>(rsvg)</span>
<span id="cb25-25"><a href="#cb25-25"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb25-26"><a href="#cb25-26"></a><span class="fu">library</span>(svglite)</span>
<span id="cb25-27"><a href="#cb25-27"></a><span class="fu">library</span>(png)</span>
<span id="cb25-28"><a href="#cb25-28"></a><span class="fu">require</span>(nhanesA)</span>
<span id="cb25-29"><a href="#cb25-29"></a><span class="fu">require</span>(survey)</span>
<span id="cb25-30"><a href="#cb25-30"></a><span class="fu">require</span>(Publish)</span>
<span id="cb25-31"><a href="#cb25-31"></a><span class="fu">require</span>(jtools)</span>
<span id="cb25-32"><a href="#cb25-32"></a><span class="in">```</span></span>
<span id="cb25-33"><a href="#cb25-33"></a></span>
<span id="cb25-34"><a href="#cb25-34"></a><span class="fu">### Steps for creating analytic dataset</span></span>
<span id="cb25-35"><a href="#cb25-35"></a></span>
<span id="cb25-36"><a href="#cb25-36"></a>We will combine multiple components (e.g., demographic, blood pressure) using the unique identifier to create our analytic dataset.</span>
<span id="cb25-37"><a href="#cb25-37"></a></span>
<span id="cb25-38"><a href="#cb25-38"></a>::: column-margin</span>
<span id="cb25-39"><a href="#cb25-39"></a>Within NHANES datasets in a given cycle, each sampled person has an unique identifier sequence number (variable SEQN).</span>
<span id="cb25-40"><a href="#cb25-40"></a>:::</span>
<span id="cb25-41"><a href="#cb25-41"></a></span>
<span id="cb25-42"><a href="#cb25-42"></a><span class="in">```{r graph1ttt, echo=FALSE, cache=TRUE}</span></span>
<span id="cb25-43"><a href="#cb25-43"></a>g2 <span class="ot">&lt;-</span> <span class="fu">grViz</span>(<span class="st">"</span></span>
<span id="cb25-44"><a href="#cb25-44"></a><span class="st">    digraph causal {</span></span>
<span id="cb25-45"><a href="#cb25-45"></a><span class="st">    </span></span>
<span id="cb25-46"><a href="#cb25-46"></a><span class="st">      # Nodes</span></span>
<span id="cb25-47"><a href="#cb25-47"></a><span class="st">    node [shape = box]</span></span>
<span id="cb25-48"><a href="#cb25-48"></a><span class="st">    # node [shape = circle]</span></span>
<span id="cb25-49"><a href="#cb25-49"></a><span class="st">    d [label = 'Demographics']</span></span>
<span id="cb25-50"><a href="#cb25-50"></a><span class="st">    b [label = 'Blood pressure']</span></span>
<span id="cb25-51"><a href="#cb25-51"></a><span class="st">    bm [label = 'Body Measures'] </span></span>
<span id="cb25-52"><a href="#cb25-52"></a><span class="st">    s [label = 'Smoking']</span></span>
<span id="cb25-53"><a href="#cb25-53"></a><span class="st">    c [label = 'Cholesterol']</span></span>
<span id="cb25-54"><a href="#cb25-54"></a><span class="st">    t [label = 'Standard Biochemistry Profile']</span></span>
<span id="cb25-55"><a href="#cb25-55"></a><span class="st">    p [label = 'Physical Activity']</span></span>
<span id="cb25-56"><a href="#cb25-56"></a><span class="st">    dd [label = 'Diabetes']</span></span>
<span id="cb25-57"><a href="#cb25-57"></a></span>
<span id="cb25-58"><a href="#cb25-58"></a><span class="st">    node [shape = egg]</span></span>
<span id="cb25-59"><a href="#cb25-59"></a><span class="st">    ad [label = 'Analytic Data']</span></span>
<span id="cb25-60"><a href="#cb25-60"></a></span>
<span id="cb25-61"><a href="#cb25-61"></a><span class="st">    node [shape = plaintext]</span></span>
<span id="cb25-62"><a href="#cb25-62"></a><span class="st">    d0 [label = 'ID']</span></span>
<span id="cb25-63"><a href="#cb25-63"></a><span class="st">    d1 [label = 'gender']</span></span>
<span id="cb25-64"><a href="#cb25-64"></a><span class="st">    d2 [label = 'age']</span></span>
<span id="cb25-65"><a href="#cb25-65"></a><span class="st">    d3 [label = 'bornCountry']</span></span>
<span id="cb25-66"><a href="#cb25-66"></a><span class="st">    d4 [label = 'race']</span></span>
<span id="cb25-67"><a href="#cb25-67"></a><span class="st">    d5 [label = 'education']</span></span>
<span id="cb25-68"><a href="#cb25-68"></a><span class="st">    d6 [label = 'marital status']</span></span>
<span id="cb25-69"><a href="#cb25-69"></a><span class="st">    d7 [label = 'weights/psu/strata']</span></span>
<span id="cb25-70"><a href="#cb25-70"></a></span>
<span id="cb25-71"><a href="#cb25-71"></a><span class="st">    b1 [label = 'diastolic']</span></span>
<span id="cb25-72"><a href="#cb25-72"></a><span class="st">    b2 [label = 'systolic']</span></span>
<span id="cb25-73"><a href="#cb25-73"></a><span class="st">    </span></span>
<span id="cb25-74"><a href="#cb25-74"></a><span class="st">    bm1 [label = 'bodyweight']</span></span>
<span id="cb25-75"><a href="#cb25-75"></a><span class="st">    bm2 [label = 'heignt']</span></span>
<span id="cb25-76"><a href="#cb25-76"></a><span class="st">    bm3 [label = 'BMI']</span></span>
<span id="cb25-77"><a href="#cb25-77"></a><span class="st">    bm4 [label = 'BMIcat']</span></span>
<span id="cb25-78"><a href="#cb25-78"></a><span class="st">    bm5 [label = 'weist']</span></span>
<span id="cb25-79"><a href="#cb25-79"></a></span>
<span id="cb25-80"><a href="#cb25-80"></a><span class="st">    s1 [label = 'smoking']</span></span>
<span id="cb25-81"><a href="#cb25-81"></a></span>
<span id="cb25-82"><a href="#cb25-82"></a><span class="st">    c1 [label = 'cholesterol']</span></span>
<span id="cb25-83"><a href="#cb25-83"></a></span>
<span id="cb25-84"><a href="#cb25-84"></a><span class="st">    t1 [label = 'triglycerides']</span></span>
<span id="cb25-85"><a href="#cb25-85"></a><span class="st">    t2 [label = 'uric acid']</span></span>
<span id="cb25-86"><a href="#cb25-86"></a><span class="st">    t3 [label = 'protein']</span></span>
<span id="cb25-87"><a href="#cb25-87"></a><span class="st">    t4 [label = 'bilirubin']</span></span>
<span id="cb25-88"><a href="#cb25-88"></a><span class="st">    t5 [label = 'phosphorus']</span></span>
<span id="cb25-89"><a href="#cb25-89"></a><span class="st">    t6 [label = 'sodium']</span></span>
<span id="cb25-90"><a href="#cb25-90"></a><span class="st">    t7 [label = 'potassium']</span></span>
<span id="cb25-91"><a href="#cb25-91"></a><span class="st">    t8 [label = 'globulin']</span></span>
<span id="cb25-92"><a href="#cb25-92"></a><span class="st">    t9 [label = 'calcium']</span></span>
<span id="cb25-93"><a href="#cb25-93"></a></span>
<span id="cb25-94"><a href="#cb25-94"></a><span class="st">    dd1 [label = 'Have diabetes']</span></span>
<span id="cb25-95"><a href="#cb25-95"></a></span>
<span id="cb25-96"><a href="#cb25-96"></a><span class="st">    p1 [label = 'Work acticity']</span></span>
<span id="cb25-97"><a href="#cb25-97"></a><span class="st">    p2 [label = 'Recreational activity']</span></span>
<span id="cb25-98"><a href="#cb25-98"></a><span class="st">      </span></span>
<span id="cb25-99"><a href="#cb25-99"></a><span class="st">      # Edges</span></span>
<span id="cb25-100"><a href="#cb25-100"></a><span class="st">      edge [color = black,</span></span>
<span id="cb25-101"><a href="#cb25-101"></a><span class="st">            arrowhead = vee]</span></span>
<span id="cb25-102"><a href="#cb25-102"></a><span class="st">      rankdir = LR</span></span>
<span id="cb25-103"><a href="#cb25-103"></a><span class="st">    d -&gt; {d1 d2 d3 d4 d5 d6 d7}</span></span>
<span id="cb25-104"><a href="#cb25-104"></a><span class="st">    b -&gt; {b1 b2}</span></span>
<span id="cb25-105"><a href="#cb25-105"></a><span class="st">    bm -&gt; {bm1 bm2 bm3 bm4 bm4 bm5}</span></span>
<span id="cb25-106"><a href="#cb25-106"></a><span class="st">    dd -&gt; dd1</span></span>
<span id="cb25-107"><a href="#cb25-107"></a><span class="st">    p -&gt; {p1 p2}</span></span>
<span id="cb25-108"><a href="#cb25-108"></a><span class="st">    s -&gt; {s1}</span></span>
<span id="cb25-109"><a href="#cb25-109"></a><span class="st">    c -&gt; {c1}</span></span>
<span id="cb25-110"><a href="#cb25-110"></a><span class="st">    t -&gt; {t1 t2 t3 t4 t5 t6 t7 t8 t9}</span></span>
<span id="cb25-111"><a href="#cb25-111"></a><span class="st">    {d b bm s c t dd p} -&gt; d0</span></span>
<span id="cb25-112"><a href="#cb25-112"></a><span class="st">    d0 -&gt; ad</span></span>
<span id="cb25-113"><a href="#cb25-113"></a></span>
<span id="cb25-114"><a href="#cb25-114"></a><span class="st">      # Graph</span></span>
<span id="cb25-115"><a href="#cb25-115"></a><span class="st">      graph [overlap = true, fontsize = 10]</span></span>
<span id="cb25-116"><a href="#cb25-116"></a><span class="st">    }"</span>)</span>
<span id="cb25-117"><a href="#cb25-117"></a>g2 <span class="sc">%&gt;%</span> export_svg <span class="sc">%&gt;%</span> charToRaw <span class="sc">%&gt;%</span> rsvg <span class="sc">%&gt;%</span> png<span class="sc">::</span><span class="fu">writePNG</span>(<span class="st">"Images/accessing/overallnhanesplan.png"</span>)</span>
<span id="cb25-118"><a href="#cb25-118"></a><span class="in">```</span></span>
<span id="cb25-119"><a href="#cb25-119"></a></span>
<span id="cb25-120"><a href="#cb25-120"></a><span class="fu">#### Download and Subsetting to retain only the useful variables</span></span>
<span id="cb25-121"><a href="#cb25-121"></a></span>
<span id="cb25-122"><a href="#cb25-122"></a>Search literature for the relevant variables, and then see if some of them are available in the NHANES data.</span>
<span id="cb25-123"><a href="#cb25-123"></a></span>
<span id="cb25-124"><a href="#cb25-124"></a>::: column-margin</span>
<span id="cb25-125"><a href="#cb25-125"></a>@peters2014combined</span>
<span id="cb25-126"><a href="#cb25-126"></a>:::</span>
<span id="cb25-127"><a href="#cb25-127"></a></span>
<span id="cb25-128"><a href="#cb25-128"></a>An an example, let us assume that variables listed in the following figures are known to be useful. Then we will try to indentify, in which NHANES component we have these variables.</span>
<span id="cb25-129"><a href="#cb25-129"></a></span>
<span id="cb25-130"><a href="#cb25-130"></a>::: column-margin</span>
<span id="cb25-131"><a href="#cb25-131"></a>Refer to the earlier <span class="co">[</span><span class="ot">chapter</span><span class="co">](accessing3.html)</span> to get a more detailed understanding of how we search for variables within NHANES.</span>
<span id="cb25-132"><a href="#cb25-132"></a>:::</span>
<span id="cb25-133"><a href="#cb25-133"></a></span>
<span id="cb25-134"><a href="#cb25-134"></a><span class="in">```{r graph1xttt, echo=FALSE, out.width = '75%'}</span></span>
<span id="cb25-135"><a href="#cb25-135"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"Images/accessing/overallnhanesplan.png"</span>)  </span>
<span id="cb25-136"><a href="#cb25-136"></a><span class="in">```</span></span>
<span id="cb25-137"><a href="#cb25-137"></a></span>
<span id="cb25-138"><a href="#cb25-138"></a>::: column-margin</span>
<span id="cb25-139"><a href="#cb25-139"></a>NHANES Data Components:</span>
<span id="cb25-140"><a href="#cb25-140"></a></span>
<span id="cb25-141"><a href="#cb25-141"></a><span class="ss">-   </span>Demographic (variables like age, gender, income, etc.)</span>
<span id="cb25-142"><a href="#cb25-142"></a><span class="ss">-   </span>Blood Pressure (Diastolic and Systolic pressure)</span>
<span id="cb25-143"><a href="#cb25-143"></a><span class="ss">-   </span>Body Measures (BMI, Waist Circumference, etc.)</span>
<span id="cb25-144"><a href="#cb25-144"></a><span class="ss">-   </span>Smoking Status (Current smoker or not)</span>
<span id="cb25-145"><a href="#cb25-145"></a><span class="ss">-   </span>Cholesterol (Total cholesterol in different units)</span>
<span id="cb25-146"><a href="#cb25-146"></a><span class="ss">-   </span>Biochemistry Profile (Triglycerides, Uric acid, etc.)</span>
<span id="cb25-147"><a href="#cb25-147"></a><span class="ss">-   </span>Physical Activity (Vigorous work and recreational activities)</span>
<span id="cb25-148"><a href="#cb25-148"></a><span class="ss">-   </span>Diabetes (Whether the respondent has been told by a doctor that they have diabetes)</span>
<span id="cb25-149"><a href="#cb25-149"></a>:::</span>
<span id="cb25-150"><a href="#cb25-150"></a></span>
<span id="cb25-151"><a href="#cb25-151"></a>**Demographic component**:</span>
<span id="cb25-152"><a href="#cb25-152"></a></span>
<span id="cb25-153"><a href="#cb25-153"></a><span class="in">```{r search4, eval=TRUE, cache=TRUE, warning=FALSE}</span></span>
<span id="cb25-154"><a href="#cb25-154"></a>demo <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'DEMO_J'</span>) <span class="co"># Both males and females 0 YEARS - 150 YEARS</span></span>
<span id="cb25-155"><a href="#cb25-155"></a>demo <span class="ot">&lt;-</span> demo[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb25-156"><a href="#cb25-156"></a>                 <span class="st">"RIAGENDR"</span>, <span class="co"># gender</span></span>
<span id="cb25-157"><a href="#cb25-157"></a>                 <span class="st">"RIDAGEYR"</span>, <span class="co"># Age in years at screening</span></span>
<span id="cb25-158"><a href="#cb25-158"></a>                 <span class="st">"DMDBORN4"</span>, <span class="co"># Country of birth</span></span>
<span id="cb25-159"><a href="#cb25-159"></a>                 <span class="st">"RIDRETH3"</span>, <span class="co"># Race/Hispanic origin w/ NH Asian</span></span>
<span id="cb25-160"><a href="#cb25-160"></a>                 <span class="st">"DMDEDUC3"</span>, <span class="co"># Education level - Children/Youth 6-19</span></span>
<span id="cb25-161"><a href="#cb25-161"></a>                 <span class="st">"DMDEDUC2"</span>, <span class="co"># Education level - Adults 20+</span></span>
<span id="cb25-162"><a href="#cb25-162"></a>                 <span class="st">"DMDMARTL"</span>, <span class="co"># Marital status: 20 YEARS - 150 YEARS</span></span>
<span id="cb25-163"><a href="#cb25-163"></a>                 <span class="st">"INDHHIN2"</span>, <span class="co"># Total household income</span></span>
<span id="cb25-164"><a href="#cb25-164"></a>                 <span class="st">"WTMEC2YR"</span>, <span class="st">"SDMVPSU"</span>, <span class="st">"SDMVSTRA"</span>)]</span>
<span id="cb25-165"><a href="#cb25-165"></a>demo_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(demo) <span class="co"># nhanesTableVars('DEMO', 'DEMO_J', namesonly=TRUE)</span></span>
<span id="cb25-166"><a href="#cb25-166"></a>demo1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'DEMO_J'</span>, demo_vars, <span class="at">data=</span>demo)</span>
<span id="cb25-167"><a href="#cb25-167"></a><span class="in">```</span></span>
<span id="cb25-168"><a href="#cb25-168"></a></span>
<span id="cb25-169"><a href="#cb25-169"></a>**Blood pressure component**:</span>
<span id="cb25-170"><a href="#cb25-170"></a></span>
<span id="cb25-171"><a href="#cb25-171"></a><span class="in">```{r search5, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-172"><a href="#cb25-172"></a>bpx <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'BPX_J'</span>)</span>
<span id="cb25-173"><a href="#cb25-173"></a>bpx <span class="ot">&lt;-</span> bpx[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb25-174"><a href="#cb25-174"></a>             <span class="st">"BPXDI1"</span>, <span class="co">#Diastolic: Blood pres (1st rdg) mm Hg</span></span>
<span id="cb25-175"><a href="#cb25-175"></a>             <span class="st">"BPXSY1"</span> <span class="co"># Systolic: Blood pres (1st rdg) mm Hg</span></span>
<span id="cb25-176"><a href="#cb25-176"></a>             )]</span>
<span id="cb25-177"><a href="#cb25-177"></a>bpx_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(bpx) </span>
<span id="cb25-178"><a href="#cb25-178"></a>bpx1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'BPX_J'</span>, bpx_vars, <span class="at">data=</span>bpx)</span>
<span id="cb25-179"><a href="#cb25-179"></a><span class="in">```</span></span>
<span id="cb25-180"><a href="#cb25-180"></a></span>
<span id="cb25-181"><a href="#cb25-181"></a>**Body measure component**:</span>
<span id="cb25-182"><a href="#cb25-182"></a></span>
<span id="cb25-183"><a href="#cb25-183"></a><span class="in">```{r search5a, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-184"><a href="#cb25-184"></a>bmi <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'BMX_J'</span>)</span>
<span id="cb25-185"><a href="#cb25-185"></a>bmi <span class="ot">&lt;-</span> bmi[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb25-186"><a href="#cb25-186"></a>               <span class="st">"BMXWT"</span>, <span class="co"># Weight (kg) </span></span>
<span id="cb25-187"><a href="#cb25-187"></a>               <span class="st">"BMXHT"</span>, <span class="co"># Standing Height (cm)</span></span>
<span id="cb25-188"><a href="#cb25-188"></a>               <span class="st">"BMXBMI"</span>, <span class="co"># Body Mass Index (kg/m**2): 2 YEARS - 150 YEARS</span></span>
<span id="cb25-189"><a href="#cb25-189"></a>               <span class="co">#"BMDBMIC", # BMI Category - Children/Youth # 2 YEARS - 19 YEARS</span></span>
<span id="cb25-190"><a href="#cb25-190"></a>               <span class="st">"BMXWAIST"</span> <span class="co"># Waist Circumference (cm): 2 YEARS - 150 YEARS</span></span>
<span id="cb25-191"><a href="#cb25-191"></a>               )]</span>
<span id="cb25-192"><a href="#cb25-192"></a>bmi_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(bmi) </span>
<span id="cb25-193"><a href="#cb25-193"></a>bmi1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'BMX_J'</span>, bmi_vars, <span class="at">data=</span>bmi)</span>
<span id="cb25-194"><a href="#cb25-194"></a><span class="in">```</span></span>
<span id="cb25-195"><a href="#cb25-195"></a></span>
<span id="cb25-196"><a href="#cb25-196"></a>**Smoking component**:</span>
<span id="cb25-197"><a href="#cb25-197"></a></span>
<span id="cb25-198"><a href="#cb25-198"></a><span class="in">```{r search5b, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-199"><a href="#cb25-199"></a>smq <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'SMQ_J'</span>)</span>
<span id="cb25-200"><a href="#cb25-200"></a>smq <span class="ot">&lt;-</span> smq[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb25-201"><a href="#cb25-201"></a>               <span class="st">"SMQ040"</span> <span class="co"># Do you now smoke cigarettes?: 18 YEARS - 150 YEARS</span></span>
<span id="cb25-202"><a href="#cb25-202"></a>               )]</span>
<span id="cb25-203"><a href="#cb25-203"></a>smq_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(smq) </span>
<span id="cb25-204"><a href="#cb25-204"></a>smq1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'SMQ_J'</span>, smq_vars, <span class="at">data=</span>smq)</span>
<span id="cb25-205"><a href="#cb25-205"></a><span class="in">```</span></span>
<span id="cb25-206"><a href="#cb25-206"></a></span>
<span id="cb25-207"><a href="#cb25-207"></a><span class="in">```{r search5c, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-208"><a href="#cb25-208"></a><span class="co"># alq &lt;- nhanes('ALQ_J')</span></span>
<span id="cb25-209"><a href="#cb25-209"></a><span class="co"># alq &lt;- alq[c("SEQN", # Respondent sequence number</span></span>
<span id="cb25-210"><a href="#cb25-210"></a><span class="co">#                "ALQ130" # Avg # alcoholic drinks/day - past 12 mos</span></span>
<span id="cb25-211"><a href="#cb25-211"></a><span class="co">#                # 18 YEARS - 150 YEARS</span></span>
<span id="cb25-212"><a href="#cb25-212"></a><span class="co">#                )]</span></span>
<span id="cb25-213"><a href="#cb25-213"></a><span class="co"># alq_vars &lt;- names(alq) </span></span>
<span id="cb25-214"><a href="#cb25-214"></a><span class="co"># alq1 &lt;- nhanesTranslate('ALQ_J', alq_vars, data=alq)</span></span>
<span id="cb25-215"><a href="#cb25-215"></a><span class="in">```</span></span>
<span id="cb25-216"><a href="#cb25-216"></a></span>
<span id="cb25-217"><a href="#cb25-217"></a>**Cholesterol component**:</span>
<span id="cb25-218"><a href="#cb25-218"></a></span>
<span id="cb25-219"><a href="#cb25-219"></a><span class="in">```{r search5d, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-220"><a href="#cb25-220"></a>chl <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'TCHOL_J'</span>) <span class="co"># 6 YEARS - 150 YEARS</span></span>
<span id="cb25-221"><a href="#cb25-221"></a>chl <span class="ot">&lt;-</span> chl[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb25-222"><a href="#cb25-222"></a>               <span class="st">"LBXTC"</span>, <span class="co"># Total Cholesterol (mg/dL)</span></span>
<span id="cb25-223"><a href="#cb25-223"></a>               <span class="st">"LBDTCSI"</span> <span class="co"># Total Cholesterol (mmol/L)</span></span>
<span id="cb25-224"><a href="#cb25-224"></a>               )]</span>
<span id="cb25-225"><a href="#cb25-225"></a>chl_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(chl) </span>
<span id="cb25-226"><a href="#cb25-226"></a>chl1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'TCHOL_J'</span>, chl_vars, <span class="at">data=</span>chl)</span>
<span id="cb25-227"><a href="#cb25-227"></a><span class="in">```</span></span>
<span id="cb25-228"><a href="#cb25-228"></a></span>
<span id="cb25-229"><a href="#cb25-229"></a>**Biochemistry Profile component**:</span>
<span id="cb25-230"><a href="#cb25-230"></a></span>
<span id="cb25-231"><a href="#cb25-231"></a><span class="in">```{r search5e, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-232"><a href="#cb25-232"></a>tri <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'BIOPRO_J'</span>) <span class="co"># 12 YEARS - 150 YEARS</span></span>
<span id="cb25-233"><a href="#cb25-233"></a>tri <span class="ot">&lt;-</span> tri[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb25-234"><a href="#cb25-234"></a>               <span class="st">"LBXSTR"</span>, <span class="co"># Triglycerides, refrig serum (mg/dL)</span></span>
<span id="cb25-235"><a href="#cb25-235"></a>               <span class="st">"LBXSUA"</span>, <span class="co"># Uric acid</span></span>
<span id="cb25-236"><a href="#cb25-236"></a>               <span class="st">"LBXSTP"</span>, <span class="co"># total Protein (g/dL)</span></span>
<span id="cb25-237"><a href="#cb25-237"></a>               <span class="st">"LBXSTB"</span>, <span class="co"># Total Bilirubin (mg/dL)</span></span>
<span id="cb25-238"><a href="#cb25-238"></a>               <span class="st">"LBXSPH"</span>, <span class="co"># Phosphorus (mg/dL)</span></span>
<span id="cb25-239"><a href="#cb25-239"></a>               <span class="st">"LBXSNASI"</span>, <span class="co"># Sodium (mmol/L)</span></span>
<span id="cb25-240"><a href="#cb25-240"></a>               <span class="st">"LBXSKSI"</span>, <span class="co"># Potassium (mmol/L)</span></span>
<span id="cb25-241"><a href="#cb25-241"></a>               <span class="st">"LBXSGB"</span>, <span class="co"># Globulin (g/dL)</span></span>
<span id="cb25-242"><a href="#cb25-242"></a>               <span class="st">"LBXSCA"</span> <span class="co"># Total Calcium (mg/dL)</span></span>
<span id="cb25-243"><a href="#cb25-243"></a>               )]</span>
<span id="cb25-244"><a href="#cb25-244"></a>tri_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(tri) </span>
<span id="cb25-245"><a href="#cb25-245"></a>tri1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'BIOPRO_J'</span>, tri_vars, <span class="at">data=</span>tri)</span>
<span id="cb25-246"><a href="#cb25-246"></a><span class="in">```</span></span>
<span id="cb25-247"><a href="#cb25-247"></a></span>
<span id="cb25-248"><a href="#cb25-248"></a>**Physical activity component**:</span>
<span id="cb25-249"><a href="#cb25-249"></a></span>
<span id="cb25-250"><a href="#cb25-250"></a><span class="in">```{r search5f, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-251"><a href="#cb25-251"></a>paq <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'PAQ_J'</span>)</span>
<span id="cb25-252"><a href="#cb25-252"></a>paq <span class="ot">&lt;-</span> paq[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb25-253"><a href="#cb25-253"></a>               <span class="st">"PAQ605"</span>, <span class="co"># Vigorous work activity </span></span>
<span id="cb25-254"><a href="#cb25-254"></a>               <span class="st">"PAQ650"</span> <span class="co"># Vigorous recreational activities</span></span>
<span id="cb25-255"><a href="#cb25-255"></a>               )]</span>
<span id="cb25-256"><a href="#cb25-256"></a>paq_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(paq) </span>
<span id="cb25-257"><a href="#cb25-257"></a>paq1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'PAQ_J'</span>, paq_vars, <span class="at">data=</span>paq)</span>
<span id="cb25-258"><a href="#cb25-258"></a><span class="in">```</span></span>
<span id="cb25-259"><a href="#cb25-259"></a></span>
<span id="cb25-260"><a href="#cb25-260"></a>**Diabetes component**:</span>
<span id="cb25-261"><a href="#cb25-261"></a></span>
<span id="cb25-262"><a href="#cb25-262"></a><span class="in">```{r search5g, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-263"><a href="#cb25-263"></a>diq <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'DIQ_J'</span>)</span>
<span id="cb25-264"><a href="#cb25-264"></a>diq <span class="ot">&lt;-</span> diq[<span class="fu">c</span>(<span class="st">"SEQN"</span>, <span class="co"># Respondent sequence number</span></span>
<span id="cb25-265"><a href="#cb25-265"></a>               <span class="st">"DIQ010"</span> <span class="co"># Doctor told you have diabetes</span></span>
<span id="cb25-266"><a href="#cb25-266"></a>               )]</span>
<span id="cb25-267"><a href="#cb25-267"></a>diq_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(diq) </span>
<span id="cb25-268"><a href="#cb25-268"></a>diq1 <span class="ot">&lt;-</span> <span class="fu">nhanesTranslate</span>(<span class="st">'DIQ_J'</span>, diq_vars, <span class="at">data=</span>diq)</span>
<span id="cb25-269"><a href="#cb25-269"></a><span class="in">```</span></span>
<span id="cb25-270"><a href="#cb25-270"></a></span>
<span id="cb25-271"><a href="#cb25-271"></a><span class="fu">#### Merging all the datasets</span></span>
<span id="cb25-272"><a href="#cb25-272"></a></span>
<span id="cb25-273"><a href="#cb25-273"></a>::: callout-tip</span>
<span id="cb25-274"><a href="#cb25-274"></a>We can use the <span class="in">`merge`</span> or <span class="in">`Reduce`</span> function to combine the datasets</span>
<span id="cb25-275"><a href="#cb25-275"></a>:::</span>
<span id="cb25-276"><a href="#cb25-276"></a></span>
<span id="cb25-277"><a href="#cb25-277"></a><span class="in">```{r search8, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-278"><a href="#cb25-278"></a>analytic.data7 <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(<span class="cf">function</span>(x,y) <span class="fu">merge</span>(x,y,<span class="at">by=</span><span class="st">"SEQN"</span>,<span class="at">all=</span><span class="cn">TRUE</span>) ,</span>
<span id="cb25-279"><a href="#cb25-279"></a>       <span class="fu">list</span>(demo1,bpx1,bmi1,smq1,chl1,tri1,paq1,diq1))</span>
<span id="cb25-280"><a href="#cb25-280"></a><span class="fu">dim</span>(analytic.data7)</span>
<span id="cb25-281"><a href="#cb25-281"></a><span class="in">```</span></span>
<span id="cb25-282"><a href="#cb25-282"></a></span>
<span id="cb25-283"><a href="#cb25-283"></a>::: column-margin</span>
<span id="cb25-284"><a href="#cb25-284"></a>All these datasets are merged into one analytic dataset using the SEQN as the key. This can be done either all at once using the <span class="in">`Reduce`</span> function or one by one (using <span class="in">`merge`</span> once at a time).</span>
<span id="cb25-285"><a href="#cb25-285"></a>:::</span>
<span id="cb25-286"><a href="#cb25-286"></a></span>
<span id="cb25-287"><a href="#cb25-287"></a><span class="in">```{r search8b4g, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-288"><a href="#cb25-288"></a><span class="co"># Merging one by one</span></span>
<span id="cb25-289"><a href="#cb25-289"></a><span class="co"># analytic.data0 &lt;- merge(demo1, bpx1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb25-290"><a href="#cb25-290"></a><span class="co"># analytic.data1 &lt;- merge(analytic.data0, bmi1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb25-291"><a href="#cb25-291"></a><span class="co"># analytic.data2 &lt;- merge(analytic.data1, smq1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb25-292"><a href="#cb25-292"></a><span class="co"># analytic.data3 &lt;- merge(analytic.data2, alq1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb25-293"><a href="#cb25-293"></a><span class="co"># analytic.data4 &lt;- merge(analytic.data3, chl1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb25-294"><a href="#cb25-294"></a><span class="co"># analytic.data5 &lt;- merge(analytic.data4, tri1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb25-295"><a href="#cb25-295"></a><span class="co"># analytic.data6 &lt;- merge(analytic.data5, paq1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb25-296"><a href="#cb25-296"></a><span class="co"># analytic.data7 &lt;- merge(analytic.data6, diq1, by = c("SEQN"), all=TRUE)</span></span>
<span id="cb25-297"><a href="#cb25-297"></a><span class="co"># dim(analytic.data7)</span></span>
<span id="cb25-298"><a href="#cb25-298"></a><span class="in">```</span></span>
<span id="cb25-299"><a href="#cb25-299"></a></span>
<span id="cb25-300"><a href="#cb25-300"></a><span class="fu">#### Check Target population and avoid zero-cell cross-tabulation</span></span>
<span id="cb25-301"><a href="#cb25-301"></a></span>
<span id="cb25-302"><a href="#cb25-302"></a>::: column-margin</span>
<span id="cb25-303"><a href="#cb25-303"></a>The dataset is then filtered to only include adults (20 years and older) and avoid zero-cell cross-tabulation.</span>
<span id="cb25-304"><a href="#cb25-304"></a>:::</span>
<span id="cb25-305"><a href="#cb25-305"></a></span>
<span id="cb25-306"><a href="#cb25-306"></a>See that marital status variable was restricted to 20 YEARS - 150 YEARS.</span>
<span id="cb25-307"><a href="#cb25-307"></a></span>
<span id="cb25-308"><a href="#cb25-308"></a><span class="in">```{r see1, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-309"><a href="#cb25-309"></a><span class="fu">str</span>(analytic.data7)</span>
<span id="cb25-310"><a href="#cb25-310"></a><span class="fu">head</span>(analytic.data7)</span>
<span id="cb25-311"><a href="#cb25-311"></a><span class="fu">summary</span>(analytic.data7<span class="sc">$</span>RIDAGEYR)</span>
<span id="cb25-312"><a href="#cb25-312"></a><span class="in">```</span></span>
<span id="cb25-313"><a href="#cb25-313"></a></span>
<span id="cb25-314"><a href="#cb25-314"></a><span class="in">```{r subset1, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-315"><a href="#cb25-315"></a><span class="fu">dim</span>(analytic.data7)</span>
<span id="cb25-316"><a href="#cb25-316"></a>analytic.data8 <span class="ot">&lt;-</span> analytic.data7</span>
<span id="cb25-317"><a href="#cb25-317"></a>analytic.data8<span class="sc">$</span>RIDAGEYR[analytic.data8<span class="sc">$</span>RIDAGEYR <span class="sc">&lt;</span> <span class="dv">20</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-318"><a href="#cb25-318"></a><span class="co">#analytic.data8 &lt;- subset(analytic.data7, RIDAGEYR &gt;= 20)</span></span>
<span id="cb25-319"><a href="#cb25-319"></a><span class="fu">dim</span>(analytic.data8)</span>
<span id="cb25-320"><a href="#cb25-320"></a><span class="in">```</span></span>
<span id="cb25-321"><a href="#cb25-321"></a></span>
<span id="cb25-322"><a href="#cb25-322"></a>Get rid of variables where target was less than 20 years of age accordingly.</span>
<span id="cb25-323"><a href="#cb25-323"></a></span>
<span id="cb25-324"><a href="#cb25-324"></a><span class="in">```{r subset2, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-325"><a href="#cb25-325"></a>analytic.data8<span class="sc">$</span>DMDEDUC3 <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># not relevant for adults</span></span>
<span id="cb25-326"><a href="#cb25-326"></a><span class="co">#analytic.data8$BMDBMIC &lt;- NULL # not relevant for adults</span></span>
<span id="cb25-327"><a href="#cb25-327"></a><span class="in">```</span></span>
<span id="cb25-328"><a href="#cb25-328"></a></span>
<span id="cb25-329"><a href="#cb25-329"></a><span class="fu">#### Get rid of invalid responses</span></span>
<span id="cb25-330"><a href="#cb25-330"></a></span>
<span id="cb25-331"><a href="#cb25-331"></a>::: column-margin</span>
<span id="cb25-332"><a href="#cb25-332"></a>Variables that have "Don't Know" or "Refused" as responses are set to NA, effectively getting rid of invalid responses.</span>
<span id="cb25-333"><a href="#cb25-333"></a>:::</span>
<span id="cb25-334"><a href="#cb25-334"></a></span>
<span id="cb25-335"><a href="#cb25-335"></a><span class="in">```{r subset3, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-336"><a href="#cb25-336"></a>factor.names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"RIAGENDR"</span>,<span class="st">"DMDBORN4"</span>,<span class="st">"RIDRETH3"</span>,</span>
<span id="cb25-337"><a href="#cb25-337"></a>                  <span class="st">"DMDEDUC2"</span>,<span class="st">"DMDMARTL"</span>,<span class="st">"INDHHIN2"</span>, </span>
<span id="cb25-338"><a href="#cb25-338"></a>                  <span class="st">"SMQ040"</span>, <span class="st">"PAQ605"</span>, <span class="st">"PAQ650"</span>, <span class="st">"DIQ010"</span>)</span>
<span id="cb25-339"><a href="#cb25-339"></a>numeric.names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"SEQN"</span>,<span class="st">"RIDAGEYR"</span>,<span class="st">"WTMEC2YR"</span>,</span>
<span id="cb25-340"><a href="#cb25-340"></a>                   <span class="st">"SDMVPSU"</span>, <span class="st">"SDMVSTRA"</span>,</span>
<span id="cb25-341"><a href="#cb25-341"></a>                   <span class="st">"BPXDI1"</span>, <span class="st">"BPXSY1"</span>, <span class="st">"BMXWT"</span>, <span class="st">"BMXHT"</span>,</span>
<span id="cb25-342"><a href="#cb25-342"></a>                   <span class="st">"BMXBMI"</span>, <span class="st">"BMXWAIST"</span>,</span>
<span id="cb25-343"><a href="#cb25-343"></a>                   <span class="st">"ALQ130"</span>, <span class="st">"LBXTC"</span>, <span class="st">"LBDTCSI"</span>, </span>
<span id="cb25-344"><a href="#cb25-344"></a>                   <span class="st">"LBXSTR"</span>, <span class="st">"LBXSUA"</span>, <span class="st">"LBXSTP"</span>, <span class="st">"LBXSTB"</span>, </span>
<span id="cb25-345"><a href="#cb25-345"></a>                   <span class="st">"LBXSPH"</span>, <span class="st">"LBXSNASI"</span>, <span class="st">"LBXSKSI"</span>,</span>
<span id="cb25-346"><a href="#cb25-346"></a>                   <span class="st">"LBXSGB"</span>,<span class="st">"LBXSCA"</span>)</span>
<span id="cb25-347"><a href="#cb25-347"></a>analytic.data8[factor.names] <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="at">X =</span> analytic.data8[factor.names], </span>
<span id="cb25-348"><a href="#cb25-348"></a>                                      <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> as.factor)</span>
<span id="cb25-349"><a href="#cb25-349"></a><span class="co"># analytic.data8[numeric.names] &lt;- apply(X = analytic.data8[numeric.names], </span></span>
<span id="cb25-350"><a href="#cb25-350"></a><span class="co">#                                        MARGIN = 2, FUN = </span></span>
<span id="cb25-351"><a href="#cb25-351"></a><span class="co">#                                          function (x) as.numeric(as.character(x)))</span></span>
<span id="cb25-352"><a href="#cb25-352"></a><span class="in">```</span></span>
<span id="cb25-353"><a href="#cb25-353"></a></span>
<span id="cb25-354"><a href="#cb25-354"></a><span class="in">```{r subset3x, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-355"><a href="#cb25-355"></a>analytic.data9 <span class="ot">&lt;-</span> analytic.data8</span>
<span id="cb25-356"><a href="#cb25-356"></a>analytic.data9<span class="sc">$</span>DMDBORN4[analytic.data9<span class="sc">$</span>DMDBORN4 <span class="sc">==</span> <span class="st">"Don't Know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-357"><a href="#cb25-357"></a><span class="co">#analytic.data9 &lt;- subset(analytic.data8, DMDBORN4 != "Don't Know")</span></span>
<span id="cb25-358"><a href="#cb25-358"></a><span class="fu">dim</span>(analytic.data9)</span>
<span id="cb25-359"><a href="#cb25-359"></a></span>
<span id="cb25-360"><a href="#cb25-360"></a>analytic.data10 <span class="ot">&lt;-</span> analytic.data9</span>
<span id="cb25-361"><a href="#cb25-361"></a>analytic.data10<span class="sc">$</span>DMDEDUC2[analytic.data10<span class="sc">$</span>DMDEDUC2 <span class="sc">==</span> <span class="st">"Don't Know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-362"><a href="#cb25-362"></a><span class="co">#analytic.data10 &lt;- subset(analytic.data9, DMDEDUC2 != "Don't Know")</span></span>
<span id="cb25-363"><a href="#cb25-363"></a><span class="fu">dim</span>(analytic.data10)</span>
<span id="cb25-364"><a href="#cb25-364"></a></span>
<span id="cb25-365"><a href="#cb25-365"></a>analytic.data11 <span class="ot">&lt;-</span> analytic.data10</span>
<span id="cb25-366"><a href="#cb25-366"></a>analytic.data11<span class="sc">$</span>DMDMARTL[analytic.data11<span class="sc">$</span>DMDMARTL <span class="sc">==</span> <span class="st">"Don't Know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-367"><a href="#cb25-367"></a>analytic.data11<span class="sc">$</span>DMDMARTL[analytic.data11<span class="sc">$</span>DMDMARTL <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-368"><a href="#cb25-368"></a><span class="co"># analytic.data11 &lt;- subset(analytic.data10, DMDMARTL != "Don't Know" &amp; DMDMARTL != "Refused")</span></span>
<span id="cb25-369"><a href="#cb25-369"></a><span class="fu">dim</span>(analytic.data11)</span>
<span id="cb25-370"><a href="#cb25-370"></a></span>
<span id="cb25-371"><a href="#cb25-371"></a></span>
<span id="cb25-372"><a href="#cb25-372"></a>analytic.data12 <span class="ot">&lt;-</span> analytic.data11</span>
<span id="cb25-373"><a href="#cb25-373"></a>analytic.data12<span class="sc">$</span>INDHHIN2[analytic.data12<span class="sc">$</span>INDHHIN2 <span class="sc">==</span> <span class="st">"Don't Know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-374"><a href="#cb25-374"></a>analytic.data12<span class="sc">$</span>INDHHIN2[analytic.data12<span class="sc">$</span>INDHHIN2 <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-375"><a href="#cb25-375"></a>analytic.data12<span class="sc">$</span>INDHHIN2[analytic.data12<span class="sc">$</span>INDHHIN2 <span class="sc">==</span> <span class="st">"Under $20,000"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-376"><a href="#cb25-376"></a>analytic.data12<span class="sc">$</span>INDHHIN2[analytic.data12<span class="sc">$</span>INDHHIN2 <span class="sc">==</span> <span class="st">"$20,000 and Over"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-377"><a href="#cb25-377"></a><span class="co"># analytic.data12 &lt;- subset(analytic.data11, INDHHIN2 != "Don't know" &amp; INDHHIN2 !=  "Refused" &amp; INDHHIN2 != "Under $20,000" &amp; INDHHIN2 != "$20,000 and Over" )</span></span>
<span id="cb25-378"><a href="#cb25-378"></a><span class="fu">dim</span>(analytic.data12)</span>
<span id="cb25-379"><a href="#cb25-379"></a></span>
<span id="cb25-380"><a href="#cb25-380"></a><span class="co">#analytic.data11 &lt;- subset(analytic.data10, ALQ130 != 777 &amp; ALQ130 != 999 )</span></span>
<span id="cb25-381"><a href="#cb25-381"></a><span class="co">#dim(analytic.data11) # this are listed as NA anyway</span></span>
<span id="cb25-382"><a href="#cb25-382"></a></span>
<span id="cb25-383"><a href="#cb25-383"></a>analytic.data13 <span class="ot">&lt;-</span> analytic.data12</span>
<span id="cb25-384"><a href="#cb25-384"></a>analytic.data13<span class="sc">$</span>PAQ605[analytic.data13<span class="sc">$</span>PAQ605 <span class="sc">==</span> <span class="st">"Don't know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-385"><a href="#cb25-385"></a>analytic.data13<span class="sc">$</span>PAQ605[analytic.data13<span class="sc">$</span>PAQ605 <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-386"><a href="#cb25-386"></a><span class="co"># analytic.data13 &lt;- subset(analytic.data12, PAQ605 != "Don't know" &amp; PAQ605 != "Refused")</span></span>
<span id="cb25-387"><a href="#cb25-387"></a><span class="fu">dim</span>(analytic.data13)</span>
<span id="cb25-388"><a href="#cb25-388"></a></span>
<span id="cb25-389"><a href="#cb25-389"></a>analytic.data14 <span class="ot">&lt;-</span> analytic.data13</span>
<span id="cb25-390"><a href="#cb25-390"></a>analytic.data14<span class="sc">$</span>PAQ650[analytic.data14<span class="sc">$</span>PAQ650 <span class="sc">==</span> <span class="st">"Don't know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-391"><a href="#cb25-391"></a>analytic.data14<span class="sc">$</span>PAQ650[analytic.data14<span class="sc">$</span>PAQ650 <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-392"><a href="#cb25-392"></a><span class="co"># analytic.data14 &lt;- subset(analytic.data13, PAQ650 != "Don't Know" &amp; PAQ650 != "Refused")</span></span>
<span id="cb25-393"><a href="#cb25-393"></a><span class="fu">dim</span>(analytic.data14)</span>
<span id="cb25-394"><a href="#cb25-394"></a></span>
<span id="cb25-395"><a href="#cb25-395"></a>analytic.data15 <span class="ot">&lt;-</span> analytic.data14</span>
<span id="cb25-396"><a href="#cb25-396"></a>analytic.data15<span class="sc">$</span>DIQ010[analytic.data15<span class="sc">$</span>DIQ010 <span class="sc">==</span> <span class="st">"Don't know"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-397"><a href="#cb25-397"></a>analytic.data15<span class="sc">$</span>DIQ010[analytic.data15<span class="sc">$</span>DIQ010 <span class="sc">==</span> <span class="st">"Refused"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-398"><a href="#cb25-398"></a><span class="co"># analytic.data15 &lt;- subset(analytic.data14, DIQ010 != "Don't Know" &amp; DIQ010 != "Refused")</span></span>
<span id="cb25-399"><a href="#cb25-399"></a><span class="fu">dim</span>(analytic.data15)</span>
<span id="cb25-400"><a href="#cb25-400"></a></span>
<span id="cb25-401"><a href="#cb25-401"></a></span>
<span id="cb25-402"><a href="#cb25-402"></a><span class="co"># analytic.data15$ALQ130[analytic.data15$ALQ130 &gt; 100] &lt;- NA</span></span>
<span id="cb25-403"><a href="#cb25-403"></a><span class="co"># summary(analytic.data15$ALQ130)</span></span>
<span id="cb25-404"><a href="#cb25-404"></a><span class="fu">table</span>(analytic.data15<span class="sc">$</span>SMQ040,<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb25-405"><a href="#cb25-405"></a><span class="fu">table</span>(analytic.data15<span class="sc">$</span>PAQ605,<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb25-406"><a href="#cb25-406"></a><span class="fu">table</span>(analytic.data15<span class="sc">$</span>PAQ650,<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb25-407"><a href="#cb25-407"></a><span class="fu">table</span>(analytic.data15<span class="sc">$</span>PAQ650,<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb25-408"><a href="#cb25-408"></a><span class="in">```</span></span>
<span id="cb25-409"><a href="#cb25-409"></a></span>
<span id="cb25-410"><a href="#cb25-410"></a><span class="fu">#### Recode values</span></span>
<span id="cb25-411"><a href="#cb25-411"></a></span>
<span id="cb25-412"><a href="#cb25-412"></a>Let us recode the variables using the <span class="in">`recode`</span> function:</span>
<span id="cb25-413"><a href="#cb25-413"></a></span>
<span id="cb25-414"><a href="#cb25-414"></a><span class="in">```{r subset4, eval=TRUE, cache=TRUE, warning=FALSE}</span></span>
<span id="cb25-415"><a href="#cb25-415"></a><span class="fu">require</span>(car)</span>
<span id="cb25-416"><a href="#cb25-416"></a>analytic.data15<span class="sc">$</span>RIDRETH3 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>RIDRETH3, </span>
<span id="cb25-417"><a href="#cb25-417"></a>                            <span class="st">"c('Mexican American','Other Hispanic')='Hispanic'; </span></span>
<span id="cb25-418"><a href="#cb25-418"></a><span class="st">                            'Non-Hispanic White'='White'; </span></span>
<span id="cb25-419"><a href="#cb25-419"></a><span class="st">                            'Non-Hispanic Black'='Black';</span></span>
<span id="cb25-420"><a href="#cb25-420"></a><span class="st">                            c('Non-Hispanic Asian',</span></span>
<span id="cb25-421"><a href="#cb25-421"></a><span class="st">                               'Other Race - Including Multi-Rac')='Other';</span></span>
<span id="cb25-422"><a href="#cb25-422"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb25-423"><a href="#cb25-423"></a>analytic.data15<span class="sc">$</span>DMDEDUC2 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>DMDEDUC2, </span>
<span id="cb25-424"><a href="#cb25-424"></a>                            <span class="st">"c('Some college or AA degree',</span></span>
<span id="cb25-425"><a href="#cb25-425"></a><span class="st">                             'College graduate or above')='College'; </span></span>
<span id="cb25-426"><a href="#cb25-426"></a><span class="st">                            c('9-11th grade (Includes 12th grad', </span></span>
<span id="cb25-427"><a href="#cb25-427"></a><span class="st">                              'High school graduate/GED or equi')</span></span>
<span id="cb25-428"><a href="#cb25-428"></a><span class="st">                               ='High.School'; </span></span>
<span id="cb25-429"><a href="#cb25-429"></a><span class="st">                            'Less than 9th grade'='School';</span></span>
<span id="cb25-430"><a href="#cb25-430"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb25-431"><a href="#cb25-431"></a>analytic.data15<span class="sc">$</span>DMDMARTL <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>DMDMARTL, </span>
<span id="cb25-432"><a href="#cb25-432"></a>                            <span class="st">"c('Divorced','Separated','Widowed')</span></span>
<span id="cb25-433"><a href="#cb25-433"></a><span class="st">                                ='Previously.married'; </span></span>
<span id="cb25-434"><a href="#cb25-434"></a><span class="st">                            c('Living with partner', 'Married')</span></span>
<span id="cb25-435"><a href="#cb25-435"></a><span class="st">                                ='Married'; </span></span>
<span id="cb25-436"><a href="#cb25-436"></a><span class="st">                            'Never married'='Never.married';</span></span>
<span id="cb25-437"><a href="#cb25-437"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb25-438"><a href="#cb25-438"></a>analytic.data15<span class="sc">$</span>INDHHIN2 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>INDHHIN2, </span>
<span id="cb25-439"><a href="#cb25-439"></a>                            <span class="st">"c('$ 0 to $ 4,999', '$ 5,000 to $ 9,999', </span></span>
<span id="cb25-440"><a href="#cb25-440"></a><span class="st">                                 '$10,000 to $14,999', '$15,000 to $19,999', </span></span>
<span id="cb25-441"><a href="#cb25-441"></a><span class="st">                                 '$20,000 to $24,999')='&lt;25k';</span></span>
<span id="cb25-442"><a href="#cb25-442"></a><span class="st">                            c('$25,000 to $34,999', '$35,000 to $44,999', </span></span>
<span id="cb25-443"><a href="#cb25-443"></a><span class="st">                                 '$45,000 to $54,999') = 'Between.25kto54k';</span></span>
<span id="cb25-444"><a href="#cb25-444"></a><span class="st">                            c('$55,000 to $64,999', '$65,000 to $74,999',</span></span>
<span id="cb25-445"><a href="#cb25-445"></a><span class="st">                                 '$75,000 to $99,999')='Between.55kto99k';</span></span>
<span id="cb25-446"><a href="#cb25-446"></a><span class="st">                            '$100,000 and Over'= 'Over100k';</span></span>
<span id="cb25-447"><a href="#cb25-447"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb25-448"><a href="#cb25-448"></a>analytic.data15<span class="sc">$</span>SMQ040 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>SMQ040, </span>
<span id="cb25-449"><a href="#cb25-449"></a>                            <span class="st">"'Every day'='Every.day';</span></span>
<span id="cb25-450"><a href="#cb25-450"></a><span class="st">                            'Not at all'='Not.at.all';</span></span>
<span id="cb25-451"><a href="#cb25-451"></a><span class="st">                            'Some days'='Some.days';</span></span>
<span id="cb25-452"><a href="#cb25-452"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb25-453"><a href="#cb25-453"></a>analytic.data15<span class="sc">$</span>DIQ010 <span class="ot">&lt;-</span> <span class="fu">recode</span>(analytic.data15<span class="sc">$</span>DIQ010, </span>
<span id="cb25-454"><a href="#cb25-454"></a>                            <span class="st">"'No'='No';</span></span>
<span id="cb25-455"><a href="#cb25-455"></a><span class="st">                            c('Yes', 'Borderline')='Yes';</span></span>
<span id="cb25-456"><a href="#cb25-456"></a><span class="st">                               else=NA"</span>)</span>
<span id="cb25-457"><a href="#cb25-457"></a><span class="in">```</span></span>
<span id="cb25-458"><a href="#cb25-458"></a></span>
<span id="cb25-459"><a href="#cb25-459"></a>::: column-margin</span>
<span id="cb25-460"><a href="#cb25-460"></a>Data types for various variables are set correctly; for instance, factor variables are converted to factor data types, and numeric variables to numeric data types.</span>
<span id="cb25-461"><a href="#cb25-461"></a>:::</span>
<span id="cb25-462"><a href="#cb25-462"></a></span>
<span id="cb25-463"><a href="#cb25-463"></a><span class="fu">#### Check missingness</span></span>
<span id="cb25-464"><a href="#cb25-464"></a></span>
<span id="cb25-465"><a href="#cb25-465"></a>::: callout-tip</span>
<span id="cb25-466"><a href="#cb25-466"></a>We can use the <span class="in">`plot_missing`</span> function to plot the profile of missing values, e.g., the percentage of missing per variable</span>
<span id="cb25-467"><a href="#cb25-467"></a>:::</span>
<span id="cb25-468"><a href="#cb25-468"></a></span>
<span id="cb25-469"><a href="#cb25-469"></a><span class="in">```{r missing1, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-470"><a href="#cb25-470"></a><span class="fu">require</span>(DataExplorer)</span>
<span id="cb25-471"><a href="#cb25-471"></a><span class="fu">plot_missing</span>(analytic.data15)</span>
<span id="cb25-472"><a href="#cb25-472"></a><span class="in">```</span></span>
<span id="cb25-473"><a href="#cb25-473"></a></span>
<span id="cb25-474"><a href="#cb25-474"></a>::: column-margin</span>
<span id="cb25-475"><a href="#cb25-475"></a>A subsequent <span class="co">[</span><span class="ot">chapter</span><span class="co">](missingdata.html)</span> will delve into the additional factors that impact how we handle missing data.</span>
<span id="cb25-476"><a href="#cb25-476"></a>:::</span>
<span id="cb25-477"><a href="#cb25-477"></a></span>
<span id="cb25-478"><a href="#cb25-478"></a><span class="fu">#### Check data summaries</span></span>
<span id="cb25-479"><a href="#cb25-479"></a></span>
<span id="cb25-480"><a href="#cb25-480"></a><span class="in">```{r analytic0, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-481"><a href="#cb25-481"></a><span class="fu">names</span>(analytic.data15)</span>
<span id="cb25-482"><a href="#cb25-482"></a><span class="fu">names</span>(analytic.data15) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"gender"</span>, <span class="st">"age"</span>, <span class="st">"born"</span>, <span class="st">"race"</span>, <span class="st">"education"</span>, </span>
<span id="cb25-483"><a href="#cb25-483"></a><span class="st">"married"</span>, <span class="st">"income"</span>, <span class="st">"weight"</span>, <span class="st">"psu"</span>, <span class="st">"strata"</span>, <span class="st">"diastolicBP"</span>, </span>
<span id="cb25-484"><a href="#cb25-484"></a><span class="st">"systolicBP"</span>, <span class="st">"bodyweight"</span>, <span class="st">"bodyheight"</span>, <span class="st">"bmi"</span>, <span class="st">"waist"</span>, <span class="st">"smoke"</span>, </span>
<span id="cb25-485"><a href="#cb25-485"></a><span class="st">"cholesterol"</span>, <span class="st">"cholesterolM2"</span>, <span class="st">"triglycerides"</span>, </span>
<span id="cb25-486"><a href="#cb25-486"></a><span class="st">"uric.acid"</span>, <span class="st">"protein"</span>, <span class="st">"bilirubin"</span>, <span class="st">"phosphorus"</span>, <span class="st">"sodium"</span>, </span>
<span id="cb25-487"><a href="#cb25-487"></a><span class="st">"potassium"</span>, <span class="st">"globulin"</span>, <span class="st">"calcium"</span>, <span class="st">"physical.work"</span>, </span>
<span id="cb25-488"><a href="#cb25-488"></a><span class="st">"physical.recreational"</span>,<span class="st">"diabetes"</span>)</span>
<span id="cb25-489"><a href="#cb25-489"></a><span class="fu">require</span>(<span class="st">"tableone"</span>)</span>
<span id="cb25-490"><a href="#cb25-490"></a><span class="fu">CreateTableOne</span>(<span class="at">data =</span> analytic.data15, <span class="at">includeNA =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-491"><a href="#cb25-491"></a><span class="in">```</span></span>
<span id="cb25-492"><a href="#cb25-492"></a></span>
<span id="cb25-493"><a href="#cb25-493"></a><span class="fu">#### Create complete case data (for now)</span></span>
<span id="cb25-494"><a href="#cb25-494"></a></span>
<span id="cb25-495"><a href="#cb25-495"></a><span class="in">```{r analytic1, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-496"><a href="#cb25-496"></a>analytic.with.miss <span class="ot">&lt;-</span> analytic.data15</span>
<span id="cb25-497"><a href="#cb25-497"></a>analytic.with.miss<span class="sc">$</span>cholesterol.bin <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(analytic.with.miss<span class="sc">$</span>cholesterol <span class="sc">&lt;</span><span class="dv">200</span>, <span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb25-498"><a href="#cb25-498"></a>analytic <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">na.omit</span>(analytic.with.miss))</span>
<span id="cb25-499"><a href="#cb25-499"></a><span class="fu">dim</span>(analytic)</span>
<span id="cb25-500"><a href="#cb25-500"></a><span class="in">```</span></span>
<span id="cb25-501"><a href="#cb25-501"></a></span>
<span id="cb25-502"><a href="#cb25-502"></a><span class="fu">#### Creating Table 1 from the complete case data</span></span>
<span id="cb25-503"><a href="#cb25-503"></a></span>
<span id="cb25-504"><a href="#cb25-504"></a><span class="in">```{r analytic3, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-505"><a href="#cb25-505"></a><span class="fu">require</span>(<span class="st">"tableone"</span>)</span>
<span id="cb25-506"><a href="#cb25-506"></a><span class="fu">CreateTableOne</span>(<span class="at">data =</span> analytic, <span class="at">includeNA =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-507"><a href="#cb25-507"></a><span class="in">```</span></span>
<span id="cb25-508"><a href="#cb25-508"></a></span>
<span id="cb25-509"><a href="#cb25-509"></a>::: column-margin</span>
<span id="cb25-510"><a href="#cb25-510"></a>Additional factors come into play when dealing with complex survey datasets; these will be explored in a subsequent <span class="co">[</span><span class="ot">chapter</span><span class="co">](surveydata.html)</span>.</span>
<span id="cb25-511"><a href="#cb25-511"></a>:::</span>
<span id="cb25-512"><a href="#cb25-512"></a></span>
<span id="cb25-513"><a href="#cb25-513"></a><span class="fu">### Saving data</span></span>
<span id="cb25-514"><a href="#cb25-514"></a></span>
<span id="cb25-515"><a href="#cb25-515"></a><span class="in">```{r search8save, eval=TRUE, cache=TRUE}</span></span>
<span id="cb25-516"><a href="#cb25-516"></a><span class="co"># getwd()</span></span>
<span id="cb25-517"><a href="#cb25-517"></a><span class="fu">save</span>(analytic.with.miss, analytic, <span class="at">file=</span><span class="st">"Data/researchquestion/NHANES17.RData"</span>)</span>
<span id="cb25-518"><a href="#cb25-518"></a><span class="in">```</span></span>
<span id="cb25-519"><a href="#cb25-519"></a></span>
<span id="cb25-520"><a href="#cb25-520"></a><span class="fu">### References</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>